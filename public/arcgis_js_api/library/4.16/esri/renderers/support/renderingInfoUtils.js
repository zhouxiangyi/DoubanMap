// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../Color ../../core/maybe ../visualVariables/support/visualVariableUtils".split(" "),function(y,f,l,x,k,u){function p(c,b){if(!c||c.symbol)return null;b=b&&b.renderer;return c&&k.isSome(b)&&b.getObservationRenderer?b.getObservationRenderer(c):b}function v(c,b){if(k.isSome(c.symbol))return c.symbol;var a=p(c,b);return k.isSome(a)?a.getSymbol(c,b):null}function w(c,b){return l.__awaiter(this,void 0,void 0,function(){var a;return l.__generator(this,function(e){if(k.isSome(c.symbol))return[2,
c.symbol];a=p(c,b);return[2,k.isSome(a)&&a.getSymbolAsync(c,l.__assign(l.__assign({},b),{abortOptions:{signal:b.signal}}))]})})}Object.defineProperty(f,"__esModule",{value:!0});f.getRenderer=p;f.getSymbol=v;f.getRenderingInfo=function(c,b){var a=p(c,b),e=v(c,b);if(!e)return null;e={renderer:a,symbol:e};if(k.isNone(a)||!("visualVariables"in a)||!a.visualVariables)return e;var d=["proportional","proportional","proportional"],f=0;for(c=u.getVisualVariableValues(a,c,b);f<c.length;f++)switch(a=c[f],b=
a.variable,a=a.value,b.type){case "color":e.color=a.toRgba();break;case "size":if("outline"===b.target)e.outlineSize=a;else switch(a=b.useSymbolValue?"symbol-value":a,b.axis){case "width":d[0]=a;break;case "depth":d[1]=a;break;case "height":d[2]=a;break;case "width-and-depth":d[0]=d[1]=a;break;default:d[0]=d[1]=d[2]=a}break;case "opacity":e.opacity=a;break;case "rotation":switch(b.axis){case "tilt":e.tilt=a;break;case "roll":e.roll=a;break;default:e.heading=a}}if("proportional"!==d[0]||"proportional"!==
d[1]||"proportional"!==d[2])e.size=d;return e};f.getSymbolAsync=w;f.getRenderingInfoAsync=function(c,b){return l.__awaiter(this,void 0,void 0,function(){var a,e,d,f,g,k,r,t,h,m,q,n;return l.__generator(this,function(l){switch(l.label){case 0:return a=p(c,b),[4,w(c,b)];case 1:e=l.sent();if(!e)return[2,null];d={renderer:a,symbol:e};if(!(a&&"visualVariables"in a&&a.visualVariables))return[2,d];f=u.getVisualVariableValues(a,c,b);g=["proportional","proportional","proportional"];k=0;for(r=f;k<r.length;k++)t=
r[k],h=t.variable,m=t.value,"color"===h.type?d.color=x.toUnitRGBA(m):"size"===h.type?"outline"===h.target?d.outlineSize=m:(q=h.axis,n=h.useSymbolValue?"symbol-value":m,"width"===q?g[0]=n:"depth"===q?g[1]=n:"height"===q?g[2]=n:g[0]="width-and-depth"===q?g[1]=n:g[1]=g[2]=n):"opacity"===h.type?d.opacity=m:"rotation"===h.type&&"tilt"===h.axis?d.tilt=m:"rotation"===h.type&&"roll"===h.axis?d.roll=m:"rotation"===h.type&&(d.heading=m);if(isFinite(g[0])||isFinite(g[1])||isFinite(g[2]))d.size=g;return[2,d]}})})};
f.getDriverAxisSizeValue=function(c,b){void 0===b&&(b=0);c=c[b];return"number"===typeof c&&isFinite(c)?c:null};f.getDriverAxisSizeValueAny=function(c){for(var b=0;3>b;b++){var a=c[b];if("number"===typeof a)return isFinite(a)?a:0}return 0}});