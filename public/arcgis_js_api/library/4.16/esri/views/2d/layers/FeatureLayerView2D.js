// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
require({cache:{"esri/AggregateGraphic":function(){define(["require","exports","tslib","./Graphic","./core/accessorSupport/decorators"],function(w,a,f,r,u){return function(a){function l(){return null!==a&&a.apply(this,arguments)||this}f.__extends(l,a);e=l;l.prototype.getEffectivePopupTemplate=function(a){void 0===a&&(a=!1);return this.popupTemplate?this.popupTemplate:(a=this.sourceLayer&&this.sourceLayer.featureReduction)&&"popupTemplate"in a&&a.popupEnabled?a.popupTemplate:null};l.prototype.getObjectId=
function(){return this.objectId};l.prototype.clone=function(){return new e(f.__assign({objectId:this.objectId},this.cloneProperties()))};var e;f.__decorate([u.property({type:Number,json:{read:!0}})],l.prototype,"objectId",void 0);return l=e=f.__decorate([u.subclass("esri.AggregateGraphic")],l)}(r)})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports tslib ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(w,a,f,r,u,l,v,e,c){function d(a,k){var b;if(!k)return null;if("x"in k){var c={x:0,y:0};a=a(k.x,k.y,q);c.x=a[0];c.y=a[1];null!=k.z&&(c.z=k.z);null!=k.m&&(c.m=k.m);return c}if("xmin"in k)return c={xmin:0,ymin:0,xmax:0,ymax:0},b=a(k.xmin,k.ymin,q),c.xmin=b[0],c.ymin=b[1],a=a(k.xmax,k.ymax,q),c.xmax=a[0],c.ymax=a[1],k.hasZ&&(c.zmin=k.zmin,c.zmax=k.zmax,c.hasZ=!0),k.hasM&&(c.mmin=k.mmin,c.mmax=k.mmax,c.hasM=!0),c;if("rings"in k)return{rings:h(k.rings,a),hasM:k.hasM,hasZ:k.hasZ};if("paths"in k)return{paths:h(k.paths,
a),hasM:k.hasM,hasZ:k.hasZ};if("points"in k)return{points:p(k.points,a),hasM:k.hasM,hasZ:k.hasZ}}function h(a,k){for(var b=[],c=0;c<a.length;c++)b.push(p(a[c],k));return b}function p(a,k){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=k(d[0],d[1],[0,0]);b.push(e);2<d.length&&e.push(d[2]);3<d.length&&e.push(d[3])}return b}function m(a,k){return!e.isValid(a)||!e.isValid(k)||e.equals(a,k)||c.canProject(a,k)?!1:!0}Object.defineProperty(a,"__esModule",{value:!0});var q=[0,0];a.doesBrowserSupportProjection=
function(a,k){return m(a,k)?l.isSupported():!0};a.checkProjectionSupport=function(a,k){return f.__awaiter(this,void 0,void 0,function(){var b,c,d;return f.__generator(this,function(e){if(!k)return[2];if(Array.isArray(a)){b=0;for(c=a;b<c.length;b++)if(d=c[b],m(d.geometry&&d.geometry.spatialReference,k)){if(l.isSupported())return[2,l.load()];throw new r("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:k});}return[2]}if(!m(a,k))return[2];if(l.isSupported())return[2,
l.load()];throw new r("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:k});})})};var C=d.bind(null,c.lngLatToXY),B=d.bind(null,c.xyToLngLat);a.project=function(a,k,b){if(!a)return a;b||(b=k,k=a.spatialReference);return e.isValid(k)&&e.isValid(b)&&!e.equals(k,b)?c.canProject(k,b)?e.isWebMercator(b)?C(a):B(a):l.projectMany(v.jsonAdapter,[a],k,b,null)[0]:a};var x=new (function(){function a(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}
a.prototype.push=function(a,b,c){return f.__awaiter(this,void 0,void 0,function(){var k,d=this;return f.__generator(this,function(m){a&&a.length&&b&&c&&!e.equals(b,c)||u.resolve(a);k={geometries:a,inSpatialReference:b,outSpatialReference:c,resolve:null};this._jobs.push(k);return[2,u.create(function(b){k.resolve=b;null===d._timer&&(d._timer=setTimeout(d._process,10))})]})})};a.prototype._process=function(){this._timer=null;var a=this._jobs.shift();if(a){var b=a.geometries,d=a.inSpatialReference,m=
a.outSpatialReference,a=a.resolve;c.canProject(d,m)?e.isWebMercator(m)?a(b.map(C)):a(b.map(B)):a(l.projectMany(v.jsonAdapter,b,d,m,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return a}());a.projectMany=function(a,c,b){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(k){return[2,x.push(a,c,b)]})})}})},"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./support/GeographicTransformation @dojo/framework/shim/Promise".split(" "),
function(w,a,f,r,u){function l(a,c,d,f,l){void 0===l&&(l=null);if(null===l){var m=u.cacheKey(d,f);void 0!==h[m]?l=h[m]:(l=v(d,f,null),null===l&&(l=new u),h[m]=l)}return e._project(a,c,d,f,l)}function v(a,d,h){void 0===h&&(h=null);a=e._getTransformation(c,a,d,h,null===h||void 0===h?void 0:h.spatialReference);return null!==a?u.fromGE(a):null}Object.defineProperty(a,"__esModule",{value:!0});var e=null,c=null;a.isLoaded=function(){return!!e&&r.isLoaded()};a.isSupported=function(){return r.isSupported()};
var d=null;a.load=function(){return d?d:d=f.all([r.load(),new Promise(function(a,c){w(["./geometryEngineBase"],a,c)}),new Promise(function(a,c){w(["./geometryAdapters/hydrated"],a,c)})]).then(function(a){var d=a[1];c=a[2].hydratedAdapter;e=d;e._enableProjection(r)})};a.project=function(a,d,e){void 0===e&&(e=null);return a instanceof Array?0===a.length?[]:l(c,a,a[0].spatialReference,d,e):l(c,[a],a.spatialReference,d,e)[0]};var h={};a.projectMany=l;a.getTransformation=v;a.getTransformations=function(a,
d,h){void 0===h&&(h=null);a=e._getTransformationBySuitability(c,a,d,h,null===h||void 0===h?void 0:h.spatialReference);if(null!==a){d=[];for(h=0;h<a.length;h++)d.push(u.fromGE(a[h]));return d}return[]}})},"esri/geometry/pe":function(){define("require exports tslib ../assets ../core/has ../core/promiseUtils @dojo/framework/shim/Promise".split(" "),function(w,a,f,r,u,l){function v(c){function d(b,a,c){b[a]=c(b[a])}a._pe=c;m.init();q.init();C.init();B.init();x.init();a.PeGCSExtent=function(b){function c(){return null!==
b&&b.apply(this,arguments)||this}f.__extends(c,b);c.prototype.destroy=function(){a._pe.destroy(this)};return c}(a._pe.PeGCSExtent);for(var b=0,e=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];b<e.length;b++)c=e[b],d(c.prototype,"getName",function(b){return function(){return b.call(this,Array(m.PE_NAME_MAX))}});b=0;for(e=[a._pe.PeGeogtran,a._pe.PeProjcs];b<e.length;b++)c=e[b],d(c.prototype,"getParameters",
function(b){return function(){for(var c=Array(m.PE_PARM_MAX),d=b.call(this),k=0;k<c.length;k++){var e=a._pe.getValue(d,"*");c[k]=e?a._pe.wrapPointer(e,a._pe.PeParameter):null;d+=Int32Array.BYTES_PER_ELEMENT}return c}});d(a._pe.PeHorizon.prototype,"getCoord",function(b){return function(){var a=this.getSize();if(!a)return null;var c=[],d=b.call(this);h(c,a,d);return c}});d(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var c=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){var d=
null,k=b.call(this);if(!a._pe.compare(k,a._pe.NULL)){var d=[k],e=this.getSteps();if(1<e)for(var k=a._pe.getPointer(k),h=1;h<e;h++)d.push(a._pe.wrapPointer(k+c*h,a._pe.PeGTlistExtendedGTs))}return d}});var p=a._pe._pe_getPeHorizonSize();c=function(b){return function(){var c=this._cache;c||(this._cache=c=new Map);if(c.has(b))return c.get(b);var d=null,k=b.call(this);if(!a._pe.compare(k,a._pe.NULL)){var d=[k],e=k.getNump();if(1<e)for(var k=a._pe.getPointer(k),h=1;h<e;h++)d.push(a._pe.wrapPointer(k+p*
h,a._pe.PeHorizon))}c.set(b,d);return d}};d(a._pe.PeProjcs.prototype,"horizonGcsGenerate",c);d(a._pe.PeProjcs.prototype,"horizonPcsGenerate",c);a._pe.PeObject.prototype.toString=function(b){void 0===b&&(b=m.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var c=a._pe.getPointer(this),d=a._pe.ensureInt8(Array(m.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(c,b,d))}}function e(c){if(c){var d=a._pe.getClass(c);d&&(d=a._pe.getCache(d))&&(c=a._pe.getPointer(c))&&delete d[c]}}function c(c,
d){var b=[];d=Array(d);for(var e=0;e<c;e++)b.push(a._pe.ensureInt8(d));return b}function d(a){var c;Array.isArray(a[0])?(c=[],a.forEach(function(b){c.push(b[0],b[1])})):c=a;return c}function h(c,d,b,e){void 0===e&&(e=!1);if(e)for(e=0;e<2*d;e++)c[e]=a._pe.getValue(b+e*Float64Array.BYTES_PER_ELEMENT,"double");else{var k=0===c.length;for(e=0;e<d;e++)k&&(c[e]=Array(2)),c[e][0]=a._pe.getValue(b,"double"),c[e][1]=a._pe.getValue(b+Float64Array.BYTES_PER_ELEMENT,"double"),b+=2*Float64Array.BYTES_PER_ELEMENT}}
Object.defineProperty(a,"__esModule",{value:!0});var p;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!u("esri-wasm")};a.load=function(){return p?p:p=l.create(function(a,c){(new Promise(function(b,a){w(["./support/pe-wasm"],b,a)})).then(function(b){b({locateFile:function(b){return r.getAssetUrl("esri/geometry/support/"+b)},onAbort:function(b){c(Error(b))}}).then(function(b){v(b);a()})})})};(function(c){function e(b,c,e){a._pe.ensureCache.prepare();var k=d(e),m=e===
k,k=a._pe.ensureFloat64(k);(b=a._pe._pe_geog_to_proj(a._pe.getPointer(b),c,k))&&h(e,c,k,m);return b}function b(b,a,c){return f(b,a,c,0)}function f(b,c,e,k){a._pe.ensureCache.prepare();var m=d(e),f=e===m,m=a._pe.ensureFloat64(m);(b=a._pe._pe_proj_to_geog_center(a._pe.getPointer(b),c,m,k))&&h(e,c,m,f);return b}c.geogToProj=e;c.projGeog=function(a,c,d,k){switch(k){case m.PE_TRANSFORM_P_TO_G:return b(a,c,d);case m.PE_TRANSFORM_G_TO_P:return e(a,c,d)}return 0};c.projToGeog=b;c.projToGeogCenter=f})(a.PeCSTransformations||
(a.PeCSTransformations={}));var m;(function(c){c.init=function(){c.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;c.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;c.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=
a._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;c.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=
a._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;c.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;c.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;
c.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(m=a.PeDefs||(a.PeDefs={}));(function(c){function d(c,d){var k=null,h=e[c];h||(h={},e[c]=h);h.hasOwnProperty(String(d))?k=h[d]:(c=a._pe.PeFactory.prototype.factoryByType(c,d),a._pe.compare(c,a._pe.NULL)||(k=c,h[d]=k));return k=b(k)}function b(b){if(b){var c=b.getType();switch(c){case m.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);break;case m.PE_TYPE_PROJCS:b=a._pe.castObject(b,
a._pe.PeProjcs);break;case m.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,a._pe.PeGeogtran);break;default:c&m.PE_TYPE_UNIT&&(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var e={},h={};c.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(b){return d(m.PE_TYPE_COORDSYS,b)};c.factoryByType=d;c.fromString=function(c,d){var e=null,k=h[c];k||(k={},h[c]=k);k.hasOwnProperty(d)?e=k[d]:(c=a._pe.PeFactory.prototype.fromString(c,d),a._pe.compare(c,a._pe.NULL)||(e=c,k[d]=e));return e=
b(e)};c.geogcs=function(b){return d(m.PE_TYPE_GEOGCS,b)};c.geogtran=function(b){return d(m.PE_TYPE_GEOGTRAN,b)};c.getCode=function(b){return a._pe.PeFactory.prototype.getCode(b)};c.projcs=function(b){return d(m.PE_TYPE_PROJCS,b)};c.unit=function(b){return d(m.PE_TYPE_UNIT,b)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;var q;(function(c){var d;c.init=function(){c.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;d=a._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=
function(b,c,e,k,h,m){var f=null,q=new a._pe.PeInteger(m);try{var p=a._pe.PeGTlistExtended.prototype.getGTlist(b,c,e,k,h,q);if(m=q.val)if(f=[p],1<m){var l=a._pe.getPointer(p);for(b=1;b<m;b++)f.push(a._pe.wrapPointer(l+d*b,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(q)}return f}})(q=a.PeGTlistExtended||(a.PeGTlistExtended={}));(function(c){c.destroy=function(c){if(c&&c.length){for(var b=0;b<c.length;b++){var d=c[b];e(d);d.getEntries().forEach(function(b){e(b);b=b.getGeogtran();e(b);b.getParameters().forEach(e);
[b.getGeogcs1(),b.getGeogcs2()].forEach(function(b){e(b);var a=b.getDatum();e(a);e(a.getSpheroid());e(b.getPrimem());e(b.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(c[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));(function(c){c.geogToGeog=function(c,b,e,m,f){a._pe.ensureCache.prepare();var k=d(e),q=e===k,k=a._pe.ensureFloat64(k),p=0;m&&(p=a._pe.ensureFloat64(m));(c=a._pe._pe_geog_to_geog(a._pe.getPointer(c),b,k,p,f))&&h(e,b,k,q);return c}})(a.PeGTTransformations||
(a.PeGTTransformations={}));(function(e){function k(b,e,k,h,f,q){a._pe.ensureCache.prepare();var p,l;switch(b){case "dd":p=a._pe._pe_geog_to_dd;l=m.PE_DD_MAX;break;case "ddm":p=a._pe._pe_geog_to_ddm;l=m.PE_DDM_MAX;break;case "dms":p=a._pe._pe_geog_to_dms,l=m.PE_DMS_MAX}b=0;e&&(b=a._pe.getPointer(e));e=d(h);e=a._pe.ensureFloat64(e);l=c(k,l);h=a._pe.ensureInt32(l);if(f=p(b,k,e,f,h))for(p=0;p<k;p++)q[p]=a._pe.UTF8ToString(l[p]);return f}function b(b,c,d,e,k){a._pe.ensureCache.prepare();var m;switch(b){case "dd":m=
a._pe._pe_dd_to_geog;break;case "ddm":m=a._pe._pe_ddm_to_geog;break;case "dms":m=a._pe._pe_dms_to_geog}b=0;c&&(b=a._pe.getPointer(c));c=e.map(function(b){return a._pe.ensureString(b)});e=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*d));(m=m(b,d,e,c))&&h(k,d,c);return m}e.geog_to_dms=function(b,c,a,d,e){return k("dms",b,c,a,d,e)};e.dms_to_geog=function(c,a,d,e){return b("dms",c,a,d,e)};e.geog_to_ddm=function(b,c,a,d,e){return k("ddm",b,c,a,d,e)};e.ddm_to_geog=function(c,a,d,e){return b("ddm",
c,a,d,e)};e.geog_to_dd=function(b,c,a,d,e){return k("dd",b,c,a,d,e)};e.dd_to_geog=function(c,a,d,e){return b("dd",c,a,d,e)}})(a.PeNotationDms||(a.PeNotationDms={}));var C;(function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;e.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;e.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;e.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;e.PE_MGRS_ADD_SPACES=
a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};e.geog_to_mgrs_extended=function(e,b,h,f,q,p,l){a._pe.ensureCache.prepare();var k=0;e&&(k=a._pe.getPointer(e));e=d(h);h=a._pe.ensureFloat64(e);e=c(b,m.PE_MGRS_MAX);var v=a._pe.ensureInt32(e);if(f=a._pe._pe_geog_to_mgrs_extended(k,b,h,f,q,p,v))for(q=0;q<b;q++)l[q]=a._pe.UTF8ToString(e[q]);return f};e.mgrs_to_geog_extended=function(c,b,e,d,m){a._pe.ensureCache.prepare();var k=0;c&&(k=a._pe.getPointer(c));c=e.map(function(b){return a._pe.ensureString(b)});
e=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*b));(d=a._pe._pe_mgrs_to_geog_extended(k,b,e,d,c))&&h(m,b,c);return d}})(C=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(e){e.geog_to_usng=function(e,b,h,f,q,p,l){a._pe.ensureCache.prepare();var k=0;e&&(k=a._pe.getPointer(e));e=d(h);h=a._pe.ensureFloat64(e);e=c(b,m.PE_MGRS_MAX);var v=a._pe.ensureInt32(e);if(f=a._pe._pe_geog_to_usng(k,b,h,f,q,p,v))for(q=0;q<b;q++)l[q]=a._pe.UTF8ToString(e[q]);return f};e.usng_to_geog=function(c,b,e,d){a._pe.ensureCache.prepare();
var k=0;c&&(k=a._pe.getPointer(c));c=e.map(function(b){return a._pe.ensureString(b)});e=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*b));(k=a._pe._pe_usng_to_geog(k,b,e,c))&&h(d,b,c);return k}})(a.PeNotationUsng||(a.PeNotationUsng={}));var B;(function(e){e.init=function(){e.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;e.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;e.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};e.geog_to_utm=function(e,
b,h,f,q){a._pe.ensureCache.prepare();var k=0;e&&(k=a._pe.getPointer(e));e=d(h);h=a._pe.ensureFloat64(e);e=c(b,m.PE_UTM_MAX);var p=a._pe.ensureInt32(e);if(f=a._pe._pe_geog_to_utm(k,b,h,f,p))for(k=0;k<b;k++)q[k]=a._pe.UTF8ToString(e[k]);return f};e.utm_to_geog=function(c,b,e,d,m){a._pe.ensureCache.prepare();var k=0;c&&(k=a._pe.getPointer(c));c=e.map(function(b){return a._pe.ensureString(b)});e=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*b));(d=a._pe._pe_utm_to_geog(k,b,e,d,c))&&h(m,b,c);return d}})(B=
a.PeNotationUtm||(a.PeNotationUtm={}));var x;(function(c){var e=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(b,d){void 0===d&&(d=c.PE_PCSINFO_OPTION_DOMAIN);var k,h;e.has(b)&&(h=e.get(b),h[d]&&(k=h[d]));k||(k=a._pe.PePCSInfo.prototype.generate(b,
d),h||(h=[],e.set(b,h)),h[d]=k);return k}})(x=a.PePCSInfo||(a.PePCSInfo={}));(function(c){c.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));a._init=v})},"esri/geometry/support/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(w,a,f){return function(){function a(a){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(a&&a.steps){var l=0;for(a=a.steps;l<
a.length;l++){var v=a[l];v instanceof f?this.steps.push(v):this.steps.push(new f({wkid:v.wkid,wkt:v.wkt,isInverse:v.isInverse}))}}}a.cacheKey=function(a,f){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==f.wkid&&null!==f.wkid?f.wkid.toString():"-1",void 0!==f.wkt&&null!==f.wkt?f.wkt.toString():""].join()};a.fromGE=function(u){var l=new a,v="",e=0;for(u=u.steps;e<u.length;e++){var c=f.fromGE(u[e]);l.steps.push(c);v+=c.uid.toString()+
","}l._cached_projection={};l._gtlistentry=null;l._chain=v;return l};a.prototype.getInverse=function(){var f=new a;f.steps=[];for(var l=this.steps.length-1;0<=l;l--)f.steps.push(this.steps[l].getInverse());return f};a.prototype.getGTListEntry=function(){for(var a="",f=0,v=this.steps;f<v.length;f++)a+=v[f].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};a.prototype.assignCachedGe=function(f,l,v){this._cached_projection[a.cacheKey(f,
l)]=v};a.prototype.getCachedGeTransformation=function(f,l){for(var v="",e=0,c=this.steps;e<c.length;e++)v+=c[e].uid.toString()+",";v!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=v);f=this._cached_projection[a.cacheKey(f,l)];return void 0===f?null:f};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(w,a){var f=0;return function(){function a(a){void 0===a&&(a=null);this.uid=f++;a?(this._wkt=void 0!==
a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(f){var l=new a;l._wkt=f.wkt;l._wkid=f.wkid;l._isInverse=f.isInverse;return l};Object.defineProperty(a.prototype,"wkt",{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=f++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},set:function(a){this._wkid=
a;this.uid=f++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=f++},enumerable:!0,configurable:!0});a.prototype.getInverse=function(){var f=new a;f._wkt=this.wkt;f._wkid=this._wkid;f._isInverse=!this.isInverse;return f};return a}()})},"esri/geometry/geometryAdapters/json":function(){define(["require","exports"],function(w,a){Object.defineProperty(a,"__esModule",{value:!0});a.jsonAdapter=
{convertToGEGeometry:function(a,c){return null==c?null:a.convertJSONToGeometry(c)},exportPoint:function(a,c,d){d=new f(a.getPointX(c),a.getPointY(c),d);var e=a.hasZ(c),p=a.hasM(c);e&&(d.z=a.getPointZ(c));p&&(d.m=a.getPointM(c));return d},exportPolygon:function(a,c,d){return new r(a.exportPaths(c),d,a.hasZ(c),a.hasM(c))},exportPolyline:function(a,c,d){return new u(a.exportPaths(c),d,a.hasZ(c),a.hasM(c))},exportMultipoint:function(a,c,d){return new l(a.exportPoints(c),d,a.hasZ(c),a.hasM(c))},exportExtent:function(a,
c,d){var e=a.hasZ(c),f=a.hasM(c);d=new v(a.getXMin(c),a.getYMin(c),a.getXMax(c),a.getYMax(c),d);e&&(e=a.getZExtent(c),d.zmin=e.vmin,d.zmax=e.vmax);f&&(a=a.getMExtent(c),d.mmin=a.vmin,d.mmax=a.vmax);return d}};var f=function(){return function(a,c,d){this.x=a;this.y=c;this.spatialReference=d;this.m=this.z=void 0}}(),r=function(){return function(a,c,d,h){this.rings=a;this.spatialReference=c;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);h&&(this.hasM=h)}}(),u=function(){return function(a,c,d,h){this.paths=
a;this.spatialReference=c;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);h&&(this.hasM=h)}}(),l=function(){return function(a,c,d,h){this.points=a;this.spatialReference=c;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);h&&(this.hasM=h)}}(),v=function(){return function(a,c,d,h,f){this.xmin=a;this.ymin=c;this.xmax=d;this.ymax=h;this.spatialReference=f;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}()})},"esri/renderers/support/clickToleranceUtils":function(){define(["require","exports"],function(w,a){function f(a,
f){return f?"xoffset"in f&&f.xoffset?Math.max(a,Math.abs(f.xoffset)):"yoffset"in f&&f.yoffset?Math.max(a,Math.abs(f.yoffset||0)):a:a}function r(a,f){if("number"===typeof a)return a;if(a&&a.stops&&a.stops.length){a=a.stops;for(var e=f=0,c=0;c<a.length;c++){var d=a[c].size;"number"===typeof d&&(f+=d,e++)}return f/e}return f}function u(a,f){if(!f)return a;f=f.filter(function(a){return"size"===a.type}).map(function(c){var d=c.minSize;return(r(c.maxSize,a)+r(d,a))/2});var e=0,c=f.length;if(0===c)return a;
for(var d=0;d<c;d++)e+=f[d];return Math.max(Math.floor(e/c),a)}Object.defineProperty(a,"__esModule",{value:!0});a.calculateTolerance=function(a){var l=a&&a.renderer;a="touch"===(a&&a.event&&a.event.pointerType)?9:6;if(!l)return a;a="visualVariables"in l?u(a,l.visualVariables):a;if("simple"===l.type)return f(a,l.symbol);if("unique-value"===l.type){var e=a;l.uniqueValueInfos.forEach(function(a){e=f(e,a.symbol)});return e}if("class-breaks"===l.type){var c=a;l.classBreakInfos.forEach(function(a){c=f(c,
a.symbol)});return c}return a}})},"esri/views/2d/layers/LayerView2D":function(){define("require exports tslib ../../../core/Collection ../../../core/collectionUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../engine ../../layers/support/ClipArea ../../layers/support/ClipRect ../../layers/support/Geometry ../../layers/support/Path".split(" "),function(w,a,f,r,u,l,v,e,c,d,h,p){Object.defineProperty(a,"__esModule",{value:!0});var m=r.ofType({key:"type",base:c,typeMap:{rect:d,
path:p,geometry:h}});a.LayerView2DMixin=function(a){return function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.clips=new m;c.moving=!1;c.attached=!1;c.lastUpdateId=-1;c.updateRequested=!1;return c}f.__extends(c,a);c.prototype.initialize=function(){var a=this,c;this.container||(this.container=new e.Container);this.handles.add([l.init(this,"suspended",function(c){a.container&&(a.container.visible=!c);a.view&&!c&&a.updateRequested&&a.view.requestUpdate()},!0),l.init(this,["layer.opacity",
"container"],function(){var c,b;a.container&&(a.container.opacity=null!==(b=null===(c=a.layer)||void 0===c?void 0:c.opacity)&&void 0!==b?b:1)},!0),l.init(this,["layer.blendMode"],function(c){a.container&&(a.container.blendMode=c)},!0),this.clips.on("change",function(){a.container.clips=a.clips;a.notifyChange("clips")})]);this.container.clips=this.clips;(null===(c=this.view)||void 0===c?0:c.whenLayerView)?this.view.whenLayerView(this.layer).then(function(c){c!==a||a.attached||a.destroyed||(a.attach(),
a.requestUpdate(),a.attached=!0)},function(){}):this.when().then(function(){a.attached||a.destroyed||(a.attach(),a.requestUpdate(),a.attached=!0)},function(){})};c.prototype.destroy=function(){this.attached&&(this.detach(),this.attached=!1);this.handles.remove("initialize");this.updateRequested=!1;this.view=this.layer=null};Object.defineProperty(c.prototype,"updating",{get:function(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0});
c.prototype.isVisibleAtScale=function(a){var c=!0,d=this.layer,b=d.minScale,d=d.maxScale;if(null!=b&&null!=d){var c=!b,e=!d;!c&&a<=b&&(c=!0);!e&&a>=d&&(e=!0);c=c&&e}return c};c.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())};c.prototype.processUpdate=function(a){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",a),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,
this.update(a)))};c.prototype.isUpdating=function(){return!1};c.prototype.isRendering=function(){return!1};c.prototype.canResume=function(){return a.prototype.canResume.call(this)?this.isVisibleAtScale(this.view.scale):!1};f.__decorate([v.property({type:m,set:function(a){a=u.referenceSetter(a,this._get("clips"),m);this._set("clips",a)}})],c.prototype,"clips",void 0);f.__decorate([v.property()],c.prototype,"moving",void 0);f.__decorate([v.property()],c.prototype,"attached",void 0);f.__decorate([v.property()],
c.prototype,"container",void 0);f.__decorate([v.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],c.prototype,"suspended",void 0);f.__decorate([v.property({readOnly:!0})],c.prototype,"updateParameters",void 0);f.__decorate([v.property()],c.prototype,"updateRequested",void 0);f.__decorate([v.property({dependsOn:["attached","updateRequested","suspended"]})],c.prototype,"updating",null);f.__decorate([v.property()],c.prototype,"view",void 0);return c=f.__decorate([v.subclass("esri.views.2d.layers.LayerView2D")],
c)}(a)}})},"esri/views/layers/support/ClipArea":function(){define(["require","exports","tslib","../../../core/JSONSupport","../../../core/accessorSupport/decorators"],function(w,a,f,r,u){return function(a){function l(){return null!==a&&a.apply(this,arguments)||this}f.__extends(l,a);return l=f.__decorate([u.subclass("esri.views.layers.support.ClipArea")],l)}(r.JSONSupport)})},"esri/views/layers/support/ClipRect":function(){define(["require","exports","tslib","../../../core/accessorSupport/decorators",
"./ClipArea"],function(w,a,f,r,u){return function(a){function l(){var c=null!==a&&a.apply(this,arguments)||this;c.type="rect";c.left=null;c.right=null;c.top=null;c.bottom=null;return c}f.__extends(l,a);e=l;l.prototype.clone=function(){return new e({left:this.left,right:this.right,top:this.top,bottom:this.bottom})};Object.defineProperty(l.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});var e;f.__decorate([r.property({type:[Number,String],json:{write:!0}})],
l.prototype,"left",void 0);f.__decorate([r.property({type:[Number,String],json:{write:!0}})],l.prototype,"right",void 0);f.__decorate([r.property({type:[Number,String],json:{write:!0}})],l.prototype,"top",void 0);f.__decorate([r.property({type:[Number,String],json:{write:!0}})],l.prototype,"bottom",void 0);f.__decorate([r.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],l.prototype,"version",null);return l=e=f.__decorate([r.subclass("esri.views.layers.support.ClipRect")],l)}(u)})},
"esri/views/layers/support/Geometry":function(){define("require exports tslib ../../../geometry ../../../core/accessorSupport/decorators ../../../geometry/Geometry ../../../geometry/support/jsonUtils ./ClipArea".split(" "),function(w,a,f,r,u,l,v,e){var c={base:l,key:"type",typeMap:{extent:r.Extent,polygon:r.Polygon}};return function(a){function d(){var c=null!==a&&a.apply(this,arguments)||this;c.type="geometry";c.geometry=null;return c}f.__extends(d,a);e=d;Object.defineProperty(d.prototype,"version",
{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new e({geometry:this.geometry.clone()})};var e;f.__decorate([u.property({types:c,json:{read:v.fromJSON,write:!0}})],d.prototype,"geometry",void 0);f.__decorate([u.property({readOnly:!0,dependsOn:["geometry"]})],d.prototype,"version",null);return d=e=f.__decorate([u.subclass("esri.views.layers.support.Geometry")],d)}(e)})},"esri/views/layers/support/Path":function(){define(["require",
"exports","tslib","../../../core/accessorSupport/decorators","./ClipArea"],function(w,a,f,r,u){return function(a){function l(){var e=null!==a&&a.apply(this,arguments)||this;e.type="path";e.path=[];return e}f.__extends(l,a);Object.defineProperty(l.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});f.__decorate([r.property({type:[[[Number]]],json:{write:!0}})],l.prototype,"path",void 0);f.__decorate([r.property({readOnly:!0,dependsOn:["path"]})],l.prototype,
"version",null);return l=f.__decorate([r.subclass("esri.views.layers.support.Path")],l)}(u)})},"esri/views/2d/layers/features/tileRenderers":function(){define(["require","exports","tslib","@dojo/framework/shim/Promise"],function(w,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.createOrReuseTileRenderer=function(a,u){return f.__awaiter(this,void 0,void 0,function(){var l,v,e;return f.__generator(this,function(c){switch(c.label){case 0:if(!a)return[2,null];l=a.type;switch(l){case "class-breaks":return[3,
1];case "simple":return[3,1];case "unique-value":return[3,1];case "dot-density":return[3,1];case "dictionary":return[3,1];case "heatmap":return[3,3]}return[3,5];case 1:return[4,new Promise(function(a,c){w(["./tileRenderers/SymbolTileRenderer"],a,c)})];case 2:return v=c.sent(),[2,new v.default(u)];case 3:return[4,new Promise(function(a,c){w(["./tileRenderers/HeatmapTileRenderer"],a,c)})];case 4:return e=c.sent(),[2,new e.default(u)];case 5:return[2]}})})}})},"esri/views/2d/layers/features/support/rendererUtils":function(){define("require exports tslib ../../../../../core/Logger ../../../../../core/screenUtils ../../../engine".split(" "),
function(w,a,f,r,u,l){Object.defineProperty(a,"__esModule",{value:!0});var v=l.definitions.WEBGL_MAX_INNER_STOPS,e=l.definitions.WEBGL_MAX_STOPS,c=r.getLogger("esri.renderers.visualVariables.support.utils");a.simplifyVVRenderer=function(a){if(!("visualVariables"in a&&a.visualVariables&&a.visualVariables.length))return a;a=a.clone();var d=a.visualVariables.map(function(a){if(("size"===a.type||"color"===a.type||"opacity"===a.type)&&null!=a.stops){var d;var h=a.type;d=a.stops;if(!(d.length<=e))if(c.warn("Found "+
d.length+" Visual Variable stops, but MapView only supports "+e+". Displayed stops will be simplified."),d.length>2*e){for(var p=d[0],l=d.slice(1),r=l.pop(),z=l[0].value,k=l[l.length-1].value,b=(k-z)/v,Z=[];z<k;z+=b){for(var I=0;z>=l[I].value;)I++;var H=l[I],L=d[I-1],y=z-L.value,H=H.value===L.value?1:y/(H.value-L.value);"color"===h?(L=l[I],I=d[I-1],y=L.color.clone(),y.r=(1-H)*I.color.r+H*y.r,y.g=(1-H)*I.color.g+H*y.g,y.b=(1-H)*I.color.b+H*y.b,y.a=(1-H)*I.color.a+H*y.a,Z.push({value:z,color:y,label:L.label})):
"size"===h?(L=l[I],y=d[I-1],I=u.toPt(L.size),y=u.toPt(y.size),Z.push({value:z,size:(1-H)*y+H*I,label:L.label})):(L=l[I],Z.push({value:z,opacity:(1-H)*d[I-1].opacity+H*L.opacity,label:L.label}))}d=f.__spreadArrays([p],Z,[r])}else{h=d[0];d=d.slice(1);for(p=d.pop();d.length>v;){r=l=0;for(k=1;k<d.length;k++)b=Math.abs(d[k].value-d[k-1].value),b>r&&(r=b,l=k);d.splice(l,1)}d=f.__spreadArrays([h],d,[p])}a.stops=d}return a});a.visualVariables=d;return a}})},"esri/views/2d/layers/support/clusterUtils":function(){define("require exports tslib ../../../../core/Error ../../../../core/has ../../../../core/Logger ../../../../core/maybe ../../../../core/MD5 ../../../../renderers/visualVariables/SizeVariable ../../../../renderers/visualVariables/support/SizeStop ../../engine".split(" "),
function(w,a,f,r,u,l,v,e,c,d,h){function p(a,b,c){switch(a){case "avg":case "avg_angle":return"cluster_avg_"+b;case "mode":return"cluster_type_"+b;case "norm":return a=b.toLowerCase()+",norm:field,"+c.toLowerCase(),"cluster_avg_"+e.createMD5Hash(a)}}function m(a,b){var c=b.name,d=b.outStatistic,f=d.onStatisticField,h=d.onStatisticValueExpression,d=d.statisticType;h?(b=e.createMD5Hash(h.toLowerCase()),a.push({name:c,outStatistic:{onStatisticField:b,onStatisticValueExpression:h,statisticType:d}})):
f?a.push({name:c,outStatistic:{onStatisticField:f,statisticType:d}}):x.error(new r("mapview-unsupported-field","Unable to handle field",{field:b}))}function q(a,b,c){var d=e.createMD5Hash(b),f="mode"===c?"cluster_type_"+d:"cluster_avg_"+d;a.some(function(b){return b.name===f})||a.push({name:f,outStatistic:{onStatisticField:d,onStatisticValueExpression:b,statisticType:c}});return f}function C(a,b,c,d){if("cluster_count"===b||a.some(function(a){return a.name===b}))return b;var e=p(c,b,d);a.some(function(b){return b.name===
e})||("norm"===c?a.push({name:e,outStatistic:{onStatisticField:b,onStatisticNormalizationField:d,statisticType:c}}):a.push({name:e,outStatistic:{onStatisticField:b,statisticType:c}}));return e}var B=this;Object.defineProperty(a,"__esModule",{value:!0});var x=l.getLogger("esri.views.2d.layers.support.clusterUtils");u.add("esri-cluster-arcade-enabled",1);var z=u("esri-cluster-arcade-enabled");a.createClusterRenderer=function(c,b,d,e,h){return f.__awaiter(B,void 0,void 0,function(){var b,k,p,l,r,u;return f.__generator(this,
function(f){b=d.clone();if(!a.isClusterCompatibleRenderer(b))return[2,b];if(e.fields)for(k=0,p=e.fields;k<p.length;k++)l=p[k],m(c,l);"visualVariables"in b&&(r=(b.visualVariables||[]).filter(function(b){return"$view.scale"!==b.valueExpression}),u=a.findSizeVV(r),r.forEach(function(b){"rotation"===b.type?b.field?b.field=C(c,b.field,"avg_angle"):b.valueExpression&&(b.field=q(c,b.valueExpression,"avg_angle"),b.valueExpression=null):b.normalizationField?(b.field=C(c,b.field,"norm",b.normalizationField),
b.normalizationField=null):b.field?b.field=C(c,b.field,"avg"):(b.field=q(c,b.valueExpression,"avg"),b.valueExpression=null)}),v.isNone(u)&&!a.hasClusterCountVV(r)&&(r.push(a.createClusterCountSizeVariable(e,h)),b.dynamicClusterSize=!0),b.visualVariables=r);switch(b.type){case "unique-value":b.field?b.field=C(c,b.field,"mode"):b.valueExpression&&(b.field=q(c,b.valueExpression,"mode"),b.valueExpression=null);break;case "class-breaks":b.normalizationField?(b.field=C(c,b.field,"norm",b.normalizationField),
b.normalizationField=null):b.field?b.field=C(c,b.field,"avg"):(b.field=q(c,b.valueExpression,"avg"),b.valueExpression=null)}return[2,b]})})};a.findSizeVV=function(a){for(var b=0;b<a.length;b++){var c=a[b];if("size"===c.type)return c}return null};a.hasClusterCountVV=function(a){for(var b=0;b<a.length;b++)if("cluster_count"===a[b].field)return!0;return!1};a.createClusterCountSizeVariable=function(a,b){var e=[new d({value:0,size:0}),new d({value:1})];if(v.isNone(b))return new c({field:"cluster_count",
stops:f.__spreadArrays(e,[new d({value:2,size:0})])});var k=Object.keys(b).reduce(function(c,h){var k;return f.__assign(f.__assign({},c),(k={},k[h]=f.__spreadArrays(e,[new d({value:Math.max(2,b[h].minValue),size:a.clusterMinSize}),new d({value:Math.max(3,b[h].maxValue),size:a.clusterMaxSize})]),k))},{});return new h.LevelDependentSizeVariable({field:"cluster_count",levels:k})};a.isClusterCompatibleRenderer=function(a){var b=function(b){return x.error(new r("Unsupported-renderer",b,{renderer:a}))};
if("unique-value"===a.type){if(a.field2||a.field3)return b("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1}else if("class-breaks"===a.type){if(a.normalizationField){var c=a.normalizationType;if("field"!==c)return b("FeatureReductionCluster does not support a normalizationType of "+c),!1}}else if("simple"!==a.type)return b("FeatureReductionCluster does not support renderers of type "+a.type),!1;if(!z){if("valueExpression"in a&&a.valueExpression)return b("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),
!1;if(("visualVariables"in a&&a.visualVariables||[]).some(function(b){return!!("valueExpression"in b&&b.valueExpression)}))return b("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0}})},"esri/core/MD5":function(){define(["require","exports"],function(w,a){function f(a,c){var d=(a&65535)+(c&65535);return(a>>16)+(c>>16)+(d>>16)<<16|d&65535}function r(a,c,d,h,p,m){a=f(f(c,a),f(h,m));return f(a<<p|a>>>32-
p,d)}function u(a,c,d,f,p,m,q){return r(c&d|~c&f,a,c,p,m,q)}function l(a,c,d,f,p,m,q){return r(c&f|d&~f,a,c,p,m,q)}function v(a,c,d,f,p,m,q){return r(d^(c|~f),a,c,p,m,q)}Object.defineProperty(a,"__esModule",{value:!0});a.outputTypes={Base64:0,Hex:1,String:2,Raw:3};a.createMD5Hash=function(e,c){void 0===c&&(c=a.outputTypes.Hex);c=c||a.outputTypes.Base64;for(var d=[],h=0,p=8*e.length;h<p;h+=8)d[h>>5]|=(e.charCodeAt(h/8)&255)<<h%32;e=8*e.length;d[e>>5]|=128<<e%32;d[(e+64>>>9<<4)+14]=e;e=1732584193;for(var h=
-271733879,p=-1732584194,m=271733878,q=0;q<d.length;q+=16){var C=e,B=h,x=p,z=m;e=u(e,h,p,m,d[q+0],7,-680876936);m=u(m,e,h,p,d[q+1],12,-389564586);p=u(p,m,e,h,d[q+2],17,606105819);h=u(h,p,m,e,d[q+3],22,-1044525330);e=u(e,h,p,m,d[q+4],7,-176418897);m=u(m,e,h,p,d[q+5],12,1200080426);p=u(p,m,e,h,d[q+6],17,-1473231341);h=u(h,p,m,e,d[q+7],22,-45705983);e=u(e,h,p,m,d[q+8],7,1770035416);m=u(m,e,h,p,d[q+9],12,-1958414417);p=u(p,m,e,h,d[q+10],17,-42063);h=u(h,p,m,e,d[q+11],22,-1990404162);e=u(e,h,p,m,d[q+12],
7,1804603682);m=u(m,e,h,p,d[q+13],12,-40341101);p=u(p,m,e,h,d[q+14],17,-1502002290);h=u(h,p,m,e,d[q+15],22,1236535329);e=l(e,h,p,m,d[q+1],5,-165796510);m=l(m,e,h,p,d[q+6],9,-1069501632);p=l(p,m,e,h,d[q+11],14,643717713);h=l(h,p,m,e,d[q+0],20,-373897302);e=l(e,h,p,m,d[q+5],5,-701558691);m=l(m,e,h,p,d[q+10],9,38016083);p=l(p,m,e,h,d[q+15],14,-660478335);h=l(h,p,m,e,d[q+4],20,-405537848);e=l(e,h,p,m,d[q+9],5,568446438);m=l(m,e,h,p,d[q+14],9,-1019803690);p=l(p,m,e,h,d[q+3],14,-187363961);h=l(h,p,m,e,
d[q+8],20,1163531501);e=l(e,h,p,m,d[q+13],5,-1444681467);m=l(m,e,h,p,d[q+2],9,-51403784);p=l(p,m,e,h,d[q+7],14,1735328473);h=l(h,p,m,e,d[q+12],20,-1926607734);e=r(h^p^m,e,h,d[q+5],4,-378558);m=r(e^h^p,m,e,d[q+8],11,-2022574463);p=r(m^e^h,p,m,d[q+11],16,1839030562);h=r(p^m^e,h,p,d[q+14],23,-35309556);e=r(h^p^m,e,h,d[q+1],4,-1530992060);m=r(e^h^p,m,e,d[q+4],11,1272893353);p=r(m^e^h,p,m,d[q+7],16,-155497632);h=r(p^m^e,h,p,d[q+10],23,-1094730640);e=r(h^p^m,e,h,d[q+13],4,681279174);m=r(e^h^p,m,e,d[q+0],
11,-358537222);p=r(m^e^h,p,m,d[q+3],16,-722521979);h=r(p^m^e,h,p,d[q+6],23,76029189);e=r(h^p^m,e,h,d[q+9],4,-640364487);m=r(e^h^p,m,e,d[q+12],11,-421815835);p=r(m^e^h,p,m,d[q+15],16,530742520);h=r(p^m^e,h,p,d[q+2],23,-995338651);e=v(e,h,p,m,d[q+0],6,-198630844);m=v(m,e,h,p,d[q+7],10,1126891415);p=v(p,m,e,h,d[q+14],15,-1416354905);h=v(h,p,m,e,d[q+5],21,-57434055);e=v(e,h,p,m,d[q+12],6,1700485571);m=v(m,e,h,p,d[q+3],10,-1894986606);p=v(p,m,e,h,d[q+10],15,-1051523);h=v(h,p,m,e,d[q+1],21,-2054922799);
e=v(e,h,p,m,d[q+8],6,1873313359);m=v(m,e,h,p,d[q+15],10,-30611744);p=v(p,m,e,h,d[q+6],15,-1560198380);h=v(h,p,m,e,d[q+13],21,1309151649);e=v(e,h,p,m,d[q+4],6,-145523070);m=v(m,e,h,p,d[q+11],10,-1120210379);p=v(p,m,e,h,d[q+2],15,718787259);h=v(h,p,m,e,d[q+9],21,-343485551);e=f(e,C);h=f(h,B);p=f(p,x);m=f(m,z)}d=[e,h,p,m];switch(c){case a.outputTypes.Raw:return d;case a.outputTypes.Hex:c=[];e=0;for(h=4*d.length;e<h;e++)c.push("0123456789abcdef".charAt(d[e>>2]>>e%4*8+4&15)+"0123456789abcdef".charAt(d[e>>
2]>>e%4*8&15));return c.join("");case a.outputTypes.String:c=[];e=0;for(h=32*d.length;e<h;e+=8)c.push(String.fromCharCode(d[e>>5]>>>e%32&255));return c.join("");case a.outputTypes.Base64:c=[];e=0;for(h=4*d.length;e<h;e+=3)for(p=(d[e>>2]>>e%4*8&255)<<16|(d[e+1>>2]>>(e+1)%4*8&255)<<8|d[e+2>>2]>>(e+2)%4*8&255,m=0;4>m;m++)8*e+6*m>32*d.length?c.push("\x3d"):c.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(p>>6*(3-m)&63));return c.join("")}}})},"esri/views/2d/layers/support/FeatureLayerProxy":function(){define("require exports tslib ../../../../core/Promise ../../../../core/promiseUtils ../../../../core/workers ../../../../core/accessorSupport/decorators".split(" "),
function(w,a,f,r,u,l,v){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function c(c){c=a.call(this,c)||this;c._startupResolver=u.createResolver();c.isReady=!1;return c}f.__extends(c,a);c.prototype.initialize=function(){this._controller=u.createAbortController();this.addResolvingPromise(this._startWorker(this._controller.signal))};c.prototype.destroy=function(){this._controller.abort();this._connection&&this._connection.close()};Object.defineProperty(c.prototype,"tileRenderer",{set:function(a){this.client.tileRenderer=
a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"closed",{get:function(){return this._connection.closed},enumerable:!0,configurable:!0});c.prototype.startup=function(a,c,e,m){return f.__awaiter(this,void 0,void 0,function(){var d,h,p,l;return f.__generator(this,function(f){switch(f.label){case 0:return[4,this.when()];case 1:return f.sent(),d=this._controller.signal,h=Array.isArray(e.source)?{transferList:e.source,signal:d}:void 0,p=a.tileInfo.toJSON(),l={service:e,config:c,tileInfo:p,
options:m},[4,this._connection.invoke("startup",l,h)];case 2:return f.sent(),this._startupResolver.resolve(),this._set("isReady",!0),[2]}})})};c.prototype.update=function(a,c){return f.__awaiter(this,void 0,void 0,function(){var d;return f.__generator(this,function(e){switch(e.label){case 0:return d={config:a,options:c},[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("update",d)]}})})};c.prototype.setHighlight=function(a){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,
function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];case 1:return c.sent(),[2,this._connection.invoke("controller.setHighlight",a)]}})})};c.prototype.refresh=function(){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.refresh")]}})})};c.prototype.setViewState=function(a){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,
function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];case 1:return c.sent(),[2,this._connection.invoke("setViewState",a.toJSON())]}})})};c.prototype.queryFeatures=function(a,c){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(d){switch(d.label){case 0:return[4,this._startupResolver.promise];case 1:return d.sent(),[2,this._connection.invoke("controller.queryFeatures",a.toJSON(),c)]}})})};c.prototype.queryObjectIds=function(a,c){return f.__awaiter(this,
void 0,void 0,function(){return f.__generator(this,function(d){switch(d.label){case 0:return[4,this._startupResolver.promise];case 1:return d.sent(),[2,this._connection.invoke("controller.queryObjectIds",a.toJSON(),c)]}})})};c.prototype.queryFeatureCount=function(a,c){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(d){switch(d.label){case 0:return[4,this._startupResolver.promise];case 1:return d.sent(),[2,this._connection.invoke("controller.queryFeatureCount",a.toJSON(),
c)]}})})};c.prototype.queryExtent=function(a,c){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(d){return[2,this._connection.invoke("controller.queryExtent",a.toJSON(),c)]})})};c.prototype.queryLatestObservations=function(a,c){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(d){switch(d.label){case 0:return[4,this._startupResolver.promise];case 1:return d.sent(),[2,this._connection.invoke("controller.queryLatestObservations",a.toJSON(),
c)]}})})};c.prototype.queryStatistics=function(a){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];case 1:return c.sent(),[2,this._connection.invoke("controller.queryStatistics",a)]}})})};c.prototype.getObjectId=function(a){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];case 1:return c.sent(),[2,
this._connection.invoke("controller.getObjectId",a)]}})})};c.prototype.getLocalId=function(a){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];case 1:return c.sent(),[2,this._connection.invoke("controller.getLocalId",a)]}})})};c.prototype.getAggregate=function(a){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];
case 1:return c.sent(),[2,this._connection.invoke("controller.getAggregate",a)]}})})};c.prototype.getAggregateValueRanges=function(){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.getAggregateValueRanges")]}})})};c.prototype.mapValidLocalIds=function(a){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(c){switch(c.label){case 0:return[4,
this._startupResolver.promise];case 1:return c.sent(),[2,this._connection.invoke("controller.mapValidLocalIds",a)]}})})};c.prototype.onEdits=function(a){return f.__awaiter(this,void 0,void 0,function(){var c,d,e;return f.__generator(this,function(f){switch(f.label){case 0:return[4,this._startupResolver.promise];case 1:return f.sent(),c=a.addedFeatures,d=a.deletedFeatures,e=a.updatedFeatures,[2,this._connection.invoke("controller.onEdits",{addedFeatures:c,deletedFeatures:d,updatedFeatures:e})]}})})};
c.prototype.enableEvent=function(a,c){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(d){switch(d.label){case 0:return[4,this._startupResolver.promise];case 1:return d.sent(),[2,this._connection.invoke("controller.enableEvent",{name:a,value:c})]}})})};c.prototype._startWorker=function(a){return f.__awaiter(this,void 0,void 0,function(){var c,d;return f.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),c=this,[4,l.open("Pipeline",{client:this.client,
strategy:"dedicated",signal:a})];case 1:return c._connection=e.sent(),[3,3];case 2:return d=e.sent(),u.throwIfNotAbortError(d),[3,3];case 3:return[2]}})})};f.__decorate([v.property()],c.prototype,"isReady",void 0);f.__decorate([v.property()],c.prototype,"client",void 0);f.__decorate([v.property()],c.prototype,"tileRenderer",null);return c=f.__decorate([v.subclass("esri.views.2d.layers.support.FeatureLayerProxy")],c)}(r.EsriPromise);a.default=w})},"esri/views/2d/layers/support/util":function(){define(["require",
"exports","../../../../core/jsonMap"],function(w,a,f){Object.defineProperty(a,"__esModule",{value:!0});var r=new f.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});a.toJSONGeometryType=function(a){return r.toJSON(a)};a.analyzeRings=function(a,f,r){for(var e=[],c=[],d=0,h=0,l=0;l<a.length;l++){var m=a[l],q=h,v=m[0][0],u=m[0][1];e[h++]=v;e[h++]=u;for(var x=0,z=1;z<m.length;++z){var k=
v,b=u,v=m[z][0],u=m[z][1],x=x+(u*k-v*b);e[h++]=v;e[h++]=u}f(x/2);0<x?(0<q-d&&(r(d,q,e,c),d=q),c.length=0):0>x?0<q-d?c.push(.5*(q-d)):h=q:h=q}0<h-d&&r(d,h,e,c)}})},"esri/views/layers/FeatureLayerView":function(){define("require exports tslib ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/SetUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../layers/support/fieldUtils ../../layers/support/timeUtils ../../support/arcadeOnDemand ../../tasks/support/Query ./support/FeatureEffect ./support/FeatureFilter ./support/popupUtils".split(" "),
function(w,a,f,r,u,l,v,e,c,d,h,p,m,q,C,B,x){Object.defineProperty(a,"__esModule",{value:!0});var z=u.getLogger("esri.views.layers.FeatureLayerView");a.FeatureLayerView=function(a){return function(b){function a(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a=b.apply(this,a)||this;a._updatingRequiredFieldsPromise=null;a.effect=null;a.filter=null;a.layer=null;a.requiredFields=[];a.view=null;return a}f.__extends(a,b);a.prototype.initialize=function(){var a=this;c.init(this,"layer.renderer layer.labelingInfo layer.elevationInfo.featureExpressionInfo layer.displayField filter effect layer.timeInfo timeExtent".split(" "),
function(){return a._handleRequiredFieldsChange()},!0)};Object.defineProperty(a.prototype,"availableFields",{get:function(){var a=this.layer,b=this.layer.fields,c=this.requiredFields;return"outFields"in a&&a.outFields?h.fixFields(b,f.__spreadArrays(h.unpackFieldNames(b,a.outFields),c)):h.fixFields(b,c)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"maximumNumberOfFeatures",{get:function(){return 0},set:function(a){z.error("#maximumNumberOfFeatures\x3d","Setting maximum number of features is not supported")},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return!1},enumerable:!0,configurable:!0});a.prototype.highlight=function(a,b){void 0===b&&(b={});throw Error("missing implementation");};a.prototype.createQuery=function(){var a={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},a=l.isSome(this.filter)?this.filter.createQuery(a):new q(a);this.timeExtent&&(a.timeExtent=a.timeExtent?a.timeExtent.intersection(this.timeExtent):
this.timeExtent.clone());return a};a.prototype.queryFeatures=function(a,b){throw Error("missing implementation");};a.prototype.queryObjectIds=function(a,b){throw Error("missing implementation");};a.prototype.queryFeatureCount=function(a,b){throw Error("missing implementation");};a.prototype.queryExtent=function(a,b){throw Error("missing implementation");};a.prototype._loadArcadeModules=function(a){if(a.get("expressionInfos.length"))return m.loadArcade()};a.prototype._handleRequiredFieldsChange=function(){var a=
this,b=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",b);b.then(function(){a._updatingRequiredFieldsPromise===b&&a._set("_updatingRequiredFieldsPromise",null)})};a.prototype._updateRequiredFields=function(){return f.__awaiter(this,void 0,void 0,function(){var a,b,c,d,k,m,q,p,r,u,C,B,x,w,Z;return f.__generator(this,function(f){switch(f.label){case 0:if(!this.layer||!this.view)return[2];a="3d"===this.view.type;b=this;d=c=b.layer;k=d.fields;m=d.objectIdField;q=d.renderer;p=d.displayField;
r=c.featureReduction;u=new Set;return[4,v.eachAlways([q?q.collectRequiredFields(u,k):null,h.collectLabelingFields(u,c),a?h.collectElevationFields(u,c):null,l.isSome(this.filter)?h.collectFilterFields(u,c,this.filter):null,this.effect?h.collectFilterFields(u,c,this.effect.filter):null,r?h.collectFeatureReductionFields(u,c,r):null])];case 1:C=f.sent();c.timeInfo&&this.timeExtent&&h.collectFields(u,c.fields,[c.timeInfo.startField,c.timeInfo.endField]);B=0;for(x=C;B<x.length;B++)w=x[B],w.error&&z.error(w.error);
h.collectField(u,k,m);a&&p&&h.collectField(u,k,p);Z=e.valuesOfSet(u).sort();this._set("requiredFields",Z);return[2]}})})};a.prototype.validateFetchPopupFeatures=function(a){var b=this.layer;if(!this.layer.popupEnabled)return new r("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:b});if(!x.getFetchPopupTemplate(this.layer,a))return new r("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:b})};a.prototype.fetchClientPopupFeatures=function(a){return f.__awaiter(this,
void 0,void 0,function(){var b,c,d,e,k,m,q,p,r,u,C,z;return f.__generator(this,function(f){switch(f.label){case 0:b=l.isSome(a)?a.clientGraphics:null;if(!b||0===b.length)return[2,v.resolve([])];c=[];d=[];e=this.layer;k=x.getFetchPopupTemplate(e,a);return l.isSome(k)?[4,this._loadArcadeModules(k)]:[2,v.resolve([])];case 1:return q=(m=f.sent())&&m.arcadeUtils.hasGeometryOperations(k),[4,this.createPopupQuery(a)];case 2:p=f.sent();r=h.unpackFieldNames(e.fields,p.outFields);u=0;for(C=b;u<C.length;u++)z=
C[u],q||!h.featureHasFields(r,z)?d.push(z):c.push(z);if("stream"===e.type||0===d.length)return[2,v.resolve(c)];p.objectIds=d.map(function(a){return a.attributes[e.objectIdField]});return[2,e.queryFeatures(p).then(function(a){return c.concat(a.features)}).catch(function(){return d})]}})})};a.prototype.createPopupQuery=function(a){return f.__awaiter(this,void 0,void 0,function(){var b,c,d;return f.__generator(this,function(e){switch(e.label){case 0:return b=this.layer,c=b.createQuery(),c.returnGeometry=
!0,c.returnZ=!0,c.returnM=!0,d=c,[4,x.getRequiredFields(this.layer,x.getFetchPopupTemplate(this.layer,a))];case 1:return d.outFields=e.sent(),c.outSpatialReference=this.view.spatialReference,[2,c]}})})};a.prototype.canResume=function(){var a;return!b.prototype.canResume.call(this)||(null===(a=this.timeExtent)||void 0===a?0:a.isEmpty)?!1:!0};f.__decorate([d.property()],a.prototype,"_updatingRequiredFieldsPromise",void 0);f.__decorate([d.property({readOnly:!0,dependsOn:["layer.outFields?","requiredFields"]})],
a.prototype,"availableFields",null);f.__decorate([d.property({type:C})],a.prototype,"effect",void 0);f.__decorate([d.property({type:B})],a.prototype,"filter",void 0);f.__decorate([d.property(p.combinedViewLayerTimeExtentProperty)],a.prototype,"timeExtent",void 0);f.__decorate([d.property()],a.prototype,"layer",void 0);f.__decorate([d.property({type:Number})],a.prototype,"maximumNumberOfFeatures",null);f.__decorate([d.property({readOnly:!0,type:Boolean})],a.prototype,"maximumNumberOfFeaturesExceeded",
null);f.__decorate([d.property({readOnly:!0})],a.prototype,"requiredFields",void 0);f.__decorate([d.property({dependsOn:["timeExtent"]})],a.prototype,"suspended",void 0);f.__decorate([d.property()],a.prototype,"view",void 0);return a=f.__decorate([d.subclass("esri.views.layers.FeatureLayerView")],a)}(a)}})},"esri/views/layers/support/FeatureEffect":function(){define("require exports tslib ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators ./FeatureFilter ./ParsedFeatureEffect ./Transition".split(" "),
function(w,a,f,r,u,l,v,e,c,d){var h=u.getLogger("esri.views.layers.support.FeatureEffect");return function(a){function m(){var c=null!==a&&a.apply(this,arguments)||this;c.filter=null;c.includedEffect=null;c.excludedEffect=null;c.excludedLabelsVisible=!1;return c}f.__extends(m,a);q=m;Object.defineProperty(m.prototype,"insideEffect",{get:function(){h.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead");return this.includedEffect},set:function(a){h.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead");
this.includedEffect=a},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"outsideEffect",{get:function(){h.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead");return this.excludedEffect},set:function(a){h.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead");this.excludedEffect=a},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"parsedIncludedEffect",{get:function(){return l.isSome(this.includedEffect)?
"string"===typeof this.includedEffect?c.fromString(this.includedEffect):new d({from:c.fromString(this.includedEffect.from),to:c.fromString(this.includedEffect.to),duration:this.includedEffect.duration}):null},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"parsedExcludedEffect",{get:function(){return l.isSome(this.excludedEffect)?"string"===typeof this.excludedEffect?c.fromString(this.excludedEffect):new d({from:c.fromString(this.excludedEffect.from),to:c.fromString(this.excludedEffect.to),
duration:this.excludedEffect.duration}):null},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"renderingHash",{get:function(){return this.excludedLabelsVisible+"-"+this.includedEffect+"-"+this.excludedEffect},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"done",{get:function(){return(!l.isSome(this.parsedIncludedEffect)||this.parsedIncludedEffect.done)&&(!l.isSome(this.parsedExcludedEffect)||this.parsedExcludedEffect.done)},enumerable:!0,configurable:!0});m.prototype.clone=
function(){return new q({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})};var q;f.__decorate([v.property({type:e,json:{write:!0}})],m.prototype,"filter",void 0);f.__decorate([v.property({type:String,json:{write:!0}})],m.prototype,"includedEffect",void 0);f.__decorate([v.property({type:String,json:{write:!0}})],m.prototype,"excludedEffect",void 0);f.__decorate([v.property({type:Boolean,
json:{write:!0}})],m.prototype,"excludedLabelsVisible",void 0);f.__decorate([v.property({dependsOn:["includedEffect"]})],m.prototype,"parsedIncludedEffect",null);f.__decorate([v.property({dependsOn:["excludedEffect"]})],m.prototype,"parsedExcludedEffect",null);f.__decorate([v.property({dependsOn:["includedEffect","excludedEffect"]})],m.prototype,"renderingHash",null);return m=q=f.__decorate([v.subclass("esri.views.layers.support.FeatureEffect")],m)}(r.JSONSupport)})},"esri/views/layers/support/FeatureFilter":function(){define("require exports tslib ../../../geometry ../../../TimeExtent ../../../core/jsonMap ../../../core/JSONSupport ../../../core/lang ../../../core/SetUtils ../../../core/accessorSupport/decorators ../../../geometry/support/jsonUtils ../../../tasks/support/Query".split(" "),
function(w,a,f,r,u,l,v,e,c,d,h,p){var m=new l.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),q=new l.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(a){function l(c){c=a.call(this,c)||this;c.where=null;c.geometry=null;c.spatialRelationship="intersects";c.hiddenIds=new Set;c.distance=void 0;c.objectIds=null;c.units=null;c.timeExtent=null;c.enabled=!1;return c}f.__extends(l,a);v=l;l.prototype.writeWhere=function(a,c){c.where=a||"1\x3d1"};l.prototype.enable=function(){this._set("enabled",!0)};
l.prototype.createQuery=function(a){void 0===a&&(a={});var c=this.where,b=this.spatialRelationship,d=this.timeExtent,h=this.objectIds,m=this.units,q=this.distance;return new p(f.__assign({geometry:e.clone(this.geometry),objectIds:e.clone(h),spatialRelationship:b,timeExtent:e.clone(d),where:c,units:m,distance:q},a))};l.prototype.clone=function(){var a=this.where,c=this.geometry,b=this.spatialRelationship,d=this.hiddenIds,f=this.timeExtent,h=this.objectIds,m=this.units,q=this.distance,l=new Set;d.forEach(function(a){return l.add(a)});
return new v({geometry:e.clone(c),hiddenIds:l,objectIds:e.clone(h),spatialRelationship:b,timeExtent:e.clone(f),where:a,units:m,distance:q})};var v;f.__decorate([d.property({type:String})],l.prototype,"where",void 0);f.__decorate([d.writer("where")],l.prototype,"writeWhere",null);f.__decorate([d.property({types:r.geometryTypes,json:{read:h.fromJSON,write:!0}})],l.prototype,"geometry",void 0);f.__decorate([d.property({type:String,json:{read:{source:"spatialRel",reader:m.read},write:{target:"spatialRel",
writer:m.write}}})],l.prototype,"spatialRelationship",void 0);f.__decorate([d.property({json:{write:function(a,d,b){return d[b]=c.valuesOfSet(a)},read:function(a){return c.SetFromValues(a)}}})],l.prototype,"hiddenIds",void 0);f.__decorate([d.property({type:Number,json:{write:{overridePolicy:function(a){return{enabled:0<a}}}}})],l.prototype,"distance",void 0);f.__decorate([d.property({type:[Number],json:{write:!0}})],l.prototype,"objectIds",void 0);f.__decorate([d.property({type:String,json:{read:q.read,
write:{writer:q.write,overridePolicy:function(a){return{enabled:a&&0<this.distance}}}}})],l.prototype,"units",void 0);f.__decorate([d.property({type:u,json:{write:!0}})],l.prototype,"timeExtent",void 0);f.__decorate([d.property({readOnly:!0})],l.prototype,"enabled",void 0);return l=v=f.__decorate([d.subclass("esri.views.layers.support.FeatureFilter")],l)}(v.JSONSupport)})},"esri/views/layers/support/ParsedFeatureEffect":function(){define("require exports tslib ../../../core/Error ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f32 ./cssFilterParser".split(" "),
function(w,a,f,r,u,l,v,e,c,d,h){var p=l.getLogger("esri.views.layers.support.ParsedFeatureEffect"),m={grayscale:function(a){a=1-a.amount;a=d.mat4f32.fromValues(.2126+.7874*a,.7152-.7152*a,.0722-.0722*a,0,.2126-.2126*a,.7152+.2848*a,.0722-.0722*a,0,.2126-.2126*a,.7152-.7152*a,.0722+.9278*a,0,0,0,0,1);return c.mat4.transpose(a,a)},sepia:function(a){a=1-a.amount;a=d.mat4f32.fromValues(.393+.607*a,.769-.769*a,.189-.189*a,0,.349-.349*a,.686+.314*a,.168-.168*a,0,.272-.272*a,.534-.534*a,.131+.869*a,0,0,
0,0,1);return c.mat4.transpose(a,a)},saturate:function(a){a=a.amount;a=d.mat4f32.fromValues(.213+.787*a,.715-.715*a,.072-.072*a,0,.213-.213*a,.715+.285*a,.072-.072*a,0,.213-.213*a,.715-.715*a,.072+.928*a,0,0,0,0,1);return c.mat4.transpose(a,a)},"hue-rotate":function(a){var e=Math.sin(a.angle*Math.PI/180);a=Math.cos(a.angle*Math.PI/180);e=d.mat4f32.fromValues(.213+.787*a-.213*e,.715-.715*a-.715*e,.072-.072*a+.928*e,0,.213-.213*a+.143*e,.715+.285*a+.14*e,.072-.072*a-.283*e,0,.213-.213*a-.787*e,.715-
.715*a+.715*e,.072+.928*a+.072*e,0,0,0,0,1);return c.mat4.transpose(e,e)},invert:function(a){var e=1-2*a.amount;a=a.amount;e=d.mat4f32.fromValues(e,0,0,a,0,e,0,a,0,0,e,a,0,0,0,1);return c.mat4.transpose(e,e)},brightness:function(a){a=a.amount;a=d.mat4f32.fromValues(a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,1);return c.mat4.transpose(a,a)},contrast:function(a){a=a.amount;a=d.mat4f32.fromValues(a,0,0,.5-.5*a,0,a,0,.5-.5*a,0,0,a,.5-.5*a,0,0,0,1);return c.mat4.transpose(a,a)}};return function(a){function l(){var c=
null!==a&&a.apply(this,arguments)||this;c.customTransforms=null;c.done=!0;return c}f.__extends(l,a);q=l;l.fromString=function(a){var c=[],e=null;try{for(var b=0,d=h.parse(a);b<d.length;b++){var f=d[b];"opacity"===f.type?e=f:c.push(f)}}catch(H){p.error(new r("invalid-type","Encountered an error when parsing css",H))}return new q({transforms:c,opacity:e})};l.prototype.getOpacity=function(){return v.isSome(this.opacity)?this.opacity.amount:1};l.prototype.getColorMatrix=function(){var a=this;return(this.transforms||
[]).map(function(a){return f.__assign({},a)}).reverse().reduce(function(e,d){return c.mat4.multiply(e,e,a._getFactory(d)(d))},d.mat4f32.create())};l.prototype.clone=function(){return new q({transforms:this.transforms&&this.transforms.map(function(a){return f.__assign({},a)}),customTransforms:this.customTransforms&&this.customTransforms.map(function(a){return f.__assign({},a)})})};l.prototype._getFactory=function(a){var e=m[a.type];if(e)return e;if(this.customTransforms)for(var e=function(b){if(b.type===
a.type){b=d.mat4f32.fromValues.apply(d.mat4f32,b.matrix);var e=c.mat4.transpose(b,b);return{value:function(){return e}}}},f=0,b=this.customTransforms;f<b.length;f++){var h=e(b[f]);if("object"===typeof h)return h.value}p.error("invalid-type","No effect "+a.type+" exists");return function(){return d.mat4f32.create()}};var q;f.__decorate([e.property()],l.prototype,"opacity",void 0);f.__decorate([e.property()],l.prototype,"transforms",void 0);f.__decorate([e.property()],l.prototype,"customTransforms",
void 0);return l=q=f.__decorate([e.subclass("esri.views.layers.support.ParsedFeatureEffect")],l)}(u.JSONSupport)})},"esri/views/layers/support/cssFilterParser":function(){(function(w,a){"function"===typeof define&&define.amd?define([],a):"object"===typeof module&&module.exports&&(module.exports=a())})(this,function(){function w(a,f,r,u){this.message=a;this.expected=f;this.found=r;this.location=u;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,w)}(function(a,
f){function r(){this.constructor=a}r.prototype=f.prototype;a.prototype=new r})(w,Error);w.buildMessage=function(a,f){function r(a){return a.charCodeAt(0).toString(16).toUpperCase()}function u(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+r(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+r(a)})}function l(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,
"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+r(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+r(a)})}var v={literal:function(a){return'"'+u(a.text)+'"'},"class":function(a){var c="",d;for(d=0;d<a.parts.length;d++)c+=a.parts[d]instanceof Array?l(a.parts[d][0])+"-"+l(a.parts[d][1]):l(a.parts[d]);return"["+(a.inverted?"^":"")+c+"]"},any:function(a){return"any character"},
end:function(a){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){var c=Array(a.length),d;for(d=0;d<a.length;d++){var e=d,f;f=a[d];f=v[f.type](f);c[e]=f}c.sort();if(0<c.length){for(a=d=1;d<c.length;d++)c[d-1]!==c[d]&&(c[a]=c[d],a++);c.length=a}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}(a)+" but "+(f?'"'+u(f)+'"':"end of input")+" found."};return{SyntaxError:w,parse:function(a,
f){function r(a,b){return{type:"literal",text:a,ignoreCase:b}}function u(a,b,c){return{type:"class",parts:a,inverted:b,ignoreCase:c}}function l(a){return{type:"other",description:a}}function v(b){var c=ka[b],d;if(!c){for(d=b-1;!ka[d];)d--;c=ka[d];for(c={line:c.line,column:c.column};d<b;)10===a.charCodeAt(d)?(c.line++,c.column=1):c.column++,d++;ka[b]=c}return c}function e(a,b){var c=v(a),d=v(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:d.line,column:d.column}}}function c(a){g<
ba||(g>ba&&(ba=g,pa=[]),pa.push(a))}function d(){var d,e;t++;d=g;e=k();e!==b?(a.substr(g,4)===L?(e=L,g+=4):(e=b,0===t&&c(y)),e!==b?(e=k(),e!==b?(A=d,d=null):(g=d,d=b)):(g=d,d=b)):(g=d,d=b);t--;d===b&&(e=b,0===t&&c(H));if(d===b)if(d=[],e=h(),e!==b)for(;e!==b;)d.push(e),e=h();else d=b;return d}function h(){var d,f,h,l,r,v,u,x,I;t++;f=g;h=k();h!==b?(a.substr(g,5)===Na?(l=Na,g+=5):(l=b,0===t&&c(cb)),l!==b?(r=k(),r!==b?(v=B(),v!==b?(u=k(),u!==b?(41===a.charCodeAt(g)?(x=T,g++):(x=b,0===t&&c(U)),x!==b?(I=
k(),I!==b?(A=f,f=h={type:"blur",radius:v}):(g=f,f=b)):(g=f,f=b)):(g=f,f=b)):(g=f,f=b)):(g=f,f=b)):(g=f,f=b)):(g=f,f=b);t--;f===b&&(h=b,0===t&&c(bb));d=f;if(d===b){var y,H,ia,L,ja,Z,ba,Za;t++;y=g;H=k();H!==b?(a.substr(g,11)===wa?(ia=wa,g+=11):(ia=b,0===t&&c(eb)),ia!==b?(L=k(),L!==b?(ja=p(),ja!==b?(Z=k(),Z!==b?(41===a.charCodeAt(g)?(ba=T,g++):(ba=b,0===t&&c(U)),ba!==b?(Za=k(),Za!==b?(A=y,y=H={type:"brightness",amount:ja}):(g=y,y=b)):(g=y,y=b)):(g=y,y=b)):(g=y,y=b)):(g=y,y=b)):(g=y,y=b)):(g=y,y=b);t--;
y===b&&(H=b,0===t&&c(db));d=y;if(d===b){var M,ka,Ca,ua,pa,Da,gb,Ea;t++;M=g;ka=k();ka!==b?(a.substr(g,9)===Oa?(Ca=Oa,g+=9):(Ca=b,0===t&&c(oa)),Ca!==b?(ua=k(),ua!==b?(pa=p(),pa!==b?(Da=k(),Da!==b?(41===a.charCodeAt(g)?(gb=T,g++):(gb=b,0===t&&c(U)),gb!==b?(Ea=k(),Ea!==b?(A=M,M=ka={type:"contrast",amount:pa}):(g=M,M=b)):(g=M,M=b)):(g=M,M=b)):(g=M,M=b)):(g=M,M=b)):(g=M,M=b)):(g=M,M=b);t--;M===b&&(ka=b,0===t&&c(fb));d=M;if(d===b){var F,Pa,hb,Fa,ib,Ga,jb,Ha,xa,Ia,ya,Ja,kb,Ka;t++;F=g;Pa=k();if(Pa!==b)if(a.substr(g,
12)===Gb?(hb=Gb,g+=12):(hb=b,0===t&&c(za)),hb!==b)if(Fa=k(),Fa!==b)if(ib=B(),ib!==b)if(Ga=k(),Ga!==b)if(jb=B(),jb!==b)if(Ha=k(),Ha!==b)if(xa=B(),xa===b&&(xa=null),xa!==b)if(Ia=k(),Ia!==b){var n,E,K,D,G,J,aa,V,ga,W,ha,X,ca,da,Aa,va,La,lb;n=g;35===a.charCodeAt(g)?(E=Hb,g++):(E=b,0===t&&c(Ib));if(E!==b)if(K=g,D=z(),D!==b?(G=z(),G!==b?K=D=[D,G]:(g=K,K=b)):(g=K,K=b),K!==b)if(D=g,G=z(),G!==b?(J=z(),J!==b?D=G=[G,J]:(g=D,D=b)):(g=D,D=b),D!==b)if(G=g,J=z(),J!==b?(aa=z(),aa!==b?G=J=[J,aa]:(g=G,G=b)):(g=G,G=
b),G!==b){A=n;var $a=D,ab=G;n=E=[parseInt(K.join(""),16),parseInt($a.join(""),16),parseInt(ab.join(""),16)]}else g=n,n=b;else g=n,n=b;else g=n,n=b;else g=n,n=b;if(n===b){n=g;35===a.charCodeAt(g)?(E=Hb,g++):(E=b,0===t&&c(Ib));if(E!==b)if(K=z(),K!==b)if(D=z(),D!==b)if(G=z(),G!==b){A=n;var Ma=D,Jb=G;n=E=[parseInt([K,K].join(""),16),parseInt([Ma,Ma].join(""),16),parseInt([Jb,Jb].join(""),16)]}else g=n,n=b;else g=n,n=b;else g=n,n=b;else g=n,n=b;if(n===b&&(n=g,a.substr(g,5)===ma?(E=ma,g+=5):(E=b,0===t&&
c(Qa)),E!==b?(K=k(),K!==b?(D=q(),D!==b?(G=k(),G!==b?(44===a.charCodeAt(g)?(J=ea,g++):(J=b,0===t&&c(fa)),J!==b?(aa=k(),aa!==b?(V=q(),V!==b?(ga=k(),ga!==b?(44===a.charCodeAt(g)?(W=ea,g++):(W=b,0===t&&c(fa)),W!==b?(ha=k(),ha!==b?(X=q(),X!==b?(ca=k(),ca!==b?(44===a.charCodeAt(g)?(da=ea,g++):(da=b,0===t&&c(fa)),da!==b?(Aa=k(),Aa!==b?(va=p(),va!==b?(La=k(),La!==b?(41===a.charCodeAt(g)?(lb=T,g++):(lb=b,0===t&&c(U)),lb!==b?(A=n,n=E=[255*D,255*V,255*X,va]):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,
n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b),n===b&&(n=g,a.substr(g,5)===ma?(E=ma,g+=5):(E=b,0===t&&c(Qa)),E!==b?(K=k(),K!==b?(D=m(),D!==b?(G=k(),G!==b?(44===a.charCodeAt(g)?(J=ea,g++):(J=b,0===t&&c(fa)),J!==b?(aa=k(),aa!==b?(V=m(),V!==b?(ga=k(),ga!==b?(44===a.charCodeAt(g)?(W=ea,g++):(W=b,0===t&&c(fa)),W!==b?(ha=k(),ha!==b?(X=m(),X!==b?(44===a.charCodeAt(g)?(ca=ea,g++):(ca=b,0===t&&c(fa)),ca!==b?(da=k(),da!==
b?(Aa=p(),Aa!==b?(41===a.charCodeAt(g)?(va=T,g++):(va=b,0===t&&c(U)),va!==b?(A=n,n=E=[D,V,X,Aa]):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b),n===b&&(n=g,a.substr(g,5)===ma?(E=ma,g+=5):(E=b,0===t&&c(Qa)),E!==b?(K=k(),K!==b?(D=q(),D!==b?(G=k(),G!==b?(44===a.charCodeAt(g)?(J=ea,g++):(J=b,0===t&&c(fa)),J!==b?(aa=k(),aa!==b?(V=q(),V!==b?(ga=k(),ga!==b?(44===a.charCodeAt(g)?(W=ea,g++):
(W=b,0===t&&c(fa)),W!==b?(ha=k(),ha!==b?(X=q(),X!==b?(ca=k(),ca!==b?(41===a.charCodeAt(g)?(da=T,g++):(da=b,0===t&&c(U)),da!==b?(A=n,n=E=[255*D,255*V,255*X,1]):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b),n===b&&(n=g,a.substr(g,5)===ma?(E=ma,g+=5):(E=b,0===t&&c(Qa)),E!==b?(K=k(),K!==b?(D=m(),D!==b?(G=k(),G!==b?(44===a.charCodeAt(g)?(J=ea,g++):(J=b,0===t&&c(fa)),J!==b?(aa=k(),aa!==b?(V=m(),V!==b?(ga=k(),
ga!==b?(44===a.charCodeAt(g)?(W=ea,g++):(W=b,0===t&&c(fa)),W!==b?(ha=k(),ha!==b?(X=m(),X!==b?(41===a.charCodeAt(g)?(ca=T,g++):(ca=b,0===t&&c(U)),ca!==b?(A=n,n=E=[D,V,X,1]):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b),n===b&&(n=g,a.substr(g,4)===Ra?(E=Ra,g+=4):(E=b,0===t&&c(Kb)),E!==b?(K=k(),K!==b?(D=q(),D!==b?(G=k(),G!==b?(44===a.charCodeAt(g)?(J=ea,g++):(J=b,0===t&&c(fa)),J!==b?(aa=k(),aa!==b?(V=q(),V!==b?(ga=k(),
ga!==b?(44===a.charCodeAt(g)?(W=ea,g++):(W=b,0===t&&c(fa)),W!==b?(ha=k(),ha!==b?(X=q(),X!==b?(ca=k(),ca!==b?(41===a.charCodeAt(g)?(da=T,g++):(da=b,0===t&&c(U)),da!==b?(A=n,n=E=[255*D,255*V,255*X,1]):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b),n===b&&(n=g,a.substr(g,4)===Ra?(E=Ra,g+=4):(E=b,0===t&&c(Kb)),E!==b?(K=k(),K!==b?(D=m(),D!==b?(G=k(),G!==b?(44===a.charCodeAt(g)?(J=ea,g++):(J=b,0===t&&c(fa)),J!==
b?(aa=k(),aa!==b?(V=m(),V!==b?(ga=k(),ga!==b?(44===a.charCodeAt(g)?(W=ea,g++):(W=b,0===t&&c(fa)),W!==b?(ha=k(),ha!==b?(X=m(),X!==b?(ca=k(),ca!==b?(41===a.charCodeAt(g)?(da=T,g++):(da=b,0===t&&c(U)),da!==b?(A=n,n=E=[D,V,X,1]):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b)):(g=n,n=b),n===b))))))){var Ba,qa,ra;t++;Ba=g;qa=[];Lb.test(a.charAt(g))?(ra=a.charAt(g),g++):(ra=b,0===t&&c(Mb));if(ra!==b)for(;ra!==b;)qa.push(ra),
Lb.test(a.charAt(g))?(ra=a.charAt(g),g++):(ra=b,0===t&&c(Mb));else qa=b;if(qa!==b){A=Ba;var mb=a.substring(A,g);if(!pc.has(mb)){var Fb='unknown color "'+mb+'"',Sa=void 0,Sa=void 0!==Sa?Sa:e(A,g);throw new w(Fb,null,null,Sa);}qa=Nb[mb].concat(1)}Ba=qa;t--;Ba===b&&(qa=b,0===t&&c(qc));n=Ba}}ya=n;ya===b&&(ya=null);ya!==b?(Ja=k(),Ja!==b?(41===a.charCodeAt(g)?(kb=T,g++):(kb=b,0===t&&c(U)),kb!==b?(Ka=k(),Ka!==b?(A=F,F=Pa={type:"drop-shadow",offsetX:ib,offsetY:jb,blurRadius:xa,color:ya}):(g=F,F=b)):(g=F,
F=b)):(g=F,F=b)):(g=F,F=b)}else g=F,F=b;else g=F,F=b;else g=F,F=b;else g=F,F=b;else g=F,F=b;else g=F,F=b;else g=F,F=b;else g=F,F=b;else g=F,F=b;t--;F===b&&(Pa=b,0===t&&c(oc));d=F;if(d===b){var N,Ta,nb,Ob,ob,Pb,pb,Qb;t++;N=g;Ta=k();Ta!==b?(a.substr(g,10)===Rb?(nb=Rb,g+=10):(nb=b,0===t&&c(rc)),nb!==b?(Ob=k(),Ob!==b?(ob=p(),ob!==b?(Pb=k(),Pb!==b?(41===a.charCodeAt(g)?(pb=T,g++):(pb=b,0===t&&c(U)),pb!==b?(Qb=k(),Qb!==b?(A=N,N=Ta={type:"grayscale",amount:ob}):(g=N,N=b)):(g=N,N=b)):(g=N,N=b)):(g=N,N=b)):
(g=N,N=b)):(g=N,N=b)):(g=N,N=b);t--;N===b&&(Ta=b,0===t&&c(sc));d=N;if(d===b){var O,Ua,qb,Sb,rb,Tb,sb,Ub;t++;O=g;Ua=k();if(Ua!==b)if(a.substr(g,11)===Vb?(qb=Vb,g+=11):(qb=b,0===t&&c(tc)),qb!==b)if(Sb=k(),Sb!==b){var Y,na,sa;t++;Y=g;var la,ta,Wb;t++;la=g;uc.test(a.charAt(g))?(ta=a.charAt(g),g++):(ta=b,0===t&&c(vc));ta===b&&(ta=null);ta!==b?(Wb=m(),Wb!==b?(A=la,la=ta=parseFloat(a.substring(A,g))):(g=la,la=b)):(g=la,la=b);t--;la===b&&(ta=b,0===t&&c(wc));na=la;na!==b?(sa=C(),sa!==b?(A=Y,Y=na*=sa):(g=Y,
Y=b)):(g=Y,Y=b);Y===b&&(Y=g,48===a.charCodeAt(g)?(na=Xb,g++):(na=b,0===t&&c(Yb)),na!==b?(sa=C(),sa===b&&(sa=null),sa!==b?(A=Y,Y=na=0):(g=Y,Y=b)):(g=Y,Y=b));t--;Y===b&&(na=b,0===t&&c(xc));rb=Y;rb!==b?(Tb=k(),Tb!==b?(41===a.charCodeAt(g)?(sb=T,g++):(sb=b,0===t&&c(U)),sb!==b?(Ub=k(),Ub!==b?(A=O,O=Ua={type:"hue-rotate",angle:rb}):(g=O,O=b)):(g=O,O=b)):(g=O,O=b)):(g=O,O=b)}else g=O,O=b;else g=O,O=b;else g=O,O=b;t--;O===b&&(Ua=b,0===t&&c(yc));d=O;if(d===b){var P,Va,tb,Zb,ub,$b,vb,ac;t++;P=g;Va=k();Va!==
b?(a.substr(g,7)===bc?(tb=bc,g+=7):(tb=b,0===t&&c(zc)),tb!==b?(Zb=k(),Zb!==b?(ub=p(),ub!==b?($b=k(),$b!==b?(41===a.charCodeAt(g)?(vb=T,g++):(vb=b,0===t&&c(U)),vb!==b?(ac=k(),ac!==b?(A=P,P=Va={type:"invert",amount:ub}):(g=P,P=b)):(g=P,P=b)):(g=P,P=b)):(g=P,P=b)):(g=P,P=b)):(g=P,P=b)):(g=P,P=b);t--;P===b&&(Va=b,0===t&&c(Ac));d=P;if(d===b){var Q,Wa,wb,cc,xb,dc,yb,ec;t++;Q=g;Wa=k();Wa!==b?(a.substr(g,8)===fc?(wb=fc,g+=8):(wb=b,0===t&&c(Bc)),wb!==b?(cc=k(),cc!==b?(xb=p(),xb!==b?(dc=k(),dc!==b?(41===a.charCodeAt(g)?
(yb=T,g++):(yb=b,0===t&&c(U)),yb!==b?(ec=k(),ec!==b?(A=Q,Q=Wa={type:"opacity",amount:xb}):(g=Q,Q=b)):(g=Q,Q=b)):(g=Q,Q=b)):(g=Q,Q=b)):(g=Q,Q=b)):(g=Q,Q=b)):(g=Q,Q=b);t--;Q===b&&(Wa=b,0===t&&c(Cc));d=Q;if(d===b){var R,Xa,zb,gc,Ab,hc,Bb,ic;t++;R=g;Xa=k();Xa!==b?(a.substr(g,9)===jc?(zb=jc,g+=9):(zb=b,0===t&&c(Dc)),zb!==b?(gc=k(),gc!==b?(Ab=p(),Ab!==b?(hc=k(),hc!==b?(41===a.charCodeAt(g)?(Bb=T,g++):(Bb=b,0===t&&c(U)),Bb!==b?(ic=k(),ic!==b?(A=R,R=Xa={type:"saturate",amount:Ab}):(g=R,R=b)):(g=R,R=b)):(g=
R,R=b)):(g=R,R=b)):(g=R,R=b)):(g=R,R=b)):(g=R,R=b);t--;R===b&&(Xa=b,0===t&&c(Ec));d=R;if(d===b){var S,Ya,Cb,kc,Db,lc,Eb,mc;t++;S=g;Ya=k();Ya!==b?(a.substr(g,6)===nc?(Cb=nc,g+=6):(Cb=b,0===t&&c(Fc)),Cb!==b?(kc=k(),kc!==b?(Db=p(),Db!==b?(lc=k(),lc!==b?(41===a.charCodeAt(g)?(Eb=T,g++):(Eb=b,0===t&&c(U)),Eb!==b?(mc=k(),mc!==b?(A=S,S=Ya={type:"sepia",amount:Db}):(g=S,S=b)):(g=S,S=b)):(g=S,S=b)):(g=S,S=b)):(g=S,S=b)):(g=S,S=b)):(g=S,S=b);t--;S===b&&(Ya=b,0===t&&c(Gc));d=S}}}}}}}}}return d}function p(){var a;
t++;a=q();a===b&&(a=m());t--;a===b&&0===t&&c(Za);return a}function m(){var d,e,f;t++;d=g;e=[];ia.test(a.charAt(g))?(f=a.charAt(g),g++):(f=b,0===t&&c(ja));if(f!==b)for(;f!==b;)e.push(f),ia.test(a.charAt(g))?(f=a.charAt(g),g++):(f=b,0===t&&c(ja));else e=b;if(e!==b)if(46===a.charCodeAt(g)?(f=Fb,g++):(f=b,0===t&&c(Hc)),f!==b){e=[];ia.test(a.charAt(g))?(f=a.charAt(g),g++):(f=b,0===t&&c(ja));if(f!==b)for(;f!==b;)e.push(f),ia.test(a.charAt(g))?(f=a.charAt(g),g++):(f=b,0===t&&c(ja));else e=b;e!==b?(A=d,d=
e=parseFloat(a.substring(A,g))):(g=d,d=b)}else g=d,d=b;else g=d,d=b;if(d===b){t++;d=g;e=[];ia.test(a.charAt(g))?(f=a.charAt(g),g++):(f=b,0===t&&c(ja));if(f!==b)for(;f!==b;)e.push(f),ia.test(a.charAt(g))?(f=a.charAt(g),g++):(f=b,0===t&&c(ja));else e=b;e!==b&&(A=d,e=parseInt(a.substring(A,g),10));d=e;t--;d===b&&(e=b,0===t&&c(Ca))}t--;d===b&&(e=b,0===t&&c(Ic));return d}function q(){var d,e,f;d=g;e=m();e!==b?(37===a.charCodeAt(g)?(f=Jc,g++):(f=b,0===t&&c(Kc)),f!==b?(A=d,d=e/100):(g=d,d=b)):(g=d,d=b);
return d}function C(){var d,e;t++;d=g;a.substr(g,3)===Da?(e=Da,g+=3):(e=b,0===t&&c(Lc));e!==b&&(A=d,e=1);d=e;d===b&&(d=g,a.substr(g,4)===Ea?(e=Ea,g+=4):(e=b,0===t&&c(Mc)),e!==b&&(A=d,e=.9),d=e,d===b&&(d=g,a.substr(g,3)===Fa?(e=Fa,g+=3):(e=b,0===t&&c(Nc)),e!==b&&(A=d,e=180/Math.PI),d=e,d===b&&(d=g,a.substr(g,4)===Ga?(e=Ga,g+=4):(e=b,0===t&&c(Oc)),e!==b&&(A=d,e=1/360),d=e)));t--;d===b&&(e=b,0===t&&c(Pc));return d}function B(){var d,e,f;t++;d=g;e=m();e!==b?(f=x(),f!==b?(A=d,d=e*f):(g=d,d=b)):(g=d,d=
b);d===b&&(d=g,48===a.charCodeAt(g)?(e=Xb,g++):(e=b,0===t&&c(Yb)),e!==b?(f=x(),f===b&&(f=null),f!==b?(A=d,d=0):(g=d,d=b)):(g=d,d=b));t--;d===b&&(e=b,0===t&&c(Qc));return d}function x(){var d,e;d=g;a.substr(g,2)===Ha?(e=Ha,g+=2):(e=b,0===t&&c(Rc));e!==b&&(A=d,e=1);d=e;d===b&&(d=g,a.substr(g,2)===Ia?(e=Ia,g+=2):(e=b,0===t&&c(Sc)),e!==b&&(A=d,e=96/2.54),d=e,d===b&&(d=g,a.substr(g,2)===Ja?(e=Ja,g+=2):(e=b,0===t&&c(Tc)),e!==b&&(A=d,e=96/2.54/10),d=e,d===b&&(d=g,81===a.charCodeAt(g)?(e=Uc,g++):(e=b,0===
t&&c(Vc)),e!==b&&(A=d,e=96/2.54/40),d=e,d===b&&(d=g,a.substr(g,2)===Ka?(e=Ka,g+=2):(e=b,0===t&&c(Wc)),e!==b&&(A=d,e=96),d=e,d===b&&(d=g,a.substr(g,2)===La?(e=La,g+=2):(e=b,0===t&&c(Xc)),e!==b&&(A=d,e=16),d=e,d===b&&(d=g,a.substr(g,2)===$a?(e=$a,g+=2):(e=b,0===t&&c(Yc)),e!==b&&(A=d,e=96/73),d=e))))));return d}function z(){var d;Zc.test(a.charAt(g))?(d=a.charAt(g),g++):(d=b,0===t&&c($c));return d}function k(){var d,e;t++;d=[];ab.test(a.charAt(g))?(e=a.charAt(g),g++):(e=b,0===t&&c(Ma));for(;e!==b;)d.push(e),
ab.test(a.charAt(g))?(e=a.charAt(g),g++):(e=b,0===t&&c(Ma));t--;d===b&&(e=b,0===t&&c(ad));return d}f=void 0!==f?f:{};var b={},Z={start:d},I=d,H=l("none"),L="none",y=r("none",!1),bb=l("blur()"),Na="blur(",cb=r("blur(",!1),T=")",U=r(")",!1),db=l("brightness()"),wa="brightness(",eb=r("brightness(",!1),fb=l("contrast()"),Oa="contrast(",oa=r("contrast(",!1),oc=l("drop-shadow()"),Gb="drop-shadow(",za=r("drop-shadow(",!1),sc=l("grayscale()"),Rb="grayscale(",rc=r("grayscale(",!1),yc=l("hue-rotate()"),Vb=
"hue-rotate(",tc=r("hue-rotate(",!1),Ac=l("invert()"),bc="invert(",zc=r("invert(",!1),Cc=l("opacity()"),fc="opacity(",Bc=r("opacity(",!1),Ec=l("saturate()"),jc="saturate(",Dc=r("saturate(",!1),Gc=l("sepia()"),nc="sepia(",Fc=r("sepia(",!1),Za=l("\x3cnumber-percentage\x3e"),Ca=l("\x3cinteger\x3e"),ia=/^[0-9]/,ja=u([["0","9"]],!1,!1),Ic=l("\x3cnumber\x3e"),Fb=".",Hc=r(".",!1),wc=l("\x3csignedNumber\x3e"),uc=/^[+\-]/,vc=u(["+","-"],!1,!1),Jc="%",Kc=r("%",!1),xc=l("\x3cangle\x3e"),Xb="0",Yb=r("0",!1),
Pc=l("\x3cunit\x3e"),Da="deg",Lc=r("deg",!1),Ea="grad",Mc=r("grad",!1),Fa="rad",Nc=r("rad",!1),Ga="turn",Oc=r("turn",!1),Qc=l("\x3clength\x3e"),Ha="px",Rc=r("px",!1),Ia="cm",Sc=r("cm",!1),Ja="mm",Tc=r("mm",!1),Uc="Q",Vc=r("Q",!1),Ka="in",Wc=r("in",!1),La="pc",Xc=r("pc",!1),$a="pt",Yc=r("pt",!1),Hb="#",Ib=r("#",!1),ma="rgba(",Qa=r("rgba(",!1),ea=",",fa=r(",",!1),Ra="rgb(",Kb=r("rgb(",!1),Zc=/^[0-9a-fA-F]/,$c=u([["0","9"],["a","f"],["A","F"]],!1,!1),ad=l("whitespace"),ab=/^[ \t\n\r]/,Ma=u([" ","\t",
"\n","\r"],!1,!1),qc=l("\x3cnamed-color\x3e"),Lb=/^[a-z]/,Mb=u([["a","z"]],!1,!1),g=0,A=0,ka=[{line:1,column:1}],ba=0,pa=[],t=0,ua;if("startRule"in f){if(!(f.startRule in Z))throw Error("Can't start parsing from rule \""+f.startRule+'".');I=Z[f.startRule]}var Nb={transparent:[0,0,0,0],black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,
0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,
144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,
255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],
mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,
213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rebeccapurple:[102,51,153],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,
191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]},pc=new Set(Object.keys(Nb));ua=I();if(ua!==b&&g===a.length)return ua;ua!==b&&g<a.length&&c({type:"end"});throw function(a,b,c){return new w(w.buildMessage(a,b),a,b,c)}(pa,ba<a.length?a.charAt(ba):null,ba<a.length?e(ba,ba+1):e(ba,ba));}}})},"esri/views/layers/support/Transition":function(){define("require exports tslib ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/mat4".split(" "),
function(w,a,f,r,u,l){return function(a){function e(){var c=null!==a&&a.apply(this,arguments)||this;c.from=null;c.to=null;c.duration=4E3;c.repeat=!0;c.done=!1;return c}f.__extends(e,a);c=e;e.prototype.getColorMatrix=function(){this.done=!1;if(null==this._lastTime)this._currentStep=0,this._lastTime=Date.now();else{var a=this._lastTime,c=Date.now();this._currentStep+=c-a;2147483647<=this._currentStep&&(this._currentStep=0);this._lastTime=c}var a=this._currentStep%this.duration/(this.duration/2),a=1>=
a?a:2-a,c=this.from.getColorMatrix(),e=this.to.getColorMatrix();l.mat4.multiplyScalar(c,c,1-a);l.mat4.multiplyScalar(e,e,a);!this.repeat&&this._currentStep>=this.duration&&(this.done=!0);return l.mat4.add(c,c,e)};e.prototype.getOpacity=function(){throw Error("No getOpacity definition for Transition");};e.prototype.clone=function(){var a=new c({from:this.from.clone(),to:this.to.clone(),duration:this.duration});a._lastTime=this._lastTime;a._currentStep=this._currentStep;return a};var c;f.__decorate([u.property()],
e.prototype,"from",void 0);f.__decorate([u.property()],e.prototype,"to",void 0);f.__decorate([u.property({type:Number})],e.prototype,"duration",void 0);f.__decorate([u.property({type:Boolean})],e.prototype,"repeat",void 0);return e=c=f.__decorate([u.subclass("esri.views.layers.support.Transition")],e)}(r)})},"esri/views/layers/support/popupUtils":function(){define("require exports tslib @dojo/framework/shim/array ../../../core/maybe ../../../layers/support/fieldUtils".split(" "),function(w,a,f,r,
u,l){Object.defineProperty(a,"__esModule",{value:!0});a.getRequiredFields=function(a,e){void 0===e&&(e=a.popupTemplate);return f.__awaiter(this,void 0,void 0,function(){var c,d,h,p,m,q,v,w,x;return f.__generator(this,function(z){switch(z.label){case 0:return u.isSome(e)?[4,e.getRequiredFields(a.fields)]:[2,[]];case 1:return c=z.sent(),d=e.lastEditInfoEnabled,h=a.objectIdField,p=a.typeIdField,m=a.globalIdField,q=a.relationships,r.includes(c,"*")?[2,["*"]]:d?[4,l.getFeatureEditFields(a)]:[3,3];case 2:return w=
z.sent(),[3,4];case 3:w=[],z.label=4;case 4:return v=w,x=l.fixFields(a.fields,f.__spreadArrays(c,v)),p&&x.push(p),x&&h&&l.hasField(a.fields,h)&&-1===x.indexOf(h)&&x.push(h),x&&m&&l.hasField(a.fields,m)&&-1===x.indexOf(m)&&x.push(m),q&&q.forEach(function(c){c=c.keyField;x&&c&&l.hasField(a.fields,c)&&-1===x.indexOf(c)&&x.push(c)}),[2,x]}})})};a.getFetchPopupTemplate=function(a,e){return a.popupTemplate?a.popupTemplate:u.isSome(e)&&e.defaultPopupTemplateEnabled&&u.isSome(a.defaultPopupTemplate)?a.defaultPopupTemplate:
null}})},"esri/views/support/drapedUtils":function(){define("require exports ../../geometry ../../core/maybe ../../core/unitUtils ../../renderers/support/clickToleranceUtils".split(" "),function(w,a,f,r,u,l){function v(a,d,e,l){void 0===l&&(l=new f.Extent);var c;if("2d"===e.type)c=d*e.resolution;else if("3d"===e.type){var h=e.basemapTerrain,p=h.overlayManager,p=p?p.overlayPixelSizeInMapUnits(a):1;c=h&&!h.spatialReference.equals(e.spatialReference)?u.getMetersPerUnitForSR(h.spatialReference)/u.getMetersPerUnitForSR(e.spatialReference):
d*p}d=a.x-c;h=a.y-c;p=a.x+c;a=a.y+c;e=e.spatialReference;l.xmin=Math.min(d,p);l.ymin=Math.min(h,a);l.xmax=Math.max(d,p);l.ymax=Math.max(h,a);l.spatialReference=e;return l}Object.defineProperty(a,"__esModule",{value:!0});a.createQueryGeometry=v;a.intersectsDrapedGeometry=function(a,d,f){a=f.toMap(a);if(r.isNone(a))return null;var c=l.calculateTolerance();return v(a,c,f,e).intersects(d)?a:null};var e=new f.Extent})},"*noref":1}});
define("require exports tslib ../../../AggregateGraphic ../../../geometry ../../../Graphic ../../../core/arrayUtils ../../../core/Collection ../../../core/Error ../../../core/has ../../../core/Logger ../../../core/MapUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../layers/graphics/data/projectionSupport ../../../renderers/support/clickToleranceUtils ../../../tasks/support/FeatureSet ../../../tasks/support/Query ../engine ./LayerView2D ./features/tileRenderers ./features/support/rendererUtils ./support/clusterUtils ./support/FeatureLayerProxy ./support/util ../tiling/TileStrategy ../../layers/FeatureLayerView ../../layers/LayerView ../../layers/RefreshableLayerView ../../../views/layers/support/FeatureFilter ../../layers/support/FeatureEffect ../../support/drapedUtils".split(" "),function(w,
a,f,r,u,l,v,e,c,d,h,p,m,q,C,B,x,z,k,b,Z,I,H,L,y,bb,Na,cb,T,U,db,wa,eb,fb){function Oa(a){return a&&"openPorts"in a}var oa=h.getLogger("esri.views.2d.layers.FeatureLayerView2D");return function(a){function h(){var b=null!==a&&a.apply(this,arguments)||this;b._pipelineIsUpdating=!0;b._updatingPipelineConfig=!1;b._viewStateId=-1;b._visibilityOverrides=new Set;b._effect=null;b._highlightIds=new Map;b._onGoingEdits=0;b.filter=null;b.doRefresh=q.debounce(function(){b._onGoingEdits=0;return b._proxy.refresh().catch(function(a){q.isAbortError(a)||
oa.error(a)})});b._onRenderingConfigChange=q.debounce(function(){return f.__awaiter(b,void 0,void 0,function(){var a,b,c,d,e,h,k,l,za,q,r,u,v,w,x,z,y,B,C,H;return f.__generator(this,function(f){switch(f.label){case 0:if(!this._hasRequiredSupport(this.layer))return[2];this._set("_updatingPipelineConfig",!0);a=this;b=a.effect;c=a.filter;return[4,this._effectiveRendererPromise];case 1:return d=f.sent(),e=d.renderer,h=d.aggregateFields,k=d.featureReduction,[4,this._updateRequiredFields()];case 2:return f.sent(),
l=this.availableFields.join("."),za=this._createLayerFilterHash(),q=this._createTileRendererHash(e),r=this._createFeatureDataHash(e,c,b),u=this._createMeshHash(e),v=l!==this._clientDataHash,w=za!==this._layerFilterHash,z=(x=r!==this._featureDataHash||v)&&!!this.layer.featureReduction,y=u!==this._meshHash||z,B={invalidateFeatureData:x,invalidateMesh:y,layerFilterChanged:w},C=this._createConfiguration(e,h,k,c,b),q===this._tileRendererHash?[3,9]:[4,this._initTileRenderer(e)];case 3:return f.sent(),[4,
this._createServiceOptions()];case 4:return H=f.sent(),this.effects.forEach(function(a){return m.isSome(a)&&m.isSome(a.filter)&&a.filter.enable()}),this.tileRenderer.onConfigUpdate(e),[4,this._proxy.startup(this.view.featuresTilingScheme,C,H,B)];case 5:return f.sent(),this.hasHighlight()?[4,this._proxy.setHighlight(p.keysOfMap(this._highlightIds))]:[3,7];case 6:f.sent(),f.label=7;case 7:return[4,this._onceTilesUpdated()];case 8:return f.sent(),this.tileRenderer.onConfigUpdate(e),[3,14];case 9:return this._lockAttributeTextureUpload(),
v||w||x||y?[4,this._proxy.update(C,B)]:[3,11];case 10:f.sent(),f.label=11;case 11:return w?[4,this._onceTilesUpdated()]:[3,13];case 12:f.sent(),f.label=13;case 13:this._unlockAttributeTextureUpload(),this.effects.forEach(function(a){return m.isSome(a)&&m.isSome(a.filter)&&a.filter.enable()}),this.tileRenderer.onConfigUpdate(e),this._forceAttributeTextureUpload(),f.label=14;case 14:return this._clientDataHash=l,this._layerFilterHash=za,this._tileRendererHash=q,this._meshHash=u,this._featureDataHash=
r,this.tileRenderer.invalidateLabels(),this.requestUpdate(),[2]}})})});b._updateHighlight=q.debounce(function(){return f.__awaiter(b,void 0,void 0,function(){return f.__generator(this,function(a){return[2,this._proxy.setHighlight(p.keysOfMap(this._highlightIds))]})})});return b}f.__extends(h,a);h.prototype.destroy=function(){this._proxy.destroy();m.andThen(this._updateClusterSizeTask,function(a){return a.remove()})};h.prototype.initialize=function(){var a=this;this.addResolvingPromise(this._initProxy());
this.handles.add([this.on("valueRangesChanged",function(b){a._set("_aggregateValueRanges",b.valueRanges)})])};h.prototype._initProxy=function(){return f.__awaiter(this,void 0,void 0,function(){var a,b,d;return f.__generator(this,function(e){if("stream"!==this.layer.type&&"ogc-feature"!==this.layer.type&&this.layer.isTable)throw new c("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer});a=this.layer.spatialReference;b=u.SpatialReference.WGS84;if(this.layer.featureReduction&&
!x.doesBrowserSupportProjection(a,b))throw new c("featurelayerview:featureReduction-not-supported","cannot project feature layer to WGS84",{inSpatialReference:a,outSpatialReference:b});this._proxy&&this._proxy.destroy();d=this._createClientOptions();this._set("_proxy",new bb.default({client:d}));return[2,this._proxy.when()]})})};Object.defineProperty(h.prototype,"_effectiveRendererPromise",{get:function(){var a=this,b=this._getEffectiveRenderer();b.then(function(b){return a._set("_effectiveRenderer",
b.renderer)});return b},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"labelsVisible",{get:function(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"effect",{get:function(){return m.unwrapOr(this._effect,null)},set:function(a){var b=this._effect;m.isSome(b)&&m.isSome(b.filter)&&b.filter.enabled&&m.isSome(a)&&m.isSome(a.filter)&&a.filter.enable();this._effect=a;this.notifyChange("effect")},
enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"effects",{get:function(){return this.effect&&[this.effect]||[]},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"numFeatures",{get:function(){var a=0;this._tileStrategy.tiles.forEach(function(b){a+=b.iconDisplayRecords?b.iconDisplayRecords.length:0});return a},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"renderingConfigHash",{get:function(){if(!this.layer)return null;var a=this.availableFields,
b=this.layer,c=b.definitionExpression,d=b.renderer,e=b.labelingInfo,f="feature"===b.type?b.gdbVersion:void 0,h="feature"===b.type&&b.historicMoment?b.historicMoment.getTime():void 0,k=this.timeExtent,l="stream"===b.type?""+JSON.stringify(b.geometryDefinition)+b.definitionExpression:null,p=JSON.stringify(this.clips),b=b.featureReduction&&b.featureReduction.toJSON();return JSON.stringify({filterHash:m.isSome(this.filter)&&this.filter.toJSON(),effectHash:m.isSome(this.effect)&&this.effect.toJSON(),streamFilter:l,
gdbVersion:f,definitionExpression:c,historicMoment:h,availableFields:a,renderer:d,labelingInfo:e,timeExtent:k,clipsHash:p,featureReduction:b})},enumerable:!0,configurable:!0});h.prototype.highlight=function(a){var b=this,c;a instanceof l?c=[a.getObjectId()]:"number"===typeof a?c=[a]:e.isCollection(a)?c=a.map(function(a){return a&&a.getAttribute(b.layer.objectIdField)}).toArray():Array.isArray(a)&&0<a.length&&(c="number"===typeof a[0]?a:a.map(function(a){return a&&a.getAttribute(b.layer.objectIdField)}));
if(!c||!c.length)return{remove:function(){},pause:function(){},resume:function(){}};c=c.filter(function(a){return null!=a});this._addHighlight(c);return{remove:function(){return b._removeHighlight(c)},pause:function(){return b._removeHighlight(c)},resume:function(){return b._addHighlight(c)}}};h.prototype.hasHighlight=function(){return!!this._highlightIds.size};h.prototype.hitTest=function(a,b){return this._hitTest(a,b)};h.prototype.queryStatistics=function(){return this._proxy.queryStatistics()};
h.prototype.queryFeatures=function(a,b){var c=this;return this.queryFeaturesJSON(a,b).then(function(a){a=k.fromJSON(a);a.features.forEach(function(a){a.layer=c.layer;a.sourceLayer=c.layer});return a})};h.prototype.queryFeaturesJSON=function(a,b){return this._proxy.queryFeatures(this._cleanUpQuery(a),b)};h.prototype.queryObjectIds=function(a,b){return this._proxy.queryObjectIds(this._cleanUpQuery(a),b)};h.prototype.queryFeatureCount=function(a,b){return this._proxy.queryFeatureCount(this._cleanUpQuery(a),
b)};h.prototype.queryExtent=function(a,b){return this._proxy.queryExtent(this._cleanUpQuery(a),b).then(function(a){return{count:a.count,extent:u.Extent.fromJSON(a.extent)}})};h.prototype.setVisibility=function(a,b){b?this._visibilityOverrides.delete(a):this._visibilityOverrides.add(a);this._renderingConfigHashChanged()};h.prototype.update=function(a){this._tileStrategy&&this.tileRenderer&&(this._tileStrategy.update(a)||this.requestUpdate(),a=a.state,this._viewStateId!==a.id&&(this._proxy.setViewState(a),
this._viewStateId=a.id),this.notifyChange("numFeatures"),this.notifyChange("updating"))};h.prototype.attach=function(){var a=this;this.view.timeline.record(this.layer.title+" (FeatureLayer) Attach");this._tileStrategy=new cb({cachePolicy:"purge",acquireTile:function(b){return a._acquireTile(b)},releaseTile:function(b){return a._releaseTile(b)},tileInfoView:this.view.featuresTilingScheme,buffer:0});this.handles.add(C.init(this,"renderingConfigHash",function(){return a._renderingConfigHashChanged()},
!0),"attach");"stream"!==this.layer.type&&this.handles.add(this.layer.on("edits",function(b){return f.__awaiter(a,void 0,void 0,function(){return f.__generator(this,function(a){switch(a.label){case 0:return this._onGoingEdits++,[4,this._proxy.onEdits(b)];case 1:return a.sent(),this._onGoingEdits=Math.max(0,this._onGoingEdits-1),[2]}})})}),"attach")};h.prototype.detach=function(){this.container.removeAllChildren();this.handles.remove("attach");this._updatingPipelineConfig=!1;this.tileRenderer&&(this.tileRenderer.uninstall(this.container),
this.tileRenderer=null);this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null);this._layerFilterHash=this._clientDataHash=this._meshHash=this._tileRendererHash=null};h.prototype.moveStart=function(){this.requestUpdate()};h.prototype.viewChange=function(){this.requestUpdate()};h.prototype.moveEnd=function(){this.requestUpdate()};h.prototype.fetchPopupFeatures=function(a,b){return f.__awaiter(this,void 0,void 0,function(){var c,d,e,h;return f.__generator(this,function(f){if(m.isSome(b)&&
b.clientGraphics.length&&(c=b.clientGraphics[0],c instanceof r))return[2,[c]];if(d=this.validateFetchPopupFeatures(b))return[2,q.reject(d)];if(m.isSome(b)&&0===b.clientGraphics.length)return[2,q.resolve([])];e=this.fetchClientPopupFeatures(b);if(!a)return[2,e];h=this._fetchServicePopupFeatures(a,b);return[2,q.eachAlwaysValues([e,h]).then(v.flatten)]})})};h.prototype._fetchServicePopupFeatures=function(a,b){return f.__awaiter(this,void 0,void 0,function(){var c,d,e,h,k,l,p,q,r,u,v;return f.__generator(this,
function(f){switch(f.label){case 0:return"stream"===this.layer.type?[2,[]]:[4,this.createPopupQuery(b)];case 1:c=f.sent();d=this.layer;e=d.renderer;h=m.isSome(b)?b.event:null;k=z.calculateTolerance({renderer:e,event:h});c.geometry=this.createFetchPopupFeaturesQueryGeometry(a,k);l=new Set;p=d.objectIdField;if(q=m.isSome(b)?b.clientGraphics:null)for(r=0,u=q;r<u.length;r++)v=u[r],l.add(v.attributes[p]);return[2,d.queryFeatures(c).then(function(a){return a.features.filter(function(a){return!l.has(a.attributes[p])})})]}})})};
h.prototype.createFetchPopupFeaturesQueryGeometry=function(a,b){return fb.createQueryGeometry(a,b,this.view)};h.prototype.isUpdating=function(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||0<this._onGoingEdits)};h.prototype._createClientOptions=function(){var a=this;return{setUpdating:function(b){a._set("_pipelineIsUpdating",
b)},emitEvent:function(b){a.emit(b.name,b.event)}}};h.prototype._createServiceOptions=function(){return f.__awaiter(this,void 0,void 0,function(){var a,b,c,d,e,h,k,l,m,p,q;return f.__generator(this,function(f){switch(f.label){case 0:a=this.layer;if("stream"===a.type)return[2,null];b=a.capabilities;c=a.objectIdField;d=a.fields.map(function(a){return a.toJSON()});e=a.fullExtent&&a.fullExtent.toJSON();h=Na.toJSONGeometryType(a.geometryType);k=a.timeInfo&&a.timeInfo.toJSON()||null;l=a.spatialReference?
a.spatialReference.toJSON():null;if("ogc-feature"!==a.type)return[3,1];p={capabilities:a.capabilities,collectionId:a.collectionId,url:a.url,layerDefinition:a.source.layerDefinition};return[3,5];case 1:return Oa(a.source)?[4,a.source.openPorts()]:[3,3];case 2:return q=f.sent(),[3,4];case 3:q="dynamicDataSource"in a?a.dynamicDataSource?a.parsedUrl:a.url+"/"+a.layerId:a.parsedUrl,f.label=4;case 4:p=q,f.label=5;case 5:return m=p,[2,{type:"on-demand",maxRecordCount:b.query.maxRecordCount,tileMaxRecordCount:b.query.tileMaxRecordCount,
capabilities:b,fields:d,fullExtent:e,geometryType:h,objectIdField:c,source:m,timeInfo:k,spatialReference:l}]}})})};h.prototype._createMemoryServiceOptions=function(a){return f.__awaiter(this,void 0,void 0,function(){var b;return f.__generator(this,function(c){switch(c.label){case 0:return[4,a.openPorts()];case 1:return b=c.sent(),[2,f.__assign(f.__assign({},this._createServiceOptions()),{type:"memory",source:b})]}})})};h.prototype._cleanUpQuery=function(a){a=b.from(a)||this.createQuery();a.outSpatialReference||
(a.outSpatialReference=this.view.spatialReference);return a};h.prototype._createUpdateClusterSizeTask=function(a,b){var c=this;return this.watch("_aggregateValueRanges",function(d){return f.__awaiter(c,void 0,void 0,function(){return f.__generator(this,function(c){this._updateClusterEffectiveRendererSizeVariable(a,b,d);if(!this._updatingPipelineConfig)this.tileRenderer.onConfigUpdate(this._effectiveRenderer);return[2]})})})};h.prototype._updateClusterEffectiveRendererSizeVariable=function(a,b,c){return f.__awaiter(this,
void 0,void 0,function(){var d,e,h;return f.__generator(this,function(f){a.dynamicClusterSize&&"visualVariables"in a&&a.visualVariables&&(d=y.findSizeVV(a.visualVariables),m.isSome(d)&&"cluster_count"===d.field&&(e=a.visualVariables.indexOf(d),a.visualVariables[e]=y.createClusterCountSizeVariable(b,c),h=a.clone(),h.dynamicClusterSize=!0,this._set("_effectiveRenderer",h)));return[2]})})};h.prototype._getEffectiveRenderer=function(){return f.__awaiter(this,void 0,void 0,function(){var a,b,c,d,e;return f.__generator(this,
function(f){switch(f.label){case 0:a=this.layer.renderer;b=this.layer.featureReduction;m.isSome(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null);if(!b||"cluster"!==b.type||!y.isClusterCompatibleRenderer(a))return[3,2];c=b;d=[];return[4,y.createClusterRenderer(d,this.layer.fields,a,c,this._aggregateValueRanges)];case 1:return e=f.sent(),m.andThen(this._updateClusterSizeTask,function(a){return a.remove()}),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(e,
c),[2,{renderer:e,aggregateFields:d,featureReduction:b}];case 2:return[2,{renderer:a,aggregateFields:[],featureReduction:null}]}})})};h.prototype._acquireTile=function(a){var b=this;a=this.tileRenderer.acquireTile(a);a.once("attach",function(){b.requestUpdate()});return a};h.prototype._releaseTile=function(a){this.tileRenderer.releaseTile(a)};h.prototype._initTileRenderer=function(a){return f.__awaiter(this,void 0,void 0,function(){var b;return f.__generator(this,function(c){switch(c.label){case 0:return[4,
H.createOrReuseTileRenderer(a,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer})];case 1:return b=c.sent(),this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this._proxy.tileRenderer=b,this._set("tileRenderer",b),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(a),this.requestUpdate(),[2,this.tileRenderer]}})})};h.prototype._createLayerFilterHash=function(){var a=
this.layer.definitionExpression,b="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0;return a+"."+b+"."+("feature"===this.layer.type?this.layer.gdbVersion:void 0)};h.prototype._createTileRendererHash=function(a){return("heatmap"===a.type?"heatmap":"symbol")+"."+("dot-density"===a.type)};h.prototype._createFeatureDataHash=function(a,b,c){a=a.getAttributeHash();b=JSON.stringify(b);c=m.isSome(c)&&JSON.stringify(c.filter);var d=JSON.stringify(this.timeExtent),
e="";this._visibilityOverrides.forEach(function(a){return e+=a});return a+"."+b+"."+c+"."+d+"."+e};h.prototype._createMeshHash=function(a){var b=Z.getVVFlags("visualVariables"in a&&a.visualVariables||[]),c=this.layer.labelingInfo&&this.layer.labelingInfo.map(function(a){return JSON.stringify(a)}).join("/"),d=JSON.stringify(this.layer.featureReduction);return a.getMeshHash()+"."+b+"."+c+"."+d};h.prototype._injectOverrides=function(a){var b=m.isSome(a)?a.timeExtent:null,b=this.timeExtent&&b?this.timeExtent.intersection(b):
this.timeExtent||b;if(!this._visibilityOverrides.size&&!b)return a;a=m.isSome(a)&&a.clone()||new wa;a.hiddenIds=this._visibilityOverrides;a.timeExtent=b;return a};h.prototype._createConfiguration=function(a,b,c,d,e){a=L.simplifyVVRenderer(a);var f=this.layer.labelingInfo,h="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,k="feature"===this.layer.type?this.layer.gdbVersion:void 0,l=Array(Z.definitions.MAX_FILTERS);d=this._injectOverrides(d);l[0]=m.isSome(d)?
d.toJSON():null;l[1]=m.isSome(e)&&e.filter?e.filter.toJSON():null;return{featureReduction:m.andThen(c,function(a){a=a.toJSON();"showLabels"in a&&!a.showLabels&&a.drawingInfo&&(a.drawingInfo.labelingInfo=null);return a}),definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,labelingInfo:f&&f.map(function(a){return a.toJSON()}),renderer:a.toJSON(),gdbVersion:k,historicMoment:h,devicePixelRatio:window.devicePixelRatio||1,filters:l,aggregateFields:b}};h.prototype._hasRequiredSupport=
function(a){return"dot-density"!==a.renderer.type||d("esri-webgl-texture-float")?!0:(oa.error(new c("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),!1)};h.prototype._onceTilesUpdated=function(){this.requestUpdate();return C.whenFalseOnce(this,"_pipelineIsUpdating",!0)};h.prototype._lockAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.lockAttributeTextureUpload()};h.prototype._unlockAttributeTextureUpload=function(){this.tileRenderer&&
this.tileRenderer.unlockAttributeTextureUpload()};h.prototype._forceAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()};h.prototype._renderingConfigHashChanged=function(){var a=this;this.view.timeline.begin(this.layer.title+" (FeatureLayer) Initial Pipeline Config");var b=this._onRenderingConfigChange();this._updatingPromise=b;var c=function(){b===a._updatingPromise&&a._set("_updatingPipelineConfig",!1);a.view&&a.view.timeline.end(a.layer.title+" (FeatureLayer) Initial Pipeline Config")};
b.then(c).catch(function(a){q.isAbortError(a)||oa.error(a);c()})};h.prototype._addHighlight=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(this._highlightIds.has(c)){var d=this._highlightIds.get(c);this._highlightIds.set(c,d+1)}else this._highlightIds.set(c,1)}this._updateHighlight().catch(function(a){q.isAbortError(a)||oa.error(a)})};h.prototype._removeHighlight=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(this._highlightIds.has(c)){var d=this._highlightIds.get(c)-1;0===d?this._highlightIds.delete(c):
this._highlightIds.set(c,d)}}this._updateHighlight().catch(function(a){q.isAbortError(a)||oa.error(a)})};h.prototype._createHittestResult=function(a){a.layer=this.layer;a.sourceLayer=this.layer;m.isSome(a.geometry)&&(a.geometry.spatialReference=this.view.spatialReference);return a};h.prototype._queryFeature=function(a){return f.__awaiter(this,void 0,void 0,function(){var c,d,e;return f.__generator(this,function(f){switch(f.label){case 0:return[4,this._proxy.getObjectId(a)];case 1:return c=f.sent(),
[4,this._proxy.queryFeatures(new b({objectIds:[c],outSpatialReference:this.view.spatialReference,returnGeometry:!0}))];case 2:return d=f.sent(),(e=d.features[0])?[2,e]:[2,null]}})})};h.prototype._hitTest=function(a,b){return f.__awaiter(this,void 0,void 0,function(){var c,d,e,h,k=this;return f.__generator(this,function(f){switch(f.label){case 0:return this.suspended||!this.tileRenderer?[2,null]:[4,this.tileRenderer.hitTest(a,b)];case 1:return c=f.sent(),0!==c.length?[3,3]:[4,q.after(1)];case 2:return f.sent(),
[2,null];case 3:return d=c[0],1===(d&2147483648)>>>31?[3,5]:[4,this._queryFeature(d)];case 4:return e=f.sent(),[2,m.andThen(e,function(a){return k._createHittestResult(l.fromJSON(a))})];case 5:return[4,this._proxy.getAggregate(d)];case 6:return h=f.sent(),m.isNone(h)?[2,null]:m.isSome(h.referenceId)?[4,this._queryFeature(h.referenceId)]:[3,8];case 7:return e=f.sent(),[2,m.andThen(e,function(a){return k._createHittestResult(l.fromJSON(a))})];case 8:return[2,this._createHittestResult(r.fromJSON(h))]}})})};
f.__decorate([B.property()],h.prototype,"_proxy",void 0);f.__decorate([B.property()],h.prototype,"_pipelineIsUpdating",void 0);f.__decorate([B.property()],h.prototype,"_updatingPipelineConfig",void 0);f.__decorate([B.property()],h.prototype,"_effectiveRenderer",void 0);f.__decorate([B.property()],h.prototype,"_aggregateValueRanges",void 0);f.__decorate([B.property()],h.prototype,"_onGoingEdits",void 0);f.__decorate([B.property({dependsOn:["layer.renderer","layer.featureReduction"]})],h.prototype,
"_effectiveRendererPromise",null);f.__decorate([B.property({dependsOn:["suspended","layer.labelingInfo","layer.labelsVisible"]})],h.prototype,"labelsVisible",null);f.__decorate([B.property({type:wa})],h.prototype,"filter",void 0);f.__decorate([B.property({type:eb})],h.prototype,"effect",null);f.__decorate([B.property({readOnly:!0,dependsOn:["effect"]})],h.prototype,"effects",null);f.__decorate([B.property()],h.prototype,"numFeatures",null);f.__decorate([B.property({dependsOn:"layer.renderer availableFields layer.definitionExpression layer.gdbVersion? layer.geometryDefinition? layer.historicMoment? layer.labelingInfo layer.featureReduction filter effect timeExtent clips".split(" ")})],
h.prototype,"renderingConfigHash",null);f.__decorate([B.property()],h.prototype,"tileRenderer",void 0);f.__decorate([B.property({dependsOn:"layer.renderer tileRenderer.updating _updatingPipelineConfig _pipelineIsUpdating _updatingRequiredFieldsPromise _proxy _proxy.isReady? _onGoingEdits".split(" ")})],h.prototype,"updating",void 0);return h=f.__decorate([B.subclass("esri.views.2d.layers.FeatureLayerView2D")],h)}(T.FeatureLayerView(db.RefreshableLayerView(I.LayerView2DMixin(U))))});