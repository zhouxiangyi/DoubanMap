// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../materialKey/MaterialKey ./WGLBaseTextTemplate ./WGLMeshTemplate ../../util/BidiText".split(" "),function(e,h,l,d,m,g,r,n,p,k){Object.defineProperty(h,"__esModule",{value:!0});e=function(e){function f(c,a,f,t,g,h,k,l,n,p,u,v,w,x,y,z,A,B,q){void 0===q&&(q=!1);var b=e.call(this)||this;b._xOffset=d.pt2px(v);b._yOffset=d.pt2px(w);b._decoration=n||"none";b._color=t;b._haloColor=g;b._haloSize=Math.min(Math.floor(5*
d.pt2px(d.toPt(f))),127);b._size=Math.min(Math.round(d.pt2px(a)),127);a=Math.min(Math.round(d.pt2px(a)),127);b._referenceSize=Math.round(Math.sqrt(256*a));b._scale=b._size/24;b._angle=u;b._justify=m.getJustification(h||"center");b._xAlignD=m.getXAnchorDirection(h||"center");b._yAlignD=m.getYAnchorDirection(k||"baseline");b._baseline="baseline"===(k||"baseline");b._bitset=(1===l?1:0)|(p?1:0)<<1;c=r.MaterialKeyBase.load(r.createMaterialKey(b.geometryType,c,!1));c.sdf=!0;b._materialKey=c.data;b.symbolId=
x;b._lineWidth=d.pt2px(y)||512;b._lineHeight=z||1;b._textPlacement=A;b.effects=B;b._isCIM=q;return b}l.__extends(f,e);f.fromText=function(c,a,d){c=new f(c,a.font.size,a.haloSize||0,a.color&&g.premultiplyAlphaRGBA(a.color)||0,a.haloColor&&g.premultiplyAlphaRGBA(a.haloColor)||0,a.horizontalAlignment,a.verticalAlignment,0,a.font.decoration,!1,a.angle||0,a.xoffset,a.yoffset,a.id,a.lineWidth,a.lineHeight,null,null,!1);a=k.bidiText(a.text)[1];c.bindTextInfo(d,a);return c};f.fromCIMText=function(c,a,d){var e=
a.scaleFactor||1;c=new f(c,a.size*a.sizeRatio*e,a.outlineSize*a.sizeRatio,g.premultiplyAlphaRGBA(a.color),g.premultiplyAlphaRGBA(a.outlineColor),a.horizontalAlignment,a.verticalAlignment,a.alignment,a.decoration,a.colorLocked,a.angle,a.offsetX*a.sizeRatio*e,a.offsetY*a.sizeRatio*e,a.materialHash,512,1,a.markerPlacement,a.effects,!0);a=k.bidiText(a.text)[1];c.bindTextInfo(d,a);return c};return f}(n.default(p.default));h.default=e});