// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/maybe ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../support/geometryUtils ../../support/LaserLineRenderer ../../webgl-engine/shaders/Laserlines.glsl".split(" "),function(e,f,b,h,g,d,k,l){Object.defineProperty(f,"__esModule",{value:!0});e=function(){function a(c){this.view=null;this._angleCutoff=l.defaultAngleCutoff;this._style={};this._heightManifoldTarget=g.vec3f64.create();this._heightManifoldEnabled=!1;this._intersectsLine=
d.lineSegment.create();this._intersectsLineInfinite=this._intersectsLineEnabled=!1;this._pathVerticalPlaneBuffers=null;var a=!0,b;for(b in c)b in this?"attached"===b?a=c[b]:this[b]=c[b]:console.error("Cannot set unknown property",b);this.attached=a}a.prototype.destroy=function(){this.disposeRenderer()};Object.defineProperty(a.prototype,"attached",{get:function(){return!!this.renderer},set:function(c){c?this.ensureRenderer():this.disposeRenderer()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"angleCutoff",{get:function(){return this._angleCutoff},set:function(c){this._angleCutoff!==c&&(this._angleCutoff=c,this.syncAngleCutoff())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"style",{get:function(){return this._style},set:function(c){this._style=c;this.syncStyle()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"heightManifoldTarget",{get:function(){return this._heightManifoldEnabled?this._heightManifoldTarget:null},set:function(c){b.isSome(c)?(h.vec3.copy(this._heightManifoldTarget,
c),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1;this.syncRenderer();this.syncHeightManifold()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"intersectsWorldUpAtLocation",{set:function(c){if(b.isNone(c))this.intersectsLine=null;else{var a=this.view.renderCoordsHelper.worldUpAtPosition(c,m);this.intersectsLine=d.lineSegment.fromValues(c,a);this.intersectsLineInfinite=!0}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"intersectsLine",{get:function(){return this._intersectsLineEnabled?
this._intersectsLine:null},set:function(a){b.isSome(a)?(d.lineSegment.copy(a,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1;this.syncIntersectsLine();this.syncRenderer()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"intersectsLineInfinite",{get:function(){return this._intersectsLineInfinite},set:function(a){this._intersectsLineInfinite=a;this.syncIntersectsLineInfinite()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"pathVerticalPlane",{get:function(){return this._pathVerticalPlaneBuffers},set:function(a){this._pathVerticalPlaneBuffers=a;this.syncPathVerticalPlane();this.syncRenderer()},enumerable:!0,configurable:!0});a.prototype.syncRenderer=function(){this.attached&&(this._intersectsLineEnabled||this._heightManifoldEnabled||b.isSome(this._pathVerticalPlaneBuffers))?this.ensureRenderer():this.disposeRenderer()};a.prototype.ensureRenderer=function(){b.isSome(this.renderer)||(this.renderer=new k.LaserLineRenderer(this.view.renderCoordsHelper,
void 0,{contrastControlEnabled:!0}),this.syncStyle(),this.syncHeightManifold(),this.syncIntersectsLine(),this.syncIntersectsLineInfinite(),this.syncPathVerticalPlane(),this.syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this.renderer.renderSlots,this.renderer))};a.prototype.syncStyle=function(){b.isNone(this.renderer)||(this.renderer.setParameterValues(this._style),null!=this._style.intersectsLineRadius&&(this.renderer.intersectsLineRadius=this._style.intersectsLineRadius))};
a.prototype.syncAngleCutoff=function(){b.isNone(this.renderer)||this.renderer.setParameterValues({angleCutoff:this._angleCutoff})};a.prototype.syncHeightManifold=function(){!b.isNone(this.renderer)&&(this.renderer.heightManifoldEnabled=this._heightManifoldEnabled)&&(this.renderer.heightManifoldTarget=this._heightManifoldTarget)};a.prototype.syncIntersectsLine=function(){!b.isNone(this.renderer)&&(this.renderer.intersectsLineEnabled=this._intersectsLineEnabled)&&(this.renderer.intersectsLineSegment=
this._intersectsLine)};a.prototype.syncIntersectsLineInfinite=function(){b.isNone(this.renderer)||(this.renderer.intersectsLineInfinite=this._intersectsLineInfinite)};a.prototype.syncPathVerticalPlane=function(){b.isNone(this.renderer)||(this.renderer.pathVerticalPlaneEnabled=b.isSome(this._pathVerticalPlaneBuffers),b.isSome(this._pathVerticalPlaneBuffers)&&(this.renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))};a.prototype.disposeRenderer=function(){b.isSome(this.renderer)&&this.view._stage&&
(this.view._stage.removeRenderPlugin(this.renderer),this.renderer=null)};return a}();f.LaserlineVisualElement=e;var m=g.vec3f64.create()});