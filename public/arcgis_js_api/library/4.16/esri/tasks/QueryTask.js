// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../geometry ../core/accessorSupport/decorators ./Task ./operations/query ./operations/queryAttachments ./operations/queryRelatedRecords ./support/AttachmentQuery ./support/FeatureSet ./support/Query ./support/RelationshipQuery".split(" "),function(t,u,c,l,e,m,f,g,n,p,h,q,r){return function(k){function d(a){a=k.call(this,a)||this;a.gdbVersion=null;a.source=null;a.sourceSpatialReference=null;return a}c.__extends(d,k);d.prototype.execute=function(a,b){return this.executeJSON(a,
b).then(function(a){return h.fromJSON(a)})};d.prototype.executeJSON=function(a,b){return f.executeQuery(this.parsedUrl,this._normalizeQuery(a),this.sourceSpatialReference,c.__assign(c.__assign({},this.requestOptions),b)).then(function(a){return a.data})};d.prototype.executeForCount=function(a,b){return f.executeQueryForCount(this.parsedUrl,this._normalizeQuery(a),c.__assign(c.__assign({},this.requestOptions),b)).then(function(a){return a.data.count})};d.prototype.executeForExtent=function(a,b){return f.executeQueryForExtent(this.parsedUrl,
this._normalizeQuery(a),c.__assign(c.__assign({},this.requestOptions),b)).then(function(a){return{count:a.data.count,extent:l.Extent.fromJSON(a.data.extent)}})};d.prototype.executeForIds=function(a,b){return f.executeQueryForIds(this.parsedUrl,this._normalizeQuery(a),c.__assign(c.__assign({},this.requestOptions),b)).then(function(a){return a.data.objectIds})};d.prototype.executeRelationshipQuery=function(a,b){a=r.from(a);if(this.gdbVersion||this.source)a=a.clone().set({gdbVersion:this.gdbVersion||
a.gdbVersion,source:this.source||a.source});return n.executeRelationshipQuery(this.parsedUrl,a,c.__assign(c.__assign({},this.requestOptions),b)).then(function(a){var b=a.data,c={};Object.keys(b).forEach(function(a){return c[a]=h.fromJSON(b[a])});return c})};d.prototype.executeAttachmentQuery=function(a,b){var d=this;return g.executeAttachmentQuery(this.parsedUrl,p.from(a),c.__assign(c.__assign({},this.requestOptions),b)).then(function(a){return g.processAttachmentQueryResult(a.data.attachmentGroups,
d.parsedUrl.path)})};d.prototype._normalizeQuery=function(a){var b=q.from(a);return this.gdbVersion||this.source?(b===a?b.clone():b).set({gdbVersion:this.gdbVersion||a.gdbVersion,source:this.source||a.source}):b};c.__decorate([e.property()],d.prototype,"gdbVersion",void 0);c.__decorate([e.property()],d.prototype,"source",void 0);c.__decorate([e.property()],d.prototype,"sourceSpatialReference",void 0);return d=c.__decorate([e.subclass("esri.tasks.QueryTask")],d)}(m)});