// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../../core/maybe ../../../core/workers ../../../core/libs/gl-matrix-2/vec3f64 ./ElevationSamplerWorker ../../../layers/support/ElevationSampler ../../../views/3d/support/geometryUtils ../../../views/3d/support/geometryUtils/triangle".split(" "),function(B,l,g,m,q,r,t,u,n,v){function w(){++h;c&&(clearTimeout(c),c=0);return f?f:f=q.open("ElevationSamplerWorker").catch(function(){return null})}function x(d){--h;m.isSome(d)&&0===h&&(c=setTimeout(function(){d.close();f=
null;c=0},y))}Object.defineProperty(l,"__esModule",{value:!0});l.create=function(d,c){return g.__awaiter(this,void 0,void 0,function(){var a,b;return g.__generator(this,function(e){switch(e.label){case 0:return[4,w()];case 1:return a=e.sent(),[4,z.createIndex(d,a)];case 2:return b=e.sent(),x(a),[2,new A(d,b,c)]}})})};var A=function(d){function c(a,c,e){var b=d.call(this)||this;b.rindex=c;b.demResolution={min:0,max:0};b.spatialReference=a.spatialReference.clone();b.extent=a.extent.clone();b.noDataValue=
m.isSome(e)&&e.noDataValue||0;return b}g.__extends(c,d);c.prototype.elevationAt=function(a){a=this.projectIfRequired(a,this.spatialReference);var b=Number.NEGATIVE_INFINITY;n.ray.fromValues([a.x,a.y,0],[0,0,-1],p);this.rindex.search({minX:a.x,maxX:a.x,minY:a.y,maxY:a.y},function(a){v.intersectRay(a,p,k)&&k[2]>b&&(b=k[2])});return b===Number.NEGATIVE_INFINITY?this.noDataValue:b};return c}(u.ElevationSamplerBase),z=new t.default,h=0,f=null,c=0,y=1E4,p=n.ray.fromValues([0,0,0],[0,0,-1]),k=r.vec3f64.create()});