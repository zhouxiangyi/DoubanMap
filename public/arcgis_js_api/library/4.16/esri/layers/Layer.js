// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../config ../geometry ../request ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators @dojo/framework/shim/Promise".split(" "),function(k,w,a,m,e,n,p,q,r,t,h,u,c){var v=0,l=h.getLogger("esri.layers.Layer");return function(g){function b(){var d=null!==g&&g.apply(this,arguments)||this;d.attributionDataUrl=null;d.fullExtent=new e.Extent(-180,-90,180,90,e.SpatialReference.WGS84);d.legendEnabled=
!0;d.listMode="show";d.blendMode="normal";d.opacity=1;d.parent=null;d.popupEnabled=!0;d.attributionVisible=!0;d.spatialReference=e.SpatialReference.WGS84;d.title=null;d.type=null;d.url=null;d.visible=!0;return d}a.__extends(b,g);b.fromArcGISServerUrl=function(d){return a.__awaiter(this,void 0,void 0,function(){var b,c,f;return a.__generator(this,function(a){switch(a.label){case 0:return b="string"===typeof d?{url:d}:d,[4,new Promise(function(d,a){k(["./support/arcgisLayers"],d,a)})];case 1:c=a.sent(),
a.label=2;case 2:return a.trys.push([2,4,,5]),[4,c.fromUrl(b)];case 3:return[2,a.sent()];case 4:throw f=a.sent(),l.error("#fromArcGISServerUrl({ url: '"+b.url+"'})","Failed to create layer from arcgis server url",f),f;case 5:return[2]}})})};b.fromPortalItem=function(d){return a.__awaiter(this,void 0,void 0,function(){var b,c,f,e,g,h;return a.__generator(this,function(a){switch(a.label){case 0:return b="portalItem"in d?d:{portalItem:d},[4,new Promise(function(a,b){k(["../portal/support/portalLayers"],
a,b)})];case 1:c=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,c.fromItem(b)];case 3:return[2,a.sent()];case 4:throw f=a.sent(),g=(e=b&&b.portalItem)&&e.id||"unset",h=e&&e.portal&&e.portal.url||m.portalUrl,l.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+h+"', id: '"+g+"')",f),f;case 5:return[2]}})})};b.prototype.initialize=function(){var a=this;this.when().catch(function(b){h.getLogger(a.declaredClass).error("#load()","Failed to load layer (title: '"+a.title+
"', id: '"+a.id+"')",b)})};Object.defineProperty(b.prototype,"hasAttributionData",{get:function(){return null!=this.attributionDataUrl},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return Date.now().toString(16)+"-layer-"+v++},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"parsedUrl",{get:function(){var a=this._get("url");return a?u.urlToObject(a):null},enumerable:!0,configurable:!0});b.prototype.fetchAttributionData=function(){return a.__awaiter(this,
void 0,void 0,function(){var b,c;return a.__generator(this,function(a){switch(a.label){case 0:return b=this.attributionDataUrl,this.hasAttributionData&&b?[4,n(b,{query:{f:"json"},responseType:"json"})]:[3,2];case 1:return c=a.sent(),[2,c.data];case 2:throw new p("layer:no-attribution-data","Layer does not have attribution data");}})})};a.__decorate([c.property({type:String})],b.prototype,"attributionDataUrl",void 0);a.__decorate([c.property({type:e.Extent})],b.prototype,"fullExtent",void 0);a.__decorate([c.property({readOnly:!0,
dependsOn:["attributionDataUrl"]})],b.prototype,"hasAttributionData",null);a.__decorate([c.property({type:String})],b.prototype,"id",null);a.__decorate([c.property({type:Boolean,nonNullable:!0})],b.prototype,"legendEnabled",void 0);a.__decorate([c.property({type:["show","hide","hide-children"]})],b.prototype,"listMode",void 0);a.__decorate([c.property({type:"average color-burn color-dodge color darken destination-atop destination-in destination-out destination-over difference exclusion hard-light hue invert lighten lighter luminosity minus multiply normal overlay plus reflect saturation screen soft-light source-atop source-in source-out vivid-light xor".split(" "),
nonNullable:!0})],b.prototype,"blendMode",void 0);a.__decorate([c.property({type:Number,range:{min:0,max:1},nonNullable:!0})],b.prototype,"opacity",void 0);a.__decorate([c.property()],b.prototype,"parent",void 0);a.__decorate([c.property({readOnly:!0,dependsOn:["url"]})],b.prototype,"parsedUrl",null);a.__decorate([c.property({type:Boolean})],b.prototype,"popupEnabled",void 0);a.__decorate([c.property({type:Boolean})],b.prototype,"attributionVisible",void 0);a.__decorate([c.property({type:e.SpatialReference})],
b.prototype,"spatialReference",void 0);a.__decorate([c.property({type:String})],b.prototype,"title",void 0);a.__decorate([c.property({type:String,readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0);a.__decorate([c.property()],b.prototype,"url",void 0);a.__decorate([c.property({type:Boolean,nonNullable:!0})],b.prototype,"visible",void 0);return b=a.__decorate([c.subclass("esri.layers.Layer")],b)}(q.EventedMixin(r.IdentifiableMixin(t)))});