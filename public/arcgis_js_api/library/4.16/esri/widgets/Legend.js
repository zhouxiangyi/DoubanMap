// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Legend/LegendViewModel":function(){define("require exports tslib ../../intl ../../core/Accessor ../../core/Collection ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./support/ActiveLayerInfo".split(" "),function(t,g,f,n,m,c,e,h,q,b){var a=c.ofType(b),d="esri.layers.CSVLayer esri.layers.FeatureLayer esri.layers.GeoJSONLayer esri.layers.GeoRSSLayer esri.layers.GroupLayer esri.layers.HeatmapLayer esri.layers.ImageryLayer esri.layers.ImageryTileLayer esri.layers.MapImageLayer esri.layers.OGCFeatureLayer esri.layers.PointCloudLayer esri.layers.StreamLayer esri.layers.SceneLayer esri.layers.TileLayer esri.layers.WMSLayer esri.layers.WMTSLayer".split(" "),
k=["view.basemapView.baseLayerViews","view.groundView.layerViews","view.layerViews","view.basemapView.referenceLayerViews"];return function(c){function l(b){b=c.call(this,b)||this;b._handles=new e;b._layerViewByLayerId={};b._layerInfosByLayerViewId={};b._activeLayerInfosByLayerViewId={};b.activeLayerInfos=new a;b.basemapLegendVisible=!1;b.groundLegendVisible=!1;b.keepCacheOnDestroy=!1;b.respectLayerVisibility=!0;b.layerInfos=[];b.view=null;return b}f.__extends(l,c);l.prototype.initialize=function(){var a=
this;this._handles.add(h.init(this,"view",this._viewHandles),"view");this._handles.add(n.onLocaleChange(function(){return a._refresh()}))};l.prototype.destroy=function(){this._destroyViewActiveLayerInfos();this._handles.destroy();this.view=this._handles=null};Object.defineProperty(l.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});l.prototype._viewHandles=function(){this._handles.remove("state");this.view&&this._handles.add(h.init(this,
"state",this._stateHandles),"state")};l.prototype._stateHandles=function(){this._resetAll();"ready"===this.state&&this._watchPropertiesAndAllLayerViews()};l.prototype._resetAll=function(){this._handles.remove(["all-layer-views","legend-properties"]);this._destroyViewActiveLayerInfos();this.activeLayerInfos.removeAll()};l.prototype._destroyViewActiveLayerInfos=function(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)};l.prototype._destroyViewActiveLayerInfo=
function(a){this._handles.remove(a);var b=this._activeLayerInfosByLayerViewId[a];delete this._activeLayerInfosByLayerViewId[a];b&&b.parent&&b.parent.children.remove(b)};l.prototype._watchPropertiesAndAllLayerViews=function(){var a=this.view.allLayerViews;a.length&&this._refresh();this._handles.add(a.on("change",this._allLayerViewsChangeHandle.bind(this)),"all-layer-views");this._handles.add(h.watch(this,"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),
"legend-properties")};l.prototype._allLayerViewsChangeHandle=function(a){var b=this;a.removed.forEach(function(a){return b._destroyViewActiveLayerInfo(a.uid)});this._refresh()};l.prototype._propertiesChangeHandle=function(){this._destroyViewActiveLayerInfos();this._refresh()};l.prototype._refresh=function(){this._layerInfosByLayerViewId={};this.activeLayerInfos.removeAll();this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,
this);this._sortActiveLayerInfos(this.activeLayerInfos)};l.prototype._sortActiveLayerInfos=function(a){var b=this;if(!(2>a.length)){var d=[];a.forEach(function(k){if(!k.parent){var l=k.layer.parent;(l=(l=l&&"uid"in l&&b._layerViewByLayerId[l.uid])&&b._activeLayerInfosByLayerViewId[l.uid])&&-1!==a.indexOf(l)&&(d.push(k),k.parent=l,l.children.add(k),b._sortActiveLayerInfos(l.children))}});a.removeMany(d);var k={};this.view.allLayerViews.forEach(function(a,b){return k[a.layer.uid]=b});a.sort(function(a,
b){return(k[b.layer.uid]||0)-(k[a.layer.uid]||0)})}};l.prototype._generateLayerViews=function(){var a=[];k.filter(this._filterLayerViews,this).map(this.get,this).filter(function(a){return null!=a}).forEach(this._collectLayerViews("layerViews",a));return a};l.prototype._filterLayerViews=function(a){var b=!this.groundLegendVisible&&"view.groundView.layerViews"===a;return!(!this.basemapLegendVisible&&("view.basemapView.baseLayerViews"===a||"view.basemapView.referenceLayerViews"===a))&&!b};l.prototype._collectLayerViews=
function(a,b){var d=function(k){k&&k.forEach(function(k){b.push(k);d(k[a])});return b};return d};l.prototype._filterLayerViewsByLayerInfos=function(a){var b=this,d=this.layerInfos;return d&&d.length?d.some(function(d){return b._hasLayerInfo(d,a)}):!0};l.prototype._hasLayerInfo=function(a,b){var d=this._isLayerUIDMatching(a.layer,b.layer.uid);d&&(this._layerInfosByLayerViewId[b.uid]=a);return d};l.prototype._isLayerUIDMatching=function(a,b){return a&&(a.uid===b||this._hasLayerUID(a.layers,b))};l.prototype._hasLayerUID=
function(a,b){var d=this;return a&&a.some(function(a){return d._isLayerUIDMatching(a,b)})};l.prototype._isLayerViewSupported=function(a){return-1<d.indexOf(a.layer.declaredClass)?(this._layerViewByLayerId[a.layer.uid]=a,!0):!1};l.prototype._generateActiveLayerInfo=function(a){var b=this;this._isLayerActive(a)?this._buildActiveLayerInfo(a):(this._handles.remove(a.uid),this._handles.add(h.watch(a,"suspended, layer.legendEnabled",function(){return b._layerActiveHandle(a)}),a.uid))};l.prototype._layerActiveHandle=
function(a){this._isLayerActive(a)&&(this._handles.remove(a.uid),this._buildActiveLayerInfo(a))};l.prototype._isLayerActive=function(a){return this.respectLayerVisibility?!a.suspended&&a.get("layer.legendEnabled"):!0};l.prototype._buildActiveLayerInfo=function(a){var d=this,k=a.layer,l=a.uid,c=this._layerInfosByLayerViewId[l],u=this._activeLayerInfosByLayerViewId[l];u||(u=new b({layer:k,layerView:a,title:c&&void 0!==c.title?c.title:k.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,
keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:c&&c.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[l]=u);u.parent||(c=(c=k.parent)&&this._layerViewByLayerId[c.uid],u.parent=c&&this._activeLayerInfosByLayerViewId[c.uid]);if(!this._handles.has(l)){var c=h.watch(k,"title",function(b){return d._titleHandle(b,u,a)}),p=h.watch(k,"renderer?, opacity",function(){return d._constructLegendElements(u,a)}),e=h.whenTrue(this.view,"stationary",function(){return d._scaleHandle(u,a)}),q=h.watch(a,
"_effectiveRenderer",function(){return d._constructLegendElements(u,a)}),c=[c,p,e,q];this.respectLayerVisibility&&(p=h.watch(a,"suspended",function(b){return d._suspendedHandle(b,u,a)}),k=h.watch(k,"legendEnabled",function(b){return d._legendEnabledHandle(b,u,a)}),c.push(p,k));this._handles.add(c,l)}u.isScaleDriven||this._constructLegendElements(u,a);this._addActiveLayerInfo(u,a)};l.prototype._titleHandle=function(a,b,d){b.title=a;this._constructLegendElements(b,d)};l.prototype._legendEnabledHandle=
function(a,b,d){a?this._addActiveLayerInfo(b,d):this._removeActiveLayerInfo(b)};l.prototype._suspendedHandle=function(a,b,d){a?this._removeActiveLayerInfo(b):this._addActiveLayerInfo(b,d)};l.prototype._scaleHandle=function(a,b){a.isScaleDriven&&this._constructLegendElements(a,b)};l.prototype._addActiveLayerInfo=function(a,b){this._isLayerActive(b)&&-1===this.activeLayerInfos.indexOf(a)&&((b=a.parent)?(-1===b.children.indexOf(a)&&b.children.push(a),this._sortActiveLayerInfos(b.children)):(this.activeLayerInfos.add(a),
this._sortActiveLayerInfos(this.activeLayerInfos)))};l.prototype._removeActiveLayerInfo=function(a){var b=a.parent;b?b.children.remove(a):this.activeLayerInfos.remove(a)};l.prototype._constructLegendElements=function(a,b){b=b.layer;b.featureCollections?a.buildLegendElementsForFeatureCollections(b.featureCollections):b.renderer?a.buildLegendElementsForRenderer(b.renderer):b.url&&a.buildLegendElementsForTools()};f.__decorate([q.property({type:a})],l.prototype,"activeLayerInfos",void 0);f.__decorate([q.property()],
l.prototype,"basemapLegendVisible",void 0);f.__decorate([q.property()],l.prototype,"groundLegendVisible",void 0);f.__decorate([q.property()],l.prototype,"keepCacheOnDestroy",void 0);f.__decorate([q.property()],l.prototype,"respectLayerVisibility",void 0);f.__decorate([q.property()],l.prototype,"layerInfos",void 0);f.__decorate([q.property({dependsOn:["view.ready"],readOnly:!0})],l.prototype,"state",null);f.__decorate([q.property()],l.prototype,"view",void 0);return l=f.__decorate([q.subclass("esri.widgets.Legend.LegendViewModel")],
l)}(m)})},"esri/widgets/Legend/support/ActiveLayerInfo":function(){define("require exports tslib ../../../Color ../../../request ../../../symbols ../../../core/Accessor ../../../core/arrayUtils ../../../core/Collection ../../../core/Handles ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/urlUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../layers/support/ExportImageParameters ../../../layers/support/fieldUtils ../../../renderers/support/jsonUtils ../../../renderers/visualVariables/support/SizeVariableLegendOptions ../../../symbols/support/symbolUtils ../../../symbols/support/utils ../../../views/MapView ./clusterUtils ./colorRampUtils ./heatmapRampUtils ./relationshipRampUtils ./sizeRampUtils ./utils @dojo/framework/shim/Promise".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a,d,k,p,l,u,r,z,v,F,x,w,y,C,A,E,I,D,B){function H(a){return"esri.renderers.SimpleRenderer"===a.declaredClass}function G(a){return"esri.renderers.ClassBreaksRenderer"===a.declaredClass}function Q(a){return"esri.renderers.UniqueValueRenderer"===a.declaredClass}function M(a){return"esri.renderers.HeatmapRenderer"===a.declaredClass}function O(a){return"esri.renderers.PointCloudClassBreaksRenderer"===a.declaredClass}function R(a){return"esri.renderers.PointCloudStretchRenderer"===
a.declaredClass}function P(a){return"esri.renderers.PointCloudUniqueValueRenderer"===a.declaredClass}function L(a){return"esri.renderers.DotDensityRenderer"===a.declaredClass}var J=a.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),N=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,V=new c.SimpleMarkerSymbol({size:6,outline:{color:[128,128,128,.5],width:.5}}),Y=new c.SimpleFillSymbol({style:"solid"}),U=new c.SimpleMarkerSymbol({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,
color:[85,85,85,1]}}),S={};return function(a){function e(d){d=a.call(this,d)||this;d._handles=new b;d._hasColorRamp=!1;d._hasOpacityRamp=!1;d._hasSizeRamp=!1;d._webStyleSymbolCache=new Map;d._dotDensityUrlCache=new Map;d._scaleDrivenSizeVariable=null;d._hasClusterSizeVariable=!1;d.children=new q;d.layerView=null;d.layer=null;d.legendElements=[];d.parent=null;d.keepCacheOnDestroy=!1;d.respectLayerVisibility=!0;d.sublayerIds=[];d.title=null;d.view=null;return d}f.__extends(e,a);e.prototype.initialize=
function(){var a=this,b=function(){return a.notifyChange("ready")};this._handles.add([l.on(this,"children","change",function(d){var k=d.removed,c=a._handles;d.added.map(function(a){var d="activeLayerInfo-ready-watcher-"+a.layer.uid;c.add(l.init(a,"ready",b),d)});k.forEach(function(a){return c.remove(a.layer.uid)});b()})]);this.keepCacheOnDestroy||(S={})};e.prototype.destroy=function(){this._handles.destroy();this._scaleDrivenSizeVariable=this._dotDensityUrlCache=this._webStyleSymbolCache=this._handles=
null;this.keepCacheOnDestroy||(S=null)};Object.defineProperty(e.prototype,"ready",{get:function(){return null===this.layer?!0:0<this.children.length?this._isGroupActive():0<this.legendElements.length},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"scale",{get:function(){return this.view&&this.view.scale},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isScaleDriven",{get:function(){var a=this,b=this.layer;if(null===b)return!1;if("featureReduction"in b&&b.featureReduction&&
"cluster"===b.featureReduction.type)return!0;if("renderer"in b&&b.renderer){if("dot-density"===b.renderer.type)return!0;var d=b.get("renderer.valueExpression");if(N.test(d))return!0;if(b=b.get("renderer.visualVariables"))return b.some(function(b){return a._isScaleDrivenSizeVariable(b)})}return this._isLayerScaleDriven(this.layer)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"version",{get:function(){return this._get("version")+1},enumerable:!0,configurable:!0});e.prototype.buildLegendElementsForFeatureCollections=
function(a){return f.__awaiter(this,void 0,void 0,function(){var b,d=this;return f.__generator(this,function(l){this.legendElements=[];b=a.map(function(a){if("esri.layers.FeatureLayer"===a.declaredClass)return d._buildRendererLegendElements(a.renderer,{title:a.title,mode:0});if(a.featureSet&&a.featureSet.features.length){var b=a.layerDefinition,b=(b=b&&b.drawingInfo)&&v.fromJSON(b.renderer);return b?d._buildRendererLegendElements(b,{title:a.name,mode:0}):(J.warn("drawingInfo not available!"),null)}return null});
return[2,k.eachAlways(b).then(function(){})]})})};e.prototype.buildLegendElementsForRenderer=function(a){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(b){return[2,this._buildRendererLegendElements(a)]})})};e.prototype.buildLegendElementsForTools=function(){return f.__awaiter(this,void 0,void 0,function(){var a,b=this;return f.__generator(this,function(d){switch(d.label){case 0:a=this.layer;if("esri.layers.WMTSLayer"!==a.declaredClass)return[3,1];this._constructLegendElementsForWMTSlayer();
return[3,6];case 1:if("esri.layers.WMSLayer"!==a.declaredClass)return[3,2];this._constructLegendElementsForWMSSublayers();return[3,6];case 2:return"esri.layers.MapImageLayer"!==a.declaredClass&&"esri.layers.TileLayer"!==a.declaredClass?[3,4]:[4,this._constructLegendElementsForSublayers()];case 3:return d.sent(),[3,6];case 4:return this._handles.remove("imageryLayers-watcher"),[4,this._getLegendLayers().then(function(d){b.legendElements=[];d.forEach(function(d){if("esri.layers.ImageryLayer"===a.declaredClass){var k=
a.watch("renderingRule, bandIds",function(){S["default"]=null;b.buildLegendElementsForTools()});b._handles.add(k,"imageryLayers-watcher")}(d=b._generateSymbolTableElementForLegendLayer(d))&&d.infos.length&&("esri.layers.ImageryLayer"===a.declaredClass&&(d.title=a.title),b.legendElements.push(d));b.notifyChange("ready")});b.notifyChange("ready")}).catch(function(a){J.warn("Request to server for legend has failed!",a)})];case 5:d.sent(),d.label=6;case 6:return[2]}})})};e.prototype._isGroupActive=function(){var a=
this.children;return a.length?a.some(function(a){return a.ready}):!1};e.prototype._isScaleDrivenSizeVariable=function(a){if(a&&"size"!==a.type)return!1;var b=a.minSize,d=a.maxSize;return"object"===typeof b&&b?this._isScaleDrivenSizeVariable(b):"object"===typeof d&&d?this._isScaleDrivenSizeVariable(d):!!a.expression||N.test(a.valueExpression)};e.prototype._isLayerScaleDriven=function(a){var b=this;if("minScale"in a&&0<a.minScale||"maxScale"in a&&0<a.maxScale)return!0;if("sublayers"in a&&a.sublayers)return a.sublayers.some(function(a){return b._isLayerScaleDriven(a)});
var d=a.parent;if(!1===a.loaded&&"esri.layers.MapImageLayer"===d.declaredClass&&"source"in a&&a.source&&"map-layer"===a.source.type)for(var k=0,d=d.sourceJSON.layers;k<d.length;k++){var l=d[k];if(l.id===a.source.mapLayerId&&(0<l.minScale||0<l.maxScale))return!0}return!1};e.prototype._buildRendererLegendElements=function(a,b){void 0===b&&(b={});return f.__awaiter(this,void 0,void 0,function(){var d,k;return f.__generator(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this._getRendererLegendElements(a,
{title:b.title})];case 1:return d=l.sent(),0===b.mode?Array.prototype.push.apply(this.legendElements,d):this.legendElements=d,this.notifyChange("ready"),[3,3];case 2:return k=l.sent(),J.warn("error while building legend for layer!",k),[3,3];case 3:return[2]}})})};e.prototype._constructLegendElementsForWMTSlayer=function(){this.legendElements=[];this._handles.remove("wmts-activeLayer-watcher");var a=this.layer,b=a.activeLayer;this._handles.add(l.watch(this.layer,"activeLayer",this._constructLegendElementsForWMTSlayer.bind(this)),
"wmts-activeLayer-watcher");if(b.styleId&&b.styles){var d=null;b.styles.some(function(a){return b.styleId===a.id?(d=a.legendUrl,!0):!1});d&&(this.legendElements=[{type:"symbol-table",title:b.title,infos:[{src:d,opacity:a.opacity}]}])}this.notifyChange("ready")};e.prototype._constructLegendElementsForWMSSublayers=function(){this.legendElements=[];this._handles.remove("wms-sublayers-watcher");var a=this.layer,b=null;if(a.customParameters||a.customLayerParameters)b=f.__assign(f.__assign({},a.customParameters),
a.customLayerParameters);this._handles.add(l.watch(this.layer,"sublayers",this._constructLegendElementsForWMSSublayers.bind(this)),"wms-sublayers-watcher");this.legendElements=this._generateLegendElementsForWMSSublayers(a.sublayers,b);this.notifyChange("ready")};e.prototype._generateLegendElementsForWMSSublayers=function(a,b){var d=this,k=[];this._handles.add(a.on("change",this._constructLegendElementsForWMSSublayers.bind(this)),"wms-sublayers-watcher");a.forEach(function(a){var l=a.watch("title, visible, legendEnabled",
function(){return d._constructLegendElementsForWMSSublayers()});d._handles.add(l,"wms-sublayers-watcher");a.visible&&a.legendEnabled&&(a=d._generateSymbolTableElementForWMSSublayer(a,b))&&a.infos.length&&k.unshift(a)});return k};e.prototype._generateSymbolTableElementForWMSSublayer=function(a,b){return!a.legendUrl&&a.sublayers?(b=this._generateLegendElementsForWMSSublayers(a.sublayers,b).filter(function(a){return a}),{type:"symbol-table",title:a.title,infos:b}):this._generateSymbolTableElementForLegendUrl(a,
b)};e.prototype._generateSymbolTableElementForLegendUrl=function(a,b){var d=a.legendUrl;if(d){var k={type:"symbol-table",title:a.title||a.name||a.id&&a.id+"",infos:[]};b&&(d+="?"+p.objectToQuery(b));k.infos.push({src:d,opacity:a.layer&&a.layer.opacity});return k}};e.prototype._getLegendLayers=function(a){var b=(a=a&&a.hasDynamicLayers?a.dynamicLayers:null)||"default",d=S&&S[b];return d?k.resolve(d):this._legendRequest(a).then(function(a){a=a.layers;return S[b]=a})};e.prototype._legendRequest=function(a){var b=
this.layer;a={f:"json",dynamicLayers:a};"esri.layers.ImageryLayer"===b.declaredClass&&(b.renderingRule&&(a.renderingRule=JSON.stringify(b.renderingRule.toJSON())),b.bandIds&&(a.bandIds=b.bandIds.join()),b.raster||b.viewId)&&(a=f.__assign({raster:b.raster,viewId:b.viewId},a));var d=b.url.replace(/(\/)+$/,"");"version"in b&&10.01<=b.version?(b=d.indexOf("?"),d=-1<b?d.substring(0,b)+"/legend"+d.substring(b):d+"/legend"):(b=d.toLowerCase().indexOf("/rest/"),d=d.substring(0,b)+d.substring(b+5,d.length),
d="https://utility.arcgis.com/sharing/tools/legend?soapUrl\x3d"+encodeURI(d)+"\x26returnbytes\x3dtrue");return m(d,{query:a}).then(function(a){return a.data})};e.prototype._constructLegendElementsForSublayers=function(){return f.__awaiter(this,void 0,void 0,function(){var a,b,d;return f.__generator(this,function(k){switch(k.label){case 0:this.legendElements=[],this._handles.remove("sublayers-watcher"),a=this.layer,this._handles.add(l.watch(a,"sublayers",this._constructLegendElementsForSublayers.bind(this)),
"sublayers-watcher"),k.label=1;case 1:return k.trys.push([1,3,,4]),b=this,[4,this._generateLegendElementsForSublayers(a.sublayers,a.opacity)];case 2:return b.legendElements=k.sent(),this.notifyChange("ready"),[3,4];case 3:return d=k.sent(),J.warn("Request to server for legend has failed!",d),[3,4];case 4:return[2]}})})};e.prototype._generateLegendElementsForSublayers=function(a,b,d){return f.__awaiter(this,void 0,void 0,function(){var k,l,c,e,u,p,h,r,z,q,K,v=this;return f.__generator(this,function(f){switch(f.label){case 0:k=
[],this._handles.add(a.on("change",this._constructLegendElementsForSublayers.bind(this)),"sublayers-watcher"),l=a.toArray(),!d&&this.sublayerIds&&this.sublayerIds.length&&(c=this.layer,l=this.sublayerIds.map(function(a){return c.findSublayerById(a)}).filter(Boolean)),e=0,u=l,f.label=1;case 1:if(!(e<u.length))return[3,8];p=u[e];h=p.watch("renderer, opacity, title, visible, legendEnabled",function(){return v._constructLegendElementsForSublayers()});this._handles.add(h,"sublayers-watcher");if(!p.visible||
!p.legendEnabled)return[3,7];r=p&&null!=p.opacity?p.opacity:null;z=null!=r?r*b:b;return!p.renderer||p.sublayers?[3,5]:this.respectLayerVisibility&&!this._isSublayerInScale(p)?[3,4]:[4,p.load()];case 2:return f.sent(),[4,this._getRendererLegendElements(p.renderer,{title:p.title,opacity:z,sublayer:p})];case 3:q=f.sent(),Array.prototype.unshift.apply(k,q),f.label=4;case 4:return[3,7];case 5:return[4,this._generateSymbolTableElementForSublayer(p,z,d)];case 6:(K=f.sent())&&k.unshift(K),f.label=7;case 7:return e++,
[3,1];case 8:return[2,k.filter(function(a){return!!a&&("infos"in a?0<a.infos.length:!0)})]}})})};e.prototype._generateSymbolTableElementForSublayer=function(a,b,d){return f.__awaiter(this,void 0,void 0,function(){var k,l,c,e;return f.__generator(this,function(u){switch(u.label){case 0:if(d)return[3,4];d=new Map;k=new r.ExportImageParameters({layer:this.layer});u.label=1;case 1:return u.trys.push([1,,3,4]),[4,this._getLegendLayers(k)];case 2:return l=u.sent(),l.forEach(function(a){return d.set(a.layerId,
a)}),[3,4];case 3:return k.destroy(),[7];case 4:return(c=d.get(a.id))||!a.sublayers?[3,6]:[4,this._generateLegendElementsForSublayers(a.sublayers,b,d)];case 5:return e=u.sent(),[2,{type:"symbol-table",title:a.title,infos:e}];case 6:return[2,this._generateSymbolTableElementForLegendLayer(c,a,b)]}})})};e.prototype._generateSymbolTableElementForLegendLayer=function(a,b,d){var k=this;if(!a||!a.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(a,b))return null;var l=b&&b.renderer,c=b&&b.title||
a.layerName;l&&(l=b&&b.title||this._getRendererTitle(l,b))&&(c&&(l.title=c),c=l);c={type:"symbol-table",title:c,infos:[]};a.legendType&&(c.legendType=a.legendType);b=b?this._sanitizeLegendForSublayer(a.legend.slice(),b):a.legend;c.infos=b.map(function(b){var l=b.url;if(b.imageData&&0<b.imageData.length)l="data:image/png;base64,"+b.imageData;else if(0!==l.indexOf("http"))l=p.addTokenParameter(k.layer.url+"/"+a.layerId+"/images/"+l);else return null;return{label:b.label,src:l,opacity:null==d?k.layer.opacity:
d,width:b.width,height:b.height}}).filter(function(a){return!!a});return c.infos.length?c:null};e.prototype._isSublayerInScale=function(a){var b=a.minScale||0;a=a.maxScale||0;return 0<b&&b<this.scale||a>this.scale?!1:!0};e.prototype._isLegendLayerInScale=function(a,b){b=b||this.layer;var d=null,k=null,l=!0;!b.minScale&&0!==b.minScale||!b.maxScale&&0!==b.maxScale?(0===a.minScale&&b.tileInfo&&(d=b.tileInfo.lods[0].scale),0===a.maxScale&&b.tileInfo&&(k=b.tileInfo.lods[b.tileInfo.lods.length-1].scale)):
(d=Math.min(b.minScale,a.minScale)||b.minScale||a.minScale,k=Math.max(b.maxScale,a.maxScale));if(0<d&&d<this.scale||k>this.scale)l=!1;return l};e.prototype._sanitizeLegendForSublayer=function(a,b){if("version"in this.layer&&10.1>this.layer.version||0===a.length)return a;b=b.renderer;var d=null,k=null;a.some(function(a){return a.values})&&a.some(function(a,b){a.values||(d=b,k=a,k.label||(k.label="others"));return null!=k});b?"unique-value"===b.type?k&&(a.splice(d,1),a.push(k)):"class-breaks"===b.type&&
(k&&a.splice(d,1),a.reverse(),k&&a.push(k)):k&&(a.splice(d,1),a.push(k));return a};e.prototype._getRendererLegendElements=function(a,b){void 0===b&&(b={});return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(d){return H(a)||G(a)||Q(a)||"raster-stretch"===a.type||"raster-colormap"===a.type||M(a)||O(a)||R(a)||P(a)||L(a)||"raster-shaded-relief"===a.type?O(a)||R(a)||P(a)||"esri.renderers.PointCloudRGBRenderer"===a.declaredClass?[2,this._constructPointCloudRendererLegendElements(a,
b)]:L(a)?[2,this._constructDotDensityRendererLegendElements(a)]:[2,this._constructRendererLegendElements(a,b)]:(J.warn("Renderer not supported!"),[2,[]])})})};e.prototype._getPointCloudRendererTitle=function(a){return a.legendOptions&&a.legendOptions.title||a.field};e.prototype._constructPointCloudRendererLegendElements=function(a,b){var d=this;void 0===b&&(b={});b=b.title;var l=[],c=null,e=null;if(O(a))c={type:"symbol-table",title:b||this._getPointCloudRendererTitle(a),infos:[]},a.colorClassBreakInfos.forEach(function(a){c.infos.unshift({label:a.label||
a.minValue+" - "+a.maxValue,value:[a.minValue,a.maxValue],symbol:d._getAppliedCloneSymbol(V,a.color)})});else if(R(a)){var e=a.stops,u=null;if(e.length&&(1===e.length&&(u=e[0].color),!u)){var p=e[0].value,h=e[e.length-1].value;null!=p&&null!=h&&(u=A.getColorFromPointCloudStops(p+(h-p)/2,e))}c={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(V,u||V.color)}]};e=A.getRampStopsForPointCloud(a.stops);e={type:"color-ramp",title:b||this._getPointCloudRendererTitle(a),
infos:e,preview:x.renderColorRampPreviewHTML(e.map(function(a){return a.color}))}}else P(a)&&(c={type:"symbol-table",title:b||this._getPointCloudRendererTitle(a),infos:[]},a.colorUniqueValueInfos.forEach(function(a){c.infos.push({label:a.label||a.values.join(", "),value:a.values.join(", "),symbol:d._getAppliedCloneSymbol(V,a.color)})}));c&&c.infos.length&&l.push(c);e&&e.infos.length&&l.push(e);a=l.reduce(function(a,b){return a.concat(b.infos)},[]).filter(function(a){return!!a.symbol}).map(function(a){return d._getSymbolPreview(a,
d.layer.opacity)});return k.eachAlways(a).then(function(){return l})};e.prototype._getElementInfoForDotDensity=function(a,b){var d=a.outline,d=a.dotSize+"-"+b+"-"+a.backgroundColor+"-"+(d&&JSON.stringify(d.toJSON())),k=this._dotDensityUrlCache;a=k.has(d)?k.get(d):x.renderDotDensityPreviewHTML(a,b);k.set(d,a);return{opacity:1,src:a.src,preview:a,width:a.width,height:a.height}};e.prototype._constructDotDensityRendererLegendElements=function(a){var b=this,d=a.calculateDotValue(this.view.scale),l={type:"symbol-table",
title:{value:d&&Math.round(d),unit:a.legendOptions&&a.legendOptions.unit||""},infos:[]};a.attributes.forEach(function(d){var k=b._getElementInfoForDotDensity(a,d.color);k.label=d.label||d.valueExpressionTitle||d.field;l.infos.push(k)});return k.resolve([l])};e.prototype._constructRendererLegendElements=function(a,b){void 0===b&&(b={});return f.__awaiter(this,void 0,void 0,function(){var l,e,u,p,h,r,z,q,v,m,K,n,g,w,y,F,A,C,D,B,X,N,P,R,V,t,L,O,S,T,J,W,aa,ba,Z,ia,fa,da,ga,ja,ka,la,ea=this;return f.__generator(this,
function(f){switch(f.label){case 0:return l=b.title,u=(e=b.sublayer)||this.layer,[4,this._loadRenderer(a)];case 1:return p=f.sent(),this._hasSizeRamp=this._hasOpacityRamp=this._hasColorRamp=!1,this._scaleDrivenSizeVariable=null,[4,this._getVisualVariableLegendElements(p,u)];case 2:h=f.sent()||[];r={type:"symbol-table",title:l||this._getRendererTitle(p,u),infos:[]};z=null;q=!1;v=new Set;if(!M(p))return[3,3];m=E.getHeatmapRampStops(p);h.push({type:"heatmap-ramp",title:l,infos:m,preview:x.renderColorRampPreviewHTML(m.map(function(a){return a.color}))});
return[3,12];case 3:if(!Q(p))return[3,4];if(n=(K=p&&p.authoringInfo)&&"relationship"===K.type){if(g=K.focus,w=K.numClasses,y=K.field1,F=K.field2,w&&y&&F){A=[y,F];C=I.getRotationAngleForFocus(g)||0;D=0;for(B=A;D<B.length;D++)X=B[D],N=X.field,P=X.normalizationField,V=(R=X.label)||{field:this._getFieldAlias(N,u),normField:P&&this._getFieldAlias(P,u)},t=U.clone(),t.angle=C,r.infos.push({label:V,symbol:t}),v.add(t),C+=90;L=I.getRelationshipRampElement({focus:g,numClasses:w,infos:p.uniqueValueInfos});h.unshift(L)}}else O=
p.field,p.uniqueValueInfos.forEach(function(a){if(a.symbol){var b=a.symbol.clone();"esri.layers.ImageryLayer"===ea.layer.declaredClass&&(b=c.SimpleMarkerSymbol.fromJSON({color:b.color,style:"square"}));r.infos.push({label:a.label||ea._getDomainName(O,a.value,u)||a.value,value:a.value,symbol:b})}});p.defaultSymbol&&(r.infos.push({label:p.defaultLabel||"others",symbol:p.defaultSymbol}),q=!0);return[3,12];case 4:if(!G(p))return[3,5];z=this._isUnclassedRenderer(p);if(S=!z||!this._hasSizeRamp)p.classBreakInfos.forEach(function(a){if(a.symbol){var b=
a.symbol.clone();"esri.layers.ImageryLayer"===ea.layer.declaredClass&&(b=c.SimpleMarkerSymbol.fromJSON({color:b.color,style:"square"}));r.infos.unshift({label:a.label||(z?null:a.minValue+" - "+a.maxValue),value:[a.minValue,a.maxValue],symbol:b})}}),z&&(r.title=null),this._updateInfosforClassedSizeRenderer(p,r.infos);p.defaultSymbol&&!z&&(r.infos.push({label:p.defaultLabel||"others",symbol:p.defaultSymbol}),q=!0);return[3,12];case 5:if("raster-stretch"!==p.type)return[3,11];if("esri.layers.ImageryTileLayer"!==
this.layer.declaredClass)return[3,6];T=this._constructTileImageryStretchRendererElements(p);"stretch-ramp"===T.type?h.push(T):r.infos=T;return[3,10];case 6:return J=this.layer,aa=W=void 0,p.statistics&&p.statistics.length&&(W=p.statistics[0].min||p.statistics[0][0],aa=p.statistics[0].max||p.statistics[0][1]),ba=[],ia=d.unwrap,J.renderingRule?[4,J.generateRasterInfo(J.renderingRule)]:[3,8];case 7:return fa=f.sent(),[3,9];case 8:fa=J.serviceRasterInfo,f.label=9;case 9:Z=ia.apply(void 0,[fa]),da=Z.keyProperties.BandProperties,
1===Z.bandCount?(W=W||Z.statistics&&Z.statistics[0].min,aa=aa||Z.statistics&&Z.statistics[0].max,W||aa?h.push(this._getStretchLegendElements(p,{min:W,max:aa})):this.buildLegendElementsForTools()):J.bandIds&&1===J.bandIds.length?(W=W||Z.statistics&&Z.statistics[J.bandIds[0]].min,aa=aa||Z.statistics&&Z.statistics[J.bandIds[0]].max,W||aa?h.push(this._getStretchLegendElements(p,{min:W,max:aa})):this.buildLegendElementsForTools()):3<=Z.bandCount?da&&da.length>=Z.bandCount?J.bandIds&&3===J.bandIds.length?
(ba=J.bandIds.map(function(a){return da[a].BandName}),r.infos=this._createSymbolTableElementMultiBand(ba)):"lerc"===J.format?(ba=[0,1,2].map(function(a){return da[a].BandName}),r.infos=this._createSymbolTableElementMultiBand(ba)):this.buildLegendElementsForTools():"lerc"===J.format?(ba=["band0","band1","band2"],r.infos=this._createSymbolTableElementMultiBand(ba)):this.buildLegendElementsForTools():this.buildLegendElementsForTools(),f.label=10;case 10:return[3,12];case 11:"raster-colormap"===p.type?
p.colormapInfos.forEach(function(a){r.infos.push({label:a.label,value:a.value,symbol:ea._getAppliedCloneSymbol(Y,a.color)})}):H(p)?p.symbol&&!this._hasSizeRamp&&r.infos.push({label:p.label,symbol:p.symbol}):"raster-shaded-relief"===p.type&&h.push(this._getStretchLegendElements(p,{min:0,max:255})),f.label=12;case 12:return ga=p.defaultSymbol,!ga||q||H(p)||z&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||h.push({type:"symbol-table",infos:[{label:p.defaultLabel||"others",symbol:ga}]}),
r.infos.length&&h.unshift(r),ja=null==b.opacity?u.opacity:b.opacity,ka=this._getSymbolConfig("visualVariables"in p&&p.visualVariables),la=h.reduce(function(a,b){return a.concat(b.infos)},[]).filter(function(a){return!(!a||!a.symbol)}).map(function(a){return ea._getSymbolPreview(a,ja,{applyScaleDrivenSize:!v.has(a.symbol),symbolConfig:ka})}),p=null,[4,k.eachAlways(la)];case 13:return f.sent(),[2,h]}})})};e.prototype._constructTileImageryStretchRendererElements=function(a){function b(a){var b=(d.bandIds&&
d.bandIds.length?d.bandIds:[0,1,2]).map(function(b){return a&&a[b]&&a[b].BandName||"band"+b});3>b.length?b.push(b[1]):3<b.length&&b.splice(3);return b}var d=this.layer,k=d.rasterInfo,l=k.bandCount||a.statistics.length,c,p,e=[],e=k.keyProperties&&k.keyProperties.BandProperties;a.statistics&&a.statistics.length&&(c=void 0!==a.statistics[0].min?a.statistics[0].min:a.statistics[0][0],p=a.statistics[0].max||a.statistics[0][1]);if(1===k.bandCount)return this._getStretchLegendElements(a,{min:c,max:p});e=
e&&e.length>=l?b(e):b();return this._createSymbolTableElementMultiBand(e)};e.prototype._getStretchLegendElements=function(a,b){a=A.getStrectchRampStops(a.colorRamp,b);return{type:"stretch-ramp",title:"",infos:a,preview:x.renderColorRampPreviewHTML(a.map(function(a){return a.color}))}};e.prototype._createSymbolTableElementMultiBand=function(a){var b=[],d=["red","green","blue"];a.forEach(function(a,k){b.push({label:{colorName:d[k],bandName:a},src:B.RGB_IMG_SOURCE[k],opacity:1})});return b};e.prototype._updateInfosforClassedSizeRenderer=
function(a,b){var d=a.authoringInfo&&"class-breaks-size"===a.authoringInfo.type,k=a.classBreakInfos.some(function(a){return w.isVolumetricSymbol(a.symbol)});if(d&&k){var l=D.REAL_WORLD_MAX_SIZE;a=a.classBreakInfos.length;var c=(l-D.REAL_WORLD_MIN_SIZE)/(1<a?a-1:a);b.forEach(function(a,b){a.size=l-c*b})}};e.prototype._getSymbolConfig=function(a){var b=!1,d=!1;if(a)for(var k=0;k<a.length&&(!b||!d);k++){var l=a[k];"size"===l.type&&("height"===l.axis&&(b=!0),"width-and-depth"===l.axis&&(d=!0))}return b&&
d?"tall":null};e.prototype._getSymbolPreview=function(a,b,d){return f.__awaiter(this,void 0,void 0,function(){var k,l;return f.__generator(this,function(c){switch(c.label){case 0:return k=a.size,this._scaleDrivenSizeVariable&&(null===d||void 0===d?0:d.applyScaleDrivenSize)?[4,new Promise(function(a,b){t(["../../../renderers/visualVariables/support/visualVariableUtils"],a,b)})]:[3,2];case 1:l=c.sent().getSize,k=l(this._scaleDrivenSizeVariable,null,{view:this.view,scale:this.scale,shape:"simple-marker"===
a.symbol.type?a.symbol.style:null}),c.label=2;case 2:return[2,x.renderPreviewHTML(a.symbol,{size:k,opacity:b,symbolConfig:null===d||void 0===d?void 0:d.symbolConfig,rotation:a.symbol.angle}).then(function(b){a.preview=b;return a}).catch(function(){a.preview=null;return a})]}})})};e.prototype._loadRenderer=function(a){var b,l;return f.__awaiter(this,void 0,void 0,function(){var c,e,p,u,h,r,z,q,v,m,n,g,K=this;return f.__generator(this,function(f){switch(f.label){case 0:return c=[],e=this.layer,a=a.clone(),
this._hasClusterSizeVariable=!1,p="visualVariables"in a&&(null===(b=a.visualVariables)||void 0===b?void 0:b.some(function(a){return"size"===a.type&&"outline"!==a.target&&!N.test(a.valueExpression)})),a&&"visualVariables"in a&&!p&&"featureReduction"in e&&"cluster"===(null===(l=e.featureReduction)||void 0===l?void 0:l.type)&&(u=this.layerView._effectiveRenderer,h=d.unwrap(C.getClusterSizeVariable(u,this.view)))&&(r=e.featureReduction,"clusterMinSize"in r&&"clusterMaxSize"in r&&(z=r.clusterMinSize,q=
r.clusterMaxSize,h.legendOptions=new F({showLegend:z!==q})),v=a.visualVariables||[],a.visualVariables=v.concat([h]),this._hasClusterSizeVariable=!0),[4,this._getMedianColor(a)];case 1:m=f.sent();if(G(a)||Q(a))n=a.classBreakInfos||a.uniqueValueInfos,g=n.map(function(a){return K._fetchSymbol(a.symbol,m).then(function(b){a.symbol=b}).catch(function(){a.symbol=null})}),Array.prototype.push.apply(c,g);c.push(this._fetchSymbol(a.symbol||a.defaultSymbol,a.defaultSymbol?null:m).then(function(b){K._applySymbolToRenderer(a,
b,H(a))}).catch(function(){K._applySymbolToRenderer(a,null,H(a))}));return[2,k.eachAlways(c).then(function(){return a})]}})})};e.prototype._applySymbolToRenderer=function(a,b,d){d?a.symbol=b:a.defaultSymbol=b};e.prototype._getMedianColor=function(a){return f.__awaiter(this,void 0,void 0,function(){var b,d,k,l,c;return f.__generator(this,function(e){switch(e.label){case 0:if(!("visualVariables"in a&&a.visualVariables))return[2,null];b=h.find(a.visualVariables,function(a){return"color"===a.type});if(!b)return[2,
null];k=d=null;if(b.stops){if(1===b.stops.length)return[2,b.stops[0].color];d=b.stops[0].value;k=b.stops[b.stops.length-1].value}l=d+(k-d)/2;return[4,new Promise(function(a,b){t(["../../../renderers/visualVariables/support/visualVariableUtils"],a,b)})];case 1:return c=e.sent().getColor,[2,c(b,l)]}})})};e.prototype._fetchSymbol=function(a,b){var d=this;if(!a)return k.reject();if("web-style"===a.type){var l=a.portal,l=a.name+"-"+a.styleName+"-"+a.styleUrl+"-"+(l&&l.url)+"-"+(l&&l.user&&l.user.username),
c=this._webStyleSymbolCache;c.has(l)||(this.view instanceof y?c.set(l,a.fetchCIMSymbol()):c.set(l,a.fetchSymbol()));return c.get(l).then(function(a){return d._getAppliedCloneSymbol(a,b)}).catch(function(){J.warn("Fetching web-style failed!");return k.reject()})}return k.resolve(this._getAppliedCloneSymbol(a,b))};e.prototype._getAppliedCloneSymbol=function(a,b){if(!a)return a;a=a.clone();var d=-1<a.type.indexOf("3d");b=b&&b.toRgba();d?this._applyColorTo3dSymbol(a,b):a.color&&(a.color=new n(b||a.color));
return a};e.prototype._applyColorTo3dSymbol=function(a,b){b&&a.symbolLayers.forEach(function(a){a&&(a.material||(a.material={}),a.material.color=new n(b))})};e.prototype._getVisualVariableLegendElements=function(a,b){return f.__awaiter(this,void 0,void 0,function(){var l,c,e,p,u,h,r,q,v,m,n,g,K=this;return f.__generator(this,function(w){switch(w.label){case 0:if(!("visualVariables"in a&&a.visualVariables))return[2,null];l=a.visualVariables;c=[];e=[];p=[];u=0;for(h=l;u<h.length;u++)r=h[u],"color"===
r.type?c.push(r):"size"===r.type?e.push(r):"opacity"===r.type&&p.push(r);q=f.__spreadArrays(c,e,p);0===c.length&&G(a)&&a.classBreakInfos&&1===a.classBreakInfos.length&&(v=(n=a.classBreakInfos[0])&&n.symbol);0===c.length&&H(a)&&(v=a.symbol);v&&(-1<v.type.indexOf("3d")?(g=v.symbolLayers.getItemAt(0),"water"===g.type?d.isSome(g.color)&&(m=g.color):d.isSome(g.material)&&d.isSome(g.material.color)&&(m=g.material.color)):v.url||(m=v.color));return[4,k.all(q.map(function(d){return f.__awaiter(K,void 0,void 0,
function(){var k,l,c,e,p,u,h,r;return f.__generator(this,function(q){switch(q.label){case 0:if(d.legendOptions&&!1===d.legendOptions.showLegend)return[3,10];k=this._getRampTitle(d,b);l=null;e=(c="getField"in b&&b.getField&&b.getField(d.field))&&z.isDateField(c);return"color"!==d.type?[3,2]:[4,A.getRampStops(d,null,e)];case 1:return p=q.sent(),l={type:"color-ramp",title:k,infos:p,preview:x.renderColorRampPreviewHTML(p.map(function(a){return a.color}))},this._hasColorRamp||(this._hasColorRamp=!(null==
l.infos||!l.infos.length)),[3,9];case 2:if("size"!==d.type||"outline"===d.target)return[3,7];if(!N.test(d.valueExpression))return[3,3];this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=d);return[3,6];case 3:return u={type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(d):k},h=D.getRampStops,r=[a,d],[4,this._getMedianColor(a)];case 4:return[4,h.apply(void 0,r.concat([q.sent(),this.scale,this.view,e]))];case 5:l=(u.infos=q.sent(),u),this._hasSizeRamp||(this._hasSizeRamp=
!(null==l.infos||!l.infos.length)),q.label=6;case 6:return[3,9];case 7:return"opacity"!==d.type?[3,9]:[4,A.getRampStops(d,m,e)];case 8:p=q.sent(),l={type:"opacity-ramp",title:k,infos:p,preview:x.renderColorRampPreviewHTML(p.map(function(a){return a.color}))},this._hasOpacityRamp||(this._hasOpacityRamp=!(null==l.infos||!l.infos.length)),q.label=9;case 9:return[2,l&&l.infos?l:null];case 10:return[2,void 0]}})})}))];case 1:return[2,w.sent().filter(function(a){return!!a})]}})})};e.prototype._getDomainName=
function(a,b,d){return a&&"function"!==typeof a?(d=(a="getField"in d&&d.getField&&d.getField(a))&&"getFieldDomain"in d&&d.getFieldDomain?d.getFieldDomain(a.name):null)&&"coded-value"===d.type?d.getName(b):null:null};e.prototype._getClusterTitle=function(a){var b=this.layer;a=a.field;if("featureReduction"in b&&b.featureReduction&&"cluster"===b.featureReduction.type&&(b=b.featureReduction,b=(b="popupTemplate"in b&&b.popupTemplate)&&b.fieldInfos))for(var d=0;d<b.length;d++){var k=b[d];if(k.fieldName===
a)return"cluster_count"===a?k.label||{showCount:!0}:k.label}return{showCount:!0}};e.prototype._getRampTitle=function(a,b){var d=a.field,k=a.normalizationField,l=!1,c=!1,e=!1,p=null,d="function"===typeof d?null:d,k="function"===typeof k?null:k,p=a.legendOptions&&a.legendOptions.title;if(null==p)if(a.valueExpressionTitle)p=a.valueExpressionTitle;else{if("renderer"in b&&b.renderer&&"authoringInfo"in b.renderer&&b.renderer.authoringInfo&&b.renderer.authoringInfo.visualVariables)for(a=b.renderer.authoringInfo.visualVariables,
p=0;p<a.length;p++){var u=a[p];if("color"===u.type){if("ratio"===u.style){l=!0;break}if("percent"===u.style){c=!0;break}if("percent-of-total"===u.style){e=!0;break}}}p={field:d&&this._getFieldAlias(d,b),normField:k&&this._getFieldAlias(k,b),ratio:l,ratioPercent:c,ratioPercentTotal:e}}return p};e.prototype._getRendererTitle=function(a,b){if(a.legendOptions&&a.legendOptions.title)return a.legendOptions.title;if(a.valueExpressionTitle)return a.valueExpressionTitle;var d=a.field,k=null,l=null;G(a)&&(k=
a.normalizationField,l="percent-of-total"===a.normalizationType);d="function"===typeof d?null:d;k="function"===typeof k?null:k;a=null;if(d||k)a={field:d&&this._getFieldAlias(d,b),normField:k&&this._getFieldAlias(k,b),normByPct:l};return a};e.prototype._getFieldAlias=function(a,b){var d="popupTemplate"in b&&b.popupTemplate,d=d&&d.fieldInfos,k=null;d&&d.some(function(b){return a===b.fieldName?(k=b,!0):!1});d=null;"getField"in b&&b.getField?d=b.getField(a):"fieldsIndex"in b&&b.fieldsIndex&&(d=b.fieldsIndex.get(a));
b=k||d;var l=null;b&&(l=k&&k.label||d&&d.alias||"name"in b&&b.name||"fieldName"in b&&b.fieldName);return l};e.prototype._isUnclassedRenderer=function(a){var b=a.visualVariables,d=!1;G(a)&&a.classBreakInfos&&1===a.classBreakInfos.length&&b&&(d=a.field?b.some(function(b){return!(!b||a.field!==b.field||(a.normalizationField||b.normalizationField)&&a.normalizationField!==b.normalizationField)}):!!b.length);return d};f.__decorate([u.property()],e.prototype,"children",void 0);f.__decorate([u.property()],
e.prototype,"layerView",void 0);f.__decorate([u.property()],e.prototype,"layer",void 0);f.__decorate([u.property()],e.prototype,"legendElements",void 0);f.__decorate([u.property()],e.prototype,"parent",void 0);f.__decorate([u.property({readOnly:!0})],e.prototype,"ready",null);f.__decorate([u.property()],e.prototype,"keepCacheOnDestroy",void 0);f.__decorate([u.property()],e.prototype,"respectLayerVisibility",void 0);f.__decorate([u.property({dependsOn:["view.scale"],readOnly:!0})],e.prototype,"scale",
null);f.__decorate([u.property()],e.prototype,"sublayerIds",void 0);f.__decorate([u.property({dependsOn:["layer.renderer?.valueExpression?","layer.renderer?.visualVariables?","layer.featureReduction?","scale"],readOnly:!0})],e.prototype,"isScaleDriven",null);f.__decorate([u.property()],e.prototype,"title",void 0);f.__decorate([u.property({dependsOn:["ready"],readOnly:!0,value:0})],e.prototype,"version",null);f.__decorate([u.property()],e.prototype,"view",void 0);return e=f.__decorate([u.subclass("esri.widgets.Legend.support.ActiveLayerInfo")],
e)}(e)})},"esri/layers/support/ExportImageParameters":function(){define("require exports tslib ../../core/Accessor ../../core/accessorSupport/decorators ./sublayerUtils ./timeUtils ../../views/View".split(" "),function(t,g,f,n,m,c,e,h){Object.defineProperty(g,"__esModule",{value:!0});var q={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",
source:"hasDynamicLayers"};t=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a._scale=null;a.view=null;return a}f.__extends(a,b);Object.defineProperty(a.prototype,"dynamicLayers",{get:function(){if(!this.hasDynamicLayers)return null;var a=this.visibleSublayers.map(function(a){return a.toExportImageJSON()});return a.length?JSON.stringify(a):null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasDynamicLayers",{get:function(){return this.layer&&c.isExportDynamic(this.visibleSublayers,
this.layer.serviceSublayers,this.layer)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"layer",{set:function(a){var b=this;this._get("layer")!==a&&(this._set("layer",a),this._layerHandles&&(this._layerHandles.forEach(function(a){return a.remove()}),this._layerHandles.length=0),a&&(this._layerHandles=[a.allSublayers.on("change",function(){return b.notifyChange("visibleSublayers")}),a.on("sublayer-update",function(a){return b.notifyChange(q[a.propertyName])})]))},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"layers",{get:function(){var a=this.visibleSublayers;return a?a.length?"show:"+a.map(function(a){return a.id}).join(","):"show:-1":null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"layerDefs",{get:function(){var a=this.visibleSublayers.filter(function(a){return null!=a.definitionExpression});return a.length?JSON.stringify(a.reduce(function(a,b){a[b.id]=b.definitionExpression;return a},{})):null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"scale",{get:function(){return null!=this._scale?this._scale:this.view&&this.view.scale||0},set:function(a){this.view||(this._scale=a,this.notifyChange("scale"))},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"version",{get:function(){this.layers;this.layerDefs;this.dynamicLayers;this.timeExtent;var a=this.layer;a&&(a.dpi,a.imageFormat,a.imageTransparency,a.gdbVersion);return(this._get("version")||0)+1},set:function(a){this._set("version",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"visibleSublayers",{get:function(){var a=this,b=[];if(!this.layer)return b;var c=this.layer.sublayers,l=function(d){var k=a.scale,c=0===d.minScale||k<=d.minScale,e=0===d.maxScale||k>=d.maxScale;d.visible&&(0===k||c&&e)&&(d.sublayers?d.sublayers.forEach(l):b.unshift(d))};c&&c.forEach(l);c=this._get("visibleSublayers");return!c||c.length!==b.length||c.some(function(a,d){return b[d]!==a})?b:c},enumerable:!0,configurable:!0});a.prototype.toJSON=function(){var a=this.layer,a={dpi:a.dpi,format:a.imageFormat,
transparent:a.imageTransparency,gdbVersion:a.gdbVersion||null};this.hasDynamicLayers&&this.dynamicLayers?a.dynamicLayers=this.dynamicLayers:a=f.__assign(f.__assign({},a),{layers:this.layers,layerDefs:this.layerDefs});return a};f.__decorate([m.property({readOnly:!0,dependsOn:["hasDynamicLayers","visibleSublayers"]})],a.prototype,"dynamicLayers",null);f.__decorate([m.property({readOnly:!0,dependsOn:["visibleSublayers","layer.serviceSublayers","layer.capabilities"]})],a.prototype,"hasDynamicLayers",
null);f.__decorate([m.property()],a.prototype,"layer",null);f.__decorate([m.property({readOnly:!0,dependsOn:["visibleSublayers"]})],a.prototype,"layers",null);f.__decorate([m.property({readOnly:!0,dependsOn:["visibleSublayers"]})],a.prototype,"layerDefs",null);f.__decorate([m.property({type:Number,dependsOn:["view.scale"]})],a.prototype,"scale",null);f.__decorate([m.property(e.combinedViewLayerTimeExtentProperty)],a.prototype,"timeExtent",void 0);f.__decorate([m.property({dependsOn:"layers layerDefs dynamicLayers layer.dpi layer.imageFormat layer.imageTransparency layer.gdbVersion timeExtent".split(" ")})],
a.prototype,"version",null);f.__decorate([m.property({type:h})],a.prototype,"view",void 0);f.__decorate([m.property({readOnly:!0,dependsOn:["layer.sublayers","scale"]})],a.prototype,"visibleSublayers",null);return a=f.__decorate([m.subclass("esri.layers.mixins.ExportImageParameters")],a)}(n);g.ExportImageParameters=t})},"esri/layers/support/sublayerUtils":function(){define(["require","exports","./layerSourceUtils"],function(t,g,f){function n(f,c){if(!f||!f.length)return!0;c=c.slice().reverse().flatten(function(a){return(a=
a.sublayers)&&a.toArray().reverse()}).map(function(a){return a.id}).toArray();if(f.length>c.length)return!1;for(var e=0,h=c.length,q=0;q<f.length;q++){for(var b=f[q].id;e<h&&c[e]!==b;)e++;if(e>=h)return!1}return!0}Object.defineProperty(g,"__esModule",{value:!0});g.shouldWriteSublayerStructure=function(f,c,e){return c.flatten(function(c){return c.sublayers}).length!==f.length||f.some(function(c){return c.originIdOf("minScale")>e||c.originIdOf("maxScale")>e||c.originIdOf("renderer")>e||c.originIdOf("labelingInfo")>
e||c.originIdOf("opacity")>e||c.originIdOf("labelsVisible")>e||c.originIdOf("source")>e})?!0:!n(f,c)};g.isExportDynamic=function(m,c,e){return m.some(function(c){var h=c.source;return!(!h||h.type===f.MAPLAYER&&h.mapLayerId===c.id&&(!h.gdbVersion||h.gdbVersion===e.gdbVersion))||2<c.originIdOf("renderer")||2<c.originIdOf("labelingInfo")||2<c.originIdOf("opacity")||2<c.originIdOf("labelsVisible")})?!0:!n(m,c)};g.isSublayerOverhaul=function(f){return!!f&&f.some(function(c){return null!=c.minScale||c.layerDefinition&&
null!=c.layerDefinition.minScale})}})},"esri/symbols/support/symbolUtils":function(){define("require exports tslib ../../core/compilerUtils ../../core/maybe ../../support/arcadeOnDemand ./previewCIMSymbol ./previewSymbol2D ./previewSymbol3D ./previewWebStyleSymbol ./utils @dojo/framework/shim/Promise".split(" "),function(t,g,f,n,m,c,e,h,q,b,a){function d(a,k){switch(a.type){case "web-style":return b.previewWebStyleSymbol(a,d,k);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return q.previewSymbol3D(a,
k);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return h.previewSymbol2D(a,k);case "cim":return e.previewCIMSymbol(a,k);default:n.neverReached(a)}}function k(a){return a&&"opacity"in a?a.opacity*k(a.parent):1}Object.defineProperty(g,"__esModule",{value:!0});var p=null;g.renderDotDensityPreviewHTML=function(a,b,d){var k=a.backgroundColor,l=a.outline;a=a.dotSize;var c=d&&d.swatchSize||22,e=Math.round(c*c/Math.pow(a,2)*.8),u=window.devicePixelRatio;
d=document.createElement("canvas");var h=c*u;d.width=h;d.height=h;d.style.width=d.width/u+"px";d.style.height=d.height/u+"px";var r=d.getContext("2d");k&&(r.fillStyle=k.toCss(!0),r.fillRect(0,0,h,h),r.fill());r.fillStyle=b.toCss(!0);if(p&&p.length/2===e)for(b=0;b<2*e;b+=2){var k=p[b],q=p[b+1];r.fillRect(k,q,a*u,a*u);r.fill()}else for(p=[],b=0;b<2*e;b+=2)k=Math.floor(Math.random()*(h-0+1)+0),q=Math.floor(Math.random()*(h-0+1)+0),p.push(k,q),r.fillRect(k,q,a*u,a*u),r.fill();l&&(l.color&&(r.strokeStyle=
l.color.toCss(!0)),r.lineWidth=l.width,r.strokeRect(0,0,h,h));l=new Image(c,c);l.src=d.toDataURL();return l};g.renderColorRampPreviewHTML=function(a,b){void 0===b&&(b={});var d="horizontal"===b.align,k=b.width,k=void 0===k?d?75:24:k,l=b.height,l=void 0===l?d?24:75:l;b=b.gradient;var c=void 0===b?!0:b;b=window.devicePixelRatio;var e=k*b,p=l*b;b=document.createElement("canvas");b.width=e;b.height=p;b.style.width=k+"px";b.style.height=l+"px";var u=b.getContext("2d"),h=d?e:0,q=d?0:p;if(c){var f=u.createLinearGradient(0,
0,h,q),m=1/(a.length-1);a.forEach(function(a,b){return f.addColorStop(b*m,a.toString())});u.fillStyle=f;u.fillRect(0,0,e,p)}else for(c=d?e/a.length:e,e=d?p:p/a.length,q=h=p=0;q<a.length;q++)u.fillStyle=a[q].toString(),u.fillRect(p,h,c,e),p=d?p+c:0,h=d?0:h+e;a=document.createElement("div");a.style.width=k+"px";a.style.height=l+"px";a.appendChild(b);return a};g.renderPreviewHTML=d;g.getDisplayedSymbol=function(b,d){return f.__awaiter(this,void 0,void 0,function(){var l,e,p,u,h,q,n,g,A,E,I,D,B,H,G,Q,
M,O,R,P,L,J,N;return f.__generator(this,function(r){switch(r.label){case 0:if(!b)return[2,void 0];l=k(b.layer||b.sourceLayer);return!m.isSome(b.symbol)||m.isSome(d)&&!0===d.ignoreGraphicSymbol?[3,4]:"web-style"!==b.symbol.type?[3,2]:[4,b.symbol.fetchSymbol(m.isSome(d)?d.abortOptions:null)];case 1:return p=r.sent(),[3,3];case 2:p=b.symbol.clone(),r.label=3;case 3:return e=p,a.applyColorToSymbol(e,null,l),[2,e];case 4:return u=m.isSome(d)&&d.renderer||b.get("layer.renderer")||b.get("sourceLayer.renderer"),
[4,u.getSymbolAsync(b)];case 5:return(h=r.sent())?"web-style"!==h.type?[3,7]:[4,h.fetchSymbol(m.isSome(d)?d.abortOptions:null)]:[2,void 0];case 6:return h=r.sent(),[3,8];case 7:h=h.clone(),r.label=8;case 8:if(!("visualVariables"in u)||"visualVariables"in u&&!u.visualVariables||"visualVariables"in u&&u.visualVariables&&!u.visualVariables.length)return[2,h];if(!u.arcadeRequiredForVisualVariables||!m.isNone(d)&&!m.isNone(d.arcade))return[3,10];n=q=f.__assign({},m.unwrap(d));return[4,c.loadArcade()];
case 9:n.arcade=r.sent(),d=q,r.label=10;case 10:return[4,new Promise(function(a,b){t(["../../renderers/visualVariables/support/visualVariableUtils"],a,b)})];case 11:g=r.sent();A=[];E=[];I=[];D=[];B=0;for(H=u.visualVariables;B<H.length;B++)switch(G=H[B],G.type){case "color":A.push(G);break;case "opacity":E.push(G);break;case "rotation":D.push(G);break;case "size":G.target||I.push(G)}M=(Q=!!A.length&&A[A.length-1])?g.getColor(Q,b,d):null;R=(O=!!E.length&&E[E.length-1])?g.getOpacity(O,b,d):null;null!=
l&&(R=null!=R?R*l:l);a.applyColorToSymbol(h,M,R);if(!I.length)return[3,13];P=g.getAllSizes(I,b,d);return[4,a.applySizesToSymbol(h,P)];case 12:r.sent(),r.label=13;case 13:L=0;for(J=D;L<J.length;L++)N=J[L],a.applyRotationToSymbol(h,g.getRotationAngle(N,b,d),N.axis);return[2,h]}})})}})},"esri/symbols/support/previewCIMSymbol":function(){define(["require","exports","tslib","../cim/CIMSymbolRasterizer"],function(t,g,f,n){Object.defineProperty(g,"__esModule",{value:!0});var m=new n.CIMSymbolRasterizer(null,
!0);g.previewCIMSymbol=function(c,e){void 0===e&&(e={});return f.__awaiter(this,void 0,void 0,function(){var h,q,b,a,d,k,p,l,u,r,z,v;return f.__generator(this,function(f){switch(f.label){case 0:return h=e.size,q=e.maxSize,b=e.feature,a=e.fieldMap,d=e.geometryType,k=e.style,p=Math.min(h||22,q||120),l=3,c&&c.data&&c.data.symbol&&"CIMPointSymbol"!==c.data.symbol.type&&(l=1),[4,m.rasterizeCIMSymbolAsync(c,b,a,d,{targetSize:p*l,style:k})];case 1:return u=f.sent(),r=document.createElement("canvas"),r.width=
u.imageData.width,r.height=u.imageData.height,z=r.getContext("2d"),z.putImageData(u.imageData,0,0),v=new Image(r.width/l,r.height/l),v.src=r.toDataURL(),[2,v]}})})}})},"esri/symbols/cim/CIMSymbolRasterizer":function(){define("require exports tslib ../../request ../../core/promiseUtils ../../core/screenUtils ../../core/string ../../geometry/support/jsonUtils ./cimAnalyzer ./cimSymbolUtils ./Rasterizer ./TextRasterizer ./utils ../support/Symbol3DAnchorPosition2D".split(" "),function(t,g,f,n,m,c,e,h,
q,b,a,d,k,p){function l(a){return(a?Object.keys(a):[]).map(function(b){return{name:b,alias:b,type:"string"===typeof a[b]?"esriFieldTypeString":"esriFieldTypeDouble"}})}function u(a){if(!(a&&a.data&&a.data.symbol))return null;switch(a.data.symbol.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function r(a,b,d,k){if("function"===typeof a.materialHash){var l=
a.materialHash;b=l(b,d,k);a=q.analyzeCIMResource(a.cim,a.materialOverrides)}else b=a.materialHash,a=a.cim;return{analyzedCIM:a,hash:b}}Object.defineProperty(g,"__esModule",{value:!0});var z;(function(a){a.Legend="legend";a.Preview="preview"})(z=g.GeometryStyle||(g.GeometryStyle={}));var v=function(a,b,d){if(a&&a.targetSize){var k=void 0;return k=d?a.targetSize/c.pt2px(Math.max(d.frame.xmax-d.frame.xmin,d.frame.ymax-d.frame.ymin)):a.targetSize/b.referenceSize}return a?a.scaleFactor:1},F={fill:{legend:{frame:{xmax:15,
xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},
geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};t=function(){function g(b,k){this._spatialReference=b;this._avoidSDF=k;this._resourceCache=new Map;this._rasterizer=new a.default;this._textRasterizer=new d.default;this._pictureMarkerCache=new Map}g.prototype.rasterizeCIMSymbolAsync=function(a,b,d,k,c,e,p,r){return f.__awaiter(this,void 0,void 0,function(){var q;return f.__generator(this,function(f){switch(f.label){case 0:return k=k||(b?null!=b.centroid?"esriGeometryPolygon":
h.getJsonType(b.geometry):null)||u(a),[4,this.analyzeCIMSymbol(a,b?l(b.attributes):null,d,k,r)];case 1:return q=f.sent(),[2,this.rasterizeCIMSymbol(q,b,k,c,e,p)]}})})};g.prototype.analyzeCIMSymbol=function(a,d,l,c,e){return f.__awaiter(this,void 0,void 0,function(){var p,u,h,r,z,v,g;return f.__generator(this,function(f){switch(f.label){case 0:return[4,b.fetchSymbol(a,e)];case 1:return p=f.sent(),u=[],d?h={geometryType:c,spatialReference:this._spatialReference,fields:d}:(p=p.clone(),"CIMSymbolReference"===
p.data.type&&(p.data.primitiveOverrides=[],h=null)),[4,q.analyzeCIMSymbol(p.data,h,u,this._avoidSDF)];case 2:f.sent();m.throwIfAborted(e);z=0;for(v=u;z<v.length;z++){g=v[z];if("CIMPictureMarker"===g.cim.type||"CIMPictureFill"===g.cim.type||"CIMPictureStroke"===g.cim.type)r||(r=[]),r.push(this.fetchPictureMarkerResource(g,e));l&&"text"===g.type&&"string"===typeof g.text&&-1<g.text.indexOf("[")&&(g.text=k.createLabelOverrideFunction(l,g.text,g.cim.textCase))}return r?[4,m.all(r)]:[3,4];case 3:f.sent(),
f.label=4;case 4:return[2,u]}})})};g.prototype.fetchPictureMarkerResource=function(a,b){return f.__awaiter(this,void 0,void 0,function(){var d,k,l;return f.__generator(this,function(c){switch(c.label){case 0:return d=a.materialHash,this._pictureMarkerCache.get(d)?[3,2]:[4,n(a.cim.url,{responseType:"image",signal:b&&b.signal})];case 1:k=c.sent(),l=k.data,this._pictureMarkerCache.set(d,l),c.label=2;case 2:return[2]}})})};g.prototype.rasterizeCIMSymbol=function(a,b,d,l,c,e){for(var p=[],u=0;u<a.length;u++){var h=
a[u];l&&"function"===typeof l.scaleFactor&&(l.scaleFactor=l.scaleFactor(b,c,e));var r=this._getRasterizedResource(h,b,d,l,c,e);if(r){var q=0,f=r.anchorX||0,z=r.anchorY||0,g=!1,m=0,n=0;if("esriGeometryPoint"===d)if(n=v(l,h,null),m=k.evaluateValueOrFunction(h.offsetX,b,c,e)*n||0,n=k.evaluateValueOrFunction(h.offsetY,b,c,e)*n||0,"marker"===h.type)q=k.evaluateValueOrFunction(h.rotation,b,c,e)||0,g=h.rotateClockwise?h.rotateClockwise:!1;else if("text"===h.type){q=k.evaluateValueOrFunction(h.angle,b,c,
e)||0;if(void 0!==h.horizontalAlignment)switch(h.horizontalAlignment){case "left":f=-.5;break;case "right":f=.5;break;default:f=0}if(void 0!==h.verticalAlignment)switch(h.verticalAlignment){case "top":z=.5;break;case "bottom":z=-.5;break;case "baseline":z=-.25;break;default:z=0}}null!=r&&p.push({angle:q,rotateClockWise:g,anchorX:f,anchorY:z,offsetX:m,offsetY:n,rasterizedResource:r})}}return this.getSymbolImage(p)};g.prototype.getSymbolImage=function(a){for(var b=document.createElement("canvas"),d=
b.getContext("2d"),k=0,l=0,e=0,u=0,h=[],r=0;r<a.length;r++){var q=a[r],f=q.rasterizedResource;if(f){var z=f.size,v=q.offsetX,g=q.offsetY,m=q.anchorX,n=q.anchorY,w=q.rotateClockWise||!1,q=q.angle,F=c.pt2px(v)-z[0]*(.5+m),x=c.pt2px(g)-z[1]*(.5+n),t=F+z[0],U=x+z[1];if(q){w&&(q=-q);var S=Math.sin(q*Math.PI/180),T=Math.cos(q*Math.PI/180),z=F*T-x*S,W=F*S+x*T,K=F*T-U*S,X=F*S+U*T,ca=t*T-U*S,U=t*S+U*T,ha=t*T-x*S,S=t*S+x*T,F=Math.min(z,K,ca,ha),x=Math.min(W,X,U,S),t=Math.max(z,K,ca,ha),U=Math.max(W,X,U,S)}k=
F<k?F:k;l=x<l?x:l;e=t>e?t:e;u=U>u?U:u;F=d.createImageData(f.size[0],f.size[1]);F.data.set(new Uint8ClampedArray(f.image.buffer));f={offsetX:v,offsetY:g,rotateClockwise:w,angle:q,rasterizedImage:F,anchorX:m,anchorY:n};h.push(f)}}b.width=e-k;b.height=u-l;a=-k;for(r=0;r<h.length;r++)f=h[r],k=this._imageDataToCanvas(f.rasterizedImage),l=a-f.rasterizedImage.width*(.5+f.anchorX),e=u-f.rasterizedImage.height*(.5-f.anchorY),f.angle?(v=(360-f.angle)*Math.PI/180,d.save(),d.translate(c.pt2px(f.offsetX),-c.pt2px(f.offsetY)),
d.translate(a,u),d.rotate(v),d.translate(-a,-u),d.drawImage(k,l,e),d.restore()):d.drawImage(k,l+c.pt2px(f.offsetX),e-c.pt2px(f.offsetY));h=new p.default({x:a/b.width-.5,y:u/b.height-.5});return{imageData:0!==b.width&&0!==b.height?d.getImageData(0,0,b.width,b.height):d.createImageData(1,1),anchorPosition:h}};g.prototype._imageDataToCanvas=function(a){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var b=this._imageDataCanvas,d=b.getContext("2d");b.width=a.width;b.height=
a.height;d.putImageData(a,0,0);return b};g.prototype._imageTo32Array=function(a,b,d){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var k=this._imageDataCanvas,l=k.getContext("2d");k.width=b;k.height=d;l.drawImage(a,0,0,b,d);return new Uint32Array(l.getImageData(0,0,b,d).data.buffer)};g.prototype._getRasterizedResource=function(a,b,d,l,c,p){var u,h,q;if("esriGeometryPolyline"===d||"esriGeometryPolygon"===d)if(u=l&&l.style?l.style:z.Legend,u="esriGeometryPolyline"===
d?F.stroke[u]:F.fill[u],"line"===a.type)if("CIMSolidStroke"===a.cim.type)a=r(a,b,c,p),h=a.analyzedCIM,q=a.hash,h=this._embedCIMLayerInVectorMarker(h,u);else return"CIMPictureStroke"===a.cim.type?(h=k.evaluateValueOrFunction(a.width,b,c,p),q=l=d=void 0,b=this._getPictureResource(a,h),d=b.image,l=b.width,q=b.height,this._rasterizePictureResource(a,d,l,q,u,h)):null;else if("marker"===a.type)if("CIMPictureMarker"!==a.cim.type&&"CIMVectorMarker"===a.cim.type)a.cim.offsetX=k.evaluateValueOrFunction(a.offsetX,
b,c,p),a.cim.offsetY=k.evaluateValueOrFunction(a.offsetY,b,c,p),a.cim.rotation=k.evaluateValueOrFunction(a.rotation,b,c,p),a.cim.markerPlacement=a.markerPlacement,h=r(a,b,c,p).analyzedCIM,q=e.numericHash(JSON.stringify(h)).toString(),h=this._embedCIMLayerInVectorMarker(h,u);else return null;else{if("text"===a.type)return null;if("fill"===a.type){if("CIMHatchFill"===a.cim.type||"CIMVectorMarker"===a.cim.type||"CIMPictureMarker"===a.cim.type||"CIMPictureFill"===a.cim.type)return h=a.cim.size||a.cim.height,
q=l=d=void 0,"CIMPictureMarker"===a.cim.type||"CIMPictureFill"===a.cim.type?(b=this._getPictureResource(a,h),d=b.image,l=b.width,q=b.height):(b=r(a,b,c,p),h=b.analyzedCIM,q=b.hash,b=this._rasterizer.rasterizeJSONResource(h,this._avoidSDF),d=b.image,l=b.size[0],q=b.size[1]),this._rasterizePictureResource(a,d,l,q,u,null);if("CIMSolidFill"===a.cim.type)a=r(a,b,c,p),h=a.analyzedCIM,q=a.hash,h=this._embedCIMLayerInVectorMarker(h,u);else return null}}else{if("text"===a.type)return u=this._rasterizeTextResource(a,
b,l,c,p);u=r(a,b,c,p);h=u.analyzedCIM;q=u.hash;u=v(l,a,null);if("CIMPictureMarker"===a.cim.type)return h=k.evaluateValueOrFunction(a.size,b,c,p)*u,u=this._getPictureResource(a,h),d=u.image,l=u.width,q=u.height,u={image:d,size:[l,q],sdf:!1,simplePattern:!1,anchorX:a.anchorPoint?a.anchorPoint.x:0,anchorY:a.anchorPoint?a.anchorPoint.y:0};h.size*=u}q+=d;l&&(q+=JSON.stringify(l));a=this._resourceCache;if(a.has(q))return a.get(q);u=this._rasterizer.rasterizeJSONResource(h,this._avoidSDF);a.set(q,u);return u};
g.prototype._rasterizeTextResource=function(a,b,d,l,c){var e=v(d,a,null);d=k.evaluateValueOrFunction(a.text,b,l,c);if(!d||0===d.length)return null;var p=k.evaluateValueOrFunction(a.fontName,b,l,c),u=k.evaluateValueOrFunction(a.style,b,l,c),h=k.evaluateValueOrFunction(a.weight,b,l,c),r=k.evaluateValueOrFunction(a.decoration,b,l,c),e=k.evaluateValueOrFunction(a.size,b,l,c)*e,q=k.evaluateValueOrFunction(a.horizontalAlignment,b,l,c),f=k.evaluateValueOrFunction(a.verticalAlignment,b,l,c),z=k.colorToArray(k.evaluateValueOrFunction(a.color,
b,l,c)),g=k.colorToArray(k.evaluateValueOrFunction(a.outlineColor,b,l,c));a=k.evaluateValueOrFunction(a.outlineSize,b,l,c);return this._textRasterizer.rasterizeText(d,{color:z,size:e,horizontalAlignment:q,verticalAlignment:f,font:{family:p,style:u,weight:h,decoration:r},halo:{size:a||0,color:g,style:u},pixelRatio:1,premultiplyColors:!this._avoidSDF})};g.prototype._rasterizePictureResource=function(a,b,d,k,l,e){var p=document.createElement("canvas"),u=p.getContext("2d");p.height=c.pt2px(Math.max(Math.abs(l.frame.ymax-
l.frame.ymin),e));p.width=c.pt2px(Math.abs(l.frame.xmax-l.frame.xmin));d=u.createImageData(d,k);d.data.set(new Uint8ClampedArray(b.buffer));b=this._imageDataToCanvas(d);b=u.createPattern(b,"repeat");d=Math.cos((-a.cim.rotation||0)*Math.PI/180);k=Math.sin((-a.cim.rotation||0)*Math.PI/180);b.setTransform({m11:d,m12:k,m21:-k,m22:d,m41:c.pt2px(a.cim.offsetX)||0,m42:c.pt2px(a.cim.offsetY)||0});a=l.canvasPaths;var r,q,f;h.isPolygon(a)?(r=a.rings,u.fillStyle=b,q=u.fill,f=["evenodd"]):h.isPolyline(a)&&(r=
a.paths,u.strokeStyle=b,u.lineWidth=e,q=u.stroke,r[0][0][1]=p.height/2,r[0][1][1]=p.height/2);u.beginPath();for(e=0;e<r.length;e++)if(l=(a=r[e])?a.length:0,1<l){b=a[0];u.moveTo(c.pt2px(b[0]),c.pt2px(b[1]));for(d=1;d<l;++d)b=a[d],u.lineTo(c.pt2px(b[0]),c.pt2px(b[1]));u.closePath()}q.apply(u,f);u=u.getImageData(0,0,p.width,p.height);u=new Uint8Array(u.data);return{size:[p.width,p.height],image:new Uint32Array(u.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}};g.prototype._getPictureResource=function(a,
b){a=this._pictureMarkerCache.get(a.materialHash);if(!a)return null;var d=a.height/a.width,k=b?1<d?c.pt2px(b):c.pt2px(b)/d:a.width;b=b?1<d?c.pt2px(b)*d:c.pt2px(b):a.height;return{image:this._imageTo32Array(a,k,b),width:k,height:b}};g.prototype._embedCIMLayerInVectorMarker=function(a,b){var d=h.isPolygon(b.geometry)?"CIMPolygonSymbol":"CIMLineSymbol";return{type:"CIMVectorMarker",frame:b.frame,markerGraphics:[{type:"CIMMarkerGraphic",geometry:b.geometry,symbol:{type:d,symbolLayers:[a]}}]}};return g}();
g.CIMSymbolRasterizer=t})},"esri/symbols/cim/Rasterizer":function(){define("require exports ./CIMSymbolHelper ./Rect ./SDFHelper ./utils".split(" "),function(t,g,f,n,m,c){Object.defineProperty(g,"__esModule",{value:!0});t=function(){function e(){}e.prototype.dispose=function(){this._rasterizationCanvas=null};e.prototype.rasterizeJSONResource=function(c,e){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));if("simple-fill"===c.type||"esriSFS"===c.type)return e=
f.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,c.style),{size:[e[1],e[2]],image:new Uint32Array(e[0].buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0};if("simple-line"===c.type||"esriSLS"===c.type)return e=f.SymbolHelper.rasterizeSimpleLine(c.style,c.cap),{size:[e[1],e[2]],image:new Uint32Array(e[0].buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0};var b,a;"simple-marker"===c.type||"esriSMS"===c.type||"line-marker"===c.type?(c=f.CIMSymbolHelper.fromSimpleMarker(c),a=m.getSDFInfo(c)):
"CIMHatchFill"===c.type?(c=f.CIMSymbolHelper.fromCIMHatchFill(c),b=new n.default(c.frame.xmin,-c.frame.ymax,c.frame.xmax-c.frame.xmin,c.frame.ymax-c.frame.ymin)):c.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===c.markerPlacement.type?(c=f.CIMSymbolHelper.fromCIMInsidePolygon(c),b=new n.default(c.frame.xmin,-c.frame.ymax,c.frame.xmax-c.frame.xmin,c.frame.ymax-c.frame.ymin)):a=m.getSDFInfo(c);if(a&&!e)return e=m.buildSDF(a),(b=e[0])?{size:[e[1],e[2]],image:new Uint32Array(b.buffer),sdf:!0,simplePattern:!0,
anchorX:0,anchorY:0}:null;e=f.CIMSymbolHelper.rasterize(this._rasterizationCanvas,c,b,!e);b=e[0];a=e[3];c=e[4];return b?{size:[e[1],e[2]],image:new Uint32Array(b.buffer),sdf:!1,simplePattern:!1,anchorX:a,anchorY:c}:null};e.prototype.rasterizeImageResource=function(e,q){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));this._rasterizationCanvas.width=e.width;this._rasterizationCanvas.height=e.height;var b=this._rasterizationCanvas.getContext("2d");e instanceof
ImageData?b.putImageData(e,0,0):(e.setAttribute("width",e.width.toString()),e.setAttribute("height",e.height.toString()),b.drawImage(e,0,0,e.width,e.height));b=b.getImageData(0,0,e.width,e.height);b=new Uint8Array(b.data);if(q)for(var a=0;a<q.length;a++){var d=q[a];if(d&&d.oldColor&&4===d.oldColor.length&&d.newColor&&4===d.newColor.length){var k=d.oldColor,p=k[0],l=k[1],u=k[2],k=k[3],h=d.newColor,d=h[0],f=h[1],v=h[2],g=h[3];if(p!==d||l!==f||u!==v||k!==g)for(h=0;h<b.length;h+=4)p===b[h]&&l===b[h+1]&&
u===b[h+2]&&k===b[h+3]&&(b[h]=d,b[h+1]=f,b[h+2]=v,b[h+3]=g)}}for(h=0;h<b.length;h+=4)q=b[h+3]/255,b[h]*=q,b[h+1]*=q,b[h+2]*=q;q=e.width;a=e.height;p=b;if(512<=q||512<=a)p=e.width/e.height,1<p?(q=512,a=Math.round(512/p)):(a=512,q=Math.round(512*p)),p=new Uint8Array(4*q*a),c.resampleHermite(b,e.width,e.height,new Uint8ClampedArray(p.buffer),q,a,!1);return{size:[q,a],image:new Uint32Array(p.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}};return e}();g.default=t})},"esri/symbols/cim/TextRasterizer":function(){define(["require",
"exports","../../core/screenUtils"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});t=function(){function c(){}c.prototype.rasterizeText=function(c,h){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var e=this._textRasterizationCanvas,b=e.getContext("2d");this.setFontProperties(b,h);this.parameters=h;this.textLines=c.split(/\r?\n/);this.lineHeight=this.computeLineHeight();c=this.computeTextWidth(b,h);var a=this.lineHeight*this.textLines.length;
e.width=c;e.height=a;this.renderedLineHeight=Math.round(this.lineHeight*h.pixelRatio);this.renderedHaloSize=h.halo.size*h.pixelRatio;this.renderedWidth=c*h.pixelRatio;this.renderedHeight=a*h.pixelRatio;e=h.color;this.fillStyle="rgba("+e.slice(0,3).toString()+","+e[3]+")";this.haloStyle="rgb("+h.halo.color.slice(0,3).toString()+")";var e=this.renderedLineHeight,d=this.renderedHaloSize;this.setFontProperties(b,h);c=b.textAlign;var a=this.renderedWidth,k=("center"===c?.5*a:"right"===c?a:0)+d,a=c=0;0<
d&&this.renderHalo(b,k,d,c,a,h);a+=d;c+=k;d=0;for(k=this.textLines;d<k.length;d++){var p=k[d];b.globalCompositeOperation="destination-out";b.fillStyle="rgb(0, 0, 0)";b.fillText(p,c,a);b.globalCompositeOperation="source-over";b.fillStyle=this.fillStyle;b.fillText(p,c,a);a+=e}b=b.getImageData(0,0,this.renderedWidth,this.renderedHeight);b=new Uint8Array(b.data);if(h.premultiplyColors)for(h=void 0,e=0;e<b.length;e+=4)h=b[e+3]/255,b[e]*=h,b[e+1]*=h,b[e+2]*=h;return{size:[this.renderedWidth,this.renderedHeight],
image:new Uint32Array(b.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}};c.prototype.renderHalo=function(c,h,f,b,a,d){var k=this.renderedWidth,e=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement("canvas"));this._haloRasterizationCanvas.width=k;this._haloRasterizationCanvas.height=e;var l=this._haloRasterizationCanvas,u=l.getContext("2d");u.clearRect(0,0,k,e);this.setFontProperties(u,d);u.fillStyle=this.haloStyle;u.strokeStyle=this.haloStyle;
d=3>this.renderedHaloSize;u.lineJoin=d?"miter":"round";d?this.renderHaloEmulated(u,h,f):this.renderHaloNative(u,h,f);c.globalAlpha=this.parameters.halo.color[3];c.drawImage(l,0,0,k,e,b,a,k,e);c.globalAlpha=1};c.prototype.renderHaloEmulated=function(c,h,f){for(var b=this.renderedLineHeight,a=this.renderedHaloSize,d=0,k=this.textLines;d<k.length;d++){for(var e=k[d],l=0,u=n;l<u.length;l++){var r=u[l];c.fillText(e,h+a*r[0],f+a*r[1])}f+=b}};c.prototype.renderHaloNative=function(c,h,f){for(var b=this.renderedLineHeight,
a=this.renderedHaloSize,d=0,k=this.textLines;d<k.length;d++){for(var e=k[d],l=2*a,u=0;5>u;u++)c.lineWidth=(.6+.1*u)*l,c.strokeText(e,h,f);f+=b}};c.prototype.setFontProperties=function(c,h){var e=h.font;h=e.style+" "+e.weight+" "+f.pt2px(h.size*h.pixelRatio)+"px "+e.family+", sans-serif";c.font=h;c.textAlign="left";c.textBaseline="top"};c.prototype.computeTextWidth=function(c,h){for(var e=0,b=0,a=this.textLines;b<a.length;b++)e=Math.max(e,c.measureText(a[b]).width);h=h.font;if("italic"===h.style||
"oblique"===h.style||"string"===typeof h.weight&&("bold"===h.weight||"bolder"===h.weight)||"number"===typeof h.weight&&600<h.weight)e+=.3*c.measureText("A").width;e+=2*this.parameters.halo.size;return Math.round(e)};c.prototype.computeLineHeight=function(){return Math.round(1.275*this.parameters.size+2*this.parameters.halo.size)};return c}();g.TextRasterizer=t;for(var n=[],m=0;360>m;m+=22.5)n.push([Math.cos(Math.PI*m/180),Math.sin(Math.PI*m/180)]);g.default=t})},"esri/symbols/support/previewSymbol2D":function(){define("require exports ../../core/Error ../../core/promiseUtils ../../core/screenUtils ./gfxUtils ./previewUtils ./renderUtils".split(" "),
function(t,g,f,n,m,c,e,h){function q(b,d){var k=a.getContext("2d"),c=[];d&&(d.weight&&c.push(d.weight),d.size&&c.push(d.size+"px"),d.family&&c.push(d.family));k.font=c.join(" ");return k.measureText(b).width}function b(a){if(0===a.length)return 0;if(2<a.length){var b=m.px2pt(1),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*c*b;case "pc":return 12*c*b;case "mm":return c*d*b;case "cm":return c*k*b}}return parseFloat(a)}Object.defineProperty(g,"__esModule",
{value:!0});var a=document.createElement("canvas"),d=7.2/2.54,k=72/2.54;g.previewSymbol2D=function(a,d){var k=d&&d.size?m.pt2px(d.size):null,l=d&&d.maxSize?m.pt2px(d.maxSize):null,p=d&&null!=d.opacity?d.opacity:null,v=d&&null!=d.rotation?d.rotation:null,g=c.getStroke(a),x={shape:null,fill:null,stroke:g};g&&g.width&&(g.width=Math.min(g.width,80));var w=0,y=0;switch(a.type){case "simple-marker":var g=a.style,C=m.pt2px(a.size),w=Math.min(k||C||22,l||120),y=Math.min(k||C||22,l||120);switch(g){case "circle":x.shape=
{type:"circle",cx:.5*C,cy:.5*C,r:.5*C};break;case "cross":x.shape={type:"path",path:[{command:"M",values:[0,.5*y]},{command:"L",values:[w,.5*y]},{command:"M",values:[.5*w,0]},{command:"L",values:[.5*w,y]}]};break;case "diamond":x.shape={type:"path",path:[{command:"M",values:[0,.5*y]},{command:"L",values:[.5*w,0]},{command:"L",values:[w,.5*y]},{command:"L",values:[.5*w,y]},{command:"Z",values:[]}]};break;case "square":x.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[w,0]},
{command:"L",values:[w,y]},{command:"L",values:[0,y]},{command:"Z",values:[]}]};break;case "triangle":x.shape={type:"path",path:[{command:"M",values:[.5*w,0]},{command:"L",values:[w,y]},{command:"L",values:[0,y]},{command:"Z",values:[]}]};break;case "x":x.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[w,y]},{command:"M",values:[w,0]},{command:"L",values:[0,y]}]};break;case "path":x.shape={type:"path",path:a.path||""}}break;case "simple-line":k=Math.min(k||g&&g.width||22,
l||80);g.width=k;w=22<k?2*k:40;y=k;x.shape={type:"path",path:[{command:"M",values:[0,y]},{command:"L",values:[w,y]}]};break;case "picture-fill":case "simple-fill":w=Math.min(k||22,l||120);y=Math.min(k||22,l||120);x.shape=e.shapes.fill[0];break;case "picture-marker":var g=m.pt2px(a.width),A=m.pt2px(a.height),C=Math.max(g,A),A=g/A,g=1>=A?Math.ceil(C*A):C,A=1>=A?C:Math.ceil(C/A),w=Math.min(k||g||22,l||120),y=Math.min(k||A||22,l||120);x.shape={type:"image",x:-Math.round(w/2),y:-Math.round(y/2),width:w,
height:y,src:a.url||""};break;case "text":g=a.text||"Aa",C=a.font,k=Math.min(k||m.pt2px(C.size),l||120),A=q(g,{weight:C.weight,size:k,family:C.family}),w=(l=/[\uE600-\uE6FF]/.test(g))?k:A,y=k,A=.25*b((C?k:0).toString()),l&&(A+=5),x.shape={type:"text",text:g,x:0,y:A,align:"middle",decoration:C&&C.decoration,rotated:a.rotated,kerning:a.kerning},x.font=C&&{size:k,style:C.style,decoration:C.decoration,weight:C.weight,family:C.family}}if(!x.shape)return n.reject(new f("symbolPreview: renderPreviewHTML2D",
"symbol not supported."));var E=c.getFill(a),k=a.color,l=null;E&&"pattern"===E.type&&k&&"picture-fill"!==a.type?l=c.getPatternUrlWithColor(E.src,k.toCss(!0)).then(function(a){E.src=a;x.fill=E;return x}):(x.fill=E,l=n.resolve(x));return l.then(function(a){return h.renderSymbol([[a]],[w,y],{node:d&&d.node,scale:!0,opacity:p,rotation:v})})}})},"esri/symbols/support/gfxUtils":function(){define("require exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/promiseUtils ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(t,g,f,n,m,c,e,h,q){function b(a){if(!a)return null;var d;switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":d=b(a.outline);break;case "simple-line":var k=h.pt2px(a.width);"none"!==a.style&&0!==k&&(d={color:a.color,style:l(a.style),width:k,cap:a.cap,join:"miter"===a.join?h.pt2px(a.miterLimit):a.join});break;default:d=null}return d}Object.defineProperty(g,"__esModule",{value:!0});var a=f.getAssetUrl("../../symbols/patterns/"),d={left:"start",center:"middle",right:"end",
justify:"start"},k={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},p=new c(1E3);g.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&d[a.toLowerCase()]||"middle"};g.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&k[a.toLowerCase()]||"alphabetic"};g.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};g.getFill=function(b){var d=b.style,k=null;if(b)switch(b.type){case "simple-marker":"cross"!==d&&"x"!==d&&(k=
b.color);break;case "simple-fill":"solid"===d?k=b.color:"none"!==d&&(k={type:"pattern",x:0,y:0,src:a+d+".png",width:8,height:8});break;case "picture-fill":k={type:"pattern",src:b.url,width:h.pt2px(b.width)*b.xscale,height:h.pt2px(b.height)*b.yscale,x:h.pt2px(b.xoffset),y:h.pt2px(b.yoffset)};break;case "text":k=b.color;break;case "cim":k=q.getCIMSymbolColor(b)}return k};g.getPatternUrlWithColor=function(a,b){var d=a+"-"+b;return void 0!==p.get(d)?e.resolve(p.get(d)):m(a,{responseType:"image"}).then(function(a){a=
a.data;var k=a.naturalWidth,c=a.naturalHeight,l=document.createElement("canvas");l.width=k;l.height=c;var e=l.getContext("2d");e.fillStyle=b;e.fillRect(0,0,k,c);e.globalCompositeOperation="destination-in";e.drawImage(a,0,0);a=l.toDataURL();p.put(d,a);return a})};g.getStroke=b;var l=function(){var a={};return function(b){if(a[b])return a[b];var d=b.replace(/-/g,"");return a[b]=d}}();g.defaultThematicColor=new n([128,128,128])})},"esri/core/ItemCache":function(){define(["require","exports","./MemCache"],
function(t,g,f){return function(){function g(g,c){this._storage=new f.MemCacheStorage;this._storage.maxSize=g;c&&this._storage.registerRemoveFunc("",c)}g.prototype.put=function(f,c){this._storage.put(f,c,1,1)};g.prototype.pop=function(f){return this._storage.pop(f)};g.prototype.get=function(f){return this._storage.get(f)};g.prototype.clear=function(){this._storage.clearAll()};g.prototype.destroy=function(){this._storage.clearAll()};return g}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["require",
"exports","../../Color","../cim/utils"],function(t,g,f,n){function m(a){var b=n.toCIMSymbolJSON(a);if("CIMTextSymbol"===b.type)return b.height;a=0;if(b.symbolLayers)for(var d=0,b=b.symbolLayers;d<b.length;d++){var c=b[d];n.isCIMMarker(c)&&c.size>a?a=c.size:n.isCIMStroke(c)&&c.width>a?a=c.width:n.isCIMFill(c)}return a}function c(a,b,p){if("CIMTextSymbol"===a.type)a.height*=b;else{if(p&&a.effects){p=0;for(var d=a.effects;p<d.length;p++)h(d[p],b)}if(a.symbolLayers)for(p=0,a=a.symbolLayers;p<a.length;p++)switch(d=
a[p],d.type){case "CIMPictureMarker":case "CIMVectorMarker":d.markerPlacement&&e(d.markerPlacement,b);d.offsetX*=b;d.offsetY*=b;d.anchorPoint&&"Absolute"===d.anchorPointUnits&&(d.anchorPoint={x:d.anchorPoint.x*b,y:d.anchorPoint.y*b});d.size*=b;if("CIMVectorMarker"===d.type&&d.markerGraphics)for(var k=0,f=d.markerGraphics;k<f.length;k++){var q=f[k];d.scaleSymbolsProportionally||c(q.symbol,b,!0)}break;case "CIMPictureStroke":case "CIMSolidStroke":d.width*=b;break;case "CIMPictureFill":d.height*=b;d.offsetX*=
b;d.offsetY*=b;break;case "CIMHatchFill":c(d.lineSymbol,b,!0),d.offsetX*=b,d.offsetY*=b,d.separation*=b}}}function e(a,b){n.isCIMMarkerStrokePlacement(a)&&(a.offset*=b);switch(a.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":a.customEndingOffset*=b;a.offsetAlongLine*=b;if(a.placementTemplate&&a.placementTemplate.length){var d=a.placementTemplate.map(function(a){return a*b});a.placementTemplate=d}break;case "CIMMarkerPlacementAlongLineVariableSize":a.maxRandomOffset*=
b;a.placementTemplate&&a.placementTemplate.length&&(d=a.placementTemplate.map(function(a){return a*b}),a.placementTemplate=d);break;case "CIMMarkerPlacementOnLine":a.startPointOffset*=b;break;case "CIMMarkerPlacementAtExtremities":a.offsetAlongLine*=b;break;case "CIMMarkerPlacementAtRatioPositions":a.beginPosition*=b;a.endPosition*=b;break;case "CIMMarkerPlacementPolygonCenter":a.offsetX*=b;a.offsetY*=b;break;case "CIMMarkerPlacementInsidePolygon":a.offsetX*=b,a.offsetY*=b,a.stepX*=b,a.stepY*=b}}
function h(a,b){switch(a.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":a.width*=b;break;case "CIMGeometricEffectBuffer":a.size*=b;break;case "CIMGeometricEffectCut":a.beginCut*=b;a.endCut*=b;a.middleCut*=b;break;case "CIMGeometricEffectDashes":a.customEndingOffset*=b;a.offsetAlongLine*=b;if(a.dashTemplate&&a.dashTemplate.length){var d=a.dashTemplate.map(function(a){return a*b});a.dashTemplate=d}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":a.length*=
b;break;case "CIMGeometricEffectMove":a.offsetX*=b;a.offsetY*=b;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":a.offset*=b;break;case "CIMGeometricEffectRegularPolygon":a.radius*=b;break;case "CIMGeometricEffectTaperedPolygon":a.fromWidth*=b;a.length*=b;a.toWidth*=b;break;case "CIMGeometricEffectWave":a.amplitude*=b,a.period*=b}}function q(a,k){var d;d="CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===a.type;if(d.symbolLayers){var c=0;for(d=d.symbolLayers;c<
d.length;c++){var e=d[c];if(!(e.colorLocked||a&&(n.isCIMStroke(e)||n.isCIMMarker(e)&&e.markerPlacement&&n.isCIMMarkerStrokePlacement(e.markerPlacement))))switch(e.type){case "CIMVectorMarker":e.markerGraphics.forEach(function(a){q(a.symbol,k)});break;case "CIMSolidStroke":case "CIMSolidFill":b(k,e.color);break;case "CIMHatchFill":q(e.lineSymbol,k)}}}}function b(a,b){for(var d=0;d<a.length;d++)if(a[d].join(".")===b.join("."))return;a.push(b)}function a(b,k){var d;d="CIMTextSymbol"===b.type?b.symbol:
b;b="CIMPolygonSymbol"===b.type?!0:!1;if(d.symbolLayers){var c=0;for(d=d.symbolLayers;c<d.length;c++){var e=d[c];if(!(e.colorLocked||b&&(n.isCIMStroke(e)||n.isCIMMarker(e)&&e.markerPlacement&&n.isCIMMarkerStrokePlacement(e.markerPlacement)))){var h=k.toArray(0);switch(e.type){case "CIMVectorMarker":e.markerGraphics.forEach(function(b){a(b.symbol,k)});break;case "CIMSolidStroke":case "CIMSolidFill":e.color=h;break;case "CIMHatchFill":a(e.lineSymbol,k)}}}}}Object.defineProperty(g,"__esModule",{value:!0});
g.getCIMSymbolSize=m;g.scaleCIMSymbolTo=function(a,b){var d=n.toCIMSymbolJSON(a);a=m(a);if(0===a)if("CIMTextSymbol"===d.type)d.height=b;else{if(d.symbolLayers)for(a=0,d=d.symbolLayers;a<d.length;a++){var k=d[a];switch(k.type){case "CIMPictureMarker":case "CIMVectorMarker":k.size=b;break;case "CIMPictureStroke":case "CIMSolidStroke":k.width=b}}}else c(d,b/a,!1)};g.getCIMSymbolColor=function(a){a=n.toCIMSymbolJSON(a);var b=[];q(a,b);return b.length?new f(n.fromCIMColor(b[0])):null};g.applyCIMSymbolColor=
function(b,k){k instanceof f||(k=new f(k));b=n.toCIMSymbolJSON(b);a(b,k)};g.getCIMSymbolRotation=function(a){a=n.toCIMSymbolJSON(a);return"CIMTextSymbol"===a.type||"CIMPointSymbol"===a.type?a.angle||0:0};g.applyCIMSymbolRotation=function(a,b){a=n.toCIMSymbolJSON(a);if("CIMTextSymbol"===a.type)a.angle=b;else if("CIMPointSymbol"===a.type&&a.symbolLayers)for(var d=b-(a.angle||0),k=0,c=a.symbolLayers;k<c.length;k++){var e=c[k];if(n.isCIMMarker(e)){var h=e.rotation||0,h=e.rotateClockwise?h-d:h+d;e.rotation=
h}a.angle=b}}})},"esri/symbols/support/previewUtils":function(){define(["require","exports"],function(t,g){Object.defineProperty(g,"__esModule",{value:!0});g.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},
{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},
{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},
{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};g.getPathSymbolShapes=function(f){var g=22,m=22;1>f?g*=.75:1<f&&(m*=1.25);
return[{type:"path",path:[{command:"M",values:[22,0]},{command:"L",values:[19.25,0]},{command:"L",values:[0,m-11]},{command:"L",values:[g-11,m-11]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[22,0]},{command:"L",values:[22,2.75]},{command:"L",values:[g-11,22]},{command:"L",values:[g-11,m-11]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[g-11,m-11]},{command:"L",values:[0,m-11]},{command:"L",values:[0,22]},{command:"L",values:[g-11,22]},{command:"Z",values:[]}]}]};
g.getExtrudeSymbolShapes=function(f){f*=.5;return[{type:"path",path:[{command:"M",values:[0,.7*11]},{command:"L",values:[6.6,22*.7]},{command:"L",values:[6.6,22*.7+f]},{command:"L",values:[0,22*.7+f-.7*11]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,22*.7]},{command:"L",values:[6.6,22*.7+f]},{command:"L",values:[22,f]},{command:"L",values:[22,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,0]},{command:"L",values:[22,0]},{command:"L",values:[6.6,
22*.7]},{command:"L",values:[0,.7*11]},{command:"Z",values:[]}]}]};g.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
g.getCubeShapes=function(f,g){var m=g?20:f,c=g?4:6,c=m=22>=m?m-.5*c:m-c;g=g?.35*m:.5*m;return[{type:"path",path:[{command:"M",values:[.5*c,0]},{command:"L",values:[c,.5*g]},{command:"L",values:[.5*c,g]},{command:"L",values:[0,.5*g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*g]},{command:"L",values:[.5*c,g]},{command:"L",values:[.5*c,f]},{command:"L",values:[0,f-.5*g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*c,g]},{command:"L",values:[.5*c,
f]},{command:"L",values:[c,f-.5*g]},{command:"L",values:[c,.5*g]},{command:"Z",values:[]}]}]};g.getCylinderShapes=function(f,g){var m=g?20:f;g=g?4:6;m=22>=m?m-.5*g:m-g;g=.5*m;var c=.15*m;f-=c;return[{type:"ellipse",cx:.5*m,cy:f,rx:g,ry:c},{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[0,f]},{command:"L",values:[m,f]},{command:"L",values:[m,c]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*m,cy:c,rx:g,ry:c}]};g.getConeShapes=function(f,g){var m=g?20:f;g=g?4:6;m=22>=m?m-.5*g:m-
g;g=.15*m;var c=m;f-=g;return[{type:"ellipse",cx:.5*m,cy:f,rx:.5*m,ry:g},{type:"path",path:[{command:"M",values:[.5*c,0]},{command:"L",values:[c,f]},{command:"L",values:[0,f]},{command:"Z",values:[]}]}]};g.getInvertedConeShapes=function(f){var g=f,g=22>g?g-3:g-6,m=.15*g,c=g;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[c,0]},{command:"L",values:[.5*c,f-m]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*g,cy:0,rx:.5*g,ry:m}]};g.getDiamondShapes=function(f){var g=f,g=22>
g?g-2:g-4,m=Math.floor(f/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*g,0]},{command:"L",values:[g,.5*f-m]},{command:"L",values:[.45*g-m,.5*f+m]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*g,0]},{command:"L",values:[.45*g-m,.5*f+m]},{command:"L",values:[0,.5*f-m]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*f-m]},{command:"L",values:[.45*g-m,.5*f+m]},{command:"L",values:[.45*g,f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",
values:[.45*g,f]},{command:"L",values:[g,.5*f-m]},{command:"L",values:[.45*g-m,.5*f+m]},{command:"Z",values:[]}]}]};g.getTetrahedronShapes=function(f){var g=f,g=22>g?g-1:g-2;return[{type:"path",path:[{command:"M",values:[.45*f,0]},{command:"L",values:[f,g]},{command:"L",values:[.45*f,.6*g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*f,0]},{command:"L",values:[.45*f,.6*g]},{command:"L",values:[0,g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,g]},
{command:"L",values:[.45*f,.6*g]},{command:"L",values:[f,g]},{command:"Z",values:[]}]}]}})},"esri/symbols/support/renderUtils":function(){define("require exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../core/promiseUtils ../../libs/maquette/index ./svgUtils".split(" "),function(t,g,f,n,m,c,e,h,q,b){function a(a,b,d){return a?n(a,{responseType:"image"}).then(function(a){a=a.data;var k=a.width,c=a.height,e=k/c,l=b;d&&(l=Math.min(l,Math.max(k,c)));return{image:a,
width:1>=e?Math.ceil(l*e):l,height:1>=e?l:Math.ceil(l/e)}}):h.reject(new c("renderUtils: imageDataSize","href not provided."))}Object.defineProperty(g,"__esModule",{value:!0});var d=q.createProjector();g.renderSymbol=function(a,c,e){var k=Math.ceil(c[0]);c=Math.ceil(c[1]);if(!a.some(function(a){return!!a.length}))return null;var l=e&&e.node||document.createElement("div");null!=e.opacity&&(l.style.opacity=e.opacity.toString());d.append(l,b.renderSVG.bind(null,a,k,c,e));return l};g.tintImageWithColor=
function(b,d,c,h,q){return a(b,d,q).then(function(a){var k=a.width?a.width:d,l=a.height?a.height:d,p;if(p=a.image)p=c&&"ignore"!==h?"multiply"===h&&255===c.r&&255===c.g&&255===c.b&&1===c.a?!1:!0:!1;if(p){var u=a.image.width,q=a.image.height;(e("edge")||e("ie"))&&/\.svg$/i.test(b)&&(--u,--q);var r,g;r=Math.ceil(k);g=Math.ceil(l);p=document.createElement("canvas");p.width=r;p.height=g;p.style.width=r+"px";p.style.height=g+"px";p=p.getContext("2d");p.clearRect(0,0,r,g);p.drawImage(a.image,0,0,u,q,0,
0,k,l);a=p.getImageData(0,0,k,l);u=[c.r/255,c.g/255,c.b/255,c.a];q=m.toHSV(c);for(r=0;r<a.data.length;r+=4){g=a.data;var z=r,n=u,D=q;switch(h){case "multiply":g[z+0]*=n[0];g[z+1]*=n[1];g[z+2]*=n[2];g[z+3]*=n[3];break;default:var B=m.toHSV({r:g[z+0],g:g[z+1],b:g[z+2]});B.h=D.h;B.s=D.s;B.v=B.v/100*D.v;D=m.toRGB(B);g[z+0]=D.r;g[z+1]=D.g;g[z+2]=D.b;g[z+3]*=n[3]}}p.putImageData(a,0,0);b=p.canvas.toDataURL("image/png")}else(p=f.id&&f.id.findCredential(b))&&p.token&&(a=-1===b.indexOf("?")?"?":"\x26",b=""+
b+a+"token\x3d"+p.token);return{url:b,width:k,height:l}}).catch(function(){return{url:b,width:d,height:d}})}})},"esri/core/colorUtils":function(){define(["require","exports"],function(t,g){function f(a,b){var d=[],c,e;if(a[0].length!==b.length)throw"dimensions do not match";var h=a.length,f=a[0].length,q=0;for(c=0;c<h;c++){for(e=q=0;e<f;e++)q+=a[c][e]*b[e];d.push(q)}return d}function n(a){a=[a.r/255,a.g/255,a.b/255].map(function(a){return.04045>=a?a/12.92:Math.pow((a+.055)/1.055,2.4)});a=f(q,a);return{x:100*
a[0],y:100*a[1],z:100*a[2]}}function m(a){a=f(b,[a.x/100,a.y/100,a.z/100]).map(function(a){return Math.min(1,Math.max(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055,0))});return{r:Math.round(255*a[0]),g:Math.round(255*a[1]),b:Math.round(255*a[2])}}function c(a){a=[a.x/95.047,a.y/100,a.z/108.883].map(function(a){return a>Math.pow(6/29,3)?Math.pow(a,1/3):1/3*Math.pow(29/6,2)*a+4/29});return{l:116*a[1]-16,a:500*(a[0]-a[1]),b:200*(a[1]-a[2])}}function e(a){var b=a.l;a=[(b+16)/116+a.a/500,(b+16)/116,
(b+16)/116-a.b/200].map(function(a){return a>6/29?Math.pow(a,3):3*Math.pow(6/29,2)*(a-4/29)});return{x:95.047*a[0],y:100*a[1],z:108.883*a[2]}}function h(a){if("r"in a&&"g"in a&&"b"in a)return a;if("l"in a&&"c"in a&&"h"in a){var b=a.c,k=a.h;return m(e({l:a.l,a:b*Math.cos(k),b:b*Math.sin(k)}))}if("l"in a&&"a"in a&&"b"in a)return m(e(a));if("x"in a&&"y"in a&&"z"in a)return m(a);if("h"in a&&"s"in a&&"v"in a){k=(a.h+360)%360/60;b=a.v/100*255;a=a.s/100*b;var c=a*(1-Math.abs(k%2-1));switch(Math.floor(k)){case 0:k=
{r:a,g:c,b:0};break;case 1:k={r:c,g:a,b:0};break;case 2:k={r:0,g:a,b:c};break;case 3:k={r:0,g:c,b:a};break;case 4:k={r:c,g:0,b:a};break;case 5:case 6:k={r:a,g:0,b:c};break;default:k={r:0,g:0,b:0}}k.r=Math.round(k.r+b-a);k.g=Math.round(k.g+b-a);k.b=Math.round(k.b+b-a);return k}}Object.defineProperty(g,"__esModule",{value:!0});var q=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],b=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];g.toRGB=h;g.toHSV=function(a){if("h"in
a&&"s"in a&&"v"in a)return a;var b=h(a);a=b.r;var k=b.g,b=b.b,c=Math.max(a,k,b),e=c-Math.min(a,k,b),u;0===e?u=0:c===a?u=(k-b)/e%6:c===k?u=(b-a)/e+2:c===b&&(u=(a-k)/e+4);0>u&&(u+=6);return{h:60*u,s:100*(0===e?0:e/c),v:100/255*c}};g.toLAB=function(a){return"l"in a&&"a"in a&&"b"in a?a:c(n(h(a)))};g.toLCH=function(a){if(!("l"in a&&"c"in a&&"h"in a)){var b=c(n(h(a)));a=b.l;var k=b.a,e=b.b,b=Math.sqrt(k*k+e*e),k=Math.atan2(e,k),k=0<k?k:k+2*Math.PI;a={l:a,c:b,h:k}}return a};g.toXYZ=function(a){return"x"in
a&&"y"in a&&"z"in a?a:n(h(a))};g.darken=function(a,b){a=c(n(a));a.l*=1-b;return m(e(a))}})},"esri/symbols/support/svgUtils":function(){define("require exports ../../Color ../../core/has ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/math/mat2d ../../widgets/support/widget".split(" "),function(t,g,f,n,m,c,e){function h(a){return a.map(function(a){return a.command+" "+a.values.join(" ")}).join(" ").trim()}function q(a,b,d,k){if(a){if("circle"===a.type)return e.tsx("circle",{fill:b,
"fill-rule":"evenodd",stroke:d.color,"stroke-width":d.width,"stroke-linecap":d.cap,"stroke-linejoin":d.join,"stroke-dasharray":d.dashArray,"stroke-miterlimit":"4",cx:a.cx,cy:a.cy,r:a.r});if("ellipse"===a.type)return e.tsx("ellipse",{fill:b,"fill-rule":"evenodd",stroke:d.color,"stroke-width":d.width,"stroke-linecap":d.cap,"stroke-linejoin":d.join,"stroke-dasharray":d.dashArray,"stroke-miterlimit":"4",cx:a.cx,cy:a.cy,rx:a.rx,ry:a.ry});if("rect"===a.type)return e.tsx("rect",{fill:b,"fill-rule":"evenodd",
stroke:d.color,"stroke-width":d.width,"stroke-linecap":d.cap,"stroke-linejoin":d.join,"stroke-dasharray":d.dashArray,"stroke-miterlimit":"4",x:a.x,y:a.y,width:a.width,height:a.height});if("image"===a.type)return e.tsx("image",{href:a.src,x:a.x,y:a.y,width:a.width,height:a.height,preserveAspectRatio:"none"});if("path"===a.type)return a="string"!==typeof a.path?h(a.path):a.path,e.tsx("path",{fill:b,"fill-rule":"evenodd",stroke:d.color,"stroke-width":d.width,"stroke-linecap":d.cap,"stroke-linejoin":d.join,
"stroke-dasharray":d.dashArray,"stroke-miterlimit":"4",d:a});if("text"===a.type)return e.tsx("text",{fill:b,"fill-rule":"evenodd",stroke:d.color,"stroke-width":d.width,"stroke-linecap":d.cap,"stroke-linejoin":d.join,"stroke-dasharray":d.dashArray,"stroke-miterlimit":"4","text-anchor":k.align,"text-decoration":k.decoration,kerning:k.kerning,rotate:k.rotate,"text-rendering":A,"font-style":k.font.style,"font-variant":k.font.variant,"font-weight":k.font.weight,"font-size":k.font.size,"font-family":k.font.family,
x:a.x,y:a.y},a.text)}return null}function b(a){var b={fill:"none",pattern:null,linearGradient:null};if(a)if("type"in a&&"pattern"===a.type){var d="patternId-"+ ++y;b.fill="url(#"+d+")";b.pattern={id:d,x:a.x,y:a.y,width:a.width,height:a.height,image:{x:0,y:0,width:a.width,height:a.height,href:a.src}}}else"type"in a&&"linear"===a.type?(d="linearGradientId-"+ ++C,b.fill="url(#"+d+")",b.linearGradient={id:d,x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,stops:a.colors.map(function(a){return{offset:a.offset,color:a.color&&
(new f(a.color)).toString()}})}):a&&(a=new f(a),b.fill=a.toString());return b}function a(a){var b={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(a&&(null!=a.width&&(b.width=a.width),a.cap&&(b.cap=a.cap),a.join&&(b.join=a.join.toString()),a.color&&(b.color=(new f(a.color)).toString()),a.style)){var d=null;a.style in H&&(d=H[a.style]);if(Array.isArray(d)){for(var d=d.slice(0),k=0;k<d.length;++k)d[k]*=a.width;if("butt"!==a.cap){for(k=0;k<d.length;k+=2)d[k]-=a.width,1>d[k]&&(d[k]=1);for(k=
1;k<d.length;k+=2)d[k]+=a.width}d=d.join(",")}b.dashArray=d}return b}function d(a,b){var d={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};a&&(d.align=a.align,d.decoration=a.decoration,d.kerning=a.kerning?"auto":"0",d.rotate=a.rotated?"90":"0",d.font.style=b.style||"normal",d.font.variant=b.variant||"normal",d.font.weight=b.weight||"normal",d.font.size=b.size&&b.size.toString()||"10pt",d.font.family=b.family||"serif");return d}
function k(a){var b=a.pattern;a=a.linearGradient;return b?e.tsx("pattern",{id:b.id,patternUnits:"userSpaceOnUse",x:b.x,y:b.y,width:b.width,height:b.height},e.tsx("image",{x:b.image.x,y:b.image.y,width:b.image.width,height:b.image.height,href:b.image.href})):a?(b=a.stops.map(function(a,b){return e.tsx("stop",{key:b+"-stop",offset:a.offset,"stop-color":a.color})}),e.tsx("linearGradient",{id:a.id,gradientUnits:"userSpaceOnUse",x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},b)):null}function p(a,b,d){return c.translate(a,
c.identity(a),[b,d])}function l(a,b,d,k,e){c.scale(a,c.identity(a),[b,d]);a[4]=a[4]*b-k*b+k;a[5]=a[5]*d-e*d+e;return a}function u(a,b,d,k){var e=b%360*Math.PI/180;c.rotate(a,c.identity(a),e);b=Math.cos(e);var e=Math.sin(e),l=a[4],p=a[5];a[4]=l*b-p*e+k*e-d*b+d;a[5]=p*b+l*e-d*e-k*b+k;return a}function r(a,b){D&&"left"in D?(D.left>a&&(D.left=a),D.right<a&&(D.right=a),D.top>b&&(D.top=b),D.bottom<b&&(D.bottom=b)):D={left:a,bottom:b,right:a,top:b}}function z(a){var b=a.args,d=b.length;switch(a.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(a=
0;a<d;a+=2)r(b[a],b[a+1]);B.x=b[d-2];B.y=b[d-1];break;case "H":for(a=0;a<d;++a)r(b[a],B.y);B.x=b[d-1];break;case "V":for(a=0;a<d;++a)r(B.x,b[a]);B.y=b[d-1];break;case "m":a=0;"x"in B||(r(B.x=b[0],B.y=b[1]),a=2);for(;a<d;a+=2)r(B.x+=b[a],B.y+=b[a+1]);break;case "l":case "t":for(a=0;a<d;a+=2)r(B.x+=b[a],B.y+=b[a+1]);break;case "h":for(a=0;a<d;++a)r(B.x+=b[a],B.y);break;case "v":for(a=0;a<d;++a)r(B.x,B.y+=b[a]);break;case "c":for(a=0;a<d;a+=6)r(B.x+b[a],B.y+b[a+1]),r(B.x+b[a+2],B.y+b[a+3]),r(B.x+=b[a+
4],B.y+=b[a+5]);break;case "s":case "q":for(a=0;a<d;a+=4)r(B.x+b[a],B.y+b[a+1]),r(B.x+=b[a+2],B.y+=b[a+3]);break;case "A":for(a=0;a<d;a+=7)r(b[a+5],b[a+6]);B.x=b[d-2];B.y=b[d-1];break;case "a":for(a=0;a<d;a+=7)r(B.x+=b[a+5],B.y+=b[a+6])}}function v(a,b,d){var k=E[a.toLowerCase()];"number"===typeof k&&(k?b.length>=k&&(a={action:a,args:b.slice(0,b.length-b.length%k)},d.push(a),z(a)):(a={action:a,args:[]},d.push(a),z(a)))}function F(a){var b={x:0,y:0,width:0,height:0};if("circle"===a.type)b.x=a.cx-a.r,
b.y=a.cy-a.r,b.width=2*a.r,b.height=2*a.r;else if("ellipse"===a.type)b.x=a.cx-a.rx,b.y=a.cy-a.ry,b.width=2*a.rx,b.height=2*a.ry;else if("image"===a.type||"rect"===a.type)b.x=a.x,b.y=a.y,b.width=a.width,b.height=a.height;else if("path"===a.type){a=("string"!==typeof a.path?h(a.path):a.path).match(I);var d=[];D={};B={};if(a){for(var k="",c=[],e=a.length,l=0;l<e;++l){var p=a[l],u=parseFloat(p);isNaN(u)?(k&&v(k,c,d),c=[],k=p):c.push(u)}v(k,c,d);a={x:0,y:0,width:0,height:0};D&&"left"in D&&(a.x=D.left,
a.y=D.top,a.width=D.right-D.left,a.height=D.bottom-D.top)}else a=null;b.x=a.x;b.y=a.y;b.width=a.width;b.height=a.height}return b}function x(a){for(var b={x:0,y:0,width:0,height:0},d=null,k=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,e=0;e<a.length;e++){var l=a[e];d?(d.x=Math.min(d.x,l.x),d.y=Math.min(d.y,l.y),k=Math.max(k,l.x+l.width),c=Math.max(c,l.y+l.height)):(d=b,d.x=l.x,d.y=l.y,k=l.x+l.width,c=l.y+l.height)}d&&(d.width=k-d.x,d.height=c-d.y);return d}function w(a,b,d,k,e,h){var f=b/2,
q=d/2,r=a.width+k,g=a.height+k,z=m.mat2df32.create(),v=m.mat2df32.create(),n=!1;if(e&&0!==r&&0!==g){e=r/g;var n=b>d?b:d,F=1,x=1;isNaN(n)||(1<e?(F=n/r,x=n/e/g):(x=n/g,F=n*e/r));c.multiply(v,v,l(z,F,x,f,q));n=!0}e=a.x+(r-k)/2;a=a.y+(g-k)/2;c.multiply(v,v,p(z,f-e,q-a));!n&&(r>b||g>d)&&(f=r/b>g/d,b=(f?b:d)/(f?r:g),c.multiply(v,v,l(z,b,b,e,a)));h&&c.multiply(v,v,u(z,h,e,a));return"matrix("+v[0]+","+v[1]+","+v[2]+","+v[3]+","+v[4]+","+v[5]+")"}Object.defineProperty(g,"__esModule",{value:!0});var y=0,C=
0,A=n("chrome")?"auto":"optimizeLegibility",E={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},I=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,D={},B={},H={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};g.renderShape=q;g.generateFillAttributes=b;g.generateStrokeAttributes=a;g.generateTextAttributes=d;g.renderDef=k;g.getBoundingBox=F;g.computeBBox=
x;g.getTransformMatrix=w;g.renderSVG=function(c,l,p,h){for(var u=[],f=[],r=0;r<c.length;r++){for(var g=[],z=[],v=0,m=0,n=c[r];m<n.length;m++){var y=n[m],A=y.shape,D=y.fill,K=y.stroke,y=y.font,v=v+(K&&K.width||0),D=b(D),K=a(K),y="text"===A.type?d(A,y):null;u.push(k(D));g.push(q(A,D.fill,K,y));z.push(F(A))}z=w(x(z),l,p,v,h&&h.scale,h&&h.rotation);f.push(e.tsx("g",{transform:z},g))}return e.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:l,height:p},e.tsx("defs",null,u),f)}})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require",
"exports","./factories/mat2df32"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.mat2df32=f})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],function(t,g){function f(f,g,c,e){var h=g[e];g=g[e+1];f[e]=c[0]*h+c[2]*g+c[4];f[e+1]=c[1]*h+c[3]*g+c[5]}Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){var f=new Float32Array(6);f[0]=1;f[3]=1;return f};g.clone=function(f){var g=new Float32Array(6);g[0]=f[0];g[1]=f[1];g[2]=f[2];
g[3]=f[3];g[4]=f[4];g[5]=f[5];return g};g.fromValues=function(f,g,c,e,h,q){var b=new Float32Array(6);b[0]=f;b[1]=g;b[2]=c;b[3]=e;b[4]=h;b[5]=q;return b};g.createView=function(f,g){return new Float32Array(f,g,6)};g.transform=f;g.transformMany=function(g,m,c,e,h,q){void 0===e&&(e=0);void 0===h&&(h=0);void 0===q&&(q=2);for(h=h||m.length/q;e<h;e++)f(g,m,c,e*q)}})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(t,g,f){function n(c,e,h){var f=e[0],b=
e[1],a=e[2],d=e[3],k=e[4];e=e[5];var p=h[0],l=h[1],u=h[2],r=h[3],g=h[4];h=h[5];c[0]=f*p+a*l;c[1]=b*p+d*l;c[2]=f*u+a*r;c[3]=b*u+d*r;c[4]=f*g+a*h+k;c[5]=b*g+d*h+e;return c}function m(c,e,h){c[0]=e[0]-h[0];c[1]=e[1]-h[1];c[2]=e[2]-h[2];c[3]=e[3]-h[3];c[4]=e[4]-h[4];c[5]=e[5]-h[5];return c}Object.defineProperty(g,"__esModule",{value:!0});g.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];return c};g.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c};
g.set=function(c,e,h,f,b,a,d){c[0]=e;c[1]=h;c[2]=f;c[3]=b;c[4]=a;c[5]=d;return c};g.invert=function(c,e){var h=e[0],f=e[1],b=e[2],a=e[3],d=e[4];e=e[5];var k=h*a-f*b;if(!k)return null;k=1/k;c[0]=a*k;c[1]=-f*k;c[2]=-b*k;c[3]=h*k;c[4]=(b*e-a*d)*k;c[5]=(f*d-h*e)*k;return c};g.determinant=function(c){return c[0]*c[3]-c[1]*c[2]};g.multiply=n;g.rotate=function(c,e,h){var f=e[0],b=e[1],a=e[2],d=e[3],k=e[4];e=e[5];var p=Math.sin(h);h=Math.cos(h);c[0]=f*h+a*p;c[1]=b*h+d*p;c[2]=f*-p+a*h;c[3]=b*-p+d*h;c[4]=k;
c[5]=e;return c};g.scale=function(c,e,h){var f=e[1],b=e[2],a=e[3],d=e[4],k=e[5],p=h[0];h=h[1];c[0]=e[0]*p;c[1]=f*p;c[2]=b*h;c[3]=a*h;c[4]=d;c[5]=k;return c};g.translate=function(c,e,h){var f=e[0],b=e[1],a=e[2],d=e[3],k=e[4];e=e[5];var p=h[0];h=h[1];c[0]=f;c[1]=b;c[2]=a;c[3]=d;c[4]=f*p+a*h+k;c[5]=b*p+d*h+e;return c};g.fromRotation=function(c,e){var h=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=h;c[2]=-h;c[3]=e;c[4]=0;c[5]=0;return c};g.fromScaling=function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=e[1];c[4]=0;c[5]=
0;return c};g.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=e[0];c[5]=e[1];return c};g.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};g.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};g.add=function(c,e,h){c[0]=e[0]+h[0];c[1]=e[1]+h[1];c[2]=e[2]+h[2];c[3]=e[3]+h[3];c[4]=e[4]+h[4];c[5]=e[5]+h[5];return c};g.subtract=m;g.multiplyScalar=function(c,e,
h){c[0]=e[0]*h;c[1]=e[1]*h;c[2]=e[2]*h;c[3]=e[3]*h;c[4]=e[4]*h;c[5]=e[5]*h;return c};g.multiplyScalarAndAdd=function(c,e,h,f){c[0]=e[0]+h[0]*f;c[1]=e[1]+h[1]*f;c[2]=e[2]+h[2]*f;c[3]=e[3]+h[3]*f;c[4]=e[4]+h[4]*f;c[5]=e[5]+h[5]*f;return c};g.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]};g.equals=function(c,e){var h=c[0],g=c[1],b=c[2],a=c[3],d=c[4];c=c[5];var k=e[0],p=e[1],l=e[2],u=e[3],r=e[4];e=e[5];return Math.abs(h-k)<=f.EPSILON*Math.max(1,
Math.abs(h),Math.abs(k))&&Math.abs(g-p)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(p))&&Math.abs(b-l)<=f.EPSILON*Math.max(1,Math.abs(b),Math.abs(l))&&Math.abs(a-u)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(d-r)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(r))&&Math.abs(c-e)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};g.mul=n;g.sub=m})},"esri/symbols/support/previewSymbol3D":function(){define("require exports tslib ../../assets ../../core/colorUtils ../../core/compilerUtils ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ./gfxUtils ./IconSymbol3DLayerResource ./ObjectSymbol3DLayerResource ./previewUtils ./renderUtils ./styleUtils ./utils".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a,d,k,p,l,u,r,z){function v(b){var d=b.outline,k=q.isSome(b.material)?b.material.color:null,k=q.isSome(k)?k.toRgba().toString():null;if(q.isNone(d))return"fill"===b.type&&"255,255,255,1"===k?{color:"#bdc3c7",width:.75}:null;b=a.pt2px(d.size)||0;return{color:"rgba("+(q.isSome(d.color)?d.color.toRgba():"255,255,255,1")+")",width:Math.min(b,80)}}function F(a,d){var k=d&&d.resource,k=k&&k.href;return a.thumbnail&&a.thumbnail.url?b.resolve(a.thumbnail.url):k&&"object"!==d.type?
b.resolve(z.getIconHref(a,d)):a.styleOrigin&&(a.styleOrigin.styleName||a.styleOrigin.styleUrl)?r.resolveWebStyleSymbol(a.styleOrigin,{portal:a.styleOrigin.portal},"webRef").catch(function(a){return a}).then(function(a){return a&&a.thumbnail&&a.thumbnail.url||M}):b.resolve(M)}function x(a,b){void 0===b&&(b=1);var d=a.a;a=m.toHSV(a);b=m.toRGB({h:a.h,s:a.s/b,v:100-(100-a.v)/b});return[b.r,b.g,b.b,d]}function w(a,b){return Math.round(Math.min(Math.max(a+191.25*b,0),255))}function y(a){return"water"===
a.type?q.isNone(a.color)?null:a.color:q.isNone(a.material)||q.isNone(a.material.color)?null:a.material.color}function C(a,b){void 0===b&&(b=0);a=y(a);if(!a)return b=w(d.defaultThematicColor.r,b),[b,b,b,100];a=a.toRgba();for(var k=0;3>k;k++)a[k]=w(a[k],b);return a}function A(a){return a.outline?v(a):{color:"rgba(0, 0, 0, 1)",width:1.5}}function E(a,b){a=y(a);if(!a)return null;var d;d="rgba("+(w(a.r,b)+",");d+=w(a.g,b)+",";d+=w(a.b,b)+",";return d+a.a+");"}function I(b,d){d=E(b,d);if(!d)return{};b=
Math.min(b.size?a.pt2px(b.size):.75,80);return{color:d,width:b}}function D(a,b,d){d*=.75;return{type:"linear",x1:d?.25*d:0,y1:d?.5*d:0,x2:d||4,y2:d?.5*d:4,colors:[{color:a,offset:0},{color:b,offset:1}]}}function B(a){var b=a.depth,d=a.height;return(a=a.width)&&b&&d&&a===b&&a<d}function H(a,b,d){var e=[];if(!a)return e;switch(a.type){case "icon":var h=a.resource&&a.resource.primitive||k.defaultPrimitive;switch(h){case "circle":e.push({shape:{type:"circle",cx:0,cy:0,r:.5*b},fill:C(a,0),stroke:v(a)});
break;case "square":e.push({shape:{type:"path",path:[{command:"M",values:[0,b]},{command:"L",values:[0,0]},{command:"L",values:[b,0]},{command:"L",values:[b,b]},{command:"Z",values:[]}]},fill:C(a,0),stroke:v(a)});break;case "triangle":e.push({shape:{type:"path",path:[{command:"M",values:[0,b]},{command:"L",values:[.5*b,0]},{command:"L",values:[b,b]},{command:"Z",values:[]}]},fill:C(a,0),stroke:v(a)});break;case "cross":e.push({shape:{type:"path",path:[{command:"M",values:[.5*b,0]},{command:"L",values:[.5*
b,b]},{command:"M",values:[0,.5*b]},{command:"L",values:[b,.5*b]}]},stroke:A(a)});break;case "x":e.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[b,b]},{command:"M",values:[b,0]},{command:"L",values:[0,b]}]},stroke:A(a)});break;case "kite":e.push({shape:{type:"path",path:[{command:"M",values:[0,.5*b]},{command:"L",values:[.5*b,0]},{command:"L",values:[b,.5*b]},{command:"L",values:[.5*b,b]},{command:"Z",values:[]}]},fill:C(a,0),stroke:v(a)});break;default:c.neverReached(h)}break;
case "object":switch(h=a.resource&&a.resource.primitive||p.defaultPrimitive,h){case "cone":h=C(a,0);a=C(a,-.6);a=D(h,a,d?20:b);b=l.getConeShapes(b,d);e.push({shape:b[0],fill:a});e.push({shape:b[1],fill:a});break;case "inverted-cone":d=C(a,0);a=C(a,-.6);a=D(d,a,b);b=l.getInvertedConeShapes(b);e.push({shape:b[0],fill:a});e.push({shape:b[1],fill:d});break;case "cube":b=l.getCubeShapes(b,d);e.push({shape:b[0],fill:C(a,0)});e.push({shape:b[1],fill:C(a,-.3)});e.push({shape:b[2],fill:C(a,-.5)});break;case "cylinder":var h=
C(a,0),u=C(a,-.6),h=D(h,u,d?20:b);b=l.getCylinderShapes(b,d);e.push({shape:b[0],fill:h});e.push({shape:b[1],fill:h});e.push({shape:b[2],fill:C(a,0)});break;case "diamond":b=l.getDiamondShapes(b);e.push({shape:b[0],fill:C(a,-.3)});e.push({shape:b[1],fill:C(a,0)});e.push({shape:b[2],fill:C(a,-.3)});e.push({shape:b[3],fill:C(a,-.7)});break;case "sphere":d=C(a,0);a=C(a,-.6);a=D(d,a);a.x1=0;a.y1=0;a.x2=.25*b;a.y2=.25*b;e.push({shape:{type:"circle",cx:0,cy:0,r:.5*b},fill:a});break;case "tetrahedron":b=
l.getTetrahedronShapes(b);e.push({shape:b[0],fill:C(a,-.3)});e.push({shape:b[1],fill:C(a,0)});e.push({shape:b[2],fill:C(a,-.6)});break;default:c.neverReached(h)}}return e}function G(d,k){var c=k&&k.size?a.pt2px(k.size):null,e=k&&k.maxSize?a.pt2px(k.maxSize):null,l=k&&k.disableUpsampling,p=d.symbolLayers,h=[],f=0,g=0,r=p.getItemAt(p.length-1),q;r&&"icon"===r.type&&(q=r.size&&a.pt2px(r.size));p.forEach(function(p){if("icon"===p.type||"object"===p.type){var r="icon"===p.type?p.size&&a.pt2px(p.size):
0,z=c||r?Math.ceil(Math.min(c||r,e||120)):22;if(p&&p.resource&&p.resource.href){var v=F(d,p).then(function(a){var b=p.get("material.color"),d;d="icon"===p.type?"multiply":"tint";return u.tintImageWithColor(a,z,b,d,l)}).then(function(a){var b=a.width,d=a.height;f=Math.max(f,b);g=Math.max(g,d);return[{shape:{type:"image",x:0,y:0,width:b,height:d,src:a.url},fill:null,stroke:null}]});h.push(v)}else v=z,"icon"===p.type&&q&&c&&(v=r/q*z),r=k&&"tall"===k.symbolConfig||("object"===p.type?B(p):!1),f=Math.max(f,
r?20:v),g=Math.max(g,v),h.push(b.resolve(H(p,v,r)))}});return b.eachAlways(h).then(function(a){var b=[];a.forEach(function(a){a.value?b.push(a.value):a.error&&O.warn("error while building swatchInfo!",a.error)});return u.renderSymbol(b,[f,g],{node:k&&k.node,scale:!1,opacity:k&&k.opacity})})}function Q(d,k){var c=d.symbolLayers,e=[];d=z.isVolumetricSymbol(d);var p=k&&k.size?a.pt2px(k.size):null,h=(k&&k.maxSize?a.pt2px(k.maxSize):null)||80,r=0,g=0,q;c.forEach(function(a,b){if(a&&("line"===a.type||"path"===
a.type)){var d=[];switch(a.type){case "line":var k=I(a,0),c=k&&k.width||0;0===b&&(q=c);var u=Math.min(p||c,h);b=0===b?u:p?c/q*u:u;g=Math.max(g,b);r=Math.max(r,20<b?2*b:40);k.width=b;d.push({shape:{type:"path",path:[{command:"M",values:[0,.5*g]},{command:"L",values:[r,.5*g]}]},stroke:k});break;case "path":b=Math.min(p||22,h);c=C(a,0);u=C(a,-.2);k=(k=E(a,-.4))?{color:k,width:1}:{};if("quad"===a.profile){var z=a.width||a.size;a=a.height||a.size;a=l.getPathSymbolShapes(z&&a?z/a:1);k=f.__assign(f.__assign({},
k),{join:"bevel"});d.push({shape:a[0],fill:u,stroke:k});d.push({shape:a[1],fill:u,stroke:k});d.push({shape:a[2],fill:c,stroke:k})}else d.push({shape:l.shapes.pathSymbol3DLayer[0],fill:u,stroke:k}),d.push({shape:l.shapes.pathSymbol3DLayer[1],fill:c,stroke:k});r=g=Math.max(g,b)}e.push(d)}});return b.resolve(u.renderSymbol(e,[r,g],{node:k&&k.node,scale:d,opacity:k&&k.opacity}))}Object.defineProperty(g,"__esModule",{value:!0});var M=n.getAssetUrl("esri/images/Legend/legend3dsymboldefault.png"),O=h.getLogger("esri.symbols.support.previewSymbol3D");
g.getSymbolLayerFill=C;g.previewSymbol3D=function(d,k){if(0===d.symbolLayers.length)return b.reject(new e("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));var c=null;switch(d.type){case "point-3d":c=G(d,k);break;case "line-3d":c=Q(d,k);break;case "polygon-3d":case "mesh-3d":c="mesh-3d"===d.type;d=d.symbolLayers;for(var p=k&&k.size?a.pt2px(k.size):null,h=k&&k.maxSize?a.pt2px(k.maxSize):null,p=p||22,g=[],r=0,q=0,z=!1,m=0;m<d.length;m++){var n=d.getItemAt(m),K=[];if(!c||"fill"===
n.type){var F=l.shapes.fill[0];switch(n.type){case "fill":var w=v(n),A=Math.min(p,h||120),r=Math.max(r,A),q=Math.max(q,A),z=!0;K.push({shape:F,fill:C(n,0),stroke:w});break;case "line":F={stroke:I(n,0),shape:F};r=Math.max(r,22);q=Math.max(q,22);K.push(F);break;case "extrude":var w=f.__assign({join:"round"},I(n,-.4)),F=C(n,0),n=C(n,-.2),A=Math.min(p,h||120),D=l.getExtrudeSymbolShapes(A);w.width=1;K.push({shape:D[0],fill:n,stroke:w});K.push({shape:D[1],fill:n,stroke:w});K.push({shape:D[2],fill:F,stroke:w});
F=22*.7+.5*A;r=Math.max(r,22);q=Math.max(q,F);break;case "water":z=y(n),F=x(z),n=x(z,2),w=x(z,3),A=l.getWaterSymbolShapes(),z=!0,K.push({shape:A[0],fill:F}),K.push({shape:A[1],fill:n}),K.push({shape:A[2],fill:w}),A=Math.min(p,h||120),r=Math.max(r,A),q=Math.max(q,A)}g.push(K)}}c=b.resolve(u.renderSymbol(g,[r,q],{node:k&&k.node,scale:z,opacity:k&&k.opacity}))}return c?c:b.reject(new e("symbolPreview: swatchInfo3D","symbol not supported."))}})},"esri/symbols/support/utils":function(){define("require exports tslib ../../Color ../../symbols ../../core/asyncUtils ../../core/compilerUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../core/libs/gl-matrix-2/vec3f64 ./gfxUtils ./Symbol3DMaterial @dojo/framework/shim/Promise".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a,d,k){function p(a,b){if(null==b)return a;a=a.toRgba();a[3]*=b;return new n(a)}function l(a,b,d){if(a=a.symbolLayers){var c=function(a){a=q.isSome(a)?a:null;b=b||a||null!=d&&C;return p(b,d)};a.forEach(function(a){if("object"!==a.type||null==a.resource.href||b)if("water"===a.type)a.color=c(a.color);else{var e=q.isSome(a.material)?a.material.color:null,e=c(e);q.isNone(a.material)?a.material=new k.default({color:e}):a.material.color=e;null!=d&&"outline"in a&&q.isSome(a.outline)&&
q.isSome(a.outline.color)&&(a.outline.color=p(a.outline.color,d))}})}}function u(a,b){return f.__awaiter(this,void 0,void 0,function(){var d,k=this;return f.__generator(this,function(e){switch(e.label){case 0:return(d=a.symbolLayers)?[4,c.forEach(d,function(a){return f.__awaiter(k,void 0,void 0,function(){return f.__generator(this,function(d){return[2,r(a,b)]})})})]:[2];case 1:return e.sent(),[2]}})})}function r(b,d){return f.__awaiter(this,void 0,void 0,function(){var k;return f.__generator(this,
function(c){switch(c.label){case 0:k=b.type;switch(k){case "extrude":return[3,1];case "icon":return[3,2];case "line":return[3,2];case "text":return[3,2];case "path":return[3,3];case "object":return[3,4];case "fill":return[3,6];case "water":return[3,6]}return[3,7];case 1:return b.size="number"===typeof d[2]?d[2]:0,[3,8];case 2:return c=z(d),q.isSome(c)&&(b.size=c),[3,8];case 3:return c=F(d,a.vec3f64.ONES,[b.width,void 0,b.height]),b.width=w(d[0],b.width,1,c),b.height=w(d[2],b.height,1,c),[3,8];case 4:return[4,
v(b,d)];case 5:return c.sent(),[3,8];case 6:return[3,8];case 7:e.neverReached(b),c.label=8;case 8:return[2]}})})}function z(a){for(var b=0;b<a.length;b++){var d=a[b];if("number"===typeof d)return d}return null}function v(a,b){return f.__awaiter(this,void 0,void 0,function(){var d,k,c,e;return f.__generator(this,function(l){switch(l.label){case 0:return[4,x(a)];case 1:return d=l.sent(),k=d.resourceSize,c=d.symbolSize,e=F(b,k,c),a.width=w(b[0],c[0],k[0],e),a.depth=w(b[1],c[1],k[1],e),a.height=w(b[2],
c[2],k[2],e),[2]}})})}function F(a,b,d){for(var k=0;3>k;k++){var c=a[k];switch(c){case "symbol-value":return null!=d[k]?d[k]/b[k]:1;case "proportional":break;default:if(c&&b[k])return c/b[k]}}return 1}function x(a){return f.__awaiter(this,void 0,void 0,function(){var b,d,k,c,e,l,p,h;return f.__generator(this,function(u){switch(u.label){case 0:return[4,new Promise(function(a,b){t(["./symbolLayerUtils"],a,b)})];case 1:return b=u.sent(),[4,b.computeObjectLayerResourceSize(a,10)];case 2:d=u.sent();k=
a.width;c=a.height;e=a.depth;l=[k,e,c];p=1;for(h=0;3>h;h++)if(null!=l[h]){p=l[h]/d[h];break}for(h=0;3>h;h++)null==l[h]&&(l[h]=d[h]*p);return[2,{resourceSize:d,symbolSize:l}]}})})}function w(a,b,d,k){switch(a){case "proportional":return d*k;case "symbol-value":return null!=b?b:d;default:return a}}Object.defineProperty(g,"__esModule",{value:!0});var y=/\/resource\/(.*?)\.svg$/,C=new n("white");g.getSymbolOutlineSize=function(a){if(!a)return 0;if(m.isSymbol3D(a)){var k=a.symbolLayers&&a.symbolLayers.length;
k?(a=a.symbolLayers.getItemAt(k-1),a="outline"in a?q.get(a,"outline","size"):void 0):a=void 0;return q.isSome(a)?a:0}return(a=d.getStroke(a))&&b.px2pt(a.width)||0};g.isVolumetricSymbol=function(a){if(!a||!a.symbolLayers)return!1;switch(a.type){case "point-3d":return a.symbolLayers.some(function(a){return"object"===a.type});case "line-3d":return a.symbolLayers.some(function(a){return"path"===a.type});case "polygon-3d":return a.symbolLayers.some(function(a){return"object"===a.type||"extrude"===a.type});
default:return!1}};g.getIconHref=function(a,b){b=b.resource.href;return!h("esri-canvas-svg-support")&&a.styleOrigin&&y.test(b)?b.replace(y,"/resource/png/$1.png"):b};g.applyOpacityToColor=p;g.applyColorToSymbol=function(a,b,d){if(a&&(b||null!=d))if(b&&(b=new n(b)),m.isSymbol3D(a))l(a,b,d);else if(m.isSymbol2D(a)){if(b=b||a.color)a.color=p(b,d);null!=d&&"outline"in a&&a.outline&&a.outline.color&&(a.outline.color=p(a.outline.color,d))}};g.applySizesToSymbol=function(a,b){return f.__awaiter(this,void 0,
void 0,function(){return f.__generator(this,function(d){if(!a||!b)return[2];if(m.isSymbol3D(a))return[2,u(a,b)];if(m.isSymbol2D(a)&&(d=z(b),!q.isNone(d)))switch(a.type){case "simple-marker":a.size=d;break;case "picture-marker":var k=a.width/a.height;1<k?(a.width=d,a.height=d*k):(a.width=d*k,a.height=d);break;case "simple-line":a.width=d;break;case "text":a.font.size=d;break;case "simple-fill":case "picture-fill":break;case "cim":break;default:e.neverReached(a)}return[2]})})};g.applyRotationToSymbol=
function(a,b,d){a&&null!=b&&(m.isSymbol3D(a)?(a=a.symbolLayers)&&a.forEach(function(a){if(a&&"object"===a.type)switch(d){case "tilt":a.tilt=b;break;case "roll":a.roll=b;break;default:a.heading=b}}):!m.isSymbol2D(a)||"simple-marker"!==a.type&&"picture-marker"!==a.type&&"text"!==a.type||(a.angle=b))}})},"esri/symbols/support/previewWebStyleSymbol":function(){define(["require","exports","../../request","../../core/screenUtils"],function(t,g,f,n){Object.defineProperty(g,"__esModule",{value:!0});g.previewWebStyleSymbol=
function(g,c,e){var h=g.thumbnail&&g.thumbnail.url;return h?f(h,{responseType:"image"}).then(function(c){c=c.data;var b=!/\\.svg$/i.test(c.src)&&e&&e.disableUpsampling,a=Math.max(c.width,c.height),d=e&&null!=e.maxSize?n.pt2px(e.maxSize):120;b&&(d=Math.min(a,d));b=Math.min(d,e&&null!=e.size?n.pt2px(e.size):a);b!==a&&(a=0!==c.width&&0!==c.height?c.width/c.height:1,1<=a?(c.width=b,c.height=b/a):(c.width=b*a,c.height=b));return e&&e.node?(e.node.appendChild(c),e.node):c}):g.fetchSymbol().then(function(h){return c(h,
e)})}})},"esri/views/MapView":function(){define("require exports tslib ../Graphic ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/Logger ../core/maybe ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./DOMContainer ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground @dojo/framework/shim/Promise".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a,d,k,p,l,u,r,z,v,F,x,w,y,C,A){function E(){return f.__awaiter(this,void 0,void 0,function(){var a,b,d,k,c,e,l;return f.__generator(this,function(p){switch(p.label){case 0:return[4,Promise.all([new Promise(function(a,b){t(["./webgl"],a,b)}),new Promise(function(a,b){t(["./2d/mapViewDeps"],a,b)}),new Promise(function(a,b){t(["./2d/engine"],a,b)})])];case 1:return a=p.sent(),b=a[1],d=b.GraphicsView2D,k=b.LabelManager,c=b.MapViewNavigation,e=b.MagnifierView2D,l=a[2].Stage,
H=d,G=k,Q=c,M=e,B=l,[2]}})})}function I(a,b,d){a&&(Array.isArray(a)||m.isCollection(a)?0!==a.length&&a.forEach(function(a){return I(a,b,d)}):a instanceof n?b.add(a):d.add(a))}var D=q.getLogger("esri.views.MapView"),B,H,G,Q,M;return function(u){function r(a){a=u.call(this,a)||this;a._magnifierView=null;a._stage=null;a._resolveWhenReady=[];a.rootLayerViews=new c({root:a,rootCollectionNames:["basemapView.baseLayerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(a){return null}});
a.graphicsView=null;a.highlightOptions=new x;a.magnifier=new z;a.inputManager=new F({view:a});a.mapViewNavigation=null;a.supersampleScreenhotsEnabled=!0;a.ui=new C;a.rendering=!1;p.initialize();return a}f.__extends(r,u);r.prototype.destroy=function(){this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};Object.defineProperty(r.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||null},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,
"textureManager",{get:function(){return this._stage.painter.textureManager},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"navigating",{get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)},enumerable:!0,configurable:!0});r.prototype.toMap=function(a){d.isSupportedScreenPointEvent(a)&&(a=d.createScreenPointFromSupportedEvent(this,a));return u.prototype.toMap.call(this,a)};r.prototype.hitTest=function(b,k){var c=d.isSupportedScreenPointEvent(b)?d.createScreenPointFromSupportedEvent(this,
b):b;if(!this.ready||isNaN(c.x)||isNaN(c.y))return a.resolve({screenPoint:c,results:[]});var e=this.toMap(c);b=[this.graphicsView];b.push.apply(b,this.allLayerViews.toArray().reverse());var l=new Set,p=new Set,h=new Set,u=new Set;k&&(I(k&&k.include,l,h),I(k&&k.exclude,p,u));return a.all(b.map(function(a){return!a||!a.hitTest||0<h.size&&!a.layer||0<h.size&&a.layer&&!h.has(a.layer)||0<u.size&&a.layer&&u.has(a.layer)?null:a.hitTest(c.x,c.y)})).then(function(a){return{screenPoint:c,results:a.filter(function(a){return null!=
a&&(0<l.size?l.has(a):!0)&&(0<p.size?!p.has(a):!0)}).map(function(a){return{mapPoint:e,graphic:a}})}})};r.prototype.takeScreenshot=function(b){return this.ready?this._stage.takeScreenshot(w.toRenderSettings(b,this),this.allLayerViews):a.reject("Map view cannot be used before it is ready")};r.prototype.on=function(a,b,d,k){return(d=this.inputManager&&this.viewEvents.on(a,b,d,k))?d:u.prototype.on.call(this,a,b)};r.prototype.hasEventListener=function(a){return u.prototype.hasEventListener.call(this,
a)||this.viewEvents.hasHandler(a)};r.prototype.whenLayerView=function(a){return u.prototype.whenLayerView.call(this,a)};r.prototype.graphicChanged=function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};r.prototype.whenReady=function(){var b=this;return a.create(function(a){b.ready?a(b):b._resolveWhenReady.push(a)})};r.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};r.prototype.validate=function(){var d=y.check({checkMajorWebPerformanceCaveat:!1});h("safari")&&9>
h("safari")&&(d=new e("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:h("safari")}));return b.isSome(d)?(D.warn("#validate()",d.message),a.reject(d)):E()};r.prototype._startup=function(){var a=this;this.timeline.begin("MapView Startup");u.prototype._startup.call(this);this.graphics.owner=this;var b=new B(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,
debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),d=new H({view:this,graphics:this.graphics,requestUpdateCallback:function(){return a.requestUpdate()}}),c=new Q({view:this,animationManager:this.animationManager}),e=new G({view:this});this._magnifierView=new M;this._magnifierView.magnifier=this.magnifier;this._stage=b;this.frameTask.graphicsView=d;this._set("graphicsView",d);this._set("mapViewNavigation",c);this._set("labelManager",e);this.handles.add([this.rootLayerViews.on("change",
function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",b.renderRequested)}),b.on("will-render",function(){return a._set("rendering",b.renderRequested)}),b.on("webgl-error",function(b){return a.fatalError=b.error}),k.init(this,"stationary",function(a){return b.stationary=a},!0),k.init(this,"state.id",function(){return b.state=a.state},!0),k.init(this,"background",function(a){return b.background=a},!0),k.init(this,"magnifier",function(b){return a._magnifierView.magnifier=
b},!0),k.init(this,"renderingOptions",function(a){return b.renderingOptions=a},!0),k.init(this,"highlightOptions",function(){return b.highlightOptions=a.highlightOptions},!0)],"map-view");b.state=this.state;b.background=this.background;this._updateStageChildren();d=this._resolveWhenReady;this._resolveWhenReady=[];d.forEach(function(b){return b(a)});this.timeline.end("MapView Startup")};r.prototype._teardown=function(){this.handles.remove("map-view");this.layerViewManager.clear();this.labelManager.destroy();
this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;u.prototype._teardown.call(this)};r.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.rootLayerViews.forEach(function(b){a._stage.addChild(b.container)});this._stage.addChild(this.graphicsView.container);
this._stage.addChild(this._magnifierView)};f.__decorate([l.property({type:A,dependsOn:["map.initialViewProperties?.background"]})],r.prototype,"background",null);f.__decorate([l.property()],r.prototype,"graphicsView",void 0);f.__decorate([l.property({type:x})],r.prototype,"highlightOptions",void 0);f.__decorate([l.property({type:z})],r.prototype,"magnifier",void 0);f.__decorate([l.property({readOnly:!0})],r.prototype,"inputManager",void 0);f.__decorate([l.property({readOnly:!0})],r.prototype,"textureManager",
null);f.__decorate([l.property({readOnly:!0})],r.prototype,"mapViewNavigation",void 0);f.__decorate([l.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],r.prototype,"navigating",null);f.__decorate([l.property({type:Boolean,constructOnly:!0})],r.prototype,"supersampleScreenhotsEnabled",void 0);f.__decorate([l.property({type:C})],r.prototype,"ui",void 0);f.__decorate([l.property({readOnly:!0})],r.prototype,"rendering",void 0);f.__decorate([l.property({constructOnly:!0})],r.prototype,
"renderCanvas",void 0);f.__decorate([l.property({constructOnly:!0})],r.prototype,"deactivatedWebGLExtensions",void 0);f.__decorate([l.property({constructOnly:!0})],r.prototype,"debugWebGLExtensions",void 0);return r=f.__decorate([l.subclass("esri.views.MapView")],r)}(u.BreakpointsOwner(r.DOMContainer(v)))})},"esri/views/BreakpointsOwner":function(){define("require exports tslib ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators".split(" "),function(t,g,f,n,m,c,
e){function h(a,b){return b?q[a].valueToClassName[b].split(" "):[]}Object.defineProperty(g,"__esModule",{value:!0});var q={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var k=this.values;return b<=a.xsmall?k.xsmall:b<=a.small?k.small:b<=a.medium?k.medium:b<=a.large?k.large:k.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var k=this.values;return b<=a.xsmall?k.xsmall:b<=a.small?k.small:b<=a.medium?k.medium:b<=a.large?k.large:k.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},b={xsmall:544,small:768,medium:992,large:1200};g.BreakpointsOwner=
function(a){return function(a){function d(){for(var d=[],k=0;k<arguments.length;k++)d[k]=arguments[k];d=a.apply(this,d)||this;d._breakpointsHandles=new m;d.orientation=null;d.widthBreakpoint=null;d.heightBreakpoint=null;d.breakpoints=b;return d}f.__extends(d,a);d.prototype.initialize=function(){this._breakpointsHandles.add(c.init(this,["breakpoints","size"],this._updateClassNames))};d.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=
null)};Object.defineProperty(d.prototype,"breakpoints",{set:function(a){var d=this._get("breakpoints");if(a!==d){d=(d=a)&&d.xsmall<d.small&&d.small<d.medium&&d.medium<d.large;if(!d){var k=JSON.stringify(b,null,2);console.warn("provided breakpoints are not valid, using defaults:"+k)}a=d?a:b;this._set("breakpoints",f.__assign({},a))}},enumerable:!0,configurable:!0});d.prototype._updateClassNames=function(){if(this.container){var a=n.acquire(),b=n.acquire(),d=!1,k;for(k in q){var c=this[k],e=q[k].getValue({viewSize:this.size,
breakpoints:this.breakpoints});c!==e&&(d=!0,this[k]=e,h(k,c).forEach(function(a){return b.push(a)}),h(k,e).forEach(function(b){return a.push(b)}))}d&&(this._applyClassNameChanges(a,b),n.release(a),n.release(b))}};d.prototype._applyClassNameChanges=function(a,b){var d=this.container;d&&(b.forEach(function(a){return d.classList.remove(a)}),a.forEach(function(a){return d.classList.add(a)}))};d.prototype._removeActiveClassNames=function(){var a=this.container;if(a)for(var b in q)h(b,this[b]).forEach(function(b){return a.classList.remove(b)})};
f.__decorate([e.property()],d.prototype,"breakpoints",null);f.__decorate([e.property()],d.prototype,"orientation",void 0);f.__decorate([e.property()],d.prototype,"widthBreakpoint",void 0);f.__decorate([e.property()],d.prototype,"heightBreakpoint",void 0);return d=f.__decorate([e.subclass("esri.views.BreakpointsOwner")],d)}(a)}})},"esri/views/Magnifier":function(){define(["require","exports","tslib","../core/Accessor","../core/accessorSupport/decorators"],function(t,g,f,n,m){return function(c){function e(e){e=
c.call(this,e)||this;e.factor=1.5;e.offsetX=0;e.offsetY=0;e.position=null;e.visible=!1;return e}f.__extends(e,c);Object.defineProperty(e.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});f.__decorate([m.property({type:Number})],e.prototype,"factor",void 0);f.__decorate([m.property({type:Number})],e.prototype,"offsetX",void 0);f.__decorate([m.property({type:Number})],e.prototype,"offsetY",void 0);f.__decorate([m.property()],e.prototype,"position",
void 0);f.__decorate([m.property({readOnly:!0,dependsOn:["factor","offsetX","offsetY","position","visible"]})],e.prototype,"version",null);f.__decorate([m.property({type:Boolean})],e.prototype,"visible",void 0);return e=f.__decorate([m.subclass("esri.views.Magnifier")],e)}(n)})},"esri/views/MapViewBase":function(){define("require exports tslib ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils ./2d/support/Timeline".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a,d,k,p,l,u,r,z,v,F,x,w,y,C){var A=e.getLogger("esri.views.MapView");return function(e){function l(a){var b=e.call(this,a)||this;b._stationaryTimer=null;b.frameTask=new z.default(b);b.featuresTilingScheme=null;b.fullOpacity=1;b.graphicsView=null;b.initialExtent=null;b.labelManager=null;b.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};b.resizeAlign="center";b.timeline=new C.Timeline;b.type="2d";b.constraints=
new F;b.padding={top:0,right:0,bottom:0,left:0};var d=b.handles,k=function(){return b.notifyChange("updating")};d.add([b.watch("viewpoint",function(){b._lastStationaryEventTimestamp=performance.now();b._flipStationary(160)},!0),b.on("resize",function(a){return b._resizeHandler(a)}),b.watch("animationManager.animation",function(a){b.animation=a}),b.allLayerViews.on("change",function(){k();d.remove("map-view-base-layerViewsUpdating");d.add(b.allLayerViews.map(function(a){return a.watch("updating",k)}),
"map-view-base-layerViewsUpdating")})],"map-view-base");return b}f.__extends(l,e);l.prototype.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};Object.defineProperty(l.prototype,"animation",{set:function(a){var b=this,d=this._get("animation");a!==d&&(d&&d.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),this.frameTask.animationInProgress=!0,d=function(){a===b._get("animation")&&(b._set("animation",null),b.frameTask.requestFrame());
b.frameTask.animationInProgress=!1},a.when(d,d)))},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=this.state.paddedViewState,b=a.center;return new n.Point({x:b[0],y:b[1],spatialReference:a.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.ready){var b=this.viewpoint;y.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else A.error("#center",
"incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"constraints",{set:function(a){var b=this,d=this._get("constraints");d&&(this.handles.remove("map-view-base-constraints"),d.destroy());this._set("constraints",a);a&&(a.view=this,this.ready&&(this.state.viewpoint=a.fit(this.state.paddedViewState.viewpoint)),this.handles.add(a.on("update",function(){b.ready&&
b.state&&(b.state.viewpoint=a.fit(b.state.paddedViewState.viewpoint))}),"map-view-base-constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"extent",{get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.ready?(a=this.viewpoint,y.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",
null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):A.error("#extent","invalid extent size"):A.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,d=this.scale,k=this.viewpoint,c=this.zoom;
return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==d||-1!==c)||k?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){this.ready?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!0,
configurable:!0});Object.defineProperty(l.prototype,"rotation",{get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.ready){var b=this.viewpoint;y.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"scale",{get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.ready){var b=this.viewpoint;y.scaleTo(b,b,a);this.viewpoint=
b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"stationary",{get:function(){return!this.animation&&!this.navigating&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"updating",{get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||
!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(function(a){return!a.destroyed&&!("layerViews"in a)&&!0===a.updating}))},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"viewpoint",{get:function(){if(!this.ready)return this._get("viewpoint");var a=this.state.paddedViewState;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.ready?(a=new m({targetGeometry:new n.Point,scale:0,rotation:0}),
y.copy(a,b),this.constraints.constrain(a,this.state.paddedViewState.viewpoint),this.state.viewpoint=a,this.frameTask.requestFrame(),this._set("viewpoint",a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?A.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?A.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+
" with view's spatialReference "+JSON.stringify(this.spatialReference)):A.error("#viewpoint","geometry not defined")}},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&
(b=this.viewpoint,y.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});l.prototype.goTo=function(a,d){var k=this;if(a)return b.whenTrueOnce(this,"ready",d&&d.signal).then(function(){k.animation&&(k.animation=null);var b=f.__assign({animate:!0},d),c=y.createAsync(a,k);k._gotoTask={};return b.animate?k._gotoAnimated(c,b):k._gotoImmediate(c,b)});A.error("#goTo()","target cannot be null or undefined")};
l.prototype.hitTest=function(a){return h.reject("Should be implemented by subclasses")};l.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(d){return f.__assign(f.__assign({},d),{mapPoint:b.toMap(a)})})};l.prototype.toMap=function(a){if(!this.ready)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new n.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};l.prototype.isTileInfoRequired=function(){return!0};l.prototype.toScreen=function(a){if(!this.ready)return null;
a=this._normalizeInput(a);a=[a.x,a.y];a=this.state.toScreen(a,a);return q.createScreenPoint(a[0],a[1])};l.prototype.pixelSizeAt=function(){return this.ready?this.state.resolution:(A.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};l.prototype.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};l.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};
l.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};l.prototype.importLayerView=function(a){return v.layerView2DImporter.importLayerView(a)};l.prototype.hasLayerViewModule=function(a){return v.layerView2DImporter.hasLayerViewModule(a)};l.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new u;this.animation.update(a);return this.animation};l.prototype._cancellableGoTo=function(a,
b,d){var k=this,c=d.then(function(){a===k._gotoTask&&(k.animation=null)}).catch(function(d){a===k._gotoTask&&(k.animation=null,b.done||(b.stop(),k.frameTask.animationInProgress=!1));throw d;}),e=h.create(function(a){return a(c)});b.when().catch(function(){a===k._gotoTask&&e.cancel&&e.cancel()});return e};l.prototype._gotoImmediate=function(a,b){var d=this,k=this._gotoTask,e=this._createOrReplaceAnimation(a);a=a.then(function(a){h.throwIfAborted(b);if(k!==d._gotoTask)throw new c("view:goto-interrupted",
"Goto was interrupted");d.viewpoint=e.target=a;e.finish()});return this._cancellableGoTo(k,e,a)};l.prototype._gotoAnimated=function(a,b){var d=this,k=this._gotoTask,e=this._createOrReplaceAnimation(a);a=a.then(function(a){if(k!==d._gotoTask)throw new c("view:goto-interrupted","Goto was interrupted");e.update(a);d.animationManager.animate(e,d.viewpoint,b);return e.when().then(function(){},function(){})});return this._cancellableGoTo(k,e,a)};l.prototype._resizeHandler=function(a){var b=this.state;if(b){var d=
this.state.paddedViewState.viewpoint,k=this.state.paddedViewState.size.concat();b.size=[a.width,a.height];y.resize(d,d,k,this.state.paddedViewState.size,this.resizeAlign);d=this.constraints.constrain(d,null);this.state.viewpoint=d}};l.prototype._startup=function(){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new r.default({view:this}));this._set("state",new x({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("featuresTilingScheme",
new w.TileInfoView(k.create({spatialReference:this.spatialReference,size:512})));this._set("ready",!0);this.frameTask&&this.frameTask.start()};l.prototype._teardown=function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);var a=this.state.paddedViewState,b=a.center,d=a.spatialReference,k=a.rotation,a=a.scale,b=new n.Point({x:b[0],y:b[1],spatialReference:d});this._set("viewpoint",null);this._set("extent",
null);this._set("center",b);this._set("zoom",-1);this._set("rotation",k);this._set("scale",a);this._set("spatialReference",d);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this.animation=null};l.prototype._flipStationary=function(a){var b=this;return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(function(){b._stationaryTimer=null;var a=performance.now()-b._lastStationaryEventTimestamp;160>
a&&(b._stationaryTimer=b._flipStationary(a))},a)};l.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var k=a&&a.targetGeometry||a;return b?k?b.equals(k.spatialReference)?a:d.canProject(k,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=d.project(k,b),a):d.project(k,b):null:null:a};l.prototype._getDefaultViewpoint=function(){var a=this.constraints,b=this._get("zoom"),d=this._get("scale"),k=this._normalizeInput(this._get("center")),c=this._normalizeInput(this._get("extent")),
e=this._get("rotation"),l=this._normalizeInput(this._get("viewpoint"));a.effectiveLODs?-1!==b&&(d=a.zoomToScale(b)):b=-1;var p=null,h=null,b=0,a=l&&l.rotation,u=l&&l.targetGeometry;u&&("extent"===u.type?p=u:"point"===u.type&&(h=u,b=l.scale));l=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));u=this._normalizeInput(this.initialExtent);c=c||p||l||u;k=k||h||c&&c.center;h=this.get("map.initialViewProperties.viewpoint.scale");d=d||b||h||c&&y.extentToScale(c,this.size);
b=this.get("map.initialViewProperties.viewpoint.rotation");return k&&d?new m({targetGeometry:k,scale:d,rotation:e||a||b||0}):null};f.__decorate([a.property()],l.prototype,"_stationaryTimer",void 0);f.__decorate([a.property()],l.prototype,"animation",null);f.__decorate([a.property({readOnly:!0})],l.prototype,"animationManager",void 0);f.__decorate([a.property({value:null,type:n.Point,dependsOn:["state.id","ready"]})],l.prototype,"center",null);f.__decorate([a.property({type:F})],l.prototype,"constraints",
null);f.__decorate([a.property({value:null,type:n.Extent,dependsOn:["state.id","ready"]})],l.prototype,"extent",null);f.__decorate([a.property({readOnly:!0})],l.prototype,"featuresTilingScheme",void 0);f.__decorate([a.property()],l.prototype,"fullOpacity",void 0);f.__decorate([a.property()],l.prototype,"graphicsView",void 0);f.__decorate([a.property({type:n.Extent})],l.prototype,"initialExtent",void 0);f.__decorate([a.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],l.prototype,"initialExtentRequired",
null);f.__decorate([a.property()],l.prototype,"labelManager",void 0);f.__decorate([a.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return f.__assign({top:0,right:0,bottom:0,left:0},a)}})],l.prototype,"padding",null);f.__decorate([a.property({type:Object})],l.prototype,"renderingOptions",void 0);f.__decorate([a.property()],l.prototype,"resizeAlign",void 0);f.__decorate([a.property({readOnly:!0,dependsOn:["state.id"]})],l.prototype,"resolution",null);f.__decorate([a.property({value:0,
type:Number,dependsOn:["state.id","ready"]})],l.prototype,"rotation",null);f.__decorate([a.property({value:0,type:Number,dependsOn:["state.id","ready"]})],l.prototype,"scale",null);f.__decorate([a.property({type:n.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],l.prototype,"spatialReference",void 0);f.__decorate([a.property({readOnly:!0})],l.prototype,"state",void 0);f.__decorate([a.property({dependsOn:["animation","navigating",
"resizing","_stationaryTimer"]})],l.prototype,"stationary",null);f.__decorate([a.property({type:C.Timeline,readOnly:!0})],l.prototype,"timeline",void 0);f.__decorate([a.property({readOnly:!0})],l.prototype,"type",void 0);f.__decorate([a.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],l.prototype,"updating",null);f.__decorate([a.property({value:null,type:m,dependsOn:["state.id","ready"]})],l.prototype,"viewpoint",null);f.__decorate([a.property({value:-1,
dependsOn:["state.id"]})],l.prototype,"zoom",null);return l=f.__decorate([a.subclass("esri.views.MapViewBase")],l)}(p.PopupView(l))})},"esri/layers/support/TileInfo":function(){define("require exports tslib ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a,d,k){var p=new m.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});return function(c){function l(a){a=c.call(this,a)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}f.__extends(l,c);r=l;l.create=function(b){void 0===
b&&(b={size:256,spatialReference:n.SpatialReference.WebMercator});var d=b.resolutionFactor||1,k=b.scales,c=b.size||256,l=b.spatialReference||n.SpatialReference.WebMercator;if(!a.isValid(l)){d=[];if(k)for(b=0;b<k.length;b++){var p=k[b];d.push({level:b,scale:p,resolution:p})}else{var h=5E-4;for(b=23;0<=b;b--)d.unshift({level:b,scale:h,resolution:h}),h*=2}return new r({dpi:96,lods:d,origin:new n.Point(0,0,l),size:[c,c],spatialReference:l})}var p=a.getInfo(l),u=b.origin?new n.Point({x:b.origin.x,y:b.origin.y,
spatialReference:l}):p?new n.Point({x:p.origin[0],y:p.origin[1],spatialReference:l}):new n.Point({x:0,y:0,spatialReference:l}),f=1/(39.37*e.getMetersPerUnitForSR(l)*96),g=[];if(k)for(b=0;b<k.length;b++)p=k[b],h=p*f,g.push({level:b,scale:p,resolution:h});else for(p=a.isGeographic(l)?512/c*5.916575275917094E8:256/c*5.91657527591555E8,k=Math.ceil(24/d),g.push({level:0,scale:p,resolution:p*f}),b=1;b<k;b++)p/=Math.pow(2,d),h=p*f,g.push({level:b,scale:p,resolution:h});return new r({dpi:96,lods:g,origin:u,
size:[c,c],spatialReference:l})};Object.defineProperty(l.prototype,"isWrappable",{get:function(){var b=this.spatialReference,d=this.origin;if(b&&d){var k=a.getInfo(b);return b.isWrappable&&Math.abs(k.origin[0]-d.x)<=k.dx}return!1},enumerable:!0,configurable:!0});l.prototype.readOrigin=function(a,b){return n.Point.fromJSON(f.__assign({spatialReference:b.spatialReference},a))};Object.defineProperty(l.prototype,"lods",{set:function(a){var b=this,d=0,k=0,c=[];this._levelToLOD={};a&&(d=-Infinity,k=Infinity,
a.forEach(function(a){c.push(a.scale);d=a.scale>d?a.scale:d;k=a.scale<k?a.scale:k;b._levelToLOD[a.level]=a}));this._set("scales",c);this._set("minScale",d);this._set("maxScale",k);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});l.prototype.readSize=function(a,b){return[b.cols,b.rows]};l.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};l.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var d=
Math.round(a);return b[d]+(d-a)*(b[Math.round(a-.5)]-b[d])};l.prototype.scaleToZoom=function(a){for(var b=this.scales,d=b.length-1,k=0;k<d;k++){var c=b[k],e=b[k+1];if(c<=a)break;if(e===a)return k+1;if(c>a&&e<a)return k+1-(a-e)/(c-e)}return k};l.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};l.prototype.tileAt=function(k,c,e,l){var p=this.lodAt(k);if(!p)return null;var h;if("number"===
typeof c)h=c,c=e;else{if(a.equals(c.spatialReference,this.spatialReference))h=c.x,c=c.y;else{l=d.project(c,this.spatialReference);if(!l)return null;h=l.x;c=l.y}l=e}e=p.resolution*this.size[0];p=p.resolution*this.size[1];l||(l={id:null,level:0,row:0,col:0,extent:b.create()});l.level=k;l.row=Math.floor((this.origin.y-c)/p+.001);l.col=Math.floor((h-this.origin.x)/e+.001);this.updateTileInfo(l);return l};l.prototype.updateTileInfo=function(a){var d=this.lodAt(a.level);if(d){var k=d.resolution*this.size[0],
d=d.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=b.create());a.extent[0]=this.origin.x+a.col*k;a.extent[1]=this.origin.y-(a.row+1)*d;a.extent[2]=a.extent[0]+k;a.extent[3]=a.extent[1]+d}};l.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};l.prototype.getTileBounds=function(a,b){var d=
this.lodAt(b.level).resolution,k=d*this.size[0],d=d*this.size[1];a[0]=this.origin.x+b.col*k;a[1]=this.origin.y-(b.row+1)*d;a[2]=a[0]+k;a[3]=a[1]+d;return a};l.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};l.prototype.clone=function(){return r.fromJSON(this.write({}))};l.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,d=0;d<a.length;d++){var k=a[d];this._upsampleLevels[k.level]={parentLevel:b?b.level:-1,factor:b?
b.resolution/k.resolution:0};b=k}};var r;f.__decorate([h.property({type:Number,json:{write:!0}})],l.prototype,"compressionQuality",void 0);f.__decorate([h.property({type:Number,json:{write:!0}})],l.prototype,"dpi",void 0);f.__decorate([h.property({type:String,json:{read:p.read,write:p.write,origins:{"web-scene":{read:!1,write:!1}}}})],l.prototype,"format",void 0);f.__decorate([h.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],l.prototype,"isWrappable",null);f.__decorate([h.property({type:n.Point,
json:{write:!0}})],l.prototype,"origin",void 0);f.__decorate([h.reader("origin")],l.prototype,"readOrigin",null);f.__decorate([h.property({type:[k],value:null,json:{write:!0}})],l.prototype,"lods",null);f.__decorate([h.property({readOnly:!0})],l.prototype,"minScale",void 0);f.__decorate([h.property({readOnly:!0})],l.prototype,"maxScale",void 0);f.__decorate([h.property({readOnly:!0})],l.prototype,"scales",void 0);f.__decorate([h.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?
[a,a]:[256,256]}})],l.prototype,"size",void 0);f.__decorate([h.reader("size",["rows","cols"])],l.prototype,"readSize",null);f.__decorate([h.writer("size",{cols:{type:q.Integer},rows:{type:q.Integer}})],l.prototype,"writeSize",null);f.__decorate([h.property({type:n.SpatialReference,json:{write:!0}})],l.prototype,"spatialReference",void 0);return l=r=f.__decorate([h.subclass("esri.layers.support.TileInfo")],l)}(c.JSONSupport)})},"esri/layers/support/LOD":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(t,g,f,n,m,c){return function(e){function h(b){b=e.call(this,b)||this;b.level=0;b.levelValue=null;b.resolution=0;b.scale=0;return b}f.__extends(h,e);g=h;h.prototype.clone=function(){return new g({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var g;f.__decorate([m.property({type:c.Integer,json:{write:!0}})],h.prototype,"level",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],h.prototype,"levelValue",void 0);f.__decorate([m.property({type:Number,
json:{write:!0}})],h.prototype,"resolution",void 0);f.__decorate([m.property({type:Number,json:{write:!0}})],h.prototype,"scale",void 0);return h=g=f.__decorate([m.subclass("esri.layers.support.LOD")],h)}(n.JSONSupport)})},"esri/views/PopupView":function(){define("require exports tslib ../core/arrayUtils ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(t,g,f,n,m,c,e){Object.defineProperty(g,"__esModule",{value:!0});g.PopupView=function(h){return function(h){function b(){return null!==
h&&h.apply(this,arguments)||this}f.__extends(b,h);b.prototype.fetchPopupFeatures=function(a,b){return f.__awaiter(this,void 0,void 0,function(){var d,e,l,h,r,g,q,m,x;return f.__generator(this,function(k){switch(k.label){case 0:return[4,this.when()];case 1:return k.sent(),[4,this._prepareFetchPopupFeatures(a,b)];case 2:return d=k.sent(),e=d.location,l=d.queryArea,h=d.layerViewsAndGraphics,r=d.clientOnlyGraphics,g=c.resolve(r),q=this._queryLayerPopupFeatures({queryArea:l,layerViewsAndGraphics:h,options:b}),
m=q.map(function(a){return a.promise}),x=c.eachAlwaysValues(f.__spreadArrays([g],m)).then(n.flatten),[2,{location:e,clientOnlyGraphics:r,allGraphicsPromise:x,promisesPerLayerView:q}]}})})};b.prototype._queryLayerPopupFeatures=function(a){var b=a.queryArea,k=a.options;return a.layerViewsAndGraphics.map(function(a){var d=a.layerView;a={clientGraphics:a.graphics,event:m.isSome(k)?k.event:null,signal:m.isSome(k)?k.signal:null,defaultPopupTemplateEnabled:m.isSome(k)?!!k.defaultPopupTemplateEnabled:!1};
a=d.fetchPopupFeatures(b,a);return{layerView:d,promise:a}})};b.prototype._isValidPopupGraphic=function(a,b){return a&&!!a.getEffectivePopupTemplate(m.isSome(b)&&b.defaultPopupTemplateEnabled)};b.prototype._prepareFetchPopupFeatures=function(a,b){return f.__awaiter(this,void 0,void 0,function(){var d,c,e,h,r,g,q,m;return f.__generator(this,function(k){switch(k.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return d=k.sent(),c=d.clientGraphics,e=d.queryArea,h=d.location,r=this._getFetchPopupLayerViews(),
g=this._graphicsPerFetchPopupLayerView(c,r),q=g.layerViewsAndGraphics,m=g.clientOnlyGraphics,[2,{clientOnlyGraphics:m,layerViewsAndGraphics:q,queryArea:e,location:h}]}})})};b.prototype._popupHitTestGraphics=function(a,b){return f.__awaiter(this,void 0,void 0,function(){var d,c,e,h,r,g,q=this;return f.__generator(this,function(k){switch(k.label){case 0:return[4,this.popupHitTest(a)];case 1:return d=k.sent(),c=d.results,e=d.mapPoint,h=c.filter(function(a){return q._isValidPopupGraphic(a.graphic,b)}),
r=h.length?h[0].mapPoint:null,g=h.map(function(a){return a.graphic}),[2,{clientGraphics:g,queryArea:e,location:e||r}]}})})};b.prototype._getFetchPopupLayerViews=function(){var a=this,b=[];this.allLayerViews.forEach(function(d){a._isValidPopupLayerView(d)&&b.push(d)});m.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};b.prototype._isValidPopupLayerView=function(a){return m.isSome(a)&&(!("layer"in a)||!a.suspended)&&"fetchPopupFeatures"in
a};b.prototype._graphicsPerFetchPopupLayerView=function(a,b){var d=[],c=new Map;b=b.map(function(a){var b=[];"layer"in a?c.set(a.layer,b):c.set(a.graphics,b);return{layerView:a,graphics:b}});for(var e=0;e<a.length;e++){var h=a[e],f=c.get(h.layer)||null;f?f.push(h):d.push(h)}return{layerViewsAndGraphics:b,clientOnlyGraphics:d}};return b=f.__decorate([e.subclass("esri.views.PopupView")],b)}(h)}})},"esri/views/2d/AnimationManager":function(){define("require exports tslib ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a){Object.defineProperty(g,"__esModule",{value:!0});var d=function(){function a(a,d,k,c){var e=a.targetGeometry,l=d.targetGeometry;c?"string"===typeof c&&(c=b.parse(c)||b.easingFunctions.ease):c=b.easingFunctions.ease;this.easing=c;this.duration=k;this.sCenterX=e.x;this.sCenterY=e.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=l.x;this.tCenterY=l.y;this.tScale=d.scale;this.tRotation=d.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-
this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}a.prototype.applyRatio=function(a,b){var d=this.easing(b),k,c;1<=b?(b=this.tCenterX,k=this.tCenterY,c=this.tRotation,d=this.tScale):(b=this.sCenterX+d*this.dCenterX,k=this.sCenterY+d*this.dCenterY,c=this.sRotation+d*this.dRotation,d=this.sScale+d*this.dScale);a.targetGeometry.x=b;a.targetGeometry.y=k;a.scale=d;a.rotation=c};
return a}();t=function(k){function c(a){a=k.call(this,a)||this;a.duration=200;a.transition=null;a.easing=b.easingFunctions.ease;a.view=null;a.viewpoint=null;a.viewpoint=new m({targetGeometry:new n.Point,scale:0,rotation:0});a._updateTask=e.addFrameTask({postRender:a._postRender.bind(a)});a._updateTask.pause();return a}f.__extends(c,k);c.prototype.destroy=function(){this._updateTask.remove();this._updateTask=null};c.prototype.animate=function(b,k,c){var e=this;this.stop();a.copy(this.viewpoint,k);
this.transition=new d(this.viewpoint,b.target,c&&c.duration||this.duration,c&&c.easing||this.easing);k=function(){e.animation===b&&e._updateTask&&("finished"===b.state&&(e.transition.applyRatio(e.viewpoint,1),e.view.state&&(e.view.state.viewpoint=e.viewpoint.clone())),e.animation=null,e.updateFunction=null)};b.when(k,k);this._startTime=performance.now();this._updateTask.resume();return this.animation=b};c.prototype.animateContinous=function(a,b){var d=this;this.stop();this.updateFunction=b;this.viewpoint=
a;var k=new q({target:a.clone()});a=function(){d.animation===k&&d._updateTask&&(d.animation=null,d.updateFunction=null)};k.when(a,a);this._startTime=performance.now();this._updateTask.resume();return this.animation=k};c.prototype.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};c.prototype._postRender=function(a){var b=this.animation;b&&b.state!==q.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,a.deltaTime):(a=(performance.now()-
this._startTime)/this.transition.duration,b=1<=a,this.transition.applyRatio(this.viewpoint,a),b&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};f.__decorate([h.property()],c.prototype,"animation",void 0);f.__decorate([h.property()],c.prototype,"duration",void 0);f.__decorate([h.property()],c.prototype,"transition",void 0);f.__decorate([h.property()],c.prototype,"easing",void 0);f.__decorate([h.property()],c.prototype,"view",
void 0);f.__decorate([h.property()],c.prototype,"viewpoint",void 0);return c=f.__decorate([h.subclass("esri.views.2d.AnimationManager")],c)}(c);g.default=t})},"esri/views/2d/unitBezier":function(){define(["require","exports"],function(t,g){function f(f,c,e,h){function g(k,c){var e,l,h,p;h=k;for(l=0;8>l;l++){p=((d*h+a)*h+b)*h-k;if(Math.abs(p)<c)return h;e=(3*d*h+2*a)*h+b;if(1E-6>Math.abs(e))break;h-=p/e}e=0;l=1;h=k;if(h<e)return e;if(h>l)return l;for(;e<l;){p=((d*h+a)*h+b)*h;if(Math.abs(p-k)<c)break;
k>p?e=h:l=h;h=.5*(l-e)+e}return h}var b=3*f,a=3*(e-f)-b,d=1-b-a,k=3*c,p=3*(h-c)-k,l=1-k-p;return function(a,b){void 0===b&&(b=1E-6);a=g(a,b);return((l*a+p)*a+k)*a}}Object.defineProperty(g,"__esModule",{value:!0});g.unitBezier=f;var n=/^cubic-bezier\((.*)\)/;g.easingFunctions={};g.parse=function(m){var c=g.easingFunctions[m]||null;!c&&(m=n.exec(m))&&(m=m[1].split(",").map(function(c){return parseFloat(c.trim())}),4!==m.length||m.some(function(c){return isNaN(c)})||(c=f.apply(f,m)));return c};g.easingFunctions.ease=
f(.25,.1,.25,1);g.easingFunctions.linear=f(0,0,1,1);g.easingFunctions.easeIn=g.easingFunctions["ease-in"]=f(.42,0,1,1);g.easingFunctions.easeOut=g.easingFunctions["ease-out"]=f(0,0,.58,1);g.easingFunctions.easeInOut=g.easingFunctions["ease-in-out"]=f(.42,0,.58,1)})},"esri/views/2d/viewpointUtils":function(){define("require exports tslib ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a,d,k,p,l,u,r,z,v,F,x){function w(a,d,c,e){return e&&c&&!e.equals(c)&&F.canProject(e,c)&&e.isWebMercator?(e.isWebMercator?(c=d[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(b.common.toRadian(c)),a=k.vec2.set(a,b.common.toRadian(d[0])*L,.5*L*Math.log((1+c)/(1-c)))):(c=b.common.toDegree(d[0]/L),a=k.vec2.set(a,c-360*Math.floor((c+180)/360),b.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*d[1]/L))))),a):k.vec2.copy(a,d)}function y(a){return a.wkid?a:a.spatialReference||
z.WGS84}function C(a,b){return b.type?k.vec2.set(a,b.x,b.y):k.vec2.copy(a,b)}function A(a,b){return Math.max(a.width/b[0],a.height/b[1])*R(a.spatialReference)}function E(a,b,d,k){return f.__awaiter(this,void 0,void 0,function(){var h,p,g,q,z,v,n,x,w,y,C,A,N,t,B,D,V,I,U,Y,H,G,M,J,Q,L,O,P;return f.__generator(this,function(f){switch(f.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];m.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];
p=a.every(function(a){return"attributes"in a});g=a.some(function(a){return!a.geometry});q=a;if(!(p&&g&&b&&b.allLayerViews))return[3,2];z=new Map;v=0;for(n=a;v<n.length;v++)x=n[v],w=x.layer,y=z.get(w)||[],C=x.attributes[w.objectIdField],null!=C&&y.push(C),z.set(w,y);A=[];z.forEach(function(a,d){var k=b.allLayerViews.find(function(a){return a.layer.id===d.id});if("queryFeatures"in k){var c=d.createQuery();c.objectIds=a;c.returnGeometry=!0;A.push(k.queryFeatures(c))}});return[4,e.all(A)];case 1:N=f.sent();
t=[];B=0;for(D=N;B<D.length;B++)if((V=D[B])&&V.features&&V.features.length)for(I=0,U=V.features;I<U.length;I++)x=U[I],c.isSome(x.geometry)&&t.push(x.geometry);q=t;f.label=2;case 2:Y=0,H=q,f.label=3;case 3:if(!(Y<H.length))return[3,6];G=H[Y];return[4,E(G,b,d,k)];case 4:k=f.sent(),f.label=5;case 5:return Y++,[3,3];case 6:return[2,k];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];h=new r(a);return[3,12];case 8:if(!(a instanceof u))return[3,9];h=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];h=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];M=a.layer;J=b.allLayerViews.find(function(a){return a.layer.id===M.id});if(!("queryFeatures"in J))return[3,12];Q=M.createQuery();Q.objectIds=[a.attributes[M.objectIdField]];Q.returnGeometry=!0;return[4,J.queryFeatures(Q)];case 11:L=f.sent(),h=c.get(L,"features",0,"geometry"),f.label=12;case 12:if(c.isNone(h))return[2,null];O="point"===h.type?new l({xmin:h.x,
ymin:h.y,xmax:h.x,ymax:h.y,spatialReference:h.spatialReference}):h.extent;if(!O)return[2,null];P=F.canProject(O,d);if(!O.spatialReference.equals(d)&&P)O=F.project(O,d);else if(!P)return[2,null];k=k?k.union(O):O.clone();return[2,k]}})})}function I(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var d=0,k=0,c=0;c<a.length;c++)(b=a[c].layer)&&b.minScale&&b.maxScale&&(d=b.minScale<d?b.minScale:d,k=b.maxScale>k?b.maxScale:k);return d&&k?{min:d,max:k}:null}}}function D(a,b){return f.__awaiter(this,void 0,void 0,function(){var d,k,c,e,h,u,g,q,m,z,v,t,N,B,D,V,H,G,M,J;return f.__generator(this,function(f){switch(f.label){case 0:if(!a||!b)return[2,new n({targetGeometry:new r,scale:0,rotation:0})];d=b.spatialReference;k=b.constraints;c=b.padding;e=b.viewpoint;
h=b.size;u=c?h[0]-c.left-c.right:h[0];g=c?h[1]-c.top-c.bottom:h[1];q=[u,g];m=null;a instanceof n?m=a:a.viewpoint?m=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(m=a.target);z=null;if(!m||!m.targetGeometry)return[3,1];z=m.targetGeometry;return[3,10];case 1:if(!(a instanceof l))return[3,2];z=a;return[3,10];case 2:return a||a&&("center"in a||"extent"in a||"target"in a)?[4,E(a.center,b,d)]:[3,10];case 3:return(N=f.sent())?[3,5]:[4,E(a.extent,b,d)];case 4:N=f.sent(),f.label=5;case 5:return(t=
N)?[3,7]:[4,E(a.target,b,d)];case 6:t=f.sent(),f.label=7;case 7:return(v=t)?[3,9]:[4,E(a,b,d)];case 8:v=f.sent(),f.label=9;case 9:z=v,f.label=10;case 10:!z&&e&&e.targetGeometry?z=e.targetGeometry:!z&&b.extent&&(z=b.extent);B=y(z);d||(d=y(b.spatialReference||b.extent||z));if(!x.canProject(z,d)&&B&&!B.equals(d))return[2,null];D=C(p.vec2f64.create(),z.center?z.center:z);V=new r(w(D,D,B,d),d);H=null;H=m&&m.targetGeometry&&"point"===m.targetGeometry.type?m.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:
a.hasOwnProperty("zoom")&&-1!==a.zoom&&k&&k.effectiveLODs?k.zoomToScale(a.zoom):Array.isArray(z)||"point"===z.type||"extent"===z.type&&0===z.width&&0===z.height?b.extent&&F.canProject(b.extent,d)?A(F.project(b.extent,d),q):b.extent?A(b.extent,q):e.scale:F.canProject(z.extent,d)?A(F.project(z.extent,d),q):A(z.extent,q);if(G=I(a))G.min&&G.min>H?H=G.min:G.max&&G.max<H&&(H=G.max);M=0;m?M=m.rotation:a.hasOwnProperty("rotation")?M=a.rotation:e&&(M=e.rotation);J=new n({targetGeometry:V,scale:H,rotation:M});
k&&(J=k.fit(J),k.rotationEnabled||(J.rotation=M));return[2,J]}})})}function B(a,b){var d=a.targetGeometry,k=b.targetGeometry;d.x=k.x;d.y=k.y;d.spatialReference=k.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function H(a,b,d){return d?k.vec2.set(a,.5*(b[0]-d.right+d.left),.5*(b[1]-d.bottom+d.top)):k.vec2.scale(a,b,.5)}function G(b,d,k,c){g.getTransform(b,d,k,c);return a.mat2d.invert(b,b)}function Q(a,b,d){var c=O(b);b=Math.abs(Math.cos(c));c=Math.abs(Math.sin(c));return k.vec2.set(a,
Math.round(d[1]*c+d[0]*b),Math.round(d[1]*b+d[0]*c))}function M(a){var b=a.scale;a=a.targetGeometry.spatialReference;a=v.isValid(a)?1/(39.37*h.getMetersPerUnitForSR(a)*96):1;return b*a}function O(a){return b.common.toRadian(a.rotation)||0}function R(a){return v.isValid(a)?39.37*h.getMetersPerUnitForSR(a)*96:1}function P(a){return a.isWrappable?(a=v.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(g,"__esModule",{value:!0});var L=q.wgs84Radius,J=180/Math.PI;g.extentToScale=A;g.create=D;g.copy=
B;g.getAnchor=H;g.getExtent=function(){var a=p.vec2f64.create();return function(b,d,k){var c=d.targetGeometry;C(a,c);d=.5*M(d);b.xmin=a[0]-d*k[0];b.ymin=a[1]-d*k[1];b.xmax=a[0]+d*k[0];b.ymax=a[1]+d*k[1];b.spatialReference=c.spatialReference;return b}}();g.setExtent=function(a,b,d,k,c){g.centerAt(a,b,d.center);a.scale=A(d,k);c&&c.constraints&&c.constraints.constrain(a);return a};g.getOuterExtent=function(){var a=p.vec2f64.create(),b=p.vec2f64.create();return function(d,k,c){C(a,k.targetGeometry);Q(b,
k,c);c=.5*M(k);d.set({xmin:a[0]-c*b[0],ymin:a[1]-c*b[1],xmax:a[0]+c*b[0],ymax:a[1]+c*b[1],spatialReference:k.targetGeometry.spatialReference});return d}}();g.getOuterSize=Q;g.getPaddingScreenTranslation=function(){var a=p.vec2f64.create();return function(b,d,c){return k.vec2.sub(b,k.vec2.scale(b,d,.5),H(a,d,c))}}();g.getPaddingMapTranslation=function(){var b=d.mat2df64.create(),c=p.vec2f64.create();return function(d,e,l,h){var p=M(e);e=O(e);k.vec2.set(c,p,p);a.mat2d.fromScaling(b,c);a.mat2d.rotate(b,
b,e);a.mat2d.translate(b,b,g.getPaddingScreenTranslation(c,l,h));a.mat2d.translate(b,b,[0,h.top-h.bottom]);return k.vec2.set(d,b[4],b[5])}}();g.getResolution=M;g.getResolutionToScaleFactor=R;g.getMatrix=function(){var b=p.vec2f64.create(),d=p.vec2f64.create(),c=p.vec2f64.create();return function(e,l,h,p,f,u){k.vec2.negate(b,l);k.vec2.scale(d,h,.5*u);k.vec2.set(c,1/p*u,-1/p*u);a.mat2d.identity(e);a.mat2d.translate(e,e,d);f&&a.mat2d.rotate(e,e,f);a.mat2d.scale(e,e,c);a.mat2d.translate(e,e,b);return e}}();
g.getTransform=function(){var a=p.vec2f64.create();return function(b,d,k,c){var e=M(d),l=O(d);C(a,d.targetGeometry);return g.getMatrix(b,a,k,e,l,c)}}();g.getTransformNoRotation=function(){var a=p.vec2f64.create();return function(b,d,k,c){var e=M(d);C(a,d.targetGeometry);return g.getMatrix(b,a,k,e,0,c)}}();g.getWorldWidth=P;g.getWorldScreenWidth=function(a,b){return Math.round(P(a)/b)};g.createAsync=function(a,b){return D(a,b)};g.angleBetween=function(){var a=p.vec2f64.create(),b=p.vec2f64.create(),
d=[0,0,0];return function(c,e,l){k.vec2.subtract(a,c,e);k.vec2.normalize(a,a);k.vec2.subtract(b,c,l);k.vec2.normalize(b,b);k.vec2.cross(d,a,b);c=Math.acos(k.vec2.dot(a,b)/(k.vec2.length(a)*k.vec2.length(b)))*J;0>d[2]&&(c=-c);isNaN(c)&&(c=0);return c}}();g.addPadding=function(){var a=p.vec2f64.create();return function(b,d,k,c){var e=b.targetGeometry;B(b,d);g.getPaddingMapTranslation(a,d,k,c);e.x+=a[0];e.y+=a[1];return b}}();g.removePadding=function(){var a=p.vec2f64.create();return function(b,d,k,
c){var e=b.targetGeometry;B(b,d);g.getPaddingMapTranslation(a,d,k,c);e.x-=a[0];e.y-=a[1];return b}}();g.centerAt=function(){var a=p.vec2f64.create();return function(b,d,k){B(b,d);d=b.targetGeometry;var c=y(k),e=y(d);C(a,k);w(a,a,c,e);d.x=a[0];d.y=a[1];return b}}();g.pixelSize=function(a){return M(a)};g.resize=function(){var a=p.vec2f64.create();return function(b,d,c,e,l){l||(l="center");k.vec2.sub(a,c,e);k.vec2.scale(a,a,.5);c=a[0];e=a[1];switch(l){case "center":k.vec2.set(a,0,0);break;case "left":k.vec2.set(a,
-c,0);break;case "top":k.vec2.set(a,0,e);break;case "right":k.vec2.set(a,c,0);break;case "bottom":k.vec2.set(a,0,-e);break;case "top-left":k.vec2.set(a,-c,e);break;case "bottom-left":k.vec2.set(a,-c,-e);break;case "top-right":k.vec2.set(a,c,e);break;case "bottom-right":k.vec2.set(a,c,-e)}g.translateBy(b,d,a);return b}}();g.rotateBy=function(a,b,d){B(a,b);a.rotation+=d;return a};g.rotateTo=function(a,b,d){B(a,b);a.rotation=d;return a};g.scaleBy=function(){var a=p.vec2f64.create();return function(b,
d,c,e,l){B(b,d);isNaN(c)||0===c||(g.toMap(a,e,d,l),b.scale=d.scale*c,g.toScreen(a,a,b,l),g.translateBy(b,b,k.vec2.set(a,a[0]-e[0],e[1]-a[1])));return b}}();g.scaleTo=function(a,b,d){B(a,b);a.scale=d;return a};g.scaleAndRotateBy=function(){var a=p.vec2f64.create();return function(b,d,c,e,l,h){B(b,d);isNaN(c)||0===c||(g.toMap(a,l,d,h),b.scale=d.scale*c,b.rotation+=e,g.toScreen(a,a,b,h),g.translateBy(b,b,k.vec2.set(a,a[0]-l[0],l[1]-a[1])));return b}}();g.padAndScaleAndRotateBy=function(){var a=p.vec2f64.create(),
b=p.vec2f64.create();return function(d,c,e,l,h,p,f){g.getPaddingScreenTranslation(b,p,f);k.vec2.add(a,h,b);return l?g.scaleAndRotateBy(d,c,e,l,a,p):g.scaleBy(d,c,e,a,p)}}();g.toMap=function(){var a=d.mat2df64.create();return function(b,d,c,e){return k.vec2.transformMat2d(b,d,G(a,c,e,1))}}();g.toScreen=function(){var a=d.mat2df64.create();return function(b,d,c,e){return k.vec2.transformMat2d(b,d,g.getTransform(a,c,e,1))}}();g.translateBy=function(){var b=p.vec2f64.create(),c=d.mat2df64.create();return function(d,
e,l){B(d,e);var h=M(e),f=d.targetGeometry;a.mat2d.fromRotation(c,O(e));a.mat2d.scale(c,c,p.vec2f64.fromValues(h,h));k.vec2.transformMat2d(b,l,c);f.x+=b[0];f.y+=b[1];return d}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.common=f})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});
g.mat2d=f})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.mat2df64=f})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(t,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){return[1,0,0,1,0,0]};g.clone=function(f){return[f[0],f[1],f[2],f[3],f[4],f[5]]};g.fromValues=function(f,g,m,c,e,h){return[f,g,m,c,e,h]};
g.createView=function(f,g){return new Float64Array(f,g,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require","exports","./math/vec2"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.vec2=f})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(t,g,f){function n(a,b,k){a[0]=b[0]-k[0];a[1]=b[1]-k[1];return a}function m(a,b,k){a[0]=b[0]*k[0];a[1]=b[1]*k[1];return a}function c(a,b,k){a[0]=b[0]/k[0];a[1]=b[1]/k[1];return a}
function e(a,b){var d=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(d*d+a*a)}function h(a,b){var d=b[0]-a[0];a=b[1]-a[1];return d*d+a*a}function q(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function b(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(g,"__esModule",{value:!0});g.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};g.set=function(a,b,k){a[0]=b;a[1]=k;return a};g.add=function(a,b,k){a[0]=b[0]+k[0];a[1]=b[1]+k[1];return a};g.subtract=n;g.multiply=m;g.divide=c;g.ceil=function(a,b){a[0]=
Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};g.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};g.min=function(a,b,k){a[0]=Math.min(b[0],k[0]);a[1]=Math.min(b[1],k[1]);return a};g.max=function(a,b,k){a[0]=Math.max(b[0],k[0]);a[1]=Math.max(b[1],k[1]);return a};g.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};g.scale=function(a,b,k){a[0]=b[0]*k;a[1]=b[1]*k;return a};g.scaleAndAdd=function(a,b,k,c){a[0]=b[0]+k[0]*c;a[1]=b[1]+k[1]*c;return a};g.distance=
e;g.squaredDistance=h;g.length=q;g.squaredLength=b;g.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};g.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};g.normalize=function(a,b){var d=b[0],c=b[1],d=d*d+c*c;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d);return a};g.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};g.cross=function(a,b,k){b=b[0]*k[1]-b[1]*k[0];a[0]=a[1]=0;a[2]=b;return a};g.lerp=function(a,b,k,c){var d=b[0];b=b[1];a[0]=d+c*(k[0]-d);a[1]=b+c*(k[1]-b);return a};g.random=function(a,
b){b=b||1;var d=2*f.RANDOM()*Math.PI;a[0]=Math.cos(d)*b;a[1]=Math.sin(d)*b;return a};g.transformMat2=function(a,b,k){var d=b[0];b=b[1];a[0]=k[0]*d+k[2]*b;a[1]=k[1]*d+k[3]*b;return a};g.transformMat2d=function(a,b,k){var d=b[0];b=b[1];a[0]=k[0]*d+k[2]*b+k[4];a[1]=k[1]*d+k[3]*b+k[5];return a};g.transformMat3=function(a,b,k){var d=b[0];b=b[1];a[0]=k[0]*d+k[3]*b+k[6];a[1]=k[1]*d+k[4]*b+k[7];return a};g.transformMat4=function(a,b,k){var d=b[0];b=b[1];a[0]=k[0]*d+k[4]*b+k[12];a[1]=k[1]*d+k[5]*b+k[13];return a};
g.rotate=function(a,b,k,c){var d=b[0]-k[0];b=b[1]-k[1];var e=Math.sin(c);c=Math.cos(c);a[0]=d*c-b*e+k[0];a[1]=d*e+b*c+k[1];return a};g.angle=function(a,b){var d=a[0];a=a[1];var c=b[0];b=b[1];var e=d*d+a*a;0<e&&(e=1/Math.sqrt(e));var h=c*c+b*b;0<h&&(h=1/Math.sqrt(h));d=(d*c+a*b)*e*h;return 1<d?0:-1>d?Math.PI:Math.acos(d)};g.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};g.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};g.equals=function(a,b){var d=a[0];a=a[1];var c=b[0];b=b[1];return Math.abs(d-
c)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(c))&&Math.abs(a-b)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};g.len=q;g.sub=n;g.mul=m;g.div=c;g.dist=e;g.sqrDist=h;g.sqrLen=b})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.vec2f64=f})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(t,g){Object.defineProperty(g,"__esModule",{value:!0});
g.create=function(){return[0,0]};g.clone=function(f){return[f[0],f[1]]};g.fromValues=function(f,g){return[f,g]};g.fromArray=function(f){for(var g=[0,0],m=Math.min(2,f.length),c=0;c<m;++c)g[c]=f[c];return g};g.createView=function(f,g){return new Float64Array(f,g,2)};g.zeros=function(){return[0,0]};g.ones=function(){return[1,1]};g.unitX=function(){return[1,0]};g.unitY=function(){return[0,1]};g.ZEROS=[0,0];g.ONES=[1,1];g.UNIT_X=[1,0];g.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require",
"exports","../../core/maybe","../../core/scheduling"],function(t,g,f,n){Object.defineProperty(g,"__esModule",{value:!0});t=function(){function g(c){var e=this;this.view=c;this._frameTaskHandle=null;this._updateRequested=!1;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=function(){e._updateParameters.state=e.view.state;e._updateParameters.stationary=e.view.stationary;e._updateParameters.pixelRatio=window.devicePixelRatio;e._updateParameters.renderingOptions=e.view.renderingOptions};
this.update=function(){e._updateRequested=!1;if(e.updateEnabled){var c=e.view,g=c.basemapView,b=c.graphicsView,a=c.labelManager,d=c.layerViews,c=c.state.id;g.baseLayerViews.forEach(e._updateLayerView,e);d.forEach(e._updateLayerView,e);g.referenceLayerViews.forEach(e._updateLayerView,e);f.isSome(a)&&(a.lastUpdateId!==c&&(a.viewChange(),a.lastUpdateId=c),a.updateRequested&&a.processUpdate(e._updateParameters));f.isSome(b)&&(b.lastUpdateId!==c&&(b.viewChange(),b.lastUpdateId=c),b.updateRequested&&b.processUpdate(e._updateParameters));
e.animationInProgress||e._updateRequested||e._frameTaskHandle.pause()}}}g.prototype.destroy=function(){this.stop()};g.prototype.start=function(){var c=this;this.stationary=this.view.stationary;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._stationaryHandle=this.view.watch("stationary",function(e){c.stationary=e;c.requestFrame()});this._frameTaskHandle=n.addFrameTask(this)};g.prototype.stop=
function(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};g.prototype.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};g.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};g.prototype._updateLayerView=function(c){var e=this.view.state,h=c.lastUpdateId;if(null==
h||!this.stationary&&!c.moving)c.moving=!0,c.moveStart();h!==e.id&&c.viewChange();this.stationary&&c.moving&&(c.moving=!1,c.moveEnd());c.lastUpdateId=e.id;c.updateRequested&&c.processUpdate(this._updateParameters);"layerViews"in c&&c.layerViews.forEach(this._updateLayerView,this)};return g}();g.default=t})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe","@dojo/framework/shim/Promise"],function(t,g,f,n){function m(){return Promise.all([new Promise(function(c,
b){t(["../webgl"],c,b)}),new Promise(function(c,b){t(["./engine"],c,b)})])}Object.defineProperty(g,"__esModule",{value:!0});var c=function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/TileLayerView2D"],c,b)})})},e=function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/FeatureLayerView2D"],c,b)})})},h={"base-dynamic":function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/BaseDynamicLayerView2D"],c,b)})})},"base-tile":c,
"bing-maps":c,csv:e,"geo-rss":function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/GeoRSSLayerView2D"],c,b)})})},feature:e,geojson:e,graphics:function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/GraphicsLayerView2D"],c,b)})})},group:function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/GroupLayerView2D"],c,b)})})},imagery:function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/ImageryLayerView2D"],
c,b)})})},"imagery-tile":function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/ImageryTileLayerView2D"],c,b)})})},kml:function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/KMLLayerView2D"],c,b)})})},"map-image":function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/MapImageLayerView2D"],c,b)})})},"map-notes":function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/MapNotesLayerView2D"],
c,b)})})},"ogc-feature":e,"open-street-map":c,route:function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/RouteLayerView2D"],c,b)})})},stream:function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/StreamLayerView2D"],c,b)})})},tile:c,"vector-tile":function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/VectorTileLayerView2D"],c,b)})})},"web-tile":c,wms:function(){return m().then(function(){return new Promise(function(c,
b){t(["./layers/WMSLayerView2D"],c,b)})})},wmts:function(){return m().then(function(){return new Promise(function(c,b){t(["./layers/WMTSLayerView2D"],c,b)})})},"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};g.layerView2DImporter={hasLayerViewModule:function(c){return n.isSome(h[c.type])},importLayerView:function(c){var b=h[c.type];if(!n.isSome(b))throw c=c.declaredClass?c.declaredClass.slice(c.declaredClass.lastIndexOf(".")+
1):"Unknown",b=c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new f(b+":view-not-supported",c+" is not supported in 2D");return b(c)}}})},"esri/views/2d/MapViewConstraints":function(){define("require exports tslib ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),function(t,g,f,n,m,c,e,h){return function(g){function b(){var a=null!==g&&g.apply(this,arguments)||this;a.lods=null;a.minScale=
0;a.maxScale=0;a.minZoom=-1;a.maxZoom=-1;a.rotationEnabled=!0;a.snapToZoom=!0;return a}f.__extends(b,g);b.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};b.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(b.prototype,"_rotation",{get:function(){return new e({rotationEnabled:this.rotationEnabled})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultLODs",{get:function(){var a=
this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_zoom",{get:function(){return new h({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,configurable:!0});b.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=
b};b.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||a<=b};b.prototype.constrain=function(a,b){this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};b.prototype.fit=function(a){return this._zoom.fit(a)};b.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};b.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)};b.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};b.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};
b.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};f.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],b.prototype,"effectiveLODs",void 0);f.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],b.prototype,"effectiveMinScale",void 0);f.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],b.prototype,"effectiveMaxScale",void 0);f.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],b.prototype,
"effectiveMinZoom",void 0);f.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],b.prototype,"effectiveMaxZoom",void 0);f.__decorate([m.property({type:[c]})],b.prototype,"lods",void 0);f.__decorate([m.property()],b.prototype,"minScale",void 0);f.__decorate([m.property()],b.prototype,"maxScale",void 0);f.__decorate([m.property()],b.prototype,"minZoom",void 0);f.__decorate([m.property()],b.prototype,"maxZoom",void 0);f.__decorate([m.property()],b.prototype,"rotationEnabled",void 0);
f.__decorate([m.property()],b.prototype,"snapToZoom",void 0);f.__decorate([m.property()],b.prototype,"view",void 0);f.__decorate([m.property({type:e,dependsOn:["rotationEnabled"]})],b.prototype,"_rotation",null);f.__decorate([m.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],b.prototype,"_defaultLODs",null);f.__decorate([m.property({readOnly:!0,type:h,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],b.prototype,"_zoom",null);
return b=f.__decorate([m.subclass("esri.views.2d.MapViewConstraints")],b)}(n.EventedAccessor)})},"esri/views/2d/constraints/RotationConstraint":function(){define(["require","exports","tslib","../../../core/Accessor","../../../core/accessorSupport/decorators"],function(t,g,f,n,m){return function(c){function e(){var e=null!==c&&c.apply(this,arguments)||this;e.enabled=!0;e.rotationEnabled=!0;return e}f.__extends(e,c);h=e;e.prototype.constrain=function(c,b){if(!this.enabled||!b)return c;this.rotationEnabled||
(c.rotation=b.rotation);return c};e.prototype.clone=function(){return new h({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var h;f.__decorate([m.property()],e.prototype,"enabled",void 0);f.__decorate([m.property()],e.prototype,"rotationEnabled",void 0);return e=h=f.__decorate([m.subclass("esri.views.2d.constraints.RotationConstraint")],e)}(n)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports tslib ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),
function(t,g,f,n,m,c){return function(e){function h(b){b=e.call(this,b)||this;b._lodByScale={};b._scales=[];b.effectiveLODs=null;b.effectiveMinZoom=-1;b.effectiveMaxZoom=-1;b.effectiveMinScale=0;b.effectiveMaxScale=0;b.lods=null;b.minZoom=-1;b.maxZoom=-1;b.minScale=0;b.maxScale=0;b.snapToZoom=!0;return b}f.__extends(h,e);g=h;h.prototype.initialize=function(){var b,a,d=this,c=this.lods;a=this.minScale;b=this.maxScale;var e=this.minZoom,l=this.maxZoom,h=-1,f=-1,g=!1,q=!1;0!==a&&0!==b&&a<b&&(b=[b,a],
a=b[0],b=b[1]);if(c&&c.length){c=c.map(function(a){return a.clone()});c.sort(function(a,b){return b.scale-a.scale});c.forEach(function(a,b){return a.level=b});for(var m,n=0,w=c;n<w.length;n++){var y=w[n];!g&&0<a&&a>=y.scale&&(h=y.level,g=!0);!q&&0<b&&b>=y.scale&&(f=m?m.level:-1,q=!0);m=y}-1===e&&(e=0===a?0:h);-1===l&&(l=0===b?c.length-1:f);e=Math.max(e,0);e=Math.min(e,c.length-1);l=Math.max(l,0);l=Math.min(l,c.length-1);e>l&&(a=[l,e],e=a[0],l=a[1]);a=c[e].scale;b=c[l].scale;c.splice(0,e);c.splice(l-
e+1,c.length);c.forEach(function(a,b){d._lodByScale[a.scale]=a;d._scales[b]=a.scale});this._set("effectiveLODs",c);this._set("effectiveMinZoom",e);this._set("effectiveMaxZoom",l)}this._set("effectiveMinScale",a);this._set("effectiveMaxScale",b)};h.prototype.constrain=function(b,a){if(a&&b.scale===a.scale)return b;var d=this.effectiveMinScale,c=this.effectiveMaxScale,e=b.targetGeometry,l=a&&a.targetGeometry,h=0!==d&&b.scale>d;if(0!==c&&b.scale<c||h)d=h?d:c,l&&(a=(d-a.scale)/(b.scale-a.scale),e.x=l.x+
(e.x-l.x)*a,e.y=l.y+(e.y-l.y)*a),b.scale=d;this.snapToZoom&&this.effectiveLODs&&(b.scale=this._getClosestScale(b.scale));return b};h.prototype.fit=function(b){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(b,null);var a=this.scaleToZoom(b.scale);b.scale=this.zoomToScale(.99<Math.abs(a-Math.floor(a))?Math.round(a):Math.floor(a));return b};h.prototype.zoomToScale=function(b){if(!this.effectiveLODs)return 0;b-=this.effectiveMinZoom;b=Math.max(0,b);var a=this._scales;if(0>=b)return a[0];
if(b>=a.length)return a[a.length-1];var d=Math.round(b);return a[d]+(d-b)*(a[Math.round(b-.5)]-a[d])};h.prototype.scaleToZoom=function(b){if(!this.effectiveLODs)return-1;var a=this._scales,d,c;if(b>=a[0])return this.effectiveMinZoom;if(b<=a[a.length-1])return this.effectiveMaxZoom;for(var e=0;e<a.length-1;e++){d=a[e];c=a[e+1];if(c===b)return a=e+this.effectiveMinZoom,a+1;if(d>b&&c<b)return a=e+this.effectiveMinZoom,a+1-(b-c)/(d-c)}};h.prototype.snapToClosestScale=function(b){if(!this.effectiveLODs)return b;
b=this.scaleToZoom(b);return this.zoomToScale(Math.round(b))};h.prototype.snapToNextScale=function(b,a){void 0===a&&(a=.5);if(!this.effectiveLODs)return b*a;b=Math.round(this.scaleToZoom(b));return this.zoomToScale(b+1)};h.prototype.snapToPreviousScale=function(b,a){void 0===a&&(a=2);if(!this.effectiveLODs)return b*a;b=Math.round(this.scaleToZoom(b));return this.zoomToScale(b-1)};h.prototype.clone=function(){return new g({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,
maxScale:this.maxScale})};h.prototype._getClosestScale=function(b){if(this._lodByScale[b])return this._lodByScale[b].scale;b=this._scales.reduce(function(a,d){return Math.abs(d-b)<=Math.abs(a-b)?d:a},this._scales[0]);return this._lodByScale[b].scale};var g;f.__decorate([m.property({readOnly:!0})],h.prototype,"effectiveLODs",void 0);f.__decorate([m.property({readOnly:!0})],h.prototype,"effectiveMinZoom",void 0);f.__decorate([m.property({readOnly:!0})],h.prototype,"effectiveMaxZoom",void 0);f.__decorate([m.property({readOnly:!0})],
h.prototype,"effectiveMinScale",void 0);f.__decorate([m.property({readOnly:!0})],h.prototype,"effectiveMaxScale",void 0);f.__decorate([m.property({type:[c]})],h.prototype,"lods",void 0);f.__decorate([m.property()],h.prototype,"minZoom",void 0);f.__decorate([m.property()],h.prototype,"maxZoom",void 0);f.__decorate([m.property()],h.prototype,"minScale",void 0);f.__decorate([m.property()],h.prototype,"maxScale",void 0);f.__decorate([m.property()],h.prototype,"snapToZoom",void 0);return h=g=f.__decorate([m.subclass("esri.views.2d.constraints.ZoomConstraint")],
h)}(n)})},"esri/views/2d/PaddedViewState":function(){define("require exports tslib ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),function(t,g,f,n,m,c,e,h,q){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}f.__extends(b,a);f.__decorate([m.property()],b.prototype,"left",void 0);f.__decorate([m.property()],
b.prototype,"top",void 0);f.__decorate([m.property()],b.prototype,"right",void 0);f.__decorate([m.property()],b.prototype,"bottom",void 0);return b=f.__decorate([m.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(n);return function(a){function d(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var l=a.apply(this,d)||this;l.paddedViewState=new q;l._updateContent=function(){var a=e.vec2f64.create();return function(){var b=l._get("size"),d=l._get("padding");if(b&&d){var k=l.paddedViewState;
c.vec2.set(a,d.left+d.right,d.top+d.bottom);c.vec2.subtract(a,b,a);c.vec2.copy(k.size,a);if(b=k.viewpoint)l.viewpoint=b}}}();l.watch(["size","padding"],l._updateContent,!0);l.padding=new b;l.size=[0,0];return l}f.__extends(d,a);Object.defineProperty(d.prototype,"padding",{set:function(a){this._set("padding",a||new b)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.paddedViewState.viewpoint=a;h.addPadding(b,a,this._get("size"),
this._get("padding"));a=this._viewpoint2D;var d=b.targetGeometry;a.center[0]=d.x;a.center[1]=d.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=d.spatialReference;this._update()}},enumerable:!0,configurable:!0});f.__decorate([m.property()],d.prototype,"paddedViewState",void 0);f.__decorate([m.property({type:b})],d.prototype,"padding",null);f.__decorate([m.property()],d.prototype,"viewpoint",null);return d=f.__decorate([m.subclass("esri.views.2d.PaddedViewState")],d)}(q)})},"esri/views/2d/ViewState":function(){define("require exports tslib ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a,d,k,p,l,u,r,z){var v=[0,0];return function(c){function g(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];d=c.apply(this,d)||this;d._viewpoint2D={center:u.vec2f64.create(),rotation:0,scale:0,spatialReference:null};d.center=[0,0];d.extent=new n.Extent;d.id=0;d.inverseTransform=a.mat2df64.create();d.resolution=0;d.rotation=0;d.scale=0;d.transform=a.mat2df64.create();d.transformNoRotation=a.mat2df64.create();d.displayMat3=k.mat3f32.create();d.displayViewMat3=
k.mat3f32.create();d.viewMat3=k.mat3f32.create();d.viewMat2d=b.mat2df32.create();d.worldScreenWidth=0;d.size=[0,0];return d}f.__extends(g,c);F=g;Object.defineProperty(g.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,
d=a.targetGeometry;b.center[0]=d.x;b.center[1]=d.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=d.spatialReference}this._update()},enumerable:!0,configurable:!0});g.prototype.copy=function(a){var b=this.size,d=this.viewpoint;d&&b?(this.viewpoint=z.copy(d,a.viewpoint),this._set("size",p.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};g.prototype.clone=function(){return new F({size:this.size,
viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};g.prototype.toMap=function(a,b,d){if(r.isVec2(b))return p.vec2.transformMat2d(a,b,this.inverseTransform);v[0]=b;v[1]=d;return p.vec2.transformMat2d(a,v,this.inverseTransform)};g.prototype.toScreen=function(a,b,d){if(r.isVec2(b))return p.vec2.transformMat2d(a,b,this.transform);v[0]=b;v[1]=d;return p.vec2.transformMat2d(a,v,this.transform)};g.prototype.toScreenNoRotation=function(a,b,d){if(r.isVec2(b))return p.vec2.transformMat2d(a,b,this.transformNoRotation);
v[0]=b;v[1]=d;return p.vec2.transformMat2d(a,v,this.transformNoRotation)};g.prototype.getScreenTransform=function(a,b){var d=this._viewpoint2D.center,c=this._get("pixelRatio")||1,k=this._get("size");z.getMatrix(a,d,k,b,0,c);return a};g.prototype._update=function(){var a=this._viewpoint2D,b=a.center,c=a.spatialReference,k=a.scale,e=a.rotation,a=this._get("pixelRatio")||1,f=this._get("size"),g=new m({targetGeometry:new n.Point(b[0],b[1],c),scale:k,rotation:e});this._set("viewpoint",g);if(f&&c&&k)return this.resolution=
z.getResolution(g),this.rotation=e,this.scale=k,this.spatialReference=c,p.vec2.copy(this.center,b),d.mat3.set(this.displayMat3,0!==f[0]?2/f[0]:0,0,0,0,0!==f[1]?-2/f[1]:0,0,-1,1,1),k=d.mat3.identity(this.viewMat3),b=l.vec2f32.fromValues(f[0]/2,f[1]/2),c=l.vec2f32.fromValues(-f[0]/2,-f[1]/2),e=h.common.toRadian(e),d.mat3.translate(k,k,b),d.mat3.rotate(k,k,e),d.mat3.translate(k,k,c),d.mat3.multiply(this.displayViewMat3,this.displayMat3,k),k=q.mat2d.identity(this.viewMat2d),q.mat2d.translate(k,k,b),q.mat2d.rotate(k,
k,e),q.mat2d.translate(k,k,c),z.getExtent(this.extent,g,f),z.getTransform(this.transform,g,f,a),q.mat2d.invert(this.inverseTransform,this.transform),z.getTransformNoRotation(this.transformNoRotation,g,f,a),this.worldScreenWidth=z.getWorldScreenWidth(this.spatialReference,this.resolution),this._set("id",this.id+1),this};var F;f.__decorate([e.property({readOnly:!0})],g.prototype,"id",void 0);f.__decorate([e.property({value:1,json:{write:!0}})],g.prototype,"pixelRatio",null);f.__decorate([e.property({json:{write:!0}})],
g.prototype,"size",null);f.__decorate([e.property({type:m,json:{write:!0}})],g.prototype,"viewpoint",null);return g=F=f.__decorate([e.subclass("esri.views.2d.ViewState")],g)}(c.JSONSupport)})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.mat3=f})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(t,g,f){function n(c,e,h){var f=e[0],b=e[1],a=
e[2],d=e[3],k=e[4],p=e[5],l=e[6],g=e[7];e=e[8];var r=h[0],m=h[1],v=h[2],n=h[3],x=h[4],w=h[5],y=h[6],C=h[7];h=h[8];c[0]=r*f+m*d+v*l;c[1]=r*b+m*k+v*g;c[2]=r*a+m*p+v*e;c[3]=n*f+x*d+w*l;c[4]=n*b+x*k+w*g;c[5]=n*a+x*p+w*e;c[6]=y*f+C*d+h*l;c[7]=y*b+C*k+h*g;c[8]=y*a+C*p+h*e;return c}function m(c,e,h){c[0]=e[0]-h[0];c[1]=e[1]-h[1];c[2]=e[2]-h[2];c[3]=e[3]-h[3];c[4]=e[4]-h[4];c[5]=e[5]-h[5];c[6]=e[6]-h[6];c[7]=e[7]-h[7];c[8]=e[8]-h[8];return c}Object.defineProperty(g,"__esModule",{value:!0});g.fromMat4=function(c,
e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[4];c[4]=e[5];c[5]=e[6];c[6]=e[8];c[7]=e[9];c[8]=e[10];return c};g.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];c[6]=e[6];c[7]=e[7];c[8]=e[8];return c};g.set=function(c,e,h,f,b,a,d,k,p,l){c[0]=e;c[1]=h;c[2]=f;c[3]=b;c[4]=a;c[5]=d;c[6]=k;c[7]=p;c[8]=l;return c};g.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};g.transpose=function(c,e){if(c===e){var h=e[1],f=e[2],b=e[5];c[1]=e[3];
c[2]=e[6];c[3]=h;c[5]=e[7];c[6]=f;c[7]=b}else c[0]=e[0],c[1]=e[3],c[2]=e[6],c[3]=e[1],c[4]=e[4],c[5]=e[7],c[6]=e[2],c[7]=e[5],c[8]=e[8];return c};g.invert=function(c,e){var h=e[0],f=e[1],b=e[2],a=e[3],d=e[4],k=e[5],p=e[6],l=e[7];e=e[8];var g=e*d-k*l,r=-e*a+k*p,m=l*a-d*p,v=h*g+f*r+b*m;if(!v)return null;v=1/v;c[0]=g*v;c[1]=(-e*f+b*l)*v;c[2]=(k*f-b*d)*v;c[3]=r*v;c[4]=(e*h-b*p)*v;c[5]=(-k*h+b*a)*v;c[6]=m*v;c[7]=(-l*h+f*p)*v;c[8]=(d*h-f*a)*v;return c};g.adjoint=function(c,e){var h=e[0],f=e[1],b=e[2],a=
e[3],d=e[4],k=e[5],p=e[6],l=e[7];e=e[8];c[0]=d*e-k*l;c[1]=b*l-f*e;c[2]=f*k-b*d;c[3]=k*p-a*e;c[4]=h*e-b*p;c[5]=b*a-h*k;c[6]=a*l-d*p;c[7]=f*p-h*l;c[8]=h*d-f*a;return c};g.determinant=function(c){var e=c[3],h=c[4],f=c[5],b=c[6],a=c[7],d=c[8];return c[0]*(d*h-f*a)+c[1]*(-d*e+f*b)+c[2]*(a*e-h*b)};g.multiply=n;g.translate=function(c,e,h){var f=e[0],b=e[1],a=e[2],d=e[3],k=e[4],p=e[5],l=e[6],g=e[7];e=e[8];var r=h[0];h=h[1];c[0]=f;c[1]=b;c[2]=a;c[3]=d;c[4]=k;c[5]=p;c[6]=r*f+h*d+l;c[7]=r*b+h*k+g;c[8]=r*a+h*
p+e;return c};g.rotate=function(c,e,h){var f=e[0],b=e[1],a=e[2],d=e[3],k=e[4],p=e[5],l=e[6],g=e[7];e=e[8];var r=Math.sin(h);h=Math.cos(h);c[0]=h*f+r*d;c[1]=h*b+r*k;c[2]=h*a+r*p;c[3]=h*d-r*f;c[4]=h*k-r*b;c[5]=h*p-r*a;c[6]=l;c[7]=g;c[8]=e;return c};g.scale=function(c,e,h){var f=h[0],b=h[1];h=h[2];c[0]=f*e[0];c[1]=f*e[1];c[2]=f*e[2];c[3]=b*e[3];c[4]=b*e[4];c[5]=b*e[5];c[6]=h*e[6];c[7]=h*e[7];c[8]=h*e[8];return c};g.scaleByVec2=function(c,e,h){var f=h[0];h=h[1];c[0]=f*e[0];c[1]=f*e[1];c[2]=f*e[2];c[3]=
h*e[3];c[4]=h*e[4];c[5]=h*e[5];return c};g.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=e[0];c[7]=e[1];c[8]=1;return c};g.fromRotation=function(c,e){var h=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=h;c[2]=0;c[3]=-h;c[4]=e;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};g.fromScaling=function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=0;c[4]=e[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};g.fromMat2d=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=0;c[3]=e[2];c[4]=e[3];c[5]=0;c[6]=e[4];c[7]=e[5];c[8]=1;
return c};g.fromQuat=function(c,e){var h=e[0],f=e[1],b=e[2];e=e[3];var a=h+h,d=f+f,k=b+b,h=h*a,p=f*a,f=f*d,l=b*a,g=b*d,b=b*k,a=e*a,d=e*d;e*=k;c[0]=1-f-b;c[3]=p-e;c[6]=l+d;c[1]=p+e;c[4]=1-h-b;c[7]=g-a;c[2]=l-d;c[5]=g+a;c[8]=1-h-f;return c};g.normalFromMat4Legacy=function(c,e){var h=e[0],f=e[1],b=e[2],a=e[4],d=e[5],k=e[6],p=e[8],l=e[9];e=e[10];var g=e*d-k*l,r=-e*a+k*p,m=l*a-d*p,v=h*g+f*r+b*m;if(!v)return null;v=1/v;c[0]=g*v;c[1]=(-e*f+b*l)*v;c[2]=(k*f-b*d)*v;c[3]=r*v;c[4]=(e*h-b*p)*v;c[5]=(-k*h+b*a)*
v;c[6]=m*v;c[7]=(-l*h+f*p)*v;c[8]=(d*h-f*a)*v;return c};g.normalFromMat4=function(c,e){var h=e[0],f=e[1],b=e[2],a=e[3],d=e[4],k=e[5],p=e[6],l=e[7],g=e[8],r=e[9],m=e[10],v=e[11],n=e[12],x=e[13],w=e[14];e=e[15];var y=h*k-f*d,C=h*p-b*d,A=h*l-a*d,t=f*p-b*k,I=f*l-a*k,D=b*l-a*p,B=g*x-r*n,H=g*w-m*n,g=g*e-v*n,G=r*w-m*x,r=r*e-v*x,m=m*e-v*w,v=y*m-C*r+A*G+t*g-I*H+D*B;if(!v)return null;v=1/v;c[0]=(k*m-p*r+l*G)*v;c[1]=(p*g-d*m-l*H)*v;c[2]=(d*r-k*g+l*B)*v;c[3]=(b*r-f*m-a*G)*v;c[4]=(h*m-b*g+a*H)*v;c[5]=(f*g-h*r-
a*B)*v;c[6]=(x*D-w*I+e*t)*v;c[7]=(w*A-n*D-e*C)*v;c[8]=(n*I-x*A+e*y)*v;return c};g.projection=function(c,e,h){c[0]=2/e;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/h;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c};g.str=function(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+")"};g.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};
g.add=function(c,e,h){c[0]=e[0]+h[0];c[1]=e[1]+h[1];c[2]=e[2]+h[2];c[3]=e[3]+h[3];c[4]=e[4]+h[4];c[5]=e[5]+h[5];c[6]=e[6]+h[6];c[7]=e[7]+h[7];c[8]=e[8]+h[8];return c};g.subtract=m;g.multiplyScalar=function(c,e,h){c[0]=e[0]*h;c[1]=e[1]*h;c[2]=e[2]*h;c[3]=e[3]*h;c[4]=e[4]*h;c[5]=e[5]*h;c[6]=e[6]*h;c[7]=e[7]*h;c[8]=e[8]*h;return c};g.multiplyScalarAndAdd=function(c,e,h,f){c[0]=e[0]+h[0]*f;c[1]=e[1]+h[1]*f;c[2]=e[2]+h[2]*f;c[3]=e[3]+h[3]*f;c[4]=e[4]+h[4]*f;c[5]=e[5]+h[5]*f;c[6]=e[6]+h[6]*f;c[7]=e[7]+
h[7]*f;c[8]=e[8]+h[8]*f;return c};g.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]&&c[6]===e[6]&&c[7]===e[7]&&c[8]===e[8]};g.equals=function(c,e){var h=c[0],g=c[1],b=c[2],a=c[3],d=c[4],k=c[5],p=c[6],l=c[7];c=c[8];var u=e[0],r=e[1],m=e[2],n=e[3],F=e[4],x=e[5],w=e[6],y=e[7];e=e[8];return Math.abs(h-u)<=f.EPSILON*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(g-r)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(r))&&Math.abs(b-m)<=f.EPSILON*Math.max(1,
Math.abs(b),Math.abs(m))&&Math.abs(a-n)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(n))&&Math.abs(d-F)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(k-x)<=f.EPSILON*Math.max(1,Math.abs(k),Math.abs(x))&&Math.abs(p-w)<=f.EPSILON*Math.max(1,Math.abs(p),Math.abs(w))&&Math.abs(l-y)<=f.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(c-e)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};g.mul=n;g.sub=m})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],
function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.mat3f32=f})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(t,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){var f=new Float32Array(9);f[0]=1;f[4]=1;f[8]=1;return f};g.clone=function(f){var g=new Float32Array(9);g[0]=f[0];g[1]=f[1];g[2]=f[2];g[3]=f[3];g[4]=f[4];g[5]=f[5];g[6]=f[6];g[7]=f[7];g[8]=f[8];return g};g.fromValues=function(f,g,m,c,e,h,q,b,a){var d=new Float32Array(9);
d[0]=f;d[1]=g;d[2]=m;d[3]=c;d[4]=e;d[5]=h;d[6]=q;d[7]=b;d[8]=a;return d};g.createView=function(f,g){return new Float32Array(f,g,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.vec2f32=f})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(t,g){function f(){return new Float32Array(2)}function n(c,e){var b=new Float32Array(2);b[0]=
c;b[1]=e;return b}function m(){return n(1,1)}function c(){return n(1,0)}function e(){return n(0,1)}Object.defineProperty(g,"__esModule",{value:!0});g.create=f;g.clone=function(c){var e=new Float32Array(2);e[0]=c[0];e[1]=c[1];return e};g.fromValues=n;g.createView=function(c,e){return new Float32Array(c,e,2)};g.zeros=function(){return f()};g.ones=m;g.unitX=c;g.unitY=e;g.ZEROS=f();g.ONES=m();g.UNIT_X=c();g.UNIT_Y=e()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],
function(t,g){function f(f){return f instanceof Float32Array&&2<=f.length}function n(f){return Array.isArray(f)&&2<=f.length}Object.defineProperty(g,"__esModule",{value:!0});g.isVec2f32=f;g.isVec2f64=n;g.isVec2=function(g){return f(g)||n(g)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),function(t,g,f,n,m,c){Object.defineProperty(g,"__esModule",{value:!0});g.TileInfoView=f;g.TileKey=n;g.TileQueue=
m;g.TileStrategy=c})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(t,g,f,n,m,c,e){var h=new c("0/0/0/0"),q=function(){function a(a,b,c,e,h,f,g,q){this.x=a;this.ymin=b;this.ymax=c;this.invM=e;this.leftAdjust=h;this.rightAdjust=f;this.leftBound=g;this.rightBound=q}a.create=function(b,c){var d;b[1]>c[1]&&(d=[c,b],b=d[0],c=d[1]);d=b[0];b=b[1];var k=c[0];c=c[1];var e=
k-d,h=c-b,h=0!==h?e/h:0,f=(Math.ceil(b)-b)*h,g=(Math.floor(b)-b)*h;return new a(d,Math.floor(b),Math.ceil(c),h,0>e?f:g,0>e?g:f,0>e?k:d,0>e?d:k)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),b=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,b){var d=this;this.tileInfo=a;this.fullExtent=b;this.scales=
[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var c=a.lods.slice();c.sort(function(a,b){return b.scale-a.scale});var k=this._lodInfos=c.map(function(d){return n.create(a,d,b)});c.forEach(function(a,b){d._infoByLevel[a.level]=k[b];d._infoByScale[a.scale]=k[b];d.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0});a.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===
typeof a?a:a.level]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileBounds(a,h,c):a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileCoords(a,h,c):a};a.prototype.getTileCoverage=function(a,c,h){void 0===c&&(c=192);void 0===h&&(h="closest");h="closest"===h?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);var d=m.pool.acquire(h),k=this._wrap,
f;f=Infinity;var g=-Infinity,p,n,x=d.spans;b[0][0]=b[0][1]=b[1][1]=b[3][0]=-c;b[1][0]=b[2][0]=a.size[0]+c;b[2][1]=b[3][1]=a.size[1]+c;for(c=0;c<b.length;c++){var w=b[c];a.toMap(w,w);w[0]=h.getColumnForX(w[0]);w[1]=h.getRowForY(w[1])}a=[];w=3;for(c=0;4>c;c++){if(b[c][1]!==b[w][1]){var y=q.create(b[c],b[w]);f=Math.min(y.ymin,f);g=Math.max(y.ymax,g);void 0===a[y.ymin]&&(a[y.ymin]=[]);a[y.ymin].push(y)}w=c}if(null==f||null==g||100<g-f)return null;for(w=[];f<g;){null!=a[f]&&(w=w.concat(a[f]));p=Infinity;
n=-Infinity;for(c=w.length-1;0<=c;c--)y=w[c],p=Math.min(p,y.getLeftCol()),n=Math.max(n,y.getRightCol());p=Math.floor(p);n=Math.floor(n);if(f>=h.first[1]&&f<=h.last[1])if(k)if(h.size[0]<h.worldSize[0])for(y=Math.floor(n/h.worldSize[0]),c=Math.floor(p/h.worldSize[0]);c<=y;c++)x.push(new e(f,Math.max(h.getFirstColumnForWorld(c),p),Math.min(h.getLastColumnForWorld(c),n)));else x.push(new e(f,p,n));else p>h.last[0]||n<h.first[0]||(p=Math.max(p,h.first[0]),n=Math.min(n,h.last[0]),x.push(new e(f,p,n)));
f+=1;for(c=w.length-1;0<=c;c--)y=w[c],y.ymax>=f?y.incrRow():w.splice(c,1)}return d};a.prototype.getTileParentId=function(a){h.set(a);a=this._lodInfos.indexOf(this._infoByLevel[h.level])-1;if(0>a)return null;this._getTileIdAtLOD(h,this._lodInfos[a],h);return h.id};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};a.prototype.intersects=function(a,
b){h.set(b);b=this._infoByLevel[h.level];var d=a.lodInfo;if(d.resolution>b.resolution){this._getTileIdAtLOD(h,d,h);for(var c=d.denormalizeCol(h.col,h.world),k=0,e=a.spans;k<e.length;k++){var f=e[k];if(f.row===h.row&&f.colFrom<=c&&f.colTo>=c)return!0}}if(d.resolution<b.resolution){e=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=e[0];var c=e[1],k=e[2],e=e[3],
g=b.denormalizeCol(h.col,h.world),f=d.getColumnForX(b.getXForColumn(g)),q=d.getRowForY(b.getYForRow(h.row)),g=d.getColumnForX(b.getXForColumn(g+1))-1;b=d.getRowForY(b.getYForRow(h.row+1))-1;return!(f>e||g<k||q>c||b<a)}var m=d.denormalizeCol(h.col,h.world);return a.spans.some(function(a){return a.row===h.row&&a.colFrom<=m&&a.colTo>=m})};a.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=f.getInfo(this.tileInfo.spatialReference),c=-c*(b.valid[1]-b.valid[0]),
a[0]+=c,a[2]+=c);return a};a.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var d=1;d<b.length-1;d++)if(a>b[d]+1E-6)return this._infoByScale[b[d-1]];return this._infoByScale[b[b.length-1]]};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,d){return Math.abs(d-a)<Math.abs(b-a)?d:b},b[0]);return this._infoByScale[a]};
a.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var d=b.length-1;0<=d;d--)if(a<b[d])return d===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[d]].level+(b[d]-a)/(b[d]-b[d+1]);return this._infoByScale[b[0]].level};a.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};a.prototype._getTileIdAtLOD=function(a,b,c){var d=this._infoByLevel[c.level];a.set(c);if(b.resolution<d.resolution)return null;
if(b.resolution===d.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*d.resolution/b.resolution+.01);a.row=Math.floor(c.row*d.resolution/b.resolution+.01);return a};return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(t,g,f,n){function m(c,h,f){c[0]=h;c[1]=f;return c}var c=new n("0/0/0/0");return function(){function e(c,e,b,a,d,k,f,l,g,r,m,n){this.level=c;this.resolution=e;this.scale=b;
this.origin=a;this.first=d;this.last=k;this.size=f;this.norm=l;this.worldStart=g;this.worldEnd=r;this.worldSize=m;this.wrap=n}e.create=function(c,g,b){var a=f.getInfo(c.spatialReference),d=[c.origin.x,c.origin.y],k=[c.size[0]*g.resolution,c.size[1]*g.resolution],h=[-Infinity,-Infinity],l=[Infinity,Infinity],u=[Infinity,Infinity];b&&(m(h,Math.max(0,Math.floor((b.xmin-d[0])/k[0])),Math.max(0,Math.floor((d[1]-b.ymax)/k[1]))),m(l,Math.max(0,Math.floor((b.xmax-d[0])/k[0])),Math.max(0,Math.floor((d[1]-
b.ymin)/k[1]))),m(u,l[0]-h[0]+1,l[1]-h[1]+1));var r;c.isWrappable?(c=[Math.ceil(Math.round(2*a.origin[1]/g.resolution)/c.size[0]),u[1]],a=[Math.floor((a.origin[0]-d[0])/k[0]),h[1]],b=[c[0]+a[0]-1,l[1]],r=!0):(a=h,b=l,c=u,r=!1);return new e(g.level,g.resolution,g.scale,d,h,l,u,k,a,b,c,r)};e.prototype.normalizeCol=function(c){if(!this.wrap)return c;var e=this.worldSize[0];return 0>c?e-1-Math.abs((c+1)%e):c%e};e.prototype.denormalizeCol=function(c,e){return this.wrap?this.worldSize[0]*e+c:c};e.prototype.getWorldForColumn=
function(c){return this.wrap?Math.floor(c/this.worldSize[0]):0};e.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};e.prototype.getLastColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};e.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};e.prototype.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};e.prototype.getRowForY=function(c){return(this.origin[1]-c)/this.norm[1]};e.prototype.getYForRow=
function(c){return this.origin[1]-c*this.norm[1]};e.prototype.getTileBounds=function(e,f,b){void 0===b&&(b=!1);c.set(f);var a=b?c.col:this.denormalizeCol(c.col,c.world),d=c.row;f=this.getXForColumn(a);b=this.getYForRow(d+1);a=this.getXForColumn(a+1);d=this.getYForRow(d);e[0]=f;e[1]=b;e[2]=a;e[3]=d;return e};e.prototype.getTileCoords=function(e,f,b){void 0===b&&(b=!1);c.set(f);f=b?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(e)?m(e,this.getXForColumn(f),this.getYForRow(c.row)):(e.x=this.getXForColumn(f),
e.y=this.getYForRow(c.row));return e};return e}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(t,g,f){return function(){function g(f,c,e,h){this.set(f,c,e,h)}g.getId=function(f,c,e,h){return"object"===typeof f?f.level+"/"+f.row+"/"+f.col+"/"+f.world:f+"/"+c+"/"+e+"/"+h};Object.defineProperty(g.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"id",{get:function(){return this.toString()},
enumerable:!0,configurable:!0});g.prototype.acquire=function(f,c,e,h){this.set(f,c,e,h)};g.prototype.equals=function(f){return this.level===f.level&&this.row===f.row&&this.col===f.col&&this.world===f.world};g.prototype.release=function(){this.world=this.col=this.row=this.level=0};g.prototype.set=function(f,c,e,h){null==f?this.world=this.col=this.row=this.level=0:"object"===typeof f?(this.level=f.level||0,this.row=f.row||0,this.col=f.col||0,this.world=f.world||0):"string"===typeof f?(f=f.split("/"),
c=f[1],e=f[2],h=f[3],this.level=parseFloat(f[0]),this.row=parseFloat(c),this.col=parseFloat(e),this.world=parseFloat(h)):(this.level=+f,this.row=+c,this.col=+e,this.world=+h||0);return this};g.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};g.prototype.getChildKeys=function(){var f=this.level+1,c=this.row<<1,e=this.col<<1,h=this.world;return[new g(f,c,e,h),new g(f,c,e+1,h),new g(f,c+1,e,h),new g(f,c+1,e+1,h)]};g.prototype.compareRowMajor=function(f){return this.row<
f.row?-1:this.row>f.row?1:this.col<f.col?-1:this.col>f.col?1:0};g.pool=new f(g,null,null,25,50);return g}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ObjectPool"],function(t,g,f){return function(){function g(){this.spans=[]}g.prototype.acquire=function(f){this.lodInfo=f};g.prototype.release=function(){this.lodInfo=null;this.spans.length=0};g.prototype.forEach=function(f,c){var e=this.spans,h=this.lodInfo,g=h.level;if(0!==e.length)for(var b=0;b<e.length;b++)for(var a=
e[b],d=a.row,k=a.colTo,a=a.colFrom;a<=k;a++)f.call(c,g,d,h.normalizeCol(a),h.getWorldForColumn(a))};g.pool=new f(g);return g}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports"],function(t,g){return function(){return function(f,g,m){this.row=f;this.colFrom=g;this.colTo=m}}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports tslib ../../../core/Accessor ../../../core/SetUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),
function(t,g,f,n,m,c,e,h){function q(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var b=new Set,a=[],d=new Map,k=[0,0];return function(g){function l(a){a=g.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}f.__extends(l,g);l.prototype.initialize=function(){var a=this,b=this.process;this._queue=new h.QueueProcessor({concurrency:this.concurrency,process:function(d,c){d=a._keyToItem.get(d);return b(d,{signal:c})},peeker:"scale-first"===
this.strategy?function(b){return a._peekByScaleFirst(b)}:function(b){return a._peekByCenterFirst(b)}})};l.prototype.destroy=function(){this.clear();this._queue.destroy();this._queue=null};Object.defineProperty(l.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"updating",{get:function(){return 0<
this.length||0<this.onGoingCount},enumerable:!0,configurable:!0});l.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};l.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};l.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};l.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&this._queue.isOngoing(a)};l.prototype.pause=function(){this._queue.pause()};
l.prototype.push=function(a){var b=this,d=a.key.id;if(this.has(d))return this.get(d);var c=this._queue.push(d),e=function(){b._keyToItem.delete(d);b.notifyChange("updating")};this._keyToItem.set(d,a);c.then(e,e);this.notifyChange("updating");return c};l.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};l.prototype.resume=function(){this._queue.resume()};l.prototype._peekByScaleFirst=function(c){var e=this;if(!this.state)return m.firstOfSet(c);var k=this.tileInfoView,l=
Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;c.forEach(function(a){a=e._keyToItem.get(a);var c=e.tileInfoView.getTileScale(a.key);d.has(c)||(d.set(c,[]),l=Math.max(c,l),f=Math.min(c,f));d.get(c).push(a.key);b.add(c)});var h=this.state.scale;d.has(h)||(q(a,b),a.sort(),h=a.reduce(function(a,b){return Math.abs(b-h)<Math.abs(a-h)?b:a},a[0]));h=Math.min(h,l);h=Math.max(h,f);c=d.get(h);var g=k.getClosestInfoForScale(h),p=g.getColumnForX(this.state.center[0]),u=g.getRowForY(this.state.center[1]);
c.sort(function(a,b){var d=g.denormalizeCol(a.col,a.world),c=g.denormalizeCol(b.col,b.world);return Math.sqrt((p-d)*(p-d)+(u-a.row)*(u-a.row))-Math.sqrt((p-c)*(p-c)+(u-b.row)*(u-b.row))});b.clear();d.clear();return c[0].id};l.prototype._peekByCenterFirst=function(a){var b=this;if(!this.state)return m.firstOfSet(a);var d=this.tileInfoView,c=this.state.center,l=Number.POSITIVE_INFINITY,f=null;a.forEach(function(a){a=b._keyToItem.get(a);d.getTileCoords(k,a.key);var h=e.vec2.distance(k,c);h<l&&(l=h,f=
a.key)});return f.id};f.__decorate([c.property({constructOnly:!0})],l.prototype,"concurrency",void 0);f.__decorate([c.property({constructOnly:!0})],l.prototype,"process",void 0);f.__decorate([c.property()],l.prototype,"state",void 0);f.__decorate([c.property({constructOnly:!0})],l.prototype,"strategy",void 0);f.__decorate([c.property({constructOnly:!0})],l.prototype,"tileInfoView",void 0);f.__decorate([c.property({readOnly:!0})],l.prototype,"updating",null);return l=f.__decorate([c.subclass("esri.views.2d.tiling.TileQueue")],
l)}(n)})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(t,g,f,n,m,c){Object.defineProperty(g,"__esModule",{value:!0});var e=function(){return function(c,e){this.item=c;this.controller=e;this.promise=null}}();t=function(){function h(c){var b=this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;
this.concurrency=1;c.concurrency&&(this.concurrency=c.concurrency);this._queue=new m.default(c.peeker);this.process=c.process;var a=c.scheduler;c.task&&f.isSome(a)&&(this._task=a.registerTask(c.task,function(a){return b.update(a)},function(){return b.needsUpdate()}))}h.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(h.prototype,"length",{get:function(){return this._processingItems.size+
this._queue.length},enumerable:!0,configurable:!0});h.prototype.abort=function(c){(c=this._controllers.get(c))&&c.abort()};h.prototype.clear=function(){this._queue.clear();var c=[];this._controllers.forEach(function(b){return c.push(b)});this._controllers.clear();c.forEach(function(b){return b.abort()});this._processingItems.clear();this._cancelNext()};h.prototype.get=function(c){return(c=this._deferreds.get(c))?c.promise:void 0};h.prototype.isOngoing=function(c){return this._processingItems.has(c)};
h.prototype.has=function(c){return this._deferreds.has(c)};h.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};h.prototype.push=function(c){var b=this,a=this.get(c);if(a)return a;var d,a=n.createAbortController(),e=function(){f.remove();b._deferreds.delete(c);b._controllers.delete(c);b._queue.remove(c);b._processingItems.delete(c);b._scheduleNext()},f=n.onAbortOrThrow(a.signal,function(){var a=b._processingItems.get(c);a&&a.controller.abort();e();d.reject(n.createAbortError())});
d=n.createDeferred();this._deferreds.set(c,d);this._controllers.set(c,a);d.promise.then(e,e);this._queue.push(c);this._scheduleNext();return d.promise};h.prototype.reset=function(){var c=[];this._processingItems.forEach(function(a){return c.push(a)});this._processingItems.clear();for(var b=0;b<c.length;b++){var a=c[b];this._queue.push(a.item);a.controller.abort()}this._scheduleNext()};h.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};h.prototype.needsUpdate=function(){return!this._isPaused&&
0<this._queue.length&&this._processingItems.size<this.concurrency};h.prototype.update=function(c){for(;!c.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),c.madeProgress()};h.prototype._scheduleNext=function(){var e=this;this._task||this._isPaused||this._schedule||(this._schedule=c.schedule(function(){e._schedule=null;e._next()}))};h.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};
h.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};h.prototype._processResult=function(c,b){this._canProcessFulfillment(c)&&(this._scheduleNext(),this._deferreds.get(c.item).resolve(b))};h.prototype._processError=function(c,b){this._canProcessFulfillment(c)&&(this._scheduleNext(),this._deferreds.get(c.item).reject(b))};h.prototype._canProcessFulfillment=function(c){return this._deferreds.get(c.item)&&this._processingItems.get(c.item)===c?!0:!1};h.prototype._process=
function(c){var b=this;if(!f.isNone(c)){var a,d=n.createAbortController(),k=new e(c,d);this._processingItems.set(c,k);try{a=this.process(c,d.signal)}catch(p){this._processError(k,p)}a&&"function"===typeof a.then?(k.promise=a,a.then(function(a){return b._processResult(k,a)},function(a){return b._processError(k,a)})):this._processResult(k,a)}};Object.defineProperty(h.prototype,"test",{get:function(){var c=this;return{update:function(b){return c.update(b)}}},enumerable:!0,configurable:!0});return h}();
g.QueueProcessor=t})},"esri/core/Queue":function(){define(["require","exports","./SetUtils"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});t=function(){function g(g){void 0===g&&(g=function(c){return f.firstOfSet(c)});this._peeker=g;this._items=new Set}Object.defineProperty(g.prototype,"length",{get:function(){return this._items.size},enumerable:!0,configurable:!0});g.prototype.clear=function(){this._items.clear()};g.prototype.peek=function(){if(0!==this._items.size)return this._peeker(this._items)};
g.prototype.push=function(f){this.contains(f)||this._items.add(f)};g.prototype.contains=function(f){return this._items.has(f)};g.prototype.pop=function(){if(0!==this.length){var f=this.peek();this._items.delete(f);return f}};g.prototype.remove=function(f){this._items.delete(f)};return g}();g.default=t})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","./TileCache","./TileCoverage","./TileKey"],function(t,g,f,n,m){var c=new m(0,0,0,0),e=new Map,h=[],q=[];return function(){function b(a){var b=
this;this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new f.default(a.cacheSize,
this.tileInfoView,function(a){b.releaseTile(a)}))}b.prototype.destroy=function(){this.tileIndex.clear()};b.prototype.update=function(a){var b=this,k=this.resampling,f=this.tileIndex,l=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);q.length=0;h.length=0;e.clear();if(l){var g=this.tileInfoView.tileInfo,r=g.minScale,m=g.maxScale,v=l.spans,F=l.lodInfo,x=F.level,w=a.state,y=w.scale,g=w.center,w=w.resolution,C=!a.stationary&&y>this._previousScale;this._previousScale=y;this.tiles.length=
0;if(!k&&(y>r||y<m))return this.tiles.length=0,e.clear(),f.forEach(function(a){b.releaseTile(a)}),f.clear(),q.length=0,h.length=0,e.clear(),n.pool.release(l),!0;f.forEach(function(a){return a.visible=!0});m=r=0;if(0<v.length)for(y=0;y<v.length;y++){a=v[y];for(var A=a.row,t=a.colTo,I=a.colFrom;I<=t;I++)if(r++,a=c.set(x,A,F.normalizeCol(I),F.getWorldForColumn(I)).id,f.has(a))k=f.get(a),k.isReady?(e.set(a,k),m++):C||this._addParentTile(a,e);else{k=void 0;if(this._tileCache&&this._tileCache.has(a)){if(k=
this._tileCache.pop(a),this.tileIndex.set(a,k),k.isReady){e.set(a,k);m++;continue}}else k=this.acquireTile(c),this.tileIndex.set(a,k);C||this._addParentTile(a,e)}}var D=m===r;f.forEach(function(a,d){c.set(d);if(!e.has(d)){var k=b.tileInfoView.intersects(l,c);!k||!C&&D?"purge"===b.cachePolicy?c.level===x&&k||h.push(d):(c.level>x||!k)&&h.push(d):a.isReady?q.push(d):c.level>x&&h.push(d)}});for(v=0;v<q.length;v++)a=q[v],(k=f.get(a))&&k.isReady&&e.set(a,k);for(v=0;v<h.length;v++)a=h[v],k=f.get(a),this._tileCache?
this._tileCache.add(k):this.releaseTile(k),f["delete"](a);e.forEach(function(a){return b.tiles.push(a)});f.forEach(function(a){e.has(a.key.id)||(a.visible=!1)});this._tileCache&&this._tileCache.prune(x,g,w);n.pool.release(l);return D}};b.prototype.clear=function(a){var b=this;void 0===a&&(a=!0);var c=this.tileIndex;a&&c.forEach(function(a){b.releaseTile(a)});c.clear()};b.prototype._addParentTile=function(a,b){for(var d=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if((d=
this.tileIndex.get(a))&&d.isReady){b.has(d.key.id)||b.set(d.key.id,d);break}}else if(this._tileCache&&this._tileCache.has(a)&&(d=this._tileCache.pop(a),this.tileIndex.set(a,d),d&&d.isReady)){b.has(d.key.id)||b.set(d.key.id,d);break}}};return b}()})},"esri/views/2d/tiling/TileCache":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});t=function(){function g(f,c,e){this.maxSize=f;this.tileInfoView=c;this.removedFunc=
e;this._tilePerId=new Map;this._tileKeysPerLevel=[]}g.prototype.has=function(f){return this._tilePerId.has(f)};g.prototype.get=function(f){return this._tilePerId.get(f)};g.prototype.pop=function(f){var c=this._tilePerId.get(f);if(!c)return null;var e=this._tileKeysPerLevel[c.key.level];this._tilePerId["delete"](f);for(var h=0;h<e.length;h++)if(e[h].id===f){e.splice(h,1);break}c.visible=!0;return c};g.prototype.add=function(f){f.visible=!1;var c=f.key,e=c.id;this._tilePerId.has(e)||(this._tilePerId.set(e,
f),f=c.level,this._tileKeysPerLevel[f]||(this._tileKeysPerLevel[f]=[]),this._tileKeysPerLevel[f].push(c))};g.prototype.prune=function(f,c,e){var h=this._tilePerId.size;if(!(h<=this.maxSize)){for(var g=this._tileKeysPerLevel.length-1;h>this.maxSize&&0<=g;)g!==f&&(h=this._pruneAroundCenterTile(h,c,e,g)),g--;h>this.maxSize&&(h=this._pruneAroundCenterTile(h,c,e,f))}};g.prototype._pruneAroundCenterTile=function(g,c,e,h){h=this._tileKeysPerLevel[h];if(!h||0===h.length)return g;var m=this.tileInfoView.tileInfo,
b=m.size,a=m.origin,d=e*b[0],k=e*b[1],p=[0,0],l=[0,0];for(h.sort(function(b,e){p[0]=a.x+d*(b.col+.5);p[1]=a.y-k*(b.row+.5);l[0]=a.x+d*(e.col+.5);l[1]=a.y-k*(e.row+.5);return f.vec2.squaredDistance(p,c)-f.vec2.squaredDistance(l,c)});0<h.length&&(e=h.pop(),this._removeTile(e.id),g--,g!==this.maxSize););return g};g.prototype._removeTile=function(f){var c=this._tilePerId.get(f);this.removedFunc&&this.removedFunc(c);this._tilePerId["delete"](f)};return g}();g.default=t})},"esri/views/2d/support/Timeline":function(){define(["require",
"exports"],function(t,g){Object.defineProperty(g,"__esModule",{value:!0});t=function(){function f(){this._names=new Map}f.prototype.begin=function(f){this._names.has(f)||(this._names.set(f,!1),-1!==f.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark("Esri."+f+".Start"))};f.prototype.end=function(f){this._names.has(f)&&!this._names.get(f)&&(this._names.set(f,!0),performance.mark("Esri."+f+".End"))};f.prototype.record=function(f){this._names.has(f)||(this._names.set(f,!0),performance.mark("Esri."+
f))};return f}();g.Timeline=t})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports tslib ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a,d,k,p,l,u,r,z,v,F,x,w,y,C,A){var E={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},I={zoomIn:["\x3d","+"],zoomOut:["-","_"]},D={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(g){function n(){var a=null!==g&&g.apply(this,arguments)||this;a._handles=new m;return a}f.__extends(n,g);n.prototype.initialize=function(){var a=this;this._handles.add([c.whenNot(this.view,
"ready",function(){return a._disconnect()}),c.when(this.view,"ready",function(){return a._connect()})])};n.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};n.prototype._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};n.prototype._connect=function(){var e=this,f=new z.BrowserEventSource(this.view.surface,this.view.input),
g=[new y.ImmediateDoubleClick,new C.PointerClickHoldAndDrag,new A.SingleAndDoubleClick,new w.Drag(this.view.navigation),new x.DoubleTapDrag],g=new v.InputManager({eventSource:f,recognizers:g});g.installHandlers("prevent-context-menu",[new F.PreventContextMenu],v.ViewEventPriorities.INTERNAL);g.installHandlers("navigation",[new r.PinchRotateAndZoom(this.view),new d.GamepadNavigation(this.view),new u.MouseWheelZoom(this.view),new h.DoubleClickZoom(this.view),new h.DoubleClickZoom(this.view,["Ctrl"]),
new b.DragPan(this.view,"primary"),new k.KeyPan(this.view,E),new l.KeyZoom(this.view,I),new p.KeyRotate(this.view,D),new a.DragRotate(this.view,"secondary"),new q.DoubleTapDragZoom(this.view,"touch")],v.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(g);this._source=f;this._inputManager=g;c.init(this.view.navigation,"browserTouchPanEnabled",function(a){e._source.browserTouchPanningEnabled=!a})};Object.defineProperty(n.prototype,"test",{get:function(){return{inputManager:this._inputManager}},
enumerable:!0,configurable:!0});f.__decorate([e.property()],n.prototype,"view",void 0);return n=f.__decorate([e.subclass("esri.views.2d.input.MapViewInputManager")],n)}(n)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","tslib","../../../input/InputHandler","../../../input/handlers/support"],function(t,g,f,n,m){Object.defineProperty(g,"__esModule",{value:!0});t=function(c){function e(e,f){var b=c.call(this,!0)||this;b.view=e;b.registerIncoming("double-click",
f,function(a){return b._handleDoubleClick(a,f)});return b}f.__extends(e,c);e.prototype._handleDoubleClick=function(c,e){m.eventMatchesPointerAction(c.data,"primary")&&(c.stopPropagation(),e?this.view.mapViewNavigation.zoomOut([c.data.x,c.data.y]):this.view.mapViewNavigation.zoomIn([c.data.x,c.data.y]))};return e}(n.InputHandler);g.DoubleClickZoom=t})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(t,g){Object.defineProperty(g,"__esModule",{value:!0});g.eventMatchesPointerAction=
function(f,g){switch(g){case "primary":return"touch"===f.pointerType||0===f.button;case "secondary":return"touch"!==f.pointerType&&2===f.button;case "tertiary":return"touch"!==f.pointerType&&1===f.button}};g.eventMatchesMousePointerAction=function(f,g){if("touch"===f.pointerType)return!1;switch(g){case "primary":return 0===f.button;case "secondary":return 2===f.button;case "tertiary":return 1===f.button}}})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["require","exports","tslib",
"../../../../core/compilerUtils","../../../input/InputHandler"],function(t,g,f,n,m){Object.defineProperty(g,"__esModule",{value:!0});t=function(c){function e(e,f,b){var a=c.call(this,!0)||this;a.view=e;a.pointerType=f;a.registerIncoming("double-tap-drag",b,function(b){return a._handleDoubleTapDrag(b)});return a}f.__extends(e,c);e.prototype._handleDoubleTapDrag=function(c){var e=c.data;if(e.pointerType===this.pointerType){c.stopPropagation();var b=e.action;c=e.delta;var a=this.view,e=a.mapViewNavigation;
switch(b){case "begin":this._currentScale=this._startScale=b=a.scale;this._previousDelta=c;e.begin();break;case "update":if(this._previousDelta.y===c.y)break;this._previousDelta=c;c=this._startScale*Math.pow(1.015,c.y);e.setViewpointImmediate(c/this._currentScale);this._currentScale=c;break;case "end":b=a.constraints;a=b.effectiveLODs;if(!b.snapToZoom||!a){e.end();break}a=b.snapScale(this._currentScale);c=(0<c.y?Math.max(a,b.snapToPreviousScale(this._startScale)):Math.min(a,b.snapToNextScale(this._startScale)))/
this._currentScale;e.zoom(c);break;default:n.neverReached(b)}}};return e}(m.InputHandler);g.DoubleTapDragZoom=t})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports tslib ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(t,g,f,n,m,c){Object.defineProperty(g,"__esModule",{value:!0});t=function(e){function g(f,b,a){var d=e.call(this,!0)||this;d.view=f;d.pointerAction=b;d.registerIncoming("drag",a,function(a){return d._handleDrag(a)});
d.registerIncoming("pointer-down",function(){return d.stopMomentumNavigation()});var k=d.view.mapViewNavigation;d.dragEventSeparator=new n.DragEventSeparator({start:function(a,b){k.pan.begin(d.view,b.data);b.stopPropagation()},update:function(a,b){k.pan.update(d.view,b.data);b.stopPropagation()},end:function(a,b){k.pan.end(d.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,d.pointerAction)}});return d}f.__extends(g,e);g.prototype._handleDrag=
function(c){var b=this.view.mapViewNavigation;b.pinch.zoomMomentum||b.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(c)};g.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return g}(m.InputHandler);g.DragPan=t})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(t,g){Object.defineProperty(g,"__esModule",{value:!0});t=function(){function f(f){this.callbacks=f;this.currentCount=
0;this.callbacks.condition||(this.callbacks.condition=function(){return!0})}f.prototype.handle=function(f){var g=f.data,c=g.pointers.size;switch(g.action){case "start":this.currentCount=c;this.emitStart(f);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(f);break;case "update":this.emitUpdate(f);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(f);break;case "end":this.emitEnd(f),this.currentCount=0}this.previousEvent=
f};f.prototype.emitStart=function(f){this.startEvent=f;this.callbacks.condition(this.currentCount,f)&&this.callbacks.start(this.currentCount,f,this.startEvent)};f.prototype.emitUpdate=function(f){this.callbacks.condition(this.currentCount,f)&&this.callbacks.update(this.currentCount,f,this.startEvent)};f.prototype.emitEnd=function(f){this.callbacks.condition(this.currentCount,f)&&this.callbacks.end(this.currentCount,f,this.startEvent);this.startEvent=null};return f}();g.DragEventSeparator=t})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports tslib ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(t,g,f,n,m,c){Object.defineProperty(g,"__esModule",{value:!0});t=function(e){function g(f,b,a){var d=e.call(this,!0)||this;d.view=f;d.pointerAction=b;var k=d.view.mapViewNavigation;d.dragEventSeparator=new n.DragEventSeparator({start:function(a,b){k.rotate.begin(d.view,b.data);b.stopPropagation()},update:function(a,b){k.rotate.update(d.view,b.data);b.stopPropagation()},end:function(a,b){k.rotate.end();b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,
d.pointerAction)}});d.registerIncoming("drag",a,function(a){return d.dragEventSeparator.handle(a)});return d}f.__extends(g,e);return g}(m.InputHandler);g.DragRotate=t})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports tslib ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(t,g,f,n,m,c,e,h,q){Object.defineProperty(g,"__esModule",
{value:!0});t=function(k){function g(a){var b=k.call(this,!0)||this;b.view=a;b.frameTask=null;b.watchHandles=new n;b.currentDevice=null;b.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};b.handle=b.registerIncoming("gamepad",function(a){return b.handleEvent(a)});b.handle.pause();return b}f.__extends(g,k);g.prototype.onInstall=function(a){var b=this;k.prototype.onInstall.call(this,a);this.watchHandles.add([c.init(this.view.navigation.gamepad,"enabled",function(a){a?(b.handle.resume(),b.frameTask||
(b.frameTask=m.addFrameTask({update:function(a){return b.frameUpdate(a.deltaTime)}}))):(b.handle.pause(),b.frameTask&&(b.frameTask.remove(),b.frameTask=null))})])};g.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);k.prototype.onUninstall.call(this)};g.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&this.currentDevice!==a.data.device||("end"===a.data.action?
(this.currentDevice=null,q.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,q.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};g.prototype.frameUpdate=function(c){var k=this.transformation;if(!q.isZeroTransformation(k)){var f=this.view.viewpoint.clone(),l=a*this.view.navigation.gamepad.velocityFactor*c;e.translateBy(f,f,[k.translation[0]*l,-k.translation[1]*l]);l=this.view.size;e.scaleAndRotateBy(f,f,1+k.translation[2]*d*c,this.view.constraints.rotationEnabled?
-k.heading*b*c:0,[l[0]/2,l[1]],l);c=this.view.constraints.constrain(f,this.view.viewpoint);this.view.viewpoint=c}};return g}(h.InputHandler);g.GamepadNavigation=t;var b=.06,a=.7,d=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(t,g,f){function n(f){var c=f*f;0>f&&(c*=-1);return c}Object.defineProperty(g,"__esModule",{value:!0});g.quadraticAccentuation=n;g.resetTransformation=function(f){f.translation[0]=0;
f.translation[1]=0;f.translation[2]=0;f.heading=0;f.tilt=0;return f};g.extractTransformation=function(g,c,e){var h=g.state;g=g.device;c="forward-down"===c.tiltDirection?1:-1;"standard"===g.deviceType?(e.translation[0]=n(h.axes[0]),e.translation[1]=n(h.axes[1]),e.translation[2]=n(h.buttons[7])-n(h.buttons[6]),e.heading=n(h.axes[2]),e.tilt=n(h.axes[3])):"spacemouse"===g.deviceType&&(e.translation[0]=1.2*n(h.axes[0]),e.translation[1]=1.2*n(h.axes[1]),e.translation[2]=2*-n(h.axes[2]),e.heading=1.2*n(h.axes[5]),
e.tilt=1.2*n(h.axes[3]));e.tilt*=c;f.vec3.scale(e.translation,e.translation,1);return e};g.extractTransformationKeyboard=function(f,c){c.translation[0]=f[1]-f[0];c.translation[1]=f[3]-f[2];c.translation[2]=f[4]-f[5];c.heading=f[7]-f[6];c.tilt=f[8]-f[9];c.zoom=f[10]-f[11];return c};g.isZeroTransformation=function(f){return 0===f.translation[0]&&0===f.translation[1]&&0===f.translation[2]&&0===f.heading&&0===f.tilt&&0===f.zoom}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports",
"tslib","../../../input/InputHandler"],function(t,g,f,n){Object.defineProperty(g,"__esModule",{value:!0});t=function(g){function c(c,f,q){var b,a=g.call(this,!0)||this;a.view=c;a.keys=f;a._pressed=!1;a._keyMap=(b={},b[f.left]="left",b[f.right]="right",b[f.up]="up",b[f.down]="down",b);a.registerIncoming("key-down",q,function(b){return a._handleKeyDown(b)});a.registerIncoming("key-up",q,function(b){return a._handleKeyUp(b)});a.registerIncoming("blur",q,function(){return a._handleBlur()});return a}f.__extends(c,
g);c.prototype._handleKeyDown=function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,f){var e=this._keyMap[c.data.key];if(this._pressed=null!=e){if(f)switch(this.view.mapViewNavigation.begin(),e){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();
break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(n.InputHandler);g.KeyPan=t})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","tslib","../../../input/InputHandler"],function(t,g,f,n){Object.defineProperty(g,"__esModule",{value:!0});t=function(g){function c(c,f,q){var b,a=g.call(this,!0)||this;a.view=c;
a.keys=f;a._pressed=!1;a._keyToDirection=(b={},b[f.clockwiseOption1]="clockwise",b[f.clockwiseOption2]="clockwise",b[f.counterClockwiseOption1]="counterClockwise",b[f.counterClockwiseOption2]="counterClockwise",b[f.resetOption1]="reset",b[f.resetOption2]="reset",b);a.registerIncoming("key-down",q,function(b){return a._handleKeyDown(b)});a.registerIncoming("key-up",q,function(b){return a._handleKeyUp(b)});a.registerIncoming("blur",q,function(){return a._handleBlur()});return a}f.__extends(c,g);c.prototype._handleKeyDown=
function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,f){var e=c.modifiers;if(!(0<e.size&&!e.has("Shift")||!this.view.constraints.rotationEnabled)&&(e=this._keyToDirection[c.data.key],this._pressed=null!=e)){if(f)switch(this.view.mapViewNavigation.begin(),e){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();
break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(n.InputHandler);g.KeyRotate=t})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","tslib","../../../../core/compilerUtils","../../../input/InputHandler"],function(t,g,f,n,m){Object.defineProperty(g,"__esModule",{value:!0});t=function(c){function e(e,
f,b){var a=c.call(this,!0)||this;a.view=e;a.keys=f;a._keysToZoomAction={};a.registerIncoming("key-down",b,function(b){return a._handleKeyDown(b)});f.zoomIn.forEach(function(b){return a._keysToZoomAction[b]=0});f.zoomOut.forEach(function(b){return a._keysToZoomAction[b]=1});return a}f.__extends(e,c);e.prototype._handleKeyDown=function(c){this._handleKey(c)};e.prototype._handleKey=function(c){var e=c.modifiers;if(!(0<e.size)||e.has("Shift"))if(e=c.data.key,e in this._keysToZoomAction){var e=this._keysToZoomAction[e],
b=this.view.mapViewNavigation,a=null;switch(e){case 0:a=b.zoomIn();break;case 1:a=b.zoomOut();break;default:n.neverReached(e);return}b.begin();a.then(function(){return b.end()});c.stopPropagation()}};return e}(m.InputHandler);g.KeyZoom=t})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","tslib","../../../input/InputHandler"],function(t,g,f,n){Object.defineProperty(g,"__esModule",{value:!0});t=function(g){function c(c,f){var e=g.call(this,!0)||this;e.view=c;e._canZoom=
!0;e.registerIncoming("mouse-wheel",f,function(b){return e._handleMouseWheel(b)});return e}f.__extends(c,g);c.prototype._handleMouseWheel=function(c){var e=this;if(this.view.navigation.mouseWheelZoomEnabled&&(c.preventDefault(),c.stopPropagation(),this._canZoom)){var f=this.view.mapViewNavigation;c=c.data;if(c=f.zoom(1/Math.pow(.6,1/60*c.deltaY),[c.x,c.y]))this._canZoom=!1,c.catch(function(){}).then(function(){e._canZoom=!0;f.end()})}};return c}(n.InputHandler);g.MouseWheelZoom=t})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require",
"exports","tslib","../../../input/DragEventSeparator","../../../input/InputHandler"],function(t,g,f,n,m){Object.defineProperty(g,"__esModule",{value:!0});t=function(c){function e(e){var f=c.call(this,!0)||this;f.view=e;f.registerIncoming("drag",function(a){return f._handleDrag(a)});f.registerIncoming("pointer-down",function(){return f.stopMomentumNavigation()});var b=f.view.mapViewNavigation;f.dragEventSeparator=new n.DragEventSeparator({start:function(a,d){b.pinch.begin(f.view,d.data);d.stopPropagation()},
update:function(a,d){b.pinch.update(f.view,d.data);d.stopPropagation()},end:function(a,d){b.pinch.end(f.view);d.stopPropagation()},condition:function(a){return 2<=a}});return f}f.__extends(e,c);e.prototype._handleDrag=function(c){this.dragEventSeparator.handle(c)};e.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return e}(m.InputHandler);g.PinchRotateAndZoom=t})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),
function(t,g,f,n,m,c,e){Object.defineProperty(g,"__esModule",{value:!0});var h=f("trident"),q=f("edge"),b=f("chrome"),a=f("ff"),d=f("safari");t=function(){function f(a,b){var d=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=a;m.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,
"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new e.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return d._callback("gamepad",
a)}}f.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(f.prototype,"browserTouchPanningEnabled",{get:function(){return this._browserTouchPanningEnabled},set:function(a){this._browserTouchPanningEnabled=
a;this._updateTouchAction();this._updateTouchEventHandling()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"activeEvents",{set:function(a){var b=this,d;for(d in this._active)a&&a.has(d)||(this._element.removeEventListener(k[d],this._active[d]),delete this._active[d]);a&&a.forEach(function(a){if(!b._active[a]&&k[a]){var d=(b._eventHandlers[a]||b._handleDefault).bind(b,
a);b._element.addEventListener(k[a],d);b._active[a]=d}});this._gamepadSource.hasEventListeners=a&&a.has("gamepad")},enumerable:!0,configurable:!0});f.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};f.prototype._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":
"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};f.prototype._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};f.prototype._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};f.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(u){}};f.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=n.createScreenPointFromNativeEvent(this._element,a);f.test.disableSubpixelCoordinates&&(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};f.prototype._handleKey=function(a,
b){var d=c.eventKey(b);d&&"key-up"===a&&this._keyDownState.delete(d);b={native:b,key:d,repeat:d&&this._keyDownState.has(d)};d&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};f.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,b)};f.prototype._handlePointerPreventDefault=function(a,b){var d=this._updateNormalizedPointerLikeEvent(b,
{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,d)};f.prototype._handleMouseWheel=function(c,e){var k=e.deltaY;switch(e.deltaMode){case 0:if(h||q)k=k/document.documentElement.clientHeight*600;break;case 1:k*=30;break;case 2:k*=900}h||q?k*=.7:b||d?k*=.6:a&&(k*=1.375);var f=Math.abs(k);100<f&&(k=k/f*200/(1+Math.exp(-.02*(f-100))));e=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,deltaY:k});this._callback(c,
e)};f.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};f.prototype._handleDefault=function(a,b){var d={native:b};b.preventDefault();this._callback(a,d)};f.prototype._preventAltKeyDefault=function(a){"Alt"===a.key&&a.preventDefault()};f.prototype._preventMultiTouchPanning=function(a){1<a.touches.length&&a.preventDefault()};f.test={disableSubpixelCoordinates:!1};return f}();g.BrowserEventSource=t;var k={"key-down":"keydown",
"key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function t(d,c){c=c||Object.create(null);var e=document.createEvent("Event");e.initEvent(d,
c.bubbles||!1,c.cancelable||!1);d=2;for(var k;d<b.length;d++)k=b[d],e[k]=c[k]||a[d];e.buttons=c.buttons||0;d=0;d=c.pressure&&e.buttons?c.pressure:e.buttons?.5:0;e.x=e.clientX;e.y=e.clientY;e.pointerId=c.pointerId||0;e.width=c.width||0;e.height=c.height||0;e.pressure=d;e.tiltX=c.tiltX||0;e.tiltY=c.tiltY||0;e.twist=c.twist||0;e.tangentialPressure=c.tangentialPressure||0;e.pointerType=c.pointerType||"";e.hwTimestamp=c.hwTimestamp||0;e.isPrimary=c.isPrimary||!1;return e}function g(){this.array=[];this.size=
0}function f(a,b,d,c){this.addCallback=a.bind(c);this.removeCallback=b.bind(c);this.changedCallback=d.bind(c);y&&(this.observer=new y(this.mutationWatcher.bind(this)))}function n(a){return"body /shadow-deep/ "+m(a)}function m(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function e(){if(I){A.forEach(function(a){String(a)===a?(E+=m(a)+c(a)+"\n",D&&(E+=n(a)+c(a)+"\n")):(E+=a.selectors.map(m)+c(a.rule)+"\n",D&&(E+=a.selectors.map(n)+c(a.rule)+
"\n"))});var a=document.createElement("style");a.textContent=E;document.head.appendChild(a)}}function h(a){if(!r.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function q(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var b="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),a=[!1,!1,null,null,
0,0,0,0,!1,!1,!1,!1,0,null,0,0],d=window.Map&&window.Map.prototype.forEach?Map:g;g.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(d,c){a.call(b,d,c,this)},this)}};var k="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
p=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],l={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},u="undefined"!==typeof SVGElementInstance,r={pointermap:new d,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var d=b.events;d&&(d.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,d=0,c;d<b&&(c=this.eventSourceList[d]);d++)c.register.call(c,a)},unregister:function(a){for(var b=this.eventSourceList.length,d=0,c;d<b&&(c=this.eventSourceList[d]);d++)c.unregister.call(c,a)},contains:function(a,b){try{return a.contains(b)}catch(ca){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new t(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},
fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),d,c=0;c<k.length;c++)d=k[c],b[d]=a[d]||p[c],u&&("target"===d||"relatedTarget"===d)&&b[d]instanceof SVGElementInstance&&(b[d]=b[d].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in l))return b},propagate:function(a,
b,d){for(var c=a.target,e=[];null!=c&&c!==document&&!c.contains(a.relatedTarget);)if(e.push(c),c=c.parentNode,!c)return;d&&e.reverse();e.forEach(function(d){a.target=d;b.call(this,a)},this)},setCapture:function(a,b,d){this.captureInfo[a]&&this.releaseCapture(a,d);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,d);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var c=new t("gotpointercapture");c.pointerId=
a;c._target=b;d||this.asyncDispatchEvent(c)},releaseCapture:function(a,b){var d=this.captureInfo[a];if(d){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var c=new t("lostpointercapture");c.pointerId=a;c._target=d;b||this.asyncDispatchEvent(c)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,
a))}};r.boundHandler=r.eventHandler.bind(r);var z={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,d){if(a){var c=a.elementFromPoint(b,
d),e;for(e=this.targetingShadow(c);e;){if(a=e.elementFromPoint(b,d))return c=this.targetingShadow(a),this.searchRoot(c,b,d)||a;e=this.olderShadow(e)}return c}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,d=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,d)||(a=document);return this.searchRoot(a,b,d)}},v=Array.prototype.forEach.call.bind(Array.prototype.forEach),
F=Array.prototype.map.call.bind(Array.prototype.map),x=Array.prototype.slice.call.bind(Array.prototype.slice),w=Array.prototype.filter.call.bind(Array.prototype.filter),y=window.MutationObserver||window.WebKitMutationObserver,C={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};f.prototype={watchSubtree:function(a){this.observer&&z.canTarget(a)&&this.observer.observe(a,C)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?
this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){v(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(x(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===
document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=F(a,this.findElements,this);b.push(w(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,
this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var A=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],E="",I=window.PointerEvent||window.MSPointerEvent,D=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,B=r.pointermap,H=[1,4,2,8,16],G=!1;try{G=1===(new MouseEvent("test",{buttons:1})).buttons}catch(K){}var Q={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){r.listen(a,
this.events)},unregister:function(a){r.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,d=a.clientX;a=a.clientY;for(var c=0,e=b.length,k;c<e&&(k=b[c]);c++){var f=Math.abs(a-k.y);if(25>=Math.abs(d-k.x)&&25>=f)return!0}},prepareEvent:function(a){var b=r.cloneEvent(a),d=b.preventDefault;b.preventDefault=function(){a.preventDefault();d()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,
b){var d=B.get(this.POINTER_ID);a.buttons=0!==b.which&&d?d.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=B.get(this.POINTER_ID),d=this.prepareEvent(a);G||(d.buttons=H[d.button],b&&(d.buttons|=b.buttons),a.buttons=d.buttons);B.set(this.POINTER_ID,a);b&&0!==b.buttons?r.move(d):r.down(d)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;B.set(this.POINTER_ID,a);r.move(b)}},
mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=B.get(this.POINTER_ID),d=this.prepareEvent(a);if(!G){var c=H[d.button];d.buttons=b?b.buttons&~c:0;a.buttons=d.buttons}B.set(this.POINTER_ID,a);d.buttons&=~H[d.button];0===d.buttons?r.up(d):r.move(d)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;B.set(this.POINTER_ID,a);r.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;r.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);r.cancel(a);this.deactivateMouse()},deactivateMouse:function(){B.delete(this.POINTER_ID)}},M=r.captureInfo,O=z.findTarget.bind(z),R=z.allShadows.bind(z),P=r.pointermap,L,J={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){L.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),d=this.touchActionToScrollType(b);
d&&(a._scrollType=d,r.listen(a,this.events),R(a).forEach(function(a){a._scrollType=d;r.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;r.unlisten(a,this.events);R(a).forEach(function(a){a._scrollType=void 0;r.unlisten(a,this.events)},this)},elementChanged:function(a,b){var d=a.getAttribute("touch-action"),c=this.touchActionToScrollType(d);b=this.touchActionToScrollType(b);c&&b?(a._scrollType=c,R(a).forEach(function(a){a._scrollType=c},this)):b?this.elementRemoved(a):
c&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===P.size||1===P.size&&P.has(1))this.firstTouch=
a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=
1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,d=r.cloneEvent(a),c=d.pointerId=a.identifier+2;d.target=M[c]||O(d);d.bubbles=!0;d.cancelable=!0;d.detail=this.clickCount;d.button=0;d.buttons=this.typeToButtons(b.type);d.width=2*(a.radiusX||a.webkitRadiusX||0);d.height=2*(a.radiusY||a.webkitRadiusY||0);d.pressure=a.force||a.webkitForce||.5;d.isPrimary=this.isPrimaryTouch(a);d.pointerType=this.POINTER_TYPE;d.altKey=b.altKey;d.ctrlKey=b.ctrlKey;d.metaKey=b.metaKey;d.shiftKey=b.shiftKey;
var e=this;d.preventDefault=function(){e.scrolling=!1;e.firstXY=null;b.preventDefault()};return d},processTouches:function(a,b){var d=a.changedTouches;this.currentTouchEvent=a;a=0;for(var c;a<d.length;a++)c=d[a],b.call(this,this.touchToPointer(c))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var d="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+d]-this.firstXY[d])}this.firstXY=
null;return b}},findTouch:function(a,b){for(var d=0,c=a.length,e;d<c&&(e=a[d]);d++)if(e.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(P.size>=b.length){var d=[];P.forEach(function(a,c){1===c||this.findTouch(b,c-2)||d.push(a.out)},this);d.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){P.set(a.pointerId,
{target:a.target,out:a,outTarget:a.target});r.enterOver(a);r.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=P.get(a.pointerId);if(b){var d=b.out,c=b.outTarget;r.move(a);d&&c!==a.target&&(d.relatedTarget=a.target,a.relatedTarget=c,d.target=c,a.target?(r.leaveOut(d),r.enterOver(a)):(a.target=c,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=
a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(r.up(a),r.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){r.cancel(a);r.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){P.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=Q.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},
b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};L=new f(J.elementAdded,J.elementRemoved,J.elementChanged,J);var N=r.pointermap,V=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,Y={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){r.listen(a,this.events)},unregister:function(a){r.unlisten(a,this.events)},
POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;V&&(b=r.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){N.delete(a)},MSPointerDown:function(a){N.set(a.pointerId,a);a=this.prepareEvent(a);r.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);r.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);r.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);r.leaveOut(a)},MSPointerOver:function(a){a=
this.prepareEvent(a);r.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);r.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=r.makeEvent("lostpointercapture",a);r.dispatchEvent(a)},MSGotPointerCapture:function(a){a=r.makeEvent("gotpointercapture",a);r.dispatchEvent(a)}},U,S,T;window.navigator.msPointerEnabled?(U=function(a){h(a);q(this);0!==r.pointermap.get(a).buttons&&(r.setCapture(a,this,!0),this.msSetPointerCapture(a))},S=function(a){h(a);r.releaseCapture(a,
!0);this.msReleasePointerCapture(a)}):(U=function(a){h(a);q(this);0!==r.pointermap.get(a).buttons&&r.setCapture(a,this)},S=function(a){h(a);r.releaseCapture(a)});T=function(a){return!!r.captureInfo[a]};var W=window.PointerEvent||window.MSPointerEvent;return{dispatcher:r,Installer:f,PointerEvent:t,PointerMap:d,targetFinding:z,applyGlobal:function(){e();window.PointerEvent||(window.PointerEvent=t,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,
enumerable:!0}),r.registerSource("ms",Y)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),r.registerSource("mouse",Q),void 0!==window.ontouchstart&&r.registerSource("touch",J)),r.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:U},releasePointerCapture:{value:S},hasPointerCapture:{value:T}})},applyLocal:function(a){W||(window.PointerEvent||(window.navigator.msPointerEnabled?
r.registerSource("ms",Y):(r.registerSource("mouse",Q),void 0!==window.ontouchstart&&r.registerSource("touch",J)),r.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=U.bind(a),a.releasePointerCapture=S.bind(a),a.hasPointerCapture=T.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/gamepad/GamepadSource":function(){define(["require","exports","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],
function(t,g,f,n,m){Object.defineProperty(g,"__esModule",{value:!0});t=function(){function c(c,f){var e=this;this.element=c;this.input=f;this._hasEventListeners=!1;this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(b){return e.connectGamepad(b)}),window.addEventListener("gamepadconnected",function(b){return e.connectGamepad(b.gamepad)}),window.addEventListener("gamepaddisconnected",function(b){return e.disconnectGamepad(b.gamepad)}),
this.ensurePollingState()}c.prototype.destroy=function(){var c=this;this.ensurePollingState();this.supported&&(window.removeEventListener("gamepadconnected",function(e){return c.connectGamepad(e.gamepad)}),window.removeEventListener("gamepaddisconnected",function(e){return c.disconnectGamepad(e.gamepad)}))};Object.defineProperty(c.prototype,"hasEventListeners",{set:function(c){this._hasEventListeners!==c&&(this._hasEventListeners=c,this.ensurePollingState())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"eventsEnabled",{get:function(){return this.supported&&0<this.inputDevices.length&&this._hasEventListeners},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"onEvent",{set:function(c){this.callback=c},enumerable:!0,configurable:!0});c.prototype.connectGamepad=function(c){var e=new n(c);"unknown"!==e.deviceType&&(this.inputDevices[c.index]=e,this.input.gamepad.devices.add(e));this.ensurePollingState()};c.prototype.disconnectGamepad=function(c){var e=c.index,f=this.inputDevices[e];
f&&(this.emitGamepadEvent(c,m.extractState(f),!1),this.inputDevices.splice(e,1),this.latestUpdate.splice(e,1),this.input.gamepad.devices.remove(f),this.ensurePollingState())};c.prototype.ensurePollingState=function(){this.eventsEnabled?this.startPolling():this.stopPolling()};c.prototype.startPolling=function(){var c=this;null==this.frameTask&&(this.frameTask=f.addFrameTask({update:function(){return c.readGamepadState()}}))};c.prototype.stopPolling=function(){null!=this.frameTask&&(this.frameTask.remove(),
this.frameTask=null,this.latestUpdate=[])};c.prototype.readGamepadState=function(){var c=this,f=document.hasFocus(),g=this.element.contains(document.activeElement),b="document"===this.input.gamepad.enabledFocusMode&&!f||"view"===this.input.gamepad.enabledFocusMode&&!g;this.forEachGamepad(function(a){var d=c.inputDevices[a.index];if(d){var e=c.latestUpdate[a.index],d=m.extractState(d),f=b||m.stateIdle(d);e&&(e.timestamp===a.timestamp||!e.active&&f||m.stateEqual(e.state,d))||c.emitGamepadEvent(a,d,
!f)}})};c.prototype.forEachGamepad=function(c){for(var e=window.navigator.getGamepads(),f=0;f<e.length;f++){var b=e[f];this.validate(b)&&c(b)}};c.prototype.emitGamepadEvent=function(c,f,g){var b=this.latestUpdate[c.index];if((b=b&&b.active)||g)this.latestUpdate[c.index]={timestamp:c.timestamp,state:f,active:g},this.callback&&this.callback({device:this.inputDevices[c.index],state:f,action:!b&&g?"start":b&&g?"update":"end"})};c.prototype.validate=function(c){if(!c||!c.connected)return!1;for(var e=0;e<
c.axes.length;e++)if(isNaN(c.axes[e]))return!1;return!0};return c}();g.GamepadSource=t})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../../core/mathUtils"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.extractState=function(g){var m=g.native;return m?{buttons:m.buttons.map(function(c){return c.pressed?c.value?c.value:1:0}),axes:m.axes.map(function(c){var e=g.axisThreshold,h=Math.abs(c);c=h<e?0:f.sign(c)*(h-e)/(1-e);return c})}:{buttons:[],
axes:[]}};g.stateEqual=function(f,g){if(f.axes.length!==g.axes.length||f.buttons.length!==g.buttons.length)return!1;for(var c=0;c<f.axes.length;c++)if(f.axes[c]!==g.axes[c])return!1;for(c=0;c<f.buttons.length;c++)if(f.buttons[c]!==g.buttons[c])return!1;return!0};g.stateIdle=function(f){for(var g=0;g<f.axes.length;g++)if(0!==f.axes[g])return!1;for(g=0;g<f.buttons.length;g++)if(0!==f.buttons[g])return!1;return!0}})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports",
"tslib","../InputHandler"],function(t,g,f,n){Object.defineProperty(g,"__esModule",{value:!0});t=function(g){function c(){var c=g.call(this,!0)||this;c.registerIncoming("context-menu",function(c){c.data.native.preventDefault()});return c}f.__extends(c,g);return c}(n.InputHandler);g.PreventContextMenu=t;g.default=t})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("require exports tslib ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),
function(t,g,f,n,m,c,e,h,q,b){Object.defineProperty(g,"__esModule",{value:!0});t=function(a){function d(b,d,f,g,h){void 0===b&&(b=q.DefaultParameters.maximumDoubleClickDelay);void 0===d&&(d=q.DefaultParameters.maximumDoubleClickDistance);void 0===f&&(f=q.DefaultParameters.maximumDoubleTouchDelay);void 0===g&&(g=q.DefaultParameters.maximumDoubleTouchDistance);void 0===h&&(h=n.default);var k=a.call(this,!1)||this;k.maximumDoubleClickDelay=b;k.maximumDoubleClickDistance=d;k.maximumDoubleTouchDelay=f;
k.maximumDoubleTouchDistance=g;k._clock=h;k._doubleTapDragReady=!1;k._doubleTapDragActive=!1;k._dragStartCenter=c.createScreenPoint(0,0);k._pointerState=new Map;k._doubleTapDrag=k.registerOutgoing("double-tap-drag");k._dragEventSeparator=new e.DragEventSeparator({start:function(a,b){return k._dragStart(a,b)},update:function(a,b){return k._dragUpdate(b)},end:function(a,b){return k._dragEnd(b)}});k.registerIncoming("drag",function(a){return k._dragEventSeparator.handle(a)});k.registerIncoming("pointer-down",
function(a){return k._handlePointerDown(a)});k.registerIncoming("pointer-up",function(){return k._handlePointerUp()});return k}f.__extends(d,a);d.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleTapTimeout&&(a.doubleTapTimeout.remove(),a.doubleTapTimeout=null)})};Object.defineProperty(d.prototype,"hasPendingInputs",{get:function(){return m.someMap(this._pointerState,function(a){return null!=a.doubleTapTimeout})},enumerable:!0,configurable:!0});d.prototype._clearPointerDown=
function(a){var b=this._pointerState.get(a);b&&(b.doubleTapTimeout.remove(),b.doubleTapTimeout=null,this._pointerState.delete(a),this.refreshHasPendingInputs())};d.prototype._createDoubleTapDragData=function(a,b,d){return{action:a,delta:b,button:d.button,buttons:d.buttons,pointer:d.pointer,pointers:d.pointers,pointerType:d.pointerType,timestamp:d.timestamp}};d.prototype._dragStart=function(a,b){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var d=b.data;
a=b.modifiers;this._dragStartCenter=d.center;d=this._createDoubleTapDragData("begin",c.createScreenPoint(0,0),d);this._doubleTapDrag.emit(d,void 0,a);b.stopPropagation()}};d.prototype._dragUpdate=function(a){if(this._doubleTapDragActive){var b=a.data,d=a.modifiers,e=b.center,e=c.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("update",e,b);this._doubleTapDrag.emit(b,void 0,d);a.stopPropagation()}};d.prototype._dragEnd=function(a){if(this._doubleTapDragActive){var b=
a.data,d=a.modifiers,e=b.center,e=c.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("end",e,b);this._doubleTapDrag.emit(b,void 0,d);this._doubleTapDragActive=!1;a.stopPropagation()}};d.prototype._handlePointerDown=function(a){var d=a.data,c=this._pointerId(d),e=this._pointerState.get(c),k=d.native.pointerType;e?(k="touch"===k?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(c),b.manhattanDistance(e.event.data,
d)>k?this._storePointerDown(a):this._doubleTapDragReady=!0):this._storePointerDown(a)};d.prototype._handlePointerUp=function(){this._doubleTapDragReady=!1};d.prototype._pointerId=function(a){var b=a.native;a=b.pointerId;var d=b.button,b=b.pointerType;return"mouse"===b?a+":"+d:""+b};d.prototype._storePointerDown=function(a){var b=this,d=a.data,c=d.native.pointerType,e=this._pointerId(d),d=this._clock.setTimeout(function(){return b._clearPointerDown(e)},"touch"===c?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);
this._pointerState.set(e,{event:a,doubleTapTimeout:d});this.refreshHasPendingInputs()};return d}(h.InputHandler);g.DoubleTapDrag=t})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports tslib ../../../core/clock ../../../core/MapUtils ../InputHandler ./support".split(" "),function(t,g,f,n,m,c,e){Object.defineProperty(g,"__esModule",{value:!0});g.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};
t=function(c){function h(b,a,d,e,f){void 0===b&&(b=g.DefaultParameters.maximumDoubleClickDelay);void 0===a&&(a=g.DefaultParameters.maximumDoubleClickDistance);void 0===d&&(d=g.DefaultParameters.maximumDoubleTouchDelay);void 0===e&&(e=g.DefaultParameters.maximumDoubleTouchDistance);void 0===f&&(f=n.default);var k=c.call(this,!1)||this;k.maximumDoubleClickDelay=b;k.maximumDoubleClickDistance=a;k.maximumDoubleTouchDelay=d;k.maximumDoubleTouchDistance=e;k._clock=f;k._pointerState=new Map;k._click=k.registerOutgoing("click");
k._doubleClick=k.registerOutgoing("double-click");k.registerIncoming("immediate-click",k._handleImmediateClick.bind(k));k.registerIncoming("pointer-drag",k._handlePointerDrag.bind(k));k.registerIncoming("drag",k._handleDrag.bind(k));return k}f.__extends(h,c);h.prototype.onUninstall=function(){this._pointerState.forEach(function(b){null!=b.doubleClickTimeout&&(b.doubleClickTimeout.remove(),b.doubleClickTimeout=null)})};Object.defineProperty(h.prototype,"hasPendingInputs",{get:function(){return m.someMap(this._pointerState,
function(b){return null!=b.doubleClickTimeout})},enumerable:!0,configurable:!0});h.prototype._pointerId=function(b){b=b.native;return"mouse"===b.pointerType?b.pointerId+":"+b.button:""+b.pointerType};h.prototype._handleImmediateClick=function(b){var a=b.data,d=this._pointerId(a),c=this._pointerState.get(d);if(c){var f="touch"===a.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e.manhattanDistance(c.event.data,a)>f?(this._clearDoubleClickTimeout(d,!0),this._startClick(b)):
(this._clearDoubleClickTimeout(d,!1),this._doubleClick.emit(c.event.data,void 0,c.event.modifiers))}else this._startClick(b)};h.prototype._startClick=function(b){var a=this,d=this._pointerId(b.data);this._pointerState.set(d,{event:b,doubleClickTimeout:this._clock.setTimeout(function(){return a._doubleClickTimeoutExceeded(d)},"touch"===b.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};h.prototype._handlePointerDrag=function(b){b=
this._pointerId(b.data.currentEvent);this._clearDoubleClickTimeout(b,!0)};h.prototype._handleDrag=function(b){b=this._pointerId(b.data.pointer);this._clearDoubleClickTimeout(b,!0)};h.prototype._clearDoubleClickTimeout=function(b,a){var d=this._pointerState.get(b);d&&(d.doubleClickTimeout.remove(),d.doubleClickTimeout=null,a&&this._doubleClickTimeoutExceeded(b),this._pointerState.delete(b),this.refreshHasPendingInputs())};h.prototype._doubleClickTimeoutExceeded=function(b){var a=this._pointerState.get(b);
this._click.emit(a.event.data,void 0,a.event.modifiers);a.doubleClickTimeout=null;this._pointerState.delete(b);this.refreshHasPendingInputs()};return h}(c.InputHandler);g.SingleAndDoubleClick=t})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.manhattanDistance=function(f,g){return Math.abs(g.x-f.x)+Math.abs(g.y-f.y)};g.euclideanDistance=function(f,g){var c=g.x-f.x;f=g.y-
f.y;return Math.sqrt(c*c+f*f)};g.fitCircleLSQ=function(g,m){m?(m.radius=0,m.center.x=0,m.center.y=0):m={radius:0,center:f.createScreenPoint()};if(0===g.length)return m;if(1===g.length)return m.center.x=g[0].x,m.center.y=g[0].y,m;if(2===g.length){var c=g[0];g=g[1];var e=[g.x-c.x,g.y-c.y],h=e[0],e=e[1];m.radius=Math.sqrt(h*h+e*e)/2;m.center.x=(c.x+g.x)/2;m.center.y=(c.y+g.y)/2;return m}for(var q=0,b=0,a=0;a<g.length;a++)q+=g[a].x,b+=g[a].y;for(var q=q/g.length,b=b/g.length,d=g.map(function(a){return a.x-
q}),k=g.map(function(a){return a.y-b}),p=c=m=0,l=0,u=h=0,a=e=0;a<d.length;a++){var r=d[a],z=k[a],v=r*r,n=z*z;m+=v;c+=n;p+=r*z;l+=v*r;h+=n*z;u+=r*n;e+=z*v}a=m;d=p;k=c;l=.5*(l+u);h=.5*(h+e);e=a*k-p*d;u=(l*k-h*d)/e;h=(a*h-p*l)/e;e=f.createScreenPoint(u+q,h+b);return{radius:Math.sqrt(u*u+h*h+(m+c)/g.length),center:e}}})},"esri/views/input/recognizers/Drag":function(){define("require exports tslib ../../../core/screenUtils ../../../layers/support/timeUtils ../InputHandler ./support".split(" "),function(t,
g,f,n,m,c,e){function h(a){var b=[];a.forEach(function(a){b.push(n.createScreenPoint(a.event.x,a.event.y))});return e.fitCircleLSQ(b)}function q(b){var d=h(b),c=0;b.forEach(function(b){for(var e=a(b,d),e=e-b.lastAngle;e>Math.PI;)e-=2*Math.PI;for(;e<-Math.PI;)e+=2*Math.PI;e=b.lastAngle+e;b.lastAngle=e;c+=e-b.initialAngle});c/=b.size||1;return{angle:c,radius:d.radius,center:d.center}}function b(a){var b=new Map;a.forEach(function(a,d){return b.set(d,a.event)});return b}function a(a,b){a=a.event;return Math.atan2(a.y-
b.center.y,a.x-b.center.x)}Object.defineProperty(g,"__esModule",{value:!0});t=function(d){function c(a){var b=d.call(this,!1)||this;b.navigationTouch=a;b.startStateModifiers=new Set;b.activePointerMap=new Map;b.isDragging=!1;b.isCurrentDragSuppressed=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));
b.registerIncoming("pointer-cancel",b.handlePointerUpAndPointerLost.bind(b));return b}f.__extends(c,d);c.prototype.createPayload=function(a,d,c,e){return{action:a,pointerType:this.pointerType,button:this.mouseButton,buttons:d.buttons,timestamp:e,pointers:b(this.activePointerMap),pointer:d,angle:c.angle,radius:c.radius,center:c.center}};c.prototype.addPointer=function(b){var d=b.native.pointerId,c=q(this.activePointerMap).angle;b={event:b,initialAngle:0,lastAngle:0};this.activePointerMap.set(d,b);
d=a(b,h(this.activePointerMap));b.initialAngle=d;b.lastAngle=d;this.updatePointerAngles(c)};c.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};c.prototype.removePointer=function(a){var b=q(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};c.prototype.updatePointerAngles=function(b){var d=q(this.activePointerMap);this.activePointerMap.forEach(function(c){c.initialAngle=
a(c,d)-b;c.lastAngle=a(c,d)-b})};c.prototype.emitEvent=function(a,b,d){var c=q(this.activePointerMap);this.drag.emit(this.createPayload(a,b,c,d),void 0,this.startStateModifiers)};c.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,d=m.Milliseconds(a.timestamp);this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",a.data,d),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(b)):
(this.removePointer(b),this.emitEvent("removed",a.data,m.Milliseconds(a.timestamp))))};c.prototype.handlePointerDrag=function(a){var b=a.data,d=b.currentEvent,c=m.Milliseconds(a.timestamp);switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(d.native.pointerId)?(this.updatePointer(d),!this.isCurrentDragSuppressed&&this.emitEvent("update",d,c)):(this.addPointer(d),this.emitEvent("added",d,c),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(d),this.pointerType=
a.data.startEvent.pointerType,this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",d,c))}};Object.defineProperty(c.prototype,"isSuppressed",{get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size},enumerable:!0,configurable:!0});return c}(c.InputHandler);g.Drag=
t;(function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(g.Button||(g.Button={}))})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("require exports tslib ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(t,g,f,n,m,c,e){Object.defineProperty(g,"__esModule",{value:!0});t=function(g){function h(b,a,d,e,f){void 0===b&&(b=c.DefaultParameters.maximumDoubleClickDelay);
void 0===a&&(a=c.DefaultParameters.maximumDoubleClickDistance);void 0===d&&(d=c.DefaultParameters.maximumDoubleTouchDelay);void 0===e&&(e=c.DefaultParameters.maximumDoubleTouchDistance);void 0===f&&(f=n.default);var k=g.call(this,!1)||this;k.maximumDoubleClickDelay=b;k.maximumDoubleClickDistance=a;k.maximumDoubleTouchDelay=d;k.maximumDoubleTouchDistance=e;k._clock=f;k._pointerState=new Map;k._immediateDoubleClick=k.registerOutgoing("immediate-double-click");k.registerIncoming("pointer-down",k._handlePointerDown.bind(k));
k.registerIncoming("pointer-up",function(a){k._handlePointerLoss(a,"pointer-up")});k.registerIncoming("pointer-capture-lost",function(a){k._handlePointerLoss(a,"pointer-capture-lost")});k.registerIncoming("pointer-cancel",function(a){k._handlePointerLoss(a,"pointer-cancel")});return k}f.__extends(h,g);h.prototype.onUninstall=function(){this._pointerState.forEach(function(b){b.immediateDoubleClick&&b.immediateDoubleClick.timeoutHandle.remove()});g.prototype.onUninstall.call(this)};h.prototype._handlePointerDown=
function(b){b=b.data;var a=this._pointerId(b);this._pointerState.has(a)||(this._pointerState.set(a,{downButton:b.native.button,immediateDoubleClick:null}),this.startCapturingPointer(b.native))};h.prototype._handlePointerLoss=function(b,a){var d=b.data,c=this._pointerId(d);if((c=this._pointerState.get(c))&&"pointer-up"===a&&c.downButton===d.native.button)if(a=c.immediateDoubleClick){a.timeoutHandle.remove();var f="touch"===b.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;
e.manhattanDistance(a,b.data)>f?this._startImmediateDoubleClick(b,c):(this._immediateDoubleClick.emit(b.data,void 0,a.modifiers),this._removeState(d))}else this._startImmediateDoubleClick(b,c)};h.prototype._startImmediateDoubleClick=function(b,a){var d=this;a.immediateDoubleClick={x:b.data.x,y:b.data.y,modifiers:b.modifiers,timeoutHandle:this._clock.setTimeout(function(){return d._removeState(b.data)},"touch"===b.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};
h.prototype._pointerId=function(b){b=b.native;return"mouse"===b.pointerType?b.pointerId+":"+b.button:""+b.pointerType};h.prototype._removeState=function(b){var a=this._pointerId(b);this._pointerState.delete(a);this.stopCapturingPointer(b.native);this.refreshHasPendingInputs()};return h}(m.InputHandler);g.ImmediateDoubleClick=t})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports tslib ../../../core/clock ../InputHandler ./support".split(" "),function(t,g,f,
n,m,c){Object.defineProperty(g,"__esModule",{value:!0});g.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};t=function(e){function h(c,b,a,d,k,f){void 0===c&&(c=g.DefaultParameters.maximumClickDelay);void 0===b&&(b=g.DefaultParameters.movementUntilMouseDrag);void 0===a&&(a=g.DefaultParameters.movementUntilPenDrag);void 0===d&&(d=g.DefaultParameters.movementUntilTouchDrag);void 0===k&&(k=g.DefaultParameters.holdDelay);
void 0===f&&(f=n.default);var h=e.call(this,!1)||this;h.maximumClickDelay=c;h.movementUntilMouseDrag=b;h.movementUntilPenDrag=a;h.movementUntilTouchDrag=d;h.holdDelay=k;h._clock=f;h._pointerState=new Map;h._pointerDrag=h.registerOutgoing("pointer-drag");h._immediateClick=h.registerOutgoing("immediate-click");h._pointerHold=h.registerOutgoing("hold");h.registerIncoming("pointer-down",h._handlePointerDown.bind(h));h.registerIncoming("pointer-up",function(a){h._handlePointerLoss(a,"pointer-up")});h.registerIncoming("pointer-capture-lost",
function(a){h._handlePointerLoss(a,"pointer-capture-lost")});h.registerIncoming("pointer-cancel",function(a){h._handlePointerLoss(a,"pointer-cancel")});h._moveHandle=h.registerIncoming("pointer-move",h._handlePointerMove.bind(h));h._moveHandle.pause();return h}f.__extends(h,e);h.prototype.onUninstall=function(){this._pointerState.forEach(function(c){null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null)});e.prototype.onUninstall.call(this)};h.prototype._handlePointerDown=function(c){var b=
this,a=c.data,d=a.native.pointerId,e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(function(){var a=b._pointerState.get(d);a&&(a.isDragging||(b._pointerHold.emit(a.previousEvent,void 0,c.modifiers),a.holdEmitted=!0),a.holdTimeout=null)},this.holdDelay));e={startEvent:a,previousEvent:a,startTimestamp:c.timestamp,isDragging:!1,downButton:a.native.button,holdTimeout:e,modifiers:new Set};this._pointerState.set(d,e);this.startCapturingPointer(a.native);this._moveHandle.resume();1<this._pointerState.size&&
this.startDragging(c)};h.prototype._createPointerDragData=function(c,b,a){return{action:c,startEvent:b.startEvent,previousEvent:b.previousEvent,currentEvent:a}};h.prototype._handlePointerMove=function(e){var b=e.data,a=this._pointerState.get(b.native.pointerId);if(a){if(a.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",a,b),void 0,a.modifiers);else{var d=c.euclideanDistance(b,a.startEvent),k=this._getDragThreshold(b.native.pointerType);d>k&&this.startDragging(e)}a.previousEvent=
b}};h.prototype._getDragThreshold=function(c){switch(c){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}};h.prototype.startDragging=function(c){var b=this,a=c.data,d=a.native.pointerId;this._pointerState.forEach(function(e){null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null);e.isDragging||(e.modifiers=c.modifiers,e.isDragging=!0,d===e.startEvent.native.pointerId?b._pointerDrag.emit(b._createPointerDragData("start",
e,a)):b._pointerDrag.emit(b._createPointerDragData("start",e,e.previousEvent),c.timestamp))})};h.prototype._handlePointerLoss=function(c,b){var a=c.data,d=a.native.pointerId,e=this._pointerState.get(d);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,"pointer-up"===b?a:e.previousEvent),void 0,e.modifiers):"pointer-up"===b&&e.downButton===a.native.button&&c.timestamp-e.startTimestamp<=this.maximumClickDelay&&
!e.holdEmitted&&this._immediateClick.emit(a),this._pointerState.delete(d),this.stopCapturingPointer(a.native),0===this._pointerState.size&&this._moveHandle.pause())};return h}(m.InputHandler);g.PointerClickHoldAndDrag=t})},"esri/views/2d/support/HighlightOptions":function(){define("require exports tslib ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(t,g,f,n,m,c){var e=0;return function(g){function h(){var b=null!==g&&g.apply(this,arguments)||this;
b.color=new n([0,255,255]);b.haloOpacity=1;b.fillOpacity=.25;return b}f.__extends(h,g);Object.defineProperty(h.prototype,"version",{get:function(){return e++},enumerable:!0,configurable:!0});f.__decorate([c.property({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],h.prototype,"version",null);f.__decorate([c.property({type:n})],h.prototype,"color",void 0);f.__decorate([c.property({type:n})],h.prototype,"haloColor",void 0);f.__decorate([c.property()],h.prototype,"haloOpacity",
void 0);f.__decorate([c.property()],h.prototype,"fillOpacity",void 0);return h=f.__decorate([c.subclass("esri.views.2d.support.HighlightOptions")],h)}(m)})},"esri/views/support/screenshotUtils":function(){define(["require","exports","tslib","../../core/compilerUtils","../../core/mathUtils"],function(t,g,f,n,m){function c(d,c){var e=d||{},k=e.format,f=e.quality,g=e.rotation,e=e.disableSlice,h=a(d,c.padding),r;r=c.width-h.left-h.right;c=c.height-h.top-h.bottom;h={x:0,y:0,width:r,height:c};if(d&&d.area){null!=
d.area.x&&(h.x=Math.floor(d.area.x));null!=d.area.y&&(h.y=Math.floor(d.area.y));var p=null!=d.area.width?Math.floor(d.area.width):null,v=null!=d.area.height?Math.floor(d.area.height):null;h.width=r-h.x;h.height=c-h.y;null!=p&&null!=v?(h.width=Math.min(h.width,p),h.height=Math.min(h.height,v)):null==p&&null!=v?(p=Math.min(h.width,p),h.height*=p/h.width,h.width=p):null!=p&&null==v&&(p=Math.min(h.height,v),h.width*=p/h.height,h.height=p)}h=b(h,d);p=Math.floor(Math.max(h.x,0));v=Math.floor(Math.max(h.y,
0));r={x:p,y:v,width:Math.floor(Math.min(h.width,r-p)),height:Math.floor(Math.min(h.height,c-v))};c=r.width/r.height;h=h.width/h.height;h!==c&&(h>c?(c=Math.floor(r.width/h),r={x:r.x,y:Math.floor(r.y+(r.height-c)/2),width:r.width,height:c}):(c=Math.floor(r.height*h),r={x:Math.floor(r.x+(r.width-c)/2),y:r.y,width:c,height:r.height}));h=q(d,r);c=h.width;h=h.height;a:switch(k){case "png":case "jpg":case "jpeg":break a;case null:case void 0:k=l;break a;default:n.neverReached(k),k=l}p=u[k];f=m.clamp(null!=
f?f:p,0,100);return{format:k,quality:f,area:r,width:c,height:h,rotation:g,disableSlice:!!e,ignoreBackground:!(!d||!d.ignoreBackground),ignorePadding:!(!d||!d.ignorePadding)}}function e(a,b){return a.toDataURL(p[b.format],b.quality/100)}function h(a,b,c){c||(d||(d=document.createElement("canvas"),d.width=1,d.height=1),c=d);return c.getContext("2d").createImageData(a,b)}function q(a,b){if(!a)return b;var d=a.width;a=a.height;if(null!=d&&null!=a)return{width:Math.floor(d),height:Math.floor(a)};if(null==
d&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(d),height:Math.floor(d/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function b(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var d=a.width/a.height;if(d===b)return a;if(d<b)return b=Math.floor(a.height*b),a.x-=(b-a.width)/2,a.width=b,a;b=Math.floor(a.width/b);a.y-=(b-a.height)/2;a.height=b;return a}function a(a,b){return!b||a&&a.ignorePadding?r:b}Object.defineProperty(g,"__esModule",{value:!0});g.completeUserSettings=
c;g.toRenderSettings=function(b,d){var e=c(b,d),k=e.area,f=e.width/k.width,g=a(e,d.padding),h=g.left+g.right,l=g.top+g.bottom;return{framebufferWidth:Math.floor((d.width-h)*f+h),framebufferHeight:Math.floor((d.height-l)*f+l),region:{x:Math.floor(k.x*f)+g.left,y:Math.floor(k.y*f)+g.top,width:e.width,height:e.height},format:e.format,quality:e.quality,rotation:e.rotation,pixelRatio:f,layers:b&&b.layers?b.layers:[],disableSlice:e.disableSlice,ignoreBackground:e.ignoreBackground,ignorePadding:e.ignorePadding}};
g.encodeResult=function(a,b,d,c){if(c.premultipliedAlpha)for(var k=a.data,f=k.length,g=0;g<f;g+=4){var h=k[g+3];0<h&&(h/=255,k[g+0]/=h,k[g+1]/=h,k[g+2]/=h)}d.width=a.width;d.height=a.height;k=d.getContext("2d");k.putImageData(a,0,0);c.flipY&&(k.save(),k.globalCompositeOperation="copy",k.scale(1,-1),k.translate(0,-k.canvas.height),k.drawImage(k.canvas,0,0),k.restore());a=k.getImageData(0,0,a.width,a.height);b=e(d,b);d.width=0;d.height=0;return{dataUrl:b,data:a}};g.toDataUrl=e;g.createEmptyImageData=
function(a,b,d){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(a,b)}catch(x){k=!1}return h(a,b,d)};g.wrapImageData=function(a,b,d,c){if(!b||!d)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(a,b,d)}catch(w){k=!1}b=h(b,d,c);b.data.set(a,0);return b};g.resampleHermite=function(a,b,d,c,e,k,f,g){void 0===c&&(c=0);void 0===e&&(e=0);void 0===k&&(k=a.width-c);void 0===f&&(f=a.height-e);void 0===g&&(g=!1);var h=
a.data,l=b.width,r=b.height,p=b.data;k/=l;f/=r;var u=Math.ceil(k/2),m=Math.ceil(f/2);a=a.width;for(var n=0;n<r;n++)for(var v=0;v<l;v++){for(var z=4*(v+(g?r-n-1:n)*l),q=0,x=0,w=0,F=0,y=0,t=0,C=(n+.5)*f,A=Math.floor(n*f);A<(n+1)*f;A++)for(var S=Math.abs(C-(A+.5))/m,T=(v+.5)*k,S=S*S,W=Math.floor(v*k);W<(v+1)*k;W++){var K=Math.abs(T-(W+.5))/u,K=Math.sqrt(S+K*K);if(!(1<=K)){var K=2*K*K*K-3*K*K+1,X=4*(c+W+(e+A)*a),t=t+K*h[X+3],x=x+K;!d&&255>h[X+3]&&(K=K*h[X+3]/255);w+=K*h[X];F+=K*h[X+1];y+=K*h[X+2];q+=
K}}p[z]=w/q;p[z+1]=F/q;p[z+2]=y/q;p[z+3]=t/x}return b};g.screenshotSuperSampleSettings=function(b,d,c){if(!d)return b;d=b.framebufferWidth;var e=b.framebufferHeight,k=b.pixelRatio,g=b.region;c=a(b,c);var h=c.left+c.right,l=c.top+c.bottom,r=d-h,p=e-l,u=Math.min(8,Math.min((2048-h)/r,(2048-l)/p));return 1.5>u?b:f.__assign(f.__assign({},b),{framebufferWidth:Math.round(r*u)+h,framebufferHeight:Math.round(p*u)+l,pixelRatio:k*u,resample:{region:{x:Math.round((g.x-c.left)*u)+c.left,y:Math.round((g.y-c.top)*
u)+c.top,width:Math.round(g.width*u),height:Math.round(g.height*u)},width:d,height:e}})};var d=null,k=!0,p={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},l="jpg",u={png:100,jpg:98,jpeg:98},r={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require","exports","tslib","../../core/Error","../../core/has"],function(t,g,f,n,m){Object.defineProperty(g,"__esModule",{value:!0});var c={checkMajorWebPerformanceCaveat:!0};g.check=function(e){e=f.__assign(f.__assign({},
c),e);return m("esri-webgl")?e.checkMajorWebPerformanceCaveat&&m("esri-webgl-major-performance-caveat")?new n("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):m("esri-webgl-high-precision-fragment")?m("esri-webgl-vertex-shader-samplers")?m("esri-webgl-element-index-uint")?m("esri-webgl-standard-derivatives")?m("esri-webgl-instanced-arrays")?null:new n("webgl:instanced-arrays-required",
"WebGL support for instanced rendering is required but not supported."):new n("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new n("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new n("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new n("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):
new n("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define(["require","exports","tslib","../../../core/accessorSupport/decorators","../DefaultUI"],function(t,g,f,n,m){return function(c){function e(e){e=c.call(this,e)||this;e.components=["attribution","zoom"];return e}f.__extends(e,c);f.__decorate([n.property()],e.prototype,"components",void 0);return e=f.__decorate([n.subclass("esri.views.ui.2d.DefaultUI2D")],e)}(m)})},"esri/views/ui/DefaultUI":function(){define("require exports tslib ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a){return function(d){function e(a){a=d.call(this,a)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}f.__extends(e,d);e.prototype.initialize=function(){this._handles.add([n.init(this,"components",this._componentsWatcher.bind(this)),n.init(this,"view",this._updateViewAwareWidgets.bind(this))])};e.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=
b._find(a))b.remove(a),a.destroy()})};e.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(d){(d=(d=b._find(d))&&d.widget)&&void 0!==d.view&&(d.view=a)})};e.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};e.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};e.prototype._addComponents=function(a){var b=this;this.initialized&&
a.forEach(function(a){return b.add(b._createComponent(a),b._defaultPositionLookup[a])})};e.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new c({id:a,node:b})};e.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};e.prototype._createAttribution=function(){return new h({view:this.view})};
e.prototype._createCompass=function(){return new q({view:this.view})};e.prototype._createNavigationToggle=function(){return new b({view:this.view})};e.prototype._createZoom=function(){return new a({view:this.view})};f.__decorate([m.property()],e.prototype,"components",void 0);return e=f.__decorate([m.subclass("esri.views.ui.DefaultUI")],e)}(e)})},"esri/views/ui/Component":function(){define("require exports tslib ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),
function(t,g,f,n,m,c){return function(e){function g(){var c=null!==e&&e.apply(this,arguments)||this;c.widget=null;return c}f.__extends(g,e);g.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(g.prototype,"id",{get:function(){return this.get("widget.id")||this.get("node.id")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"node",{set:function(c){var b=this._get("node");c!==b&&(c&&c.classList.add("esri-component"),b&&b.classList.remove("esri-component"),
this._set("node",c))},enumerable:!0,configurable:!0});g.prototype.castNode=function(c){if(!c)return this._set("widget",null),null;if("string"===typeof c||c&&"nodeType"in c)return this._set("widget",null),m.byId(c);c&&"function"===typeof c.render&&!c.domNode&&(c.domNode=document.createElement("div"));this._set("widget",c);return c.domNode};f.__decorate([c.property()],g.prototype,"id",null);f.__decorate([c.property()],g.prototype,"node",null);f.__decorate([c.cast("node")],g.prototype,"castNode",null);
f.__decorate([c.property({readOnly:!0})],g.prototype,"widget",void 0);return g=f.__decorate([c.subclass("esri.views.ui.Component")],g)}(n)})},"esri/views/ui/UI":function(){define("require exports tslib ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(t,g,f,n,m,c,e,h,q,b){function a(a){return"object"!==typeof a||a instanceof q||"declaredClass"in a||!("component"in
a||"index"in a||"position"in a)?null:a}function d(a,b){var d=b.bottom,c=b.left,e=b.right;a.style.top=b.top;a.style.bottom=d;a.style.left=c;a.style.right=e}var k={left:0,top:0,bottom:0,right:0},p={bottom:30,top:15,right:15,left:15};return function(g){function l(a){a=g.call(this,a)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._componentToKey=new Map;a._handles=new c;a.view=null;a._initContainers();return a}f.__extends(l,g);l.prototype.initialize=function(){this._handles.add([e.init(this,
"view.padding, container",this._applyViewPadding.bind(this)),e.init(this,"padding",this._applyUIPadding.bind(this))])};l.prototype.destroy=function(){this.container=null;for(var a=0,b=this._components;a<b.length;a++)b[a].destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};Object.defineProperty(l.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(a.classList.add("esri-ui"),this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),
d(b,{top:"",bottom:"",left:"",right:""}),n.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"padding",{get:function(){return this._get("padding")},set:function(a){a?this._override("padding",a):this._clearOverride("padding")},enumerable:!0,
configurable:!0});l.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:f.__assign(f.__assign({},p),a)};Object.defineProperty(l.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});l.prototype.add=function(b,d){var c=this,e,k;if(Array.isArray(b))b.forEach(function(a){return c.add(a,d)});else{var f=a(b);f&&(e=f.index,d=f.position,
b=f.component,k=f.key);d&&"object"===typeof d&&(e=d.index,k=d.key,d=d.position);!b||d&&!this._isValidPosition(d)||(b instanceof q||(b=new q({node:b})),this._place({component:b,position:d,index:e}),this._components.push(b),k&&this._componentToKey.set(b,k))}};l.prototype.remove=function(a,b){var d=this;if(a){if(Array.isArray(a))return a.map(function(a){return d.remove(a,b)});var c=this._find(a);if(c){var e=this._componentToKey;if(!e.has(a)||e.get(a)===b)return e=this._components.indexOf(c),c.node.parentNode&&
c.node.parentNode.removeChild(c.node),this._componentToKey.delete(a),this._components.splice(e,1)[0]}}};l.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";return"manual"===a?Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)}):this._isValidPosition(a)?Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this):null};l.prototype.move=function(b,d){var c=this;Array.isArray(b)&&b.forEach(function(a){return c.move(a,d)});if(b){var e,k=a(b)||a(d);k&&(e=k.index,d=k.position,b=k.component||b);(!d||this._isValidPosition(d))&&(b=this.remove(b))&&this.add(b,{position:d,index:e})}};l.prototype.find=function(a){return a?(a=this._findById(a))&&(a.widget||a.node):null};l.prototype._find=function(a){return a?a instanceof q?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||
a):null};l.prototype._getViewPadding=function(){return this.get("view.padding")||k};l.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};l.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var d=document.createElement("div");d.classList.add("esri-ui-inner-container");d.classList.add("esri-ui-manual-container");var c=document.createElement("div");
c.classList.add("esri-ui-top-left");c.classList.add("esri-ui-corner");a.appendChild(c);var e=document.createElement("div");e.classList.add("esri-ui-top-right");e.classList.add("esri-ui-corner");a.appendChild(e);var k=document.createElement("div");k.classList.add("esri-ui-bottom-left");k.classList.add("esri-ui-corner");a.appendChild(k);var g=document.createElement("div");g.classList.add("esri-ui-bottom-right");g.classList.add("esri-ui-corner");a.appendChild(g);this._innerContainer=a;this._manualContainer=
d;a=b.isRTL();this._cornerNameToContainerLookup={"top-left":c,"top-right":e,"bottom-left":k,"bottom-right":g,"top-leading":a?e:c,"top-trailing":a?c:e,"bottom-leading":a?g:k,"bottom-trailing":a?k:g};this._positionNameToContainerLookup=f.__assign({manual:d},this._cornerNameToContainerLookup)};l.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};l.prototype._place=function(a){var b=a.component,d=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var c=
-1<d,e=b.widget;e&&!e._started&&"function"===typeof e.postMixInProperties&&"function"===typeof e.buildRendering&&"function"===typeof e.postCreate&&"function"===typeof e.startup&&b.widget.startup();c?(c=Array.prototype.slice.call(a.children),0===d?a.firstChild?n.insertBefore(b.node,a.firstChild):a.appendChild(b.node):d>=c.length?a.appendChild(b.node):n.insertBefore(b.node,c[d])):a.appendChild(b.node)};l.prototype._applyViewPadding=function(){var a=this.container;a&&d(a,this._toPxPosition(this._getViewPadding()))};
l.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&d(a,this._toPxPosition(this.padding))};l.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};l.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};l.prototype._findByComponent=function(a){var b=null,d;this._components.some(function(c){(d=c===a)&&(b=c);return d});return b};l.prototype._findById=function(a){var b=null,
d;this._components.some(function(c){(d=c.id===a)&&(b=c);return d});return b};l.prototype._findByNode=function(a){var b=null,d;this._components.some(function(c){(d=c.node===a)&&(b=c);return d});return b};f.__decorate([h.property()],l.prototype,"container",null);f.__decorate([h.property({dependsOn:["view.height"]})],l.prototype,"height",null);f.__decorate([h.property({value:p})],l.prototype,"padding",null);f.__decorate([h.cast("padding")],l.prototype,"castPadding",null);f.__decorate([h.property()],
l.prototype,"view",void 0);f.__decorate([h.property({dependsOn:["view.width"]})],l.prototype,"width",null);return l=f.__decorate([h.subclass("esri.views.ui.UI")],l)}(m.EventedAccessor)})},"esri/widgets/Attribution":function(){define("require exports tslib ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(t,g,f,n,m,c,e,h){return function(c){function b(a,b){a=c.call(this,a,b)||this;a._isOpen=!1;a._attributionTextOverflowed=
!1;a._prevSourceNodeHeight=0;a.iconClass="esri-icon-description";a.itemDelimiter=" | ";a.label=void 0;a.messages=null;a.view=null;a.viewModel=new e;return a}f.__extends(b,c);b.prototype.initialize=function(){var a=this;this.own(n.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(b.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},
enumerable:!0,configurable:!0});b.prototype.render=function(){var a,b=(a={},a["esri-attribution--open"]=this._isOpen,a);return h.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",b),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};b.prototype.renderPoweredBy=function(){return h.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",h.tsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",
target:"_blank",rel:"noreferrer"},"Esri"))};b.prototype.renderSourcesNode=function(){var a,b=this._isOpen,c=this._isInteractive(),e=c?0:-1,f=this.attributionText,g=c?"button":void 0,b=(a={},a["esri-attribution__sources--open"]=b,a["esri-interactive"]=c,a);return h.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",b),innerHTML:f,role:g,tabIndex:e})};b.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=
a.clientWidth};b.prototype._afterSourcesNodeUpdate=function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var e=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;e&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};b.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};b.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};
f.__decorate([m.property({dependsOn:["viewModel.items.length","itemDelimiter"],readOnly:!0}),h.renderable()],b.prototype,"attributionText",null);f.__decorate([m.property()],b.prototype,"iconClass",void 0);f.__decorate([m.property(),h.renderable()],b.prototype,"itemDelimiter",void 0);f.__decorate([m.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);f.__decorate([m.property(),h.renderable(),h.messageBundle("esri/widgets/Attribution/t9n/Attribution")],b.prototype,
"messages",void 0);f.__decorate([m.aliasOf("viewModel.view")],b.prototype,"view",void 0);f.__decorate([m.property({type:e}),h.renderable(["state","view.size"])],b.prototype,"viewModel",void 0);f.__decorate([h.accessibleHandler()],b.prototype,"_toggleState",null);return b=f.__decorate([m.subclass("esri.widgets.Attribution")],b)}(c)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports tslib ../../geometry ../../core/arrayUtils ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a,d){function k(a,b){return a.length!==b.length||a.some(function(a,d){return a.text!==b[d].text})}function p(a,b,d){d&&b&&(m.find(a,function(a){return a.layerView===b&&a.text===d})||a.push({text:d,layerView:b}))}var l=[];return function(g){function h(a){var b=g.call(this,a)||this;b.clear=function(){b._fetchedAttributionData.clear();b._pendingAttributions.clear();b.handles.remove("suspension");b.notifyChange("state")};b._pendingAttributions=new Set;b._fetchedAttributionData=
new Map;b.items=new e;b.view=null;b._allLayerViewsChange=function(a){b.handles.remove("suspension");var d=b.get("view.allLayerViews");d&&b.handles.add(d.map(function(a){return a.watch(["suspended","attributionVisible"],b._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){b._pendingAttributions.delete(a);b._fetchedAttributionData.delete(a)});b._updateAttributionItems()};b._updateAttributionItems=function(){var a=b.get("view.allLayerViews");l.length=0;a?(a.forEach(function(a){if(!a.suspended&&
a.get("layer.attributionVisible")){var d=a.layer;if(d&&"copyright"in d&&"function"===typeof d.originOf&&"user"===d.originOf("copyright"))p(l,a,d.copyright);else if(d.hasAttributionData)if(b._fetchedAttributionData.has(a)){var c=b._fetchedAttributionData.get(a);c&&p(l,a,b._getDynamicAttribution(c,b.view,d))}else b._fetchAttributionData(a);else(c=d.get("portalItem.accessInformation"))?p(l,a,c):p(l,a,d.copyright)}}),k(b.items,l)&&(b.items.removeAll(),b.items.addMany(l)),b.notifyChange("state")):b.clear()};
b.handles.add([q.on(b,"view.allLayerViews","change",b._allLayerViewsChange,b._allLayerViewsChange,b.clear),q.whenTrue(b,"view.stationary",function(){return b._updateAttributionItems()})]);return b}f.__extends(h,g);h.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(h.prototype,"state",{get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"},enumerable:!0,configurable:!0});
h.prototype._fetchAttributionData=function(a){return f.__awaiter(this,void 0,void 0,function(){var b,d;return f.__generator(this,function(e){switch(e.label){case 0:if(this._pendingAttributions.has(a))return[2];this._pendingAttributions.add(a);return[4,c.result(a.layer.fetchAttributionData())];case 1:return b=e.sent(),this._pendingAttributions.has(a)&&(d=b.ok?this._createContributionIndex(b.value,"bing-maps"===a.layer.type):null,this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,
d)),this._updateAttributionItems(),[2]}})})};h.prototype._createContributionIndex=function(a,b){a=a.contributors;var c={};if(!a)return c;for(var e=0;e<a.length;e++){var k=a[e],f=k.coverageAreas;if(!f)return;for(var g=0;g<f.length;g++)for(var h=f[g],l=h.bbox,p=h.zoomMin-(b&&h.zoomMin?1:0),r=h.zoomMax-(b&&h.zoomMax?1:0),h={extent:d.geographicToWebMercator({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:n.SpatialReference.WGS84}),attribution:k.attribution||"",score:null!=h.score?h.score:100,
id:e};p<=r;p++)c[p]=c[p]||[],c[p].push(h)}c.maxKey=Math.max.apply(null,Object.keys(c));return c};h.prototype._getDynamicAttribution=function(b,c,e){var k=c.extent;e=e.tileInfo.scaleToZoom(c.scale);e=Math.min(b.maxKey,Math.round(e));if(!k||null==e||-1>=e)return"";b=b[e];var f=d.project(k.center.clone().normalize(),c.spatialReference),g={};return b?b.filter(function(b){var d=!g[b.id]&&f&&a.extentContainsPoint(b.extent,f);d&&(g[b.id]=!0);return d}).sort(function(a,b){return b.score-a.score||a.objectId-
b.objectId}).map(function(a){return a.attribution}).join(", "):""};f.__decorate([b.property({readOnly:!0,type:e})],h.prototype,"items",void 0);f.__decorate([b.property({dependsOn:["view.ready"],readOnly:!0})],h.prototype,"state",null);f.__decorate([b.property()],h.prototype,"view",void 0);return h=f.__decorate([b.subclass("esri.widgets.Attribution.AttributionViewModel")],h)}(h.HandleOwner)})},"esri/widgets/Compass":function(){define("require exports tslib ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),
function(t,g,f,n,m,c,e){return function(g){function h(b,a){b=g.call(this,b,a)||this;b.goToOverride=null;b.iconClass="esri-icon-locate-circled";b.label=void 0;b.messages=null;b.view=null;b.viewModel=new c;return b}f.__extends(h,g);h.prototype.reset=function(){};h.prototype.render=function(){var b,a,d=this.viewModel,c=d.orientation,d=d.state,f="disabled"===d,g="compass"===("rotation"===d?"rotation":"compass"),d=f?-1:0,f=(b={},b["esri-disabled"]=f,b["esri-interactive"]=!f,b);b=(a={},a["esri-icon-compass"]=
g,a["esri-icon-dial"]=!g,a);a=this.messages;return e.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",f),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:d,"aria-label":a.reset,title:a.reset},e.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",b),styles:this._toRotationTransform(c)}),e.tsx("span",{class:"esri-icon-font-fallback-text"},a.reset))};h.prototype._reset=function(){this.viewModel.reset()};h.prototype._toRotationTransform=
function(b){return{transform:"rotateZ("+b.z+"deg)"}};f.__decorate([n.aliasOf("viewModel.goToOverride")],h.prototype,"goToOverride",void 0);f.__decorate([n.property()],h.prototype,"iconClass",void 0);f.__decorate([n.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],h.prototype,"label",void 0);f.__decorate([n.property(),e.renderable(),e.messageBundle("esri/widgets/Compass/t9n/Compass")],h.prototype,"messages",void 0);f.__decorate([n.aliasOf("viewModel.view")],h.prototype,"view",void 0);
f.__decorate([n.property({type:c}),e.renderable(["viewModel.orientation","viewModel.state"])],h.prototype,"viewModel",void 0);f.__decorate([n.aliasOf("viewModel.reset")],h.prototype,"reset",null);f.__decorate([e.accessibleHandler()],h.prototype,"_reset",null);return h=f.__decorate([n.subclass("esri.widgets.Compass")],h)}(m)})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports tslib ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),
function(t,g,f,n,m,c,e,h){return function(g){function b(a){a=g.call(this,a)||this;a._handles=new m;a.orientation={x:0,y:0,z:0};a.view=null;a._updateForCamera=a._updateForCamera.bind(a);a._updateForRotation=a._updateForRotation.bind(a);a._updateRotationWatcher=a._updateRotationWatcher.bind(a);a.view;return a}f.__extends(b,g);b.prototype.initialize=function(){this._handles.add(c.init(this,"view",this._updateRotationWatcher))};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=
null};Object.defineProperty(b.prototype,"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});b.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};
b.prototype._updateForRotation=function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};b.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};b.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(c.init(this,"view.rotation",this._updateForRotation)):this._handles.add(c.init(this,"view.camera",this._updateForCamera)))};f.__decorate([e.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],
readOnly:!0})],b.prototype,"canShowNorth",null);f.__decorate([e.property()],b.prototype,"orientation",void 0);f.__decorate([e.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],b.prototype,"state",null);f.__decorate([e.property()],b.prototype,"view",void 0);f.__decorate([e.property()],b.prototype,"reset",null);return b=f.__decorate([e.subclass("esri.widgets.CompassViewModel")],b)}(h.GoToMixin(n))})},"esri/widgets/NavigationToggle":function(){define("require exports tslib ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),
function(t,g,f,n,m,c,e){return function(g){function h(b,a){b=g.call(this,b,a)||this;b.iconClass="esri-icon-pan2";b.label=void 0;b.messages=null;b.view=null;b.viewModel=new c;return b}f.__extends(h,g);Object.defineProperty(h.prototype,"layout",{set:function(b){"horizontal"!==b&&(b="vertical");this._set("layout",b)},enumerable:!0,configurable:!0});h.prototype.toggle=function(){};h.prototype.render=function(){var b,a,d,c="disabled"===this.get("viewModel.state"),f="pan"===this.get("viewModel.navigationMode"),
g=(b={},b["esri-disabled"]=c,b["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,b);b=(a={},a["esri-navigation-toggle__button--active"]=f,a);a=(d={},d["esri-navigation-toggle__button--active"]=!f,d);d=c?-1:0;c=this.messages.toggle;return e.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",g),onclick:this._toggle,onkeydown:this._toggle,tabIndex:d,"aria-label":c,title:c},e.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",
b)},e.tsx("span",{class:"esri-icon-pan"})),e.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--rotate",a)},e.tsx("span",{class:"esri-icon-rotate"})))};h.prototype._toggle=function(){this.toggle()};f.__decorate([n.property()],h.prototype,"iconClass",void 0);f.__decorate([n.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],h.prototype,"label",void 0);f.__decorate([n.property({value:"vertical"}),e.renderable()],h.prototype,
"layout",null);f.__decorate([n.property(),e.renderable(),e.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],h.prototype,"messages",void 0);f.__decorate([n.aliasOf("viewModel.view"),e.renderable()],h.prototype,"view",void 0);f.__decorate([n.property({type:c}),e.renderable(["viewModel.state","viewModel.navigationMode"])],h.prototype,"viewModel",void 0);f.__decorate([n.aliasOf("viewModel.toggle")],h.prototype,"toggle",null);f.__decorate([e.accessibleHandler()],h.prototype,"_toggle",
null);return h=f.__decorate([n.subclass("esri.widgets.NavigationToggle")],h)}(m)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports tslib ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(t,g,f,n,m,c,e){return function(g){function h(b){b=g.call(this,b)||this;b._handles=new m;b.navigationMode="pan";b.view=null;b.toggle=b.toggle.bind(b);return b}f.__extends(h,g);h.prototype.initialize=
function(){this._handles.add(c.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};h.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(h.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});h.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};h.prototype._setNavigationMode=
function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};f.__decorate([e.property({dependsOn:["view.ready"],readOnly:!0})],h.prototype,"state",null);f.__decorate([e.property()],h.prototype,"navigationMode",void 0);f.__decorate([e.property()],h.prototype,"view",void 0);f.__decorate([e.property()],h.prototype,"toggle",null);return h=f.__decorate([e.subclass("esri.widgets.NavigationToggleViewModel")],h)}(n)})},"esri/widgets/Zoom":function(){define("require exports tslib ../core/accessorSupport/decorators ./Widget ./support/widget ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),
function(t,g,f,n,m,c,e,h){return function(g){function b(a,b){a=g.call(this,a,b)||this;a.iconClass="esri-icon-zoom-in-magnifying-glass";a.label=void 0;a.messages=null;a.view=null;a.viewModel=new h;return a}f.__extends(b,g);b.prototype.initialize=function(){this._zoomInButton=new e({action:this.zoomIn,iconClass:"esri-icon-plus"});this._zoomOutButton=new e({action:this.zoomOut,iconClass:"esri-icon-minus"})};b.prototype.destroy=function(){this._zoomInButton.destroy();this._zoomOutButton.destroy();this._zoomOutButton=
this._zoomInButton=null};Object.defineProperty(b.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});b.prototype.render=function(){var a,b=this.viewModel,e=(a={},a["esri-zoom--horizontal"]="horizontal"===this.layout,a);this._zoomInButton.enabled="ready"===b.state&&b.canZoomIn;this._zoomOutButton.enabled="ready"===b.state&&b.canZoomOut;this._zoomInButton.title=this.messages.zoomIn;this._zoomOutButton.title=this.messages.zoomOut;
return c.tsx("div",{class:this.classes("esri-zoom esri-widget",e)},this._zoomInButton.render(),this._zoomOutButton.render())};b.prototype.zoomIn=function(){};b.prototype.zoomOut=function(){};f.__decorate([n.property()],b.prototype,"iconClass",void 0);f.__decorate([n.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);f.__decorate([n.property({value:"vertical"}),c.renderable()],b.prototype,"layout",null);f.__decorate([n.property(),c.renderable(),c.messageBundle("esri/widgets/Zoom/t9n/Zoom")],
b.prototype,"messages",void 0);f.__decorate([n.aliasOf("viewModel.view"),c.renderable()],b.prototype,"view",void 0);f.__decorate([n.property({type:h}),c.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],b.prototype,"viewModel",void 0);f.__decorate([n.aliasOf("viewModel.zoomIn")],b.prototype,"zoomIn",null);f.__decorate([n.aliasOf("viewModel.zoomOut")],b.prototype,"zoomOut",null);return b=f.__decorate([n.subclass("esri.widgets.Zoom")],b)}(m)})},"esri/widgets/Zoom/IconButton":function(){define("require exports tslib ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(t,g,f,n,m,c){return function(e){function g(){var c=null!==e&&e.apply(this,arguments)||this;c.enabled=!0;c.iconClass="";c.title="";return c}f.__extends(g,e);g.prototype.render=function(){var e,b,a=this.enabled?0:-1,d=(e={},e["esri-disabled"]=!this.enabled,e["esri-interactive"]=this.enabled,e);e=(b={},b[this.iconClass]=!!this.iconClass,b);return c.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",d),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",
tabIndex:a,title:this.title},c.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",e)}),c.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};g.prototype._triggerAction=function(){this.action.call(this)};f.__decorate([n.property()],g.prototype,"action",void 0);f.__decorate([n.property(),c.renderable()],g.prototype,"enabled",void 0);f.__decorate([n.property(),c.renderable()],g.prototype,"iconClass",void 0);f.__decorate([n.property(),c.renderable()],g.prototype,
"title",void 0);f.__decorate([c.accessibleHandler()],g.prototype,"_triggerAction",null);return g=f.__decorate([n.subclass("esri.widgets.IconButton")],g)}(m)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports tslib ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(t,g,f,n,m,c,e,h){return function(g){function b(a){a=g.call(this,a)||this;a.canZoomIn=!1;a.canZoomOut=!1;a.zoomIn=a.zoomIn.bind(a);
a.zoomOut=a.zoomOut.bind(a);return a}f.__extends(b,g);b.prototype.destroy=function(){this.view=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new e({view:a}):"3d"===a.type&&(this._zoomConditions=new h({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});b.prototype.zoomIn=
function(){if(this.canZoomIn){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():m.ignoreAbortErrors(a.goTo({zoomFactor:2}))}};b.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():m.ignoreAbortErrors(a.goTo({zoomFactor:.5}))}};f.__decorate([c.property()],b.prototype,"_zoomConditions",void 0);f.__decorate([c.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],b.prototype,"canZoomIn",void 0);f.__decorate([c.property({aliasOf:"_zoomConditions.canZoomOut",
readOnly:!0})],b.prototype,"canZoomOut",void 0);f.__decorate([c.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"state",null);f.__decorate([c.property()],b.prototype,"view",null);f.__decorate([c.property()],b.prototype,"zoomIn",null);f.__decorate([c.property()],b.prototype,"zoomOut",null);return b=f.__decorate([c.subclass("esri.widgets.Zoom.ZoomViewModel")],b)}(n)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define(["require","exports","tslib","../../core/Accessor","../../core/accessorSupport/decorators"],
function(t,g,f,n,m){return function(c){function e(){return null!==c&&c.apply(this,arguments)||this}f.__extends(e,c);Object.defineProperty(e.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),e=this.get("view.constraints.effectiveMaxScale");return 0===e||c>e},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||
this.get("view.scale"),e=this.get("view.constraints.effectiveMinScale");return 0===e||c<e},enumerable:!0,configurable:!0});f.__decorate([m.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],e.prototype,"canZoomIn",null);f.__decorate([m.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],e.prototype,"canZoomOut",null);f.__decorate([m.property()],
e.prototype,"view",void 0);return e=f.__decorate([m.subclass("esri.widgets.Zoom.ZoomConditions2D")],e)}(n)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define(["require","exports","tslib","../../core/Accessor","../../core/accessorSupport/decorators"],function(t,g,f,n,m){return function(c){function e(){return null!==c&&c.apply(this,arguments)||this}f.__extends(e,c);Object.defineProperty(e.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,
"canZoomOut",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});f.__decorate([m.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"canZoomIn",null);f.__decorate([m.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"canZoomOut",null);f.__decorate([m.property()],e.prototype,"view",void 0);return e=f.__decorate([m.subclass("esri.widgets.Zoom.ZoomConditions3D")],e)}(n)})},"esri/webmap/background/ColorBackground":function(){define("require exports tslib ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(t,g,f,n,m,c,e){return function(g){function h(a){a=g.call(this,a)||this;a.color=new n([0,0,0,1]);return a}f.__extends(h,g);b=h;h.prototype.clone=function(){return new b(c.clone({color:this.color}))};var b;f.__decorate([e.property({type:n,json:{write:!0}})],h.prototype,"color",void 0);return h=b=f.__decorate([e.subclass("esri.webmap.background.ColorBackground")],h)}(m.JSONSupport)})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require","exports","./math/mat4"],function(t,g,f){Object.defineProperty(g,
"__esModule",{value:!0});g.mat4=f})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(t,g,f,n){function m(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function c(b,a,d){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],m=a[5],n=a[6],q=a[7],x=a[8],w=a[9],y=a[10],t=a[11],A=a[12],E=a[13],I=a[14];a=a[15];var D=d[0],B=d[1],H=d[2],G=d[3];b[0]=D*c+B*h+H*x+G*A;
b[1]=D*e+B*m+H*w+G*E;b[2]=D*f+B*n+H*y+G*I;b[3]=D*g+B*q+H*t+G*a;D=d[4];B=d[5];H=d[6];G=d[7];b[4]=D*c+B*h+H*x+G*A;b[5]=D*e+B*m+H*w+G*E;b[6]=D*f+B*n+H*y+G*I;b[7]=D*g+B*q+H*t+G*a;D=d[8];B=d[9];H=d[10];G=d[11];b[8]=D*c+B*h+H*x+G*A;b[9]=D*e+B*m+H*w+G*E;b[10]=D*f+B*n+H*y+G*I;b[11]=D*g+B*q+H*t+G*a;D=d[12];B=d[13];H=d[14];G=d[15];b[12]=D*c+B*h+H*x+G*A;b[13]=D*e+B*m+H*w+G*E;b[14]=D*f+B*n+H*y+G*I;b[15]=D*g+B*q+H*t+G*a;return b}function e(b,a,d){var c=a[0],e=a[1],f=a[2],g=a[3],h=c+c,m=e+e,n=f+f;a=c*h;var q=c*
m,c=c*n,x=e*m,e=e*n,f=f*n,h=g*h,m=g*m,g=g*n;b[0]=1-(x+f);b[1]=q+g;b[2]=c-m;b[3]=0;b[4]=q-g;b[5]=1-(a+f);b[6]=e+h;b[7]=0;b[8]=c+m;b[9]=e-h;b[10]=1-(a+x);b[11]=0;b[12]=d[0];b[13]=d[1];b[14]=d[2];b[15]=1;return b}function h(b,a,d){b[0]=a[0]-d[0];b[1]=a[1]-d[1];b[2]=a[2]-d[2];b[3]=a[3]-d[3];b[4]=a[4]-d[4];b[5]=a[5]-d[5];b[6]=a[6]-d[6];b[7]=a[7]-d[7];b[8]=a[8]-d[8];b[9]=a[9]-d[9];b[10]=a[10]-d[10];b[11]=a[11]-d[11];b[12]=a[12]-d[12];b[13]=a[13]-d[13];b[14]=a[14]-d[14];b[15]=a[15]-d[15];return b}Object.defineProperty(g,
"__esModule",{value:!0});g.copy=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};g.set=function(b,a,d,c,e,f,g,h,m,n,q,x,w,y,t,A,E){b[0]=a;b[1]=d;b[2]=c;b[3]=e;b[4]=f;b[5]=g;b[6]=h;b[7]=m;b[8]=n;b[9]=q;b[10]=x;b[11]=w;b[12]=y;b[13]=t;b[14]=A;b[15]=E;return b};g.identity=m;g.transpose=function(b,a){if(b===a){var d=a[1],c=a[2],e=a[3],f=a[6],g=a[7],h=a[11];
b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=d;b[6]=a[9];b[7]=a[13];b[8]=c;b[9]=f;b[11]=a[14];b[12]=e;b[13]=g;b[14]=h}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};g.invert=function(b,a){var d=a[0],c=a[1],e=a[2],f=a[3],g=a[4],h=a[5],m=a[6],n=a[7],q=a[8],x=a[9],w=a[10],y=a[11],t=a[12],A=a[13],E=a[14];a=a[15];var I=d*h-c*g,D=d*m-e*g,B=d*n-f*g,H=c*m-e*h,G=c*n-f*h,Q=e*n-
f*m,M=q*A-x*t,O=q*E-w*t,R=q*a-y*t,P=x*E-w*A,L=x*a-y*A,J=w*a-y*E,N=I*J-D*L+B*P+H*R-G*O+Q*M;if(!N)return null;N=1/N;b[0]=(h*J-m*L+n*P)*N;b[1]=(e*L-c*J-f*P)*N;b[2]=(A*Q-E*G+a*H)*N;b[3]=(w*G-x*Q-y*H)*N;b[4]=(m*R-g*J-n*O)*N;b[5]=(d*J-e*R+f*O)*N;b[6]=(E*B-t*Q-a*D)*N;b[7]=(q*Q-w*B+y*D)*N;b[8]=(g*L-h*R+n*M)*N;b[9]=(c*R-d*L-f*M)*N;b[10]=(t*G-A*B+a*I)*N;b[11]=(x*B-q*G-y*I)*N;b[12]=(h*O-g*P-m*M)*N;b[13]=(d*P-c*O+e*M)*N;b[14]=(A*D-t*H-E*I)*N;b[15]=(q*H-x*D+w*I)*N;return b};g.adjoint=function(b,a){var c=a[0],
e=a[1],f=a[2],g=a[3],h=a[4],r=a[5],m=a[6],n=a[7],q=a[8],x=a[9],w=a[10],y=a[11],t=a[12],A=a[13],E=a[14];a=a[15];b[0]=r*(w*a-y*E)-x*(m*a-n*E)+A*(m*y-n*w);b[1]=-(e*(w*a-y*E)-x*(f*a-g*E)+A*(f*y-g*w));b[2]=e*(m*a-n*E)-r*(f*a-g*E)+A*(f*n-g*m);b[3]=-(e*(m*y-n*w)-r*(f*y-g*w)+x*(f*n-g*m));b[4]=-(h*(w*a-y*E)-q*(m*a-n*E)+t*(m*y-n*w));b[5]=c*(w*a-y*E)-q*(f*a-g*E)+t*(f*y-g*w);b[6]=-(c*(m*a-n*E)-h*(f*a-g*E)+t*(f*n-g*m));b[7]=c*(m*y-n*w)-h*(f*y-g*w)+q*(f*n-g*m);b[8]=h*(x*a-y*A)-q*(r*a-n*A)+t*(r*y-n*x);b[9]=-(c*
(x*a-y*A)-q*(e*a-g*A)+t*(e*y-g*x));b[10]=c*(r*a-n*A)-h*(e*a-g*A)+t*(e*n-g*r);b[11]=-(c*(r*y-n*x)-h*(e*y-g*x)+q*(e*n-g*r));b[12]=-(h*(x*E-w*A)-q*(r*E-m*A)+t*(r*w-m*x));b[13]=c*(x*E-w*A)-q*(e*E-f*A)+t*(e*w-f*x);b[14]=-(c*(r*E-m*A)-h*(e*E-f*A)+t*(e*m-f*r));b[15]=c*(r*w-m*x)-h*(e*w-f*x)+q*(e*m-f*r);return b};g.determinant=function(b){var a=b[0],c=b[1],e=b[2],f=b[3],g=b[4],h=b[5],r=b[6],m=b[7],n=b[8],q=b[9],x=b[10],w=b[11],y=b[12],t=b[13],A=b[14];b=b[15];return(a*h-c*g)*(x*b-w*A)-(a*r-e*g)*(q*b-w*t)+(a*
m-f*g)*(q*A-x*t)+(c*r-e*h)*(n*b-w*y)-(c*m-f*h)*(n*A-x*y)+(e*m-f*r)*(n*t-q*y)};g.multiply=c;g.translate=function(b,a,c){var d=c[0],e=c[1];c=c[2];var f=void 0,g=void 0,h=void 0,m=void 0,n=void 0,q=void 0,x=void 0,w=void 0,y=void 0,t=void 0,A=void 0,E=void 0;a===b?(b[12]=a[0]*d+a[4]*e+a[8]*c+a[12],b[13]=a[1]*d+a[5]*e+a[9]*c+a[13],b[14]=a[2]*d+a[6]*e+a[10]*c+a[14],b[15]=a[3]*d+a[7]*e+a[11]*c+a[15]):(f=a[0],g=a[1],h=a[2],m=a[3],n=a[4],q=a[5],x=a[6],w=a[7],y=a[8],t=a[9],A=a[10],E=a[11],b[0]=f,b[1]=g,b[2]=
h,b[3]=m,b[4]=n,b[5]=q,b[6]=x,b[7]=w,b[8]=y,b[9]=t,b[10]=A,b[11]=E,b[12]=f*d+n*e+y*c+a[12],b[13]=g*d+q*e+t*c+a[13],b[14]=h*d+x*e+A*c+a[14],b[15]=m*d+w*e+E*c+a[15]);return b};g.scale=function(b,a,c){var d=c[0],e=c[1];c=c[2];b[0]=a[0]*d;b[1]=a[1]*d;b[2]=a[2]*d;b[3]=a[3]*d;b[4]=a[4]*e;b[5]=a[5]*e;b[6]=a[6]*e;b[7]=a[7]*e;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};g.rotate=function(b,a,c,e){var d=e[0],f=e[1];e=e[2];var k=Math.sqrt(d*d+
f*f+e*e),g=void 0,h=void 0,m=void 0,q=void 0,x=void 0,w=void 0,t=void 0,C=void 0,A=void 0,E=void 0,I=void 0,D=void 0,B=void 0,H=void 0,G=void 0,Q=void 0,M=void 0,O=void 0,R=void 0,P=void 0,L=void 0,J=void 0,h=g=void 0;if(k<n.EPSILON)return null;k=1/k;d*=k;f*=k;e*=k;g=Math.sin(c);h=Math.cos(c);m=1-h;q=a[0];x=a[1];w=a[2];t=a[3];C=a[4];A=a[5];E=a[6];I=a[7];D=a[8];B=a[9];H=a[10];G=a[11];Q=d*d*m+h;M=f*d*m+e*g;O=e*d*m-f*g;R=d*f*m-e*g;P=f*f*m+h;L=e*f*m+d*g;J=d*e*m+f*g;g=f*e*m-d*g;h=e*e*m+h;b[0]=q*Q+C*M+
D*O;b[1]=x*Q+A*M+B*O;b[2]=w*Q+E*M+H*O;b[3]=t*Q+I*M+G*O;b[4]=q*R+C*P+D*L;b[5]=x*R+A*P+B*L;b[6]=w*R+E*P+H*L;b[7]=t*R+I*P+G*L;b[8]=q*J+C*g+D*h;b[9]=x*J+A*g+B*h;b[10]=w*J+E*g+H*h;b[11]=t*J+I*g+G*h;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};g.rotateX=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[4],f=a[5],g=a[6],h=a[7],m=a[8],n=a[9],q=a[10],x=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=e*c+m*d;b[5]=f*c+n*
d;b[6]=g*c+q*d;b[7]=h*c+x*d;b[8]=m*c-e*d;b[9]=n*c-f*d;b[10]=q*c-g*d;b[11]=x*c-h*d;return b};g.rotateY=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[0],f=a[1],g=a[2],h=a[3],m=a[8],n=a[9],q=a[10],x=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=e*c-m*d;b[1]=f*c-n*d;b[2]=g*c-q*d;b[3]=h*c-x*d;b[8]=e*d+m*c;b[9]=f*d+n*c;b[10]=g*d+q*c;b[11]=h*d+x*c;return b};g.rotateZ=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[0],f=a[1],
g=a[2],h=a[3],m=a[4],n=a[5],q=a[6],x=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=e*c+m*d;b[1]=f*c+n*d;b[2]=g*c+q*d;b[3]=h*c+x*d;b[4]=m*c-e*d;b[5]=n*c-f*d;b[6]=q*c-g*d;b[7]=x*c-h*d;return b};g.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};g.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];
b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromRotation=function(b,a,c){var d=c[0],e=c[1];c=c[2];var f=Math.sqrt(d*d+e*e+c*c),g=void 0,h=void 0,m=void 0;if(f<n.EPSILON)return null;f=1/f;d*=f;e*=f;c*=f;g=Math.sin(a);h=Math.cos(a);m=1-h;b[0]=d*d*m+h;b[1]=e*d*m+c*g;b[2]=c*d*m-e*g;b[3]=0;b[4]=d*e*m-c*g;b[5]=e*e*m+h;b[6]=c*e*m+d*g;b[7]=0;b[8]=d*c*m+e*g;b[9]=e*c*m-d*g;b[10]=c*c*m+h;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromXRotation=function(b,
a){var c=Math.sin(a);a=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=c;b[7]=0;b[8]=0;b[9]=-c;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromYRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=0;b[2]=-c;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=c;b[9]=0;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromZRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=c;b[2]=0;b[3]=0;b[4]=-c;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=
0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.fromRotationTranslation=e;g.fromQuat2=function(b,a){var c=q,f=-a[0],g=-a[1],h=-a[2],m=a[3],n=a[4],z=a[5],v=a[6],t=a[7],x=f*f+g*g+h*h+m*m;0<x?(c[0]=2*(n*m+t*f+z*h-v*g)/x,c[1]=2*(z*m+t*g+v*f-n*h)/x,c[2]=2*(v*m+t*h+n*g-z*f)/x):(c[0]=2*(n*m+t*f+z*h-v*g),c[1]=2*(z*m+t*g+v*f-n*h),c[2]=2*(v*m+t*h+n*g-z*f));e(b,a,c);return b};var q=f.create();g.getTranslation=function(b,a){b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};g.getScaling=function(b,a){var c=a[0],e=a[1],
f=a[2],g=a[4],h=a[5],m=a[6],n=a[8],q=a[9];a=a[10];b[0]=Math.sqrt(c*c+e*e+f*f);b[1]=Math.sqrt(g*g+h*h+m*m);b[2]=Math.sqrt(n*n+q*q+a*a);return b};g.getRotation=function(b,a){var c=a[0]+a[5]+a[10],e=0;0<c?(e=2*Math.sqrt(c+1),b[3]=.25*e,b[0]=(a[6]-a[9])/e,b[1]=(a[8]-a[2])/e,b[2]=(a[1]-a[4])/e):a[0]>a[5]&&a[0]>a[10]?(e=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/e,b[0]=.25*e,b[1]=(a[1]+a[4])/e,b[2]=(a[8]+a[2])/e):a[5]>a[10]?(e=2*Math.sqrt(1+a[5]-a[0]-a[10]),b[3]=(a[8]-a[2])/e,b[0]=(a[1]+a[4])/e,b[1]=
.25*e,b[2]=(a[6]+a[9])/e):(e=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/e,b[0]=(a[8]+a[2])/e,b[1]=(a[6]+a[9])/e,b[2]=.25*e);return b};g.fromRotationTranslationScale=function(b,a,c,e){var d=a[0],f=a[1],g=a[2],k=a[3],h=d+d,m=f+f,n=g+g;a=d*h;var q=d*m,d=d*n,w=f*m,f=f*n,g=g*n,h=k*h,m=k*m,k=k*n,n=e[0],t=e[1];e=e[2];b[0]=(1-(w+g))*n;b[1]=(q+k)*n;b[2]=(d-m)*n;b[3]=0;b[4]=(q-k)*t;b[5]=(1-(a+g))*t;b[6]=(f+h)*t;b[7]=0;b[8]=(d+m)*e;b[9]=(f-h)*e;b[10]=(1-(a+w))*e;b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];
b[15]=1;return b};g.fromRotationTranslationScaleOrigin=function(b,a,c,e,f){var d=a[0],g=a[1],k=a[2],h=a[3],m=d+d,p=g+g,n=k+k;a=d*m;var q=d*p,t=d*n,d=g*p,g=g*n,C=k*n,k=h*m,p=h*p,A=h*n,E=e[0],I=e[1],n=e[2];e=f[0];h=f[1];f=f[2];var m=(1-(d+C))*E,D=(q+A)*E,E=(t-p)*E,q=(q-A)*I,C=(1-(a+C))*I,I=(g+k)*I,t=(t+p)*n,g=(g-k)*n;a=(1-(a+d))*n;b[0]=m;b[1]=D;b[2]=E;b[3]=0;b[4]=q;b[5]=C;b[6]=I;b[7]=0;b[8]=t;b[9]=g;b[10]=a;b[11]=0;b[12]=c[0]+e-(m*e+q*h+t*f);b[13]=c[1]+h-(D*e+C*h+g*f);b[14]=c[2]+f-(E*e+I*h+a*f);b[15]=
1;return b};g.fromQuat=function(b,a){var c=a[0],e=a[1],f=a[2];a=a[3];var g=c+c,h=e+e,m=f+f,c=c*g,n=e*g,e=e*h,q=f*g,t=f*h,f=f*m,g=a*g,h=a*h;a*=m;b[0]=1-e-f;b[1]=n+a;b[2]=q-h;b[3]=0;b[4]=n-a;b[5]=1-c-f;b[6]=t+g;b[7]=0;b[8]=q+h;b[9]=t-g;b[10]=1-c-e;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.frustum=function(b,a,c,e,f,g,h){var d=1/(c-a),k=1/(f-e),l=1/(g-h);b[0]=2*g*d;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*g*k;b[6]=0;b[7]=0;b[8]=(c+a)*d;b[9]=(f+e)*k;b[10]=(h+g)*l;b[11]=-1;b[12]=0;b[13]=0;b[14]=h*
g*2*l;b[15]=0;return b};g.perspective=function(b,a,c,e,f){a=1/Math.tan(a/2);var d=void 0;b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=f&&Infinity!==f?(d=1/(e-f),b[10]=(f+e)*d,b[14]=2*f*e*d):(b[10]=-1,b[14]=-2*e);return b};g.perspectiveFromFieldOfView=function(b,a,c,e){var d=Math.tan(a.upDegrees*Math.PI/180),f=Math.tan(a.downDegrees*Math.PI/180),g=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var k=2/(g+
a),h=2/(d+f);b[0]=k;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=h;b[6]=0;b[7]=0;b[8]=-((g-a)*k*.5);b[9]=(d-f)*h*.5;b[10]=e/(c-e);b[11]=-1;b[12]=0;b[13]=0;b[14]=e*c/(c-e);b[15]=0;return b};g.ortho=function(b,a,c,e,f,g,h){var d=1/(a-c),k=1/(e-f),l=1/(g-h);b[0]=-2*d;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*k;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*l;b[11]=0;b[12]=(a+c)*d;b[13]=(f+e)*k;b[14]=(h+g)*l;b[15]=1;return b};g.lookAt=function(b,a,c,e){var d=void 0,f=void 0,g=void 0,k=void 0,h=void 0,q=void 0,t=void 0,x=void 0,w=
void 0,y=void 0,C=a[0],A=a[1];a=a[2];g=e[0];k=e[1];e=e[2];t=c[0];x=c[1];c=c[2];if(Math.abs(C-t)<n.EPSILON&&Math.abs(A-x)<n.EPSILON&&Math.abs(a-c)<n.EPSILON)return m(b);t=C-t;x=A-x;w=a-c;y=1/Math.sqrt(t*t+x*x+w*w);t*=y;x*=y;w*=y;d=k*w-e*x;f=e*t-g*w;g=g*x-k*t;(y=Math.sqrt(d*d+f*f+g*g))?(y=1/y,d*=y,f*=y,g*=y):g=f=d=0;k=x*g-w*f;h=w*d-t*g;q=t*f-x*d;(y=Math.sqrt(k*k+h*h+q*q))?(y=1/y,k*=y,h*=y,q*=y):q=h=k=0;b[0]=d;b[1]=k;b[2]=t;b[3]=0;b[4]=f;b[5]=h;b[6]=x;b[7]=0;b[8]=g;b[9]=q;b[10]=w;b[11]=0;b[12]=-(d*C+
f*A+g*a);b[13]=-(k*C+h*A+q*a);b[14]=-(t*C+x*A+w*a);b[15]=1;return b};g.targetTo=function(b,a,c,e){var d=a[0],f=a[1];a=a[2];var g=e[0],k=e[1],h=e[2];e=d-c[0];var m=f-c[1];c=a-c[2];var n=e*e+m*m+c*c;0<n&&(n=1/Math.sqrt(n),e*=n,m*=n,c*=n);var q=k*c-h*m,h=h*e-g*c,g=g*m-k*e,n=q*q+h*h+g*g;0<n&&(n=1/Math.sqrt(n),q*=n,h*=n,g*=n);b[0]=q;b[1]=h;b[2]=g;b[3]=0;b[4]=m*g-c*h;b[5]=c*q-e*g;b[6]=e*h-m*q;b[7]=0;b[8]=e;b[9]=m;b[10]=c;b[11]=0;b[12]=d;b[13]=f;b[14]=a;b[15]=1;return b};g.str=function(b){return"mat4("+
b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};g.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};g.add=function(b,a,
c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+c[5];b[6]=a[6]+c[6];b[7]=a[7]+c[7];b[8]=a[8]+c[8];b[9]=a[9]+c[9];b[10]=a[10]+c[10];b[11]=a[11]+c[11];b[12]=a[12]+c[12];b[13]=a[13]+c[13];b[14]=a[14]+c[14];b[15]=a[15]+c[15];return b};g.subtract=h;g.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;b[6]=a[6]*c;b[7]=a[7]*c;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12]*c;b[13]=a[13]*c;b[14]=a[14]*
c;b[15]=a[15]*c;return b};g.multiplyScalarAndAdd=function(b,a,c,e){b[0]=a[0]+c[0]*e;b[1]=a[1]+c[1]*e;b[2]=a[2]+c[2]*e;b[3]=a[3]+c[3]*e;b[4]=a[4]+c[4]*e;b[5]=a[5]+c[5]*e;b[6]=a[6]+c[6]*e;b[7]=a[7]+c[7]*e;b[8]=a[8]+c[8]*e;b[9]=a[9]+c[9]*e;b[10]=a[10]+c[10]*e;b[11]=a[11]+c[11]*e;b[12]=a[12]+c[12]*e;b[13]=a[13]+c[13]*e;b[14]=a[14]+c[14]*e;b[15]=a[15]+c[15]*e;return b};g.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&
b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};g.equals=function(b,a){var c=b[0],e=b[1],f=b[2],g=b[3],h=b[4],m=b[5],q=b[6],v=b[7],t=b[8],x=b[9],w=b[10],y=b[11],C=b[12],A=b[13],E=b[14];b=b[15];var I=a[0],D=a[1],B=a[2],H=a[3],G=a[4],Q=a[5],M=a[6],O=a[7],R=a[8],P=a[9],L=a[10],J=a[11],N=a[12],V=a[13],Y=a[14];a=a[15];return Math.abs(c-I)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(e-D)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(D))&&
Math.abs(f-B)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(g-H)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(H))&&Math.abs(h-G)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(G))&&Math.abs(m-Q)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(Q))&&Math.abs(q-M)<=n.EPSILON*Math.max(1,Math.abs(q),Math.abs(M))&&Math.abs(v-O)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(t-R)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(R))&&Math.abs(x-P)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(P))&&Math.abs(w-
L)<=n.EPSILON*Math.max(1,Math.abs(w),Math.abs(L))&&Math.abs(y-J)<=n.EPSILON*Math.max(1,Math.abs(y),Math.abs(J))&&Math.abs(C-N)<=n.EPSILON*Math.max(1,Math.abs(C),Math.abs(N))&&Math.abs(A-V)<=n.EPSILON*Math.max(1,Math.abs(A),Math.abs(V))&&Math.abs(E-Y)<=n.EPSILON*Math.max(1,Math.abs(E),Math.abs(Y))&&Math.abs(b-a)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};g.mul=c;g.sub=h})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(t,g,f){Object.defineProperty(g,
"__esModule",{value:!0});g.mat4f32=f})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(t,g){function f(){var f=new Float32Array(16);f[0]=1;f[5]=1;f[10]=1;f[15]=1;return f}Object.defineProperty(g,"__esModule",{value:!0});g.create=f;g.clone=function(f){var g=new Float32Array(16);g[0]=f[0];g[1]=f[1];g[2]=f[2];g[3]=f[3];g[4]=f[4];g[5]=f[5];g[6]=f[6];g[7]=f[7];g[8]=f[8];g[9]=f[9];g[10]=f[10];g[11]=f[11];g[12]=f[12];g[13]=f[13];g[14]=f[14];g[15]=f[15];return g};
g.fromValues=function(f,g,c,e,h,q,b,a,d,k,p,l,u,r,t,v){var m=new Float32Array(16);m[0]=f;m[1]=g;m[2]=c;m[3]=e;m[4]=h;m[5]=q;m[6]=b;m[7]=a;m[8]=d;m[9]=k;m[10]=p;m[11]=l;m[12]=u;m[13]=r;m[14]=t;m[15]=v;return m};g.createView=function(f,g){return new Float32Array(f,g,16)};g.IDENTITY=f()})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.vec3f32=f})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(t,g){function f(){return new Float32Array(3)}function n(c,b,a){var d=new Float32Array(3);d[0]=c;d[1]=b;d[2]=a;return d}function m(){return n(1,1,1)}function c(){return n(1,0,0)}function e(){return n(0,1,0)}function h(){return n(0,0,1)}Object.defineProperty(g,"__esModule",{value:!0});g.create=f;g.clone=function(c){var b=new Float32Array(3);b[0]=c[0];b[1]=c[1];b[2]=c[2];return b};g.fromValues=n;g.createView=function(c,b){return new Float32Array(c,b,3)};g.zeros=function(){return f()};
g.ones=m;g.unitX=c;g.unitY=e;g.unitZ=h;g.ZEROS=f();g.ONES=m();g.UNIT_X=c();g.UNIT_Y=e();g.UNIT_Z=h()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.vec4f32=f})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(t,g){function f(){return new Float32Array(4)}function n(b,a,c,e){var d=new Float32Array(4);d[0]=b;d[1]=a;d[2]=c;d[3]=e;return d}
function m(){return n(1,1,1,1)}function c(){return n(1,0,0,0)}function e(){return n(0,1,0,0)}function h(){return n(0,0,1,0)}function q(){return n(0,0,0,1)}Object.defineProperty(g,"__esModule",{value:!0});g.create=f;g.clone=function(b){var a=new Float32Array(4);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};g.fromValues=n;g.createView=function(b,a){return new Float32Array(b,a,4)};g.zeros=function(){return f()};g.ones=m;g.unitX=c;g.unitY=e;g.unitZ=h;g.unitW=q;g.ZEROS=f();g.ONES=m();g.UNIT_X=c();
g.UNIT_Y=e();g.UNIT_Z=h();g.UNIT_W=q()})},"esri/widgets/Legend/support/clusterUtils":function(){define(["require","exports","../../../core/arrayUtils","../../../renderers/visualVariables/SizeVariable"],function(t,g,f,n){Object.defineProperty(g,"__esModule",{value:!0});var m=function(c,e){c=c.featuresTilingScheme.getClosestInfoForScale(c.scale).level;return e.levels?e.levels[c]:null};g.getClusterSizeVariable=function(c,e){if(!(c&&"visualVariables"in c&&c.visualVariables))return null;c=f.find(c.visualVariables,
function(c){return"size"===c.type});return(e=m(e,c))?new n({field:c.field,minSize:e[2].size,minDataValue:e[2].value,maxSize:e[3].size,maxDataValue:e[3].value}):null}})},"esri/widgets/Legend/support/colorRampUtils":function(){define("require exports tslib ../../../Color ../../../core/promiseUtils ./utils @dojo/framework/shim/Promise".split(" "),function(t,g,f,n,m,c){function e(a,b){var d=[],e=a.length-1;5===a.length?d.push(0,2,4):d.push(0,e);return a.map(function(a,f){return-1<d.indexOf(f)?c.createStopLabel(a,
f,e,b):null})}function h(b,c,e){void 0===e&&(e=a);return f.__awaiter(this,void 0,void 0,function(){var a,d;return f.__generator(this,function(f){switch(f.label){case 0:return a=new n(e),[4,new Promise(function(a,b){t(["../../../renderers/visualVariables/support/visualVariableUtils"],a,b)})];case 1:return d=f.sent().getOpacity(c,b),null!=d&&(a.a=d),[2,a]}})})}function q(a,c){a=b(a,c);var d=a.startIndex,e=a.endIndex;if(d===e)return c[d].color;c=n.blendColors(c[d].color,c[e].color,a.weight);return new n(c)}
function b(a,b){var c=0,d=b.length-1;b.some(function(b,e){if(a<b.value)return d=e,!0;c=e;return!1});return{startIndex:c,endIndex:d,weight:(a-b[c].value)/(b[d].value-b[c].value)}}Object.defineProperty(g,"__esModule",{value:!0});var a=new n([64,64,64]);g.getRampStops=function(a,b,c){return f.__awaiter(this,void 0,void 0,function(){var d,g,k,n,p,q,x,w,y=this;return f.__generator(this,function(l){switch(l.label){case 0:d=!1;g=[];k=[];a.stops&&(n=a.stops,g=n.map(function(a){return a.value}),(d=n.some(function(a){return!!a.label}))&&
(k=n.map(function(a){return a.label})));p=g[0];q=g[g.length-1];if(null==p&&null==q)return[2,null];x=d?null:e(g,c);return[4,m.all(g.map(function(c,e){return f.__awaiter(y,void 0,void 0,function(){var g,l,m;return f.__generator(this,function(f){switch(f.label){case 0:return"opacity"!==a.type?[3,2]:[4,h(c,a,b)];case 1:return l=f.sent(),[3,4];case 2:return[4,new Promise(function(a,b){t(["../../../renderers/visualVariables/support/visualVariableUtils"],a,b)})];case 3:l=f.sent().getColor(a,c),f.label=4;
case 4:return g=l,m=d?k[e]:x[e],[2,{value:c,color:g,label:m}]}})})}))];case 1:return w=l.sent(),[2,w.reverse()]}})})};g.getRampStopsForPointCloud=function(a){var b=!1,c=[],d=[],c=a.map(function(a){return a.value});(b=a.some(function(a){return!!a.label}))&&(d=a.map(function(a){return a.label}));var f=c[c.length-1];if(null==c[0]&&null==f)return null;var g=b?null:e(c,!1);return c.map(function(c,e){var f=q(c,a);return{value:c,color:f,label:b?d[e]:g[e]}}).reverse()};g.getColorFromPointCloudStops=q;g.getStrectchRampStops=
function(a,b){var c=[];if(a&&"multipart"===a.type)a.colorRamps.reverse().forEach(function(d,e){0===e?c.push({value:b.max,color:new n(d.toColor),label:"high"}):c.push({value:null,color:new n(d.toColor),label:""});e===a.colorRamps.length-1?c.push({value:b.min,color:new n(d.fromColor),label:"low"}):c.push({value:null,color:new n(d.fromColor),label:""})});else{var d=void 0,e=void 0;a&&"algorithmic"===a.type?(d=a.fromColor,e=a.toColor):(d=[0,0,0,1],e=[255,255,255,1]);c=[{value:b.max,color:new n(e),label:"high"},
{value:b.min,color:new n(d),label:"low"}]}return c}})},"esri/widgets/Legend/support/utils":function(){define(["require","exports","../../../intl/date","../../../renderers/support/numberUtils"],function(t,g,f,n){Object.defineProperty(g,"__esModule",{value:!0});var m=f.convertDateFormatToIntlOptions("short-date");g.createStopLabel=function(c,e,g,q){var b="";0===e?b="\x3c ":e===g&&(b="\x3e ");e=null;e=q?f.formatDate(c,m):n.format(c);return b+e};g.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"]})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["require","exports","../../../renderers/support/HeatmapColorStop"],
function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.getHeatmapRampStops=function(g){g=g.colorStops;var m=g.length-1;if(g&&g[0]){var c=g[m];c&&1!==c.ratio&&(g=g.slice(0),g.push(new f({ratio:1,color:c.color})),m++)}return g.map(function(c,f){var e="";0===f?e="low":f===m&&(e="high");return{color:c.color,label:e,ratio:c.ratio}}).reverse()}})},"esri/widgets/Legend/support/relationshipRampUtils":function(){define(["require","exports","../../../symbols/support/gfxUtils","../../../symbols/support/previewSymbol3D"],
function(t,g,f,n){function m(b){if(b){var a=b.type;return-1<a.indexOf("3d")?n.getSymbolLayerFill(b.symbolLayers.getItemAt(0)):"simple-line"===a||"simple-marker"===b.type&&("x"===b.style||"cross"===b.style)?(b=f.getStroke(b))&&b.color:f.getFill(b)}}function c(b,a){var c=a.HH.label,e=a.LL.label,f=a.HL.label;a=a.LH.label;switch(b){case "HH":return{top:c,bottom:e,left:f,right:a};case "HL":return{top:f,bottom:a,left:e,right:c};case "LL":return{top:e,bottom:c,left:a,right:f};case "LH":return{top:a,bottom:f,
left:c,right:e};default:return{top:c,bottom:e,left:f,right:a}}}function e(b){var a=h[b];b&&null==a&&(a=h.HH);return a||0}Object.defineProperty(g,"__esModule",{value:!0});var h={HH:315,HL:45,LL:135,LH:225},q={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};g.getRelationshipRampElement=function(b){var a=b.focus,d=b.numClasses,f=q[d],g={};b.infos.forEach(function(a){g[a.value]=
{label:a.label,fill:m(a.symbol)}});b=[];for(var h=0;h<d;h++){for(var n=[],r=0;r<d;r++)n.push(g[f[h][r]].fill);b.push(n)}f=c(a,g);return{type:"relationship-ramp",numClasses:d,focus:a,colors:b,labels:f,rotation:e(a)}};g.getRotationAngleForFocus=e})},"esri/widgets/Legend/support/sizeRampUtils":function(){define("require exports tslib ../../../symbols ../../../core/promiseUtils ../../../renderers/support/numberUtils ../../../symbols/support/utils ./utils @dojo/framework/shim/Promise".split(" "),function(t,
g,f,n,m,c,e,h){function q(a,b){var c=a.length-1;return a.map(function(a,d){return h.createStopLabel(a,d,c,b)})}function b(b,c){var e=null,f=null;"simple"===b.type?e=b.symbol:"class-breaks"===b.type?(e=(b=b.classBreakInfos)&&b[0]&&b[0].symbol,f=1<b.length):"unique-value"===b.type&&(e=(b=b.uniqueValueInfos)&&b[0]&&b[0].symbol,f=1<b.length);if(!e||a(e))return null;e=e.clone();if(c||f)-1<e.type.indexOf("3d")?d(e):(c=e,-1!==c.type.indexOf("line")?c.color=F:(c.color=z,"simple-marker"===c.type&&(c.outline=
{color:F,width:1.5})));return e}function a(a){return a?n.isSymbol3D(a)?a.symbolLayers?a.symbolLayers.some(function(a){return a&&"fill"===a.type}):!1:-1!==a.type.indexOf("fill"):!1}function d(a){e.isVolumetricSymbol(a)||("line-3d"===a.type?a.symbolLayers.forEach(function(a){a.material={color:F}}):a.symbolLayers.forEach(function(a){"icon"!==a.type||a.resource&&a.resource.href?a.material={color:v}:(a.material={color:z},a.outline={color:F,size:1.5})}))}function k(a,b,d,e){return f.__awaiter(this,void 0,
void 0,function(){var g,h,k,m,n;return f.__generator(this,function(f){switch(f.label){case 0:return[4,new Promise(function(a,b){t(["../../../renderers/visualVariables/support/visualVariableUtils"],a,b)})];case 1:h=(g=f.sent().getSizeRangeAtScale(a,d,e))&&p(g);if(!g&&!h)return[2,void 0];k=h.map(function(b){var c=g.minSize,d=g.maxSize,e=a.minDataValue,f=a.maxDataValue;return b<=c?e:b>=d?f:(b-c)/(d-c)*(f-e)+e});k=c.round(k);m=1;f.label=2;case 2:return m<k.length-1?[4,l(a,b,k[m],k[m-1],d,e)]:[3,5];case 3:if(n=
f.sent())k[m]=n[0],h[m]=n[1];f.label=4;case 4:return m++,[3,2];case 5:return[2,k]}})})}function p(a){var b=a.minSize;a=(a.maxSize-b)/4;for(var c=[],d=0;5>d;d++)c.push(b+a*d);return c}function l(a,b,d,e,g,h){return f.__awaiter(this,void 0,void 0,function(){var k,l,m,n,p,r,q,t,v,w,z,x,y,A,C,F,E,T,W,K,X,ca;return f.__generator(this,function(f){switch(f.label){case 0:return[4,u(a,b,d,g,h)];case 1:return k=f.sent(),[4,u(a,b,e,g,h)];case 2:l=f.sent(),m=c.numDigits(d),n=m.fractional,p=20,r=m.integer,t=q=
null,0<d&&1>d&&(q=Math.pow(10,n),d*=q,r=c.numDigits(d).integer),v=r-1,f.label=3;case 3:if(!(0<=v))return[3,8];w=Math.pow(10,v);z=Math.floor(d/w)*w;x=Math.ceil(d/w)*w;null!=q&&(z/=q,x/=q);y=(z+x)/2;ca=c.round([z,y,x],{indexes:[1]});y=ca[1];return[4,u(a,b,z,g,h)];case 4:return A=f.sent(),[4,u(a,b,x,g,h)];case 5:return C=f.sent(),[4,u(a,b,y,g,h)];case 6:F=f.sent();E=c.percentChange(k,A,l,null);T=c.percentChange(k,C,l,null);W=c.percentChange(k,F,l,null);K=E.previous<=p;X=T.previous<=p;K&&X&&(E.previous<=
T.previous?(K=!0,X=!1):(X=!0,K=!1));K?t=[z,A]:X?t=[x,C]:W.previous<=p&&(t=[y,F]);if(t)return[3,8];f.label=7;case 7:return v--,[3,3];case 8:return[2,t]}})})}function u(a,b,c,d,e){return f.__awaiter(this,void 0,void 0,function(){var g;return f.__generator(this,function(f){switch(f.label){case 0:return[4,new Promise(function(a,b){t(["../../../renderers/visualVariables/support/visualVariableUtils"],a,b)})];case 1:return g=f.sent().getSize,[2,g(a,c,{scale:d,view:e,shape:"simple-marker"===b.type?b.style:
null})]}})})}function r(a,b){a=a.clone();if(n.isSymbol3D(a))e.isVolumetricSymbol(a)||a.symbolLayers.forEach(function(a){"fill"!==a.type&&(a.size=b)});else if("esri.symbols.SimpleMarkerSymbol"===a.declaredClass)a.size=b;else if("esri.symbols.PictureMarkerSymbol"===a.declaredClass){var c=a.width,d=a.height;a.height=b;a.width=c/d*b}else"esri.symbols.SimpleLineSymbol"===a.declaredClass?a.width=b:"esri.symbols.TextSymbol"===a.declaredClass&&a.font&&(a.font.size=b);return a}Object.defineProperty(g,"__esModule",
{value:!0});g.REAL_WORLD_MAX_SIZE=30;g.REAL_WORLD_MIN_SIZE=12;var z=[255,255,255],v=[200,200,200],F=[128,128,128];g.getRampStops=function(a,d,h,l,n,p){return f.__awaiter(this,void 0,void 0,function(){var t,v,z,w,y,x,A,C,F,E,L,J,N,V,Y,U,S,T=this;return f.__generator(this,function(B){switch(B.label){case 0:v=(t=d.legendOptions)&&t.customValues;z=b(a,h);w=!!z;y=!!v;x=null!=d.minSize&&null!=d.maxSize;A=d.stops&&1<d.stops.length;C=!!d.target;if(!w||!(y||x||A&&!C))return[2,void 0];F=e.isVolumetricSymbol(z);
J=L=E=null;if(!F||A)return[3,1];L=c.round([d.minDataValue,d.maxDataValue]);return[3,4];case 1:return(N=v)?[3,3]:[4,k(d,z,l,n)];case 2:N=B.sent(),B.label=3;case 3:L=N,B.label=4;case 4:!L&&A&&(L=d.stops.map(function(a){return a.value}),(E=d.stops.some(function(a){return!!a.label}))&&(J=d.stops.map(function(a){return a.label})));F&&L&&2<L.length&&(L=[L[0],L[L.length-1]]);if(!L)return[2,null];V=[g.REAL_WORLD_MIN_SIZE,g.REAL_WORLD_MAX_SIZE];Y=e.getSymbolOutlineSize(z);U=E?null:q(L,p);return[4,m.all(L.map(function(a,
b){return f.__awaiter(T,void 0,void 0,function(){var c,e,g,h;return f.__generator(this,function(f){switch(f.label){case 0:if(!F)return[3,1];g=V[b];return[3,3];case 1:return[4,u(d,z,a,l,n)];case 2:g=f.sent(),f.label=3;case 3:return c=g,e=r(z,c),h=E?J[b]:U[b],[2,{value:a,symbol:e,label:h,size:c,outlineSize:Y}]}})})}))];case 5:return S=B.sent(),[2,S.reverse()]}})})}})},"esri/widgets/Legend/styles/Card":function(){define("require exports tslib ../../../intl ../../../core/Handles ../../../core/screenUtils ../../../core/accessorSupport/decorators ../../../symbols/support/svgUtils ../../Widget ./support/utils ../support/styleUtils ../../support/widget".split(" "),
function(t,g,f,n,m,c,e,h,q,b,a,d){var k=window.devicePixelRatio;return function(g){function l(a,b){a=g.call(this,a,b)||this;a._handles=new m;a._hasIndicators=!1;a._selectedSectionName=null;a._sectionNames=[];a._sectionMap=new Map;a.activeLayerInfos=null;a.layout="stack";a.messages=null;a.messagesCommon=null;a.type="card";a.view=null;return a}f.__extends(l,g);l.prototype.initialize=function(){var a=this;this.own([this.watch("activeLayerInfos",function(b){a._handles.removeAll();a._watchForSectionChanges(b)})])};
l.prototype.destroy=function(){this._handles.destroy();this._handles=null};l.prototype.render=function(){var a,b=this;this._hasIndicators="auto"===this.layout&&768>=this.view.container.clientWidth||"stack"===this.layout;var c=this.activeLayerInfos,e=c&&c.toArray().map(function(a){return b._renderLegendForLayer(a)}).filter(function(a){return!!a});this._hasIndicators?this._selectedSectionName&&-1!==this._sectionNames.indexOf(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&
this._sectionNames[0]):this._selectedSectionName=null;var f=this._sectionNames.length,c=this._sectionNames.map(function(a,c){var e;c=n.substitute(b.messagesCommon.pagination.pageText,{index:c+1,total:f});return d.tsx("div",{key:a,"aria-label":c,title:c,tabIndex:0,onclick:b._selectSection,onkeydown:b._selectSection,bind:b,class:b.classes("esri-legend--card__carousel-indicator",(e={},e["esri-legend--card__carousel-indicator--activated"]=b._selectedSectionName===a,e)),"data-section-name":a})}),c=this._hasIndicators&&
1<f?d.tsx("div",{class:"esri-legend--card__carousel-indicator-container",key:"carousel-navigation"},c):null,e=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):e&&e.length?e:null,g=(a={},a["esri-legend--stacked"]=this._hasIndicators,a);return d.tsx("div",{class:this.classes("esri-legend--card",g)},c,e?e:d.tsx("div",{class:"esri-legend--card__message"},this.messages.noLegend))};l.prototype._selectSection=function(a){if(a=a.target.getAttribute("data-section-name"))this._selectedSectionName=
a};l.prototype._watchForSectionChanges=function(a){var b=this;this._generateSectionNames();a&&(a.forEach(function(a){var c="activeLayerInfo-"+a.layer.uid+"-version-change";b._handles.remove(c);b._watchForSectionChanges(a.children);b._handles.add(a.watch("version",function(){return b._generateSectionNames()}),c)}),this._handles.remove("activeLayerInfos-collection-change"),this._handles.add(a.on("change",function(){return b._watchForSectionChanges(a)}),"activeLayerInfos-collection-change"))};l.prototype._generateSectionNames=
function(){this._sectionNames.length=0;this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)};l.prototype._generateSectionNamesForActiveLayerInfo=function(a){var b=this;a.children.forEach(this._generateSectionNamesForActiveLayerInfo,this);a.legendElements&&a.legendElements.forEach(function(c,d){b._sectionNames.push("esri-legend--card__"+a.layer.uid+"-type-"+c.type+"-"+d)})};l.prototype._renderLegendForLayer=function(a){var b,c=this;if(!a.ready)return null;
if(a.children.length)return b=a.children.map(function(a){return c._renderLegendForLayer(a)}).toArray(),d.tsx("div",{key:a.layer.uid,class:this.classes("esri-legend--card__service","esri-legend--card__group-layer")},d.tsx("div",{class:"esri-legend--card__service-caption-container"},a.title),b);var e=a.legendElements;if(e&&!e.length)return null;var f=e.some(function(a){return"relationship-ramp"===a.type}),e=e.map(function(b,d){return c._renderLegendForElement(b,a,d,f)}).filter(function(a){return!!a});
if(!e.length)return null;var g=(b={},b["esri-legend--card__group-layer-child"]=!!a.parent,b);return d.tsx("div",{key:a.layer.uid,class:this.classes("esri-legend--card__service",g)},d.tsx("div",{class:"esri-legend--card__service-caption-container"},d.tsx("div",{class:"esri-legend--card__service-caption-text"},a.title)),d.tsx("div",{class:"esri-legend--card__service-content"},e))};l.prototype._renderLegendForElement=function(c,e,f,g){var h,k=this;void 0===g&&(g=!1);var l="color-ramp"===c.type,m="opacity-ramp"===
c.type,n="size-ramp"===c.type,p=e.layer,r=c.title,q=null;"string"===typeof r?q=r:r&&(q=a.getTitle(this.messages,r,l||m),q=r.title?r.title+" ("+q+")":q);f="esri-legend--card__"+p.uid+"-type-"+c.type+"-"+f;r=this._hasIndicators?d.tsx("div",null,d.tsx("h3",{class:this.classes("esri-widget__heading","esri-legend--card__carousel-title")},e.title),d.tsx("h4",{class:this.classes("esri-widget__heading","esri-legend--card__layer-caption")},q)):q?d.tsx("h4",{class:this.classes("esri-widget__heading","esri-legend--card__layer-caption")},
q):null;q=null;"symbol-table"===c.type?(n=c.infos.map(function(a,b){return k._renderLegendForElementInfo(a,e,c.legendType,b)}).filter(function(a){return!!a}),n.length&&(p=n[0].properties.classes&&n[0].properties.classes["esri-legend--card__symbol-row"],g=(h={},h["esri-legend--card__label-container"]=!p&&!g,h["esri-legend--card__relationship-label-container"]=g,h),q=d.tsx("div",{key:f,class:"esri-legend--card__section"},r,d.tsx("div",{class:this.classes(g)},n)))):"color-ramp"===c.type||"opacity-ramp"===
c.type||"heatmap-ramp"===c.type?q=d.tsx("div",{key:f,class:"esri-legend--card__section"},r,this._renderLegendForRamp(c,p.opacity)):n?q=d.tsx("div",{key:f,class:"esri-legend--card__section"},r,this._renderSizeRamp(c,p.opacity)):"relationship-ramp"===c.type&&(q=d.tsx("div",{key:f,class:this.classes("esri-legend--card__section","esri-legend--card__relationship-section")},r,b.renderRelationshipRamp(c,this.id,p.opacity)));if(!q)return null;this._sectionMap.set(f,q);return q};l.prototype._renderLegendForElementInfo=
function(b,c,e,f){var g,h,k,l,m,n=c.layer;if(b.type)return this._renderLegendForElement(b,c,f);c=a.isImageryStretchedLegend(n,e);if(b.symbol&&b.preview){if(-1===b.symbol.type.indexOf("simple-fill")){if(!b.label)return d.tsx("div",{key:f,bind:b.preview,afterCreate:a.attachToNode});l=(g={},g["esri-legend--card__symbol-cell"]=this._hasIndicators,g);return d.tsx("div",{key:f,class:this.classes("esri-legend--card__layer-row",(h={},h["esri-legend--card__symbol-row"]=this._hasIndicators,h))},d.tsx("div",
{class:this.classes(l),bind:b.preview,afterCreate:a.attachToNode}),d.tsx("div",{class:this.classes("esri-legend--card__image-label",(k={},k["esri-legend--card__label-cell"]=this._hasIndicators,k))},a.getTitle(this.messages,b.label,!1)||""))}k=h=g=255;c=0;var p=e=255,r=255,q=0,u=b.symbol.color&&b.symbol.color.a,t=b.symbol.outline&&b.symbol.outline.color&&b.symbol.outline.color.a;u&&(g=b.symbol.color.r,h=b.symbol.color.g,k=b.symbol.color.b,c=b.symbol.color.a*n.opacity);t&&(e=b.symbol.outline.color.r,
p=b.symbol.outline.color.g,r=b.symbol.outline.color.b,q=b.symbol.outline.color.a*n.opacity);l=(n=null!==(m=null===(l=b.symbol.color)||void 0===l?void 0:l.isBright)&&void 0!==m?m:!0)?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return d.tsx("div",{key:f,class:"esri-legend--card__layer-row"},d.tsx("div",{class:"esri-legend--card__label-element",styles:{background:u?"rgba("+g+", "+h+", "+k+", "+c+")":"none",color:n?"black":"white",textShadow:"-1px -1px 0 "+l+",\n                                              1px -1px 0 "+
l+",\n                                              -1px 1px 0 "+l+",\n                                              1px 1px 0 "+l,border:t?"1px solid rgba("+e+", "+p+", "+r+", "+q+")":"none"}}," ",b.label," "))}if(b.src)return l=this._renderImage(b,n,c),d.tsx("div",{key:f,class:"esri-legend--card__layer-row"},l,d.tsx("div",{class:"esri-legend--card__image-label"},b.label||""))};l.prototype._renderImage=function(b,c,e){var f,g=b.label,h=b.src,k=b.opacity;e=(f={},f["esri-legend--card__imagery-layer-image--stretched"]=
e,f["esri-legend--card__symbol"]=!e,f);c={opacity:""+(null!=k?k:c.opacity)};return d.tsx("img",{alt:a.getTitle(this.messages,g,!1),src:h,border:0,width:b.width,height:b.height,class:this.classes(e),styles:c})};l.prototype._renderSizeRampLines=function(b){b=b.infos;var e=b[0],f=b[b.length-1],g=e.symbol;b=this._hasIndicators;var e=c.pt2px(e.size+e.outlineSize)*k,f=c.pt2px(f.size+f.outlineSize)*k,h=b?e:e+50*k,l=b?e/2+50*k:e,m;g?-1<g.type.indexOf("3d")?(m=g.symbolLayers&&g.symbolLayers.length)?(m=g.symbolLayers.getItemAt(m-
1).get("resource.primitive"),m="triangle"===m||"cone"===m||"tetrahedron"===m):m=void 0:m="triangle"===g.style:m=void 0;if(g)if(-1<g.type.indexOf("3d")){var n=g.symbolLayers&&g.symbolLayers.length;n?(g=g.symbolLayers.getItemAt(n-1),g=g.resource&&g.resource.primitive,g="circle"===g||"cross"===g||"kite"===g||"sphere"===g||"cube"===g||"diamond"===g):g=void 0}else g=g.style,g="circle"===g||"diamond"===g||"cross"===g;else g=void 0;n=document.createElement("canvas");n.width=h;n.height=l;n.style.width=n.width/
k+"px";n.style.height=n.height/k+"px";var p=n.getContext("2d");if(b){p.beginPath();var q=h/2-f/2;p.moveTo(0,0);p.lineTo(q,l);q=h/2+f/2;p.moveTo(h,0);p.lineTo(q,l)}else p.beginPath(),p.moveTo(0,l/2-f/2),p.lineTo(h,0),p.moveTo(0,l/2+f/2),p.lineTo(h,l);p.strokeStyle="#ddd";p.stroke();return d.tsx("div",{bind:n,afterCreate:a.attachToNode,styles:b?{display:"flex",marginTop:"-"+(m?0:g?e/2:0)+"px",marginBottom:"-"+(m?f:g?f/2:0)+"px"}:{display:"flex",marginRight:"-"+(m?0:g?e/2:0)+"px",marginLeft:"-"+(m?0:
g?f/2:0)+"px"}})};l.prototype._renderSizeRamp=function(b,c){var e,f=b.infos,g=f[0].label,h=f[f.length-1].label,k=f[0].preview,f=f[f.length-1].preview,l=this._hasIndicators,m={"flex-direction":l?"column":"row-reverse"};k&&(k=k.cloneNode(!0),k.style.display="flex");f&&(f=f.cloneNode(!0),f.style.display="flex");c={opacity:null!=c?""+c:""};return d.tsx("div",{class:this.classes("esri-legend--card__layer-row",(e={},e["esri-legend--card__size-ramp-row"]=l,e))},d.tsx("div",{class:"esri-legend--card__ramp-label"},
l?g:h),d.tsx("div",{class:"esri-legend--card__size-ramp-container",styles:m},d.tsx("div",{bind:k,afterCreate:a.attachToNode,class:"esri-legend--card__size-ramp-preview",styles:c}),this._renderSizeRampLines(b),d.tsx("div",{bind:f,afterCreate:a.attachToNode,class:"esri-legend--card__size-ramp-container",styles:c})),d.tsx("div",{class:"esri-legend--card__ramp-label"},l?h:g))};l.prototype._renderLegendForRamp=function(a,b){var c=a.infos,e="heatmap-ramp"===a.type,f=c.length-1,g=2<f&&!e?25*f:100,k=g+20,
l=c.slice(0).reverse();l.forEach(function(a,b){a.offset=e?a.ratio:b/f});var m=l.length-1;a=(a=0!==l.length%2&&l[l.length/2|0])&&d.tsx("div",{class:"esri-legend--card__interval-separators-container"},d.tsx("div",{class:"esri-legend--card__interval-separator"},"|"),d.tsx("div",{class:"esri-legend--card__ramp-label"},a.label));var n=c[c.length-1].label,c=c[0].label,p=null;null!=b&&(p="opacity: "+b);b=h.renderSVG([[{shape:{type:"path",path:"M0 12.5 L10 0 L10 25 Z"},fill:l[0].color,stroke:{width:0}},{shape:{type:"rect",
x:10,y:0,width:g,height:25},fill:{type:"linear",x1:10,y1:0,x2:g+10,y2:0,colors:l},stroke:{width:0}},{shape:{type:"path",path:"M"+(g+10)+" 0 L"+k+" 12.5 L"+(g+10)+" 25 Z"},fill:l[m].color,stroke:{width:0}}]],k,25);g=this.messages;return d.tsx("div",{class:"esri-legend--card__layer-row"},d.tsx("div",{class:"esri-legend--card__ramp-label"},e?g[n]:n),d.tsx("div",{class:"esri-legend--card__symbol-container"},d.tsx("div",{style:p},b),a),d.tsx("div",{class:"esri-legend--card__ramp-label"},e?g[c]:c))};f.__decorate([d.renderable(),
e.property()],l.prototype,"activeLayerInfos",void 0);f.__decorate([e.property()],l.prototype,"layout",void 0);f.__decorate([e.property(),d.renderable(),d.messageBundle("esri/widgets/Legend/t9n/Legend")],l.prototype,"messages",void 0);f.__decorate([e.property(),d.renderable(),d.messageBundle("esri/t9n/common")],l.prototype,"messagesCommon",void 0);f.__decorate([e.property({readOnly:!0})],l.prototype,"type",void 0);f.__decorate([e.property()],l.prototype,"view",void 0);f.__decorate([d.accessibleHandler()],
l.prototype,"_selectSection",null);return l=f.__decorate([e.subclass("esri.widgets.Legend.styles.Card")],l)}(q)})},"esri/widgets/Legend/styles/support/utils":function(){define(["require","exports","../../../../symbols/support/svgUtils","../../../support/widget"],function(t,g,f,n){function m(c,e,f){var g=f+"_arrowStart";f+="_arrowEnd";c="left"===c;var b={markerStart:null,markerEnd:null};switch(e){case "HL":c?b.markerStart="url(#"+f+")":b.markerEnd="url(#"+g+")";break;case "LL":b.markerStart="url(#"+
f+")";break;case "LH":c?b.markerEnd="url(#"+g+")":b.markerStart="url(#"+f+")";break;default:b.markerEnd="url(#"+g+")"}return b}Object.defineProperty(g,"__esModule",{value:!0});g.renderRelationshipRamp=function(c,e,g){var h=c.labels,b=!!c.focus,a=void 0;void 0===a&&(a=60);var d=c.focus,k=c.numClasses,p=c.colors,l=c.rotation;c=!!d;var u=Math.sqrt(Math.pow(a,2)+Math.pow(a,2))+(c?0:5),r=null;null!=g&&(r="opacity: "+g);g=[];for(var t=[],v=[],F=(a||75)/k,x=0;x<k;x++)for(var w=x*F,y=0;y<k;y++){var C=y*F,
A=f.generateFillAttributes(p[x][y]),E=f.generateStrokeAttributes(null),C={type:"rect",x:C,y:w,width:F,height:F};g.push(f.renderDef(A));t.push(f.renderShape(C,A.fill,E,null));v.push(f.getBoundingBox(C))}k=null;c||(k="margin: -15px -15px -18px -15px");p=m("left",d,e);d=m("right",d,e);v=f.computeBBox(v);l=f.getTransformMatrix(v,u,u,0,!1,l);v=f.getTransformMatrix(v,u,u,0,!1,c?-45:null);e=n.tsx("div",{style:r,class:c?"esri-relationship-ramp--diamond__middle-column--ramp":"esri-relationship-ramp--square__table-cell"},
n.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:u,height:u,style:k},n.tsx("defs",null,n.tsx("marker",{id:e+"_arrowStart",markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},n.tsx("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),n.tsx("marker",{id:e+"_arrowEnd",markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},n.tsx("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555",
"stroke-width":"1"})),g),n.tsx("g",{transform:l},t),n.tsx("g",{transform:v},n.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":p.markerStart,"marker-end":p.markerEnd,x1:-10,y1:a-15,x2:-10,y2:15}),n.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":d.markerStart,"marker-end":d.markerEnd,x1:15,y1:a+10,x2:a-15,y2:a+10}))));return b?n.tsx("div",{class:"esri-relationship-ramp--diamond__container"},n.tsx("div",{class:"esri-relationship-ramp--diamond__left-column"},
h.left),n.tsx("div",{class:"esri-relationship-ramp--diamond__middle-column"},n.tsx("div",{class:"esri-relationship-ramp--diamond__middle-column--label"},h.top),e,n.tsx("div",{class:"esri-relationship-ramp--diamond__middle-column--label"},h.bottom)),n.tsx("div",{class:"esri-relationship-ramp--diamond__right-column"},h.right)):n.tsx("div",{class:"esri-relationship-ramp--square__table"},n.tsx("div",{class:"esri-relationship-ramp--square__table-row"},n.tsx("div",{class:n.classes("esri-relationship-ramp--square__table-cell",
"esri-relationship-ramp--square__table-label","esri-relationship-ramp--square__table-label--right-bottom")},h.left),n.tsx("div",{class:"esri-relationship-ramp--square__table-cell"}),n.tsx("div",{class:n.classes("esri-relationship-ramp--square__table-cell","esri-relationship-ramp--square__table-label","esri-relationship-ramp--square__table-label--left-bottom")},h.top)),n.tsx("div",{class:"esri-relationship-ramp--square__table-row"},n.tsx("div",{class:"esri-relationship-ramp--square__table-cell"}),
e,n.tsx("div",{class:"esri-relationship-ramp--square__table-cell"})),n.tsx("div",{class:"esri-relationship-ramp--square__table-row"},n.tsx("div",{class:n.classes("esri-relationship-ramp--square__table-cell","esri-relationship-ramp--square__table-label","esri-relationship-ramp--square__table-label--right-top")},h.bottom),n.tsx("div",{class:"esri-relationship-ramp--square__table-cell"}),n.tsx("div",{class:n.classes("esri-relationship-ramp--square__table-cell","esri-relationship-ramp--square__table-label",
"esri-relationship-ramp--square__table-label--left-top")},h.right)))}})},"esri/widgets/Legend/support/styleUtils":function(){define(["require","exports","../../../intl"],function(t,g,f){Object.defineProperty(g,"__esModule",{value:!0});g.attachToNode=function(f){f.appendChild(this)};g.getTitle=function(g,m,c){if(m){if("string"===typeof m)return m;if("value"in m||"unit"in m)return f.substitute(g.dotValue,m);if("colorName"in m||"bandName"in m)return g[m.colorName]+": "+(g[m.bandName]||m.bandName);if("showCount"in
m)return m.showCount?g.clusterCountTitle:null;var e=null;c?e=m.ratioPercentTotal?"showRatioPercentTotal":m.ratioPercent?"showRatioPercent":m.ratio?"showRatio":m.normField?"showNormField":m.field?"showField":null:c||(e=m.normField?"showNormField":m.normByPct?"showNormPct":m.field?"showField":null);return e?f.substitute("showField"===e?"{field}":g[e],{field:m.field,normField:m.normField}):null}};g.isRendererTitle=function(f,g){return!g};g.isImageryStretchedLegend=function(f,g){return!!(g&&"Stretched"===
g&&10.3<=f.version&&"esri.layers.ImageryLayer"===f.declaredClass)}})},"esri/widgets/Legend/styles/Classic":function(){define("require exports tslib ../../../intl ../../../core/accessorSupport/decorators ../../Widget ./support/utils ../support/styleUtils ../../support/widget".split(" "),function(t,g,f,n,m,c,e,h,q){return function(b){function a(a,c){a=b.call(this,a,c)||this;a.activeLayerInfos=null;a.messages=null;a.type="classic";return a}f.__extends(a,b);a.prototype.render=function(){var a=this,b=
this.activeLayerInfos,b=b&&b.toArray().map(function(b){return a._renderLegendForLayer(b)}).filter(function(a){return!!a});return q.tsx("div",null,b&&b.length?b:q.tsx("div",{class:"esri-legend__message"},this.messages.noLegend))};a.prototype._renderLegendForLayer=function(a){var b,c=this;if(!a.ready)return null;var d=!!a.children.length,e="esri-legend__"+a.layer.uid+"-version-"+a.version,f=a.title?q.tsx("h3",{class:this.classes("esri-widget__heading","esri-legend__service-label")},a.title):null;if(d)return b=
a.children.map(function(a){return c._renderLegendForLayer(a)}).toArray(),q.tsx("div",{key:e,class:this.classes("esri-legend__service","esri-legend__group-layer")},f,b);if((d=a.legendElements)&&!d.length)return null;d=d.map(function(b){return c._renderLegendForElement(b,a.layer)}).filter(function(a){return!!a});if(!d.length)return null;var g=(b={},b["esri-legend__group-layer-child"]=!!a.parent,b);return q.tsx("div",{key:e,class:this.classes("esri-legend__service",g)},f,q.tsx("div",{class:"esri-legend__layer"},
d))};a.prototype._renderLegendForElement=function(a,b,c){var d,f=this,g="color-ramp"===a.type,k="opacity-ramp"===a.type,m="size-ramp"===a.type,n=null;if("symbol-table"===a.type||m){var p=a.infos.map(function(c){return f._renderLegendForElementInfo(c,b,m,a.legendType)}).filter(function(a){return!!a});p.length&&(n=q.tsx("div",{class:"esri-legend__layer-body"},p))}else"color-ramp"===a.type||"opacity-ramp"===a.type||"heatmap-ramp"===a.type||"stretch-ramp"===a.type?n=this._renderLegendForRamp(a,b.opacity):
"relationship-ramp"===a.type&&(n=e.renderRelationshipRamp(a,this.id,b.opacity));if(!n)return null;var p=a.title,t=null;"string"===typeof p?t=p:p&&(t=h.getTitle(this.messages,p,g||k),t=h.isRendererTitle(p,g||k)&&p.title?p.title+" ("+t+")":t);g=c?"esri-legend__layer-child-table":"esri-legend__layer-table";k=t?q.tsx("div",{class:"esri-legend__layer-caption"},t):null;c=(d={},d["esri-legend__layer-table--size-ramp"]=m||!c,d);return q.tsx("div",{class:this.classes(g,c)},k,n)};a.prototype._renderLegendForRamp=
function(a,b){var c=this,d=a.infos,e="heatmap-ramp"===a.type,f="stretch-ramp"===a.type,g=a.preview;g.className="esri-legend__color-ramp "+("opacity-ramp"===a.type?"esri-legend__opacity-ramp":"");null!=b&&(g.style.opacity=b.toString());a=d.map(function(a){return q.tsx("div",{class:a.label?"esri-legend__ramp-label":null},e?c.messages[a.label]:f?c._getStretchStopLabel(a):a.label)});b={height:g.style.height};return q.tsx("div",{class:"esri-legend__layer-row"},q.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--symbols",
styles:{width:"24px"}},q.tsx("div",{class:"esri-legend__ramps",bind:g,afterCreate:h.attachToNode})),q.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},q.tsx("div",{class:"esri-legend__ramp-labels",styles:b},a)))};a.prototype._getStretchStopLabel=function(a){return a.label?this.messages[a.label]+": "+n.formatNumber(a.value,{style:"decimal"}):""};a.prototype._renderLegendForElementInfo=function(a,b,c,e){var d,f;if(a.type)return this._renderLegendForElement(a,b,!0);var g=null;
e=h.isImageryStretchedLegend(b,e);a.symbol&&a.preview?g=q.tsx("div",{class:"esri-legend__symbol",bind:a.preview,afterCreate:h.attachToNode}):a.src&&(g=this._renderImage(a,b,e));if(!g)return null;b=(d={},d["esri-legend__imagery-layer-info--stretched"]=e,d);c=(f={},f["esri-legend__imagery-layer-info--stretched"]=e,f["esri-legend__size-ramp"]=!e&&c,f);return q.tsx("div",{class:"esri-legend__layer-row"},q.tsx("div",{class:this.classes("esri-legend__layer-cell esri-legend__layer-cell--symbols",c)},g),
q.tsx("div",{class:this.classes("esri-legend__layer-cell esri-legend__layer-cell--info",b)},h.getTitle(this.messages,a.label,!1)||""))};a.prototype._renderImage=function(a,b,c){var d,e=a.label,f=a.src,g=a.opacity;c=(d={},d["esri-legend__imagery-layer-image--stretched"]=c,d["esri-legend__symbol"]=!c,d);b={opacity:""+(null!=g?g:b.opacity)};return q.tsx("img",{alt:h.getTitle(this.messages,e,!1),src:f,border:0,width:a.width,height:a.height,class:this.classes(c),styles:b})};f.__decorate([q.renderable(),
m.property()],a.prototype,"activeLayerInfos",void 0);f.__decorate([m.property(),q.renderable(),q.messageBundle("esri/widgets/Legend/t9n/Legend")],a.prototype,"messages",void 0);f.__decorate([m.property({readOnly:!0})],a.prototype,"type",void 0);return a=f.__decorate([m.subclass("esri.widgets.Legend.styles.Classic")],a)}(c)})},"*noref":1}});
define("require exports tslib ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ../core/accessorSupport/decorators/cast ./Widget ./Legend/LegendViewModel ./Legend/styles/Card ./Legend/styles/Classic ./support/widget".split(" "),function(t,g,f,n,m,c,e,h,q,b,a,d){return function(g){function h(b,c){b=g.call(this,b,c)||this;b._handles=new n;b.activeLayerInfos=null;b.basemapLegendVisible=!1;b.groundLegendVisible=!1;b.keepCacheOnDestroy=!1;b.respectLayerVisibility=!0;b.iconClass="esri-icon-layer-list";
b.label=void 0;b.layerInfos=null;b.messages=null;b.style=new a;b.view=null;b.viewModel=new q;return b}f.__extends(h,g);h.prototype.initialize=function(){var a=this;this.own(m.on(this,"activeLayerInfos","change",function(){return a._refreshActiveLayerInfos(a.activeLayerInfos)}),m.init(this,"style",function(b,c){c&&b!==c&&c.destroy();b&&(b.activeLayerInfos=a.activeLayerInfos,"card"===b.type&&(b.view=a.view))}))};h.prototype.destroy=function(){this._handles.destroy();this._handles=null};h.prototype.castStyle=
function(c){if(c instanceof b||c instanceof a)return c;if("string"===typeof c)return"card"===c?new b:new a;if(c&&"string"===typeof c.type){var d=f.__assign({},c);delete d.type;return new ("card"===c.type?b:a)(d)}return new a};h.prototype.render=function(){return d.tsx("div",{class:this.classes("esri-legend","esri-widget",this.style instanceof a?"esri-widget--panel":null)},this.style.render())};h.prototype._refreshActiveLayerInfos=function(a){var b=this;this._handles.removeAll();a.forEach(function(a){return b._renderOnActiveLayerInfoChange(a)});
this.scheduleRender()};h.prototype._renderOnActiveLayerInfoChange=function(a){var b=this,c=m.init(a,"version",function(){return b.scheduleRender()});this._handles.add(c,"version_"+a.layer.uid);a.children.forEach(function(a){return b._renderOnActiveLayerInfoChange(a)})};f.__decorate([c.aliasOf("viewModel.activeLayerInfos"),d.renderable()],h.prototype,"activeLayerInfos",void 0);f.__decorate([c.aliasOf("viewModel.basemapLegendVisible"),d.renderable()],h.prototype,"basemapLegendVisible",void 0);f.__decorate([c.aliasOf("viewModel.groundLegendVisible"),
d.renderable()],h.prototype,"groundLegendVisible",void 0);f.__decorate([c.aliasOf("viewModel.keepCacheOnDestroy")],h.prototype,"keepCacheOnDestroy",void 0);f.__decorate([c.aliasOf("viewModel.respectLayerVisibility"),d.renderable()],h.prototype,"respectLayerVisibility",void 0);f.__decorate([c.property()],h.prototype,"iconClass",void 0);f.__decorate([c.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],h.prototype,"label",void 0);f.__decorate([c.aliasOf("viewModel.layerInfos"),d.renderable()],
h.prototype,"layerInfos",void 0);f.__decorate([c.property(),d.renderable(),d.messageBundle("esri/widgets/Legend/t9n/Legend")],h.prototype,"messages",void 0);f.__decorate([c.property(),d.renderable()],h.prototype,"style",void 0);f.__decorate([e.cast("style")],h.prototype,"castStyle",null);f.__decorate([c.aliasOf("viewModel.view"),d.renderable()],h.prototype,"view",void 0);f.__decorate([c.property(),d.renderable(["view.size"])],h.prototype,"viewModel",void 0);return h=f.__decorate([c.subclass("esri.widgets.Legend")],
h)}(h)});