// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchResultRenderer":function(){define("require exports tslib ../../core/accessorSupport/decorators ../Widget ./SearchViewModel ../support/widget".split(" "),function(r,f,d,n,l,c,e){return function(h){function p(b,a){b=h.call(this,b,a)||this;b.messages=null;b.showMoreResultsOpen=!1;b.viewModel=null;return b}d.__extends(p,h);p.prototype.render=function(){var b,a=(b={},b["esri-search-result-renderer__more-results--show-more-results"]=this.showMoreResultsOpen,b);
return e.tsx("div",{class:"esri-search-result-renderer esri-widget"},e.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",a)},this.renderSearchResultName(),this.renderMoreResults()))};p.prototype.renderMoreResults=function(){return e.tsx("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())};p.prototype.renderSearchResultName=function(){var b,a=null===(b=this.viewModel)||void 0===
b?void 0:b.selectedResult;return e.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},a&&a.name||"")};p.prototype.renderMoreResultsLists=function(){var b=this,a,g=null===(a=this.viewModel)||void 0===a?void 0:a.results;if(2>this.viewModel.resultCount)return null;a=g.map(function(a){return b.renderMoreResultsList(a)});return e.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},
a)};p.prototype.renderMoreResultsButton=function(){var b=this.messages;return 2>this.viewModel.resultCount?null:e.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},e.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?b.hideMoreResults:b.showMoreResults))};p.prototype.renderMoreResultsHeader=function(b,a){return e.tsx("div",{key:"esri-search-result-renderer__header-"+
a,class:"esri-search-result-renderer__more-results-list-header"},b)};p.prototype.renderMoreResultsList=function(b){var a=this,g,k,c=b.results,d=c.length,h=!!d,p=null===(g=this.viewModel)||void 0===g?void 0:g.selectedResult;g=1===d&&c[0]===p;d=this._getSourceName(b.source,b.sourceIndex);d=1<(null===(k=this.viewModel)||void 0===k?void 0:k.results.length)&&!g?this.renderMoreResultsHeader(d,b.sourceIndex):null;k=h&&c.map(function(b,g){return a.renderMoreResultsListItem(b,g)});k=h&&!g?e.tsx("ul",{key:"esri-search-result-renderer__list-"+
b.sourceIndex},k):null;return h?e.tsx("div",{key:"esri-search-result-renderer__results-"+b.sourceIndex},d,k):null};p.prototype.renderMoreResultsListItem=function(b,a){var g=this.get("viewModel.selectedResult");return b!==g?e.tsx("li",{key:"esri-search-result-renderer__list-item-"+a},e.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":b,onclick:this._selectResultClick,onkeydown:this._selectResultClick},b.name)):null};p.prototype._showMoreResultsClick=function(b){b.preventDefault();
this.showMoreResultsOpen=!this.showMoreResultsOpen;(b=this.get("viewModel.view.popup"))&&b.reposition()};p.prototype._selectResultClick=function(b){b.preventDefault();b=b.currentTarget["data-result"];this.viewModel&&this.viewModel.select(b)};p.prototype._getSourceName=function(b,a){return a===c.ALL_INDEX?this.messages.all:b.name};d.__decorate([n.property(),e.renderable(),e.messageBundle("esri/widgets/Search/t9n/Search")],p.prototype,"messages",void 0);d.__decorate([e.renderable(),n.property()],p.prototype,
"showMoreResultsOpen",void 0);d.__decorate([n.property(),e.renderable(["viewModel.results","viewModel.selectedResult","viewModel.resultCount"])],p.prototype,"viewModel",void 0);d.__decorate([e.accessibleHandler()],p.prototype,"_showMoreResultsClick",null);d.__decorate([e.accessibleHandler()],p.prototype,"_selectResultClick",null);return p=d.__decorate([n.subclass("esri.widgets.Search.SearchResultRenderer")],p)}(l)})},"esri/widgets/Search/SearchViewModel":function(){define("require exports tslib ../../assets ../../Graphic ../../PopupTemplate ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/geolocationUtils ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/Point ../../geometry/SpatialReference ../../intl/locale ../../intl/messages ../../portal/Portal ../../smartMapping/symbology/location ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/GoTo".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g,k,t,m,w,v,q,u,E,y,B,z,A,x,C,H,D,F,I,G,O,K,N,Q,P){function J(a,b){return a.hasOwnProperty(b)&&null!=a[b]&&""!==a[b]}var M=t.getLogger("esri.widgets.Search.SearchViewModel"),L=h.ofType({key:function(a){return a.layer?"layer":"locator"},base:K,typeMap:{layer:G,locator:O}}),S=E.WGS84,T=/<(?:.|\s)*?>/g;return function(b){function e(a){a=b.call(this,a)||this;a._handles=new g;a._gotoController=null;a._searching=null;a.autoNavigate=!0;a.autoSelect=!0;a.defaultPopupTemplate=
null;a.defaultSources=new L;a.defaultSymbol=new x({url:n.getAssetUrl(k("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24});a.includeDefaultSources=!0;a.maxInputLength=128;a.maxResults=6;a.maxSuggestions=6;a.messages=null;a.minSuggestCharacters=1;a.popupEnabled=!0;a.popupTemplate=null;a.portal=z.getDefault();a.resultCount=null;a.resultGraphicEnabled=!0;a.resultGraphic=null;a.results=null;a.selectedSuggestion=null;a.searchAllEnabled=
!0;a.selectedResult=null;a.sources=new L;a.suggestionDelay=150;a.suggestionCount=null;a.suggestions=null;a.suggestionsEnabled=!0;a.view=null;return a}d.__extends(e,b);e.prototype.initialize=function(){var a=this,b=function(){return d.__awaiter(a,void 0,void 0,function(){var a;return d.__generator(this,function(b){switch(b.label){case 0:return[4,B.loadMessageBundle("esri/widgets/Search/t9n/Search")];case 1:return this.messages=a=b.sent(),this.defaultPopupTemplate=new c({title:a.searchResult,content:"{Match_addr}"}),
[2]}})})};b();this._handles.add([v.on(this,["defaultSources","sources"],"change",function(){return a.notifyChange("allSources")}),v.init(this,["includeDefaultSources","view","portal"],function(){return a._update()}),y.onLocaleChange(b)])};e.prototype.destroy=function(){this._abortGoTo();this.clearGraphics();this._handles.destroy();this._handles=null};Object.defineProperty(e.prototype,"activeSource",{get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"activeSourceIndex",{get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(a){void 0===a?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"allPlaceholder",{get:function(){var a;return null===(a=this.messages)||void 0===a?void 0:a.allPlaceholder},set:function(a){a?this._override("allPlaceholder",a):this._clearOverride("allPlaceholder")},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"allSources",{get:function(){var a=this.sources,b=this.defaultSources,g=this.includeDefaultSources,a="function"===typeof g?g.call(null,{sources:a,defaultSources:b}):g?b.concat(a):a,b=this._get("allSources")||new L;b.removeAll();b.addMany(a.filter(Boolean));return b},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"locationEnabled",{get:function(){return this._get("locationEnabled")||a.supported()},set:function(b){if(void 0===
b)this._clearOverride("locationEnabled");else{var g=a.supported();if(b&&!g){var k=new p("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});M.error(k)}this._override("locationEnabled",b&&g)}},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"placeholder",{get:function(){var a=this.activeSourceIndex,b=this.allPlaceholder;return-1===a?b:(a=this.allSources.getItemAt(a))?a.placeholder:""},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,
"searchTerm",{get:function(){return this._get("searchTerm")||""},set:function(a){this._set("searchTerm",a||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==a&&this._set("selectedSuggestion",null);""===a&&this._clear()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"state",{get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,
"updating",{get:function(){return null!=this._updatingPromise},enumerable:!0,configurable:!0});e.prototype.clear=function(){this.searchTerm=""};e.prototype.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};e.prototype.search=function(a,b){var g=this;this.emit("search-start");this.clearGraphics();var k=this._createSuggestionForSearch(a);this._searching=a=this.when().then(function(){return g._getResultsFromSources(k,
b).then(function(a){var b={activeSourceIndex:g.activeSourceIndex,searchTerm:k.text,numResults:0,numErrors:0,errors:[],results:[]};g._formatResponse(b,a,k);a=g._getFirstResult(b.results);var e=(k.location&&a?a.name:k.text).replace(T,"");g._set("searchTerm",e);(k.key&&"number"===typeof k.sourceIndex||k.location)&&g._set("selectedSuggestion",k);g._set("results",b.results);g._set("resultCount",b.results.reduce(function(a,b){return a+b.results.length},0));g.emit("search-complete",b);return g._selectFirstResult(a).then(function(){return b})})}).then(function(a){g._clearSearching();
return a},function(a){g._clearSearching();throw a;});this.notifyChange("state");return a};e.prototype.searchNearby=function(b){var g=this;if(!this.locationEnabled){var k=new p("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});M.error(k);return w.reject(k)}this._searching=k=a.getCurrentPosition().then(function(k){return a.positionToPoint({position:k,view:g.view},b)}).then(function(a){return g.search(a,b)});this.notifyChange("state");k.catch(function(){}).then(function(){return g._clearSearching()});
return k};e.prototype.select=function(a){var b=this;this.clearGraphics();if(!a){var g=new p("select:missing-parameter","Cannot select without a searchResult.",{searchResult:a});M.error(g);return w.reject(g)}var k=this.view,e=J(a,"sourceIndex")?a.sourceIndex:this._getSourceIndexOfResult(a),c=this.allSources.getItemAt(e);if(!c)return g=new p("select:missing-source","Cannot select without a source.",{source:c}),M.error(g),w.reject(g);var g=c instanceof G?this._getLayerSourcePopupTemplate(c):c.popupTemplate,
q=c.resultSymbol||this._getDefaultSymbol(a),d=J(c,"resultGraphicEnabled")?c.resultGraphicEnabled:this.resultGraphicEnabled,t=J(c,"autoNavigate")?c.autoNavigate:this.autoNavigate,h=J(c,"popupEnabled")?c.popupEnabled:this.popupEnabled,u=h?g||this.popupTemplate||this.defaultPopupTemplate:null,v=a.feature;if(!v)return g=new p("select:missing-feature","Cannot select without a feature.",{feature:v}),M.error(g),w.reject(g);var H=v.attributes,E=v.geometry,f=v.layer,y=v.sourceLayer,D=N.getPointFromGeometry(E),
g={layerViewQuery:this._getLayerView(v),elevationQuery:k&&m.isSome(D)?N.getPointWithElevation(D,k).catch(function(){return D}):w.resolve(D)};return w.eachAlways(g).then(function(g){var p=g.layerViewQuery.value,D=g.elevationQuery.value;q instanceof F&&(q.text=a.name);g=k&&t?a.target||a.extent:null;return(m.isSome(g)?b._goToSearchResult(g):w.resolve()).then(function(){var g=p?v:new l({geometry:E,symbol:q,attributes:H,layer:f,sourceLayer:y,popupTemplate:u}),t=h&&b.get("view.popup");(t=t&&g.getEffectivePopupTemplate(t.defaultPopupTemplateEnabled))&&
k.popup.open({features:[g],location:D});p&&I.highlightsSupported(p)&&!t&&b._highlightFeature({graphic:g,layerView:p});!p&&d&&k&&k.graphics.push(g);b._set("selectedResult",a);b._set("resultGraphic",g);b.emit("select-result",{result:a,source:c,sourceIndex:e});return a})})};e.prototype.suggest=function(a,b,g){var k=this,e=a||this.searchTerm;this.emit("suggest-start",{searchTerm:e});return this._suggestTimer(b,g).then(function(){return k._suggestImmediate(e,g).then(function(a){k._set("suggestions",a.results);
k._set("suggestionCount",a.results.reduce(function(a,b){return a+b.results.length},0));k.emit("suggest-complete",a);return a})})};e.prototype.when=function(){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(a){switch(a.label){case 0:return[4,v.whenFalseOnce(this,"updating")];case 1:return a.sent(),[2]}})})};e.prototype._update=function(){return d.__awaiter(this,void 0,void 0,function(){var a,b,g,k,e;return d.__generator(this,function(c){switch(c.label){case 0:a=
this;b=a.portal;g=a.view;if(!this.includeDefaultSources)return[3,2];k=this._updatingPromise=w.eachAlways([null===b||void 0===b?void 0:b.load(),null===g||void 0===g?void 0:g.when()]);if(this.destroyed)return[2];this.notifyChange("updating");return[4,k];case 1:c.sent();if(k!==this._updatingPromise)return[2];c.label=2;case 2:this._updatingPromise=null;this.notifyChange("updating");e=v.whenOnce(this,"messages");if(this.destroyed)return[2];this._handles.add(e);return[4,e];case 3:return c.sent(),this._updateDefaultSources(),
[2]}})})};e.prototype._clearSearching=function(){this._searching=null;this.notifyChange("state")};e.prototype._convertHelperServices=function(){var a=this,b=this.get("portal.helperServices.geocode");return b?b.map(function(b){if(!1!==b.placefinding&&(b=O.fromJSON(b),Q.isArcGISWorldGeocoder(b.get("locator.url"))&&b.set({singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr","City"],placeholder:a.messages.placeholder,defaultZoomScale:2500}),b.singleLineFieldName))return b}).filter(Boolean):
[]};e.prototype._convertApplicationProperties=function(){var a=this,b=this.get("view.map.applicationProperties.viewing.search"),g=this.get("view.map");if(!g||!b)return[];var k=b.hintText;return b.enabled?b.layers.map(function(b){var e=g.findLayerById(b.id);if(e){b=a._getLayerJSON(b);var c=G.fromJSON(b);c.placeholder=k;a._getLayer(e,b).then(function(a){c.layer=a});return c}}).filter(Boolean).toArray():[]};e.prototype._getSubLayer=function(a,b){return a&&a.allSublayers?(a=a.allSublayers.find(function(a){return a.id===
b.subLayer}))?a.createFeatureLayer():w.reject():w.reject()};e.prototype._getLayer=function(a,b){var g=this;if("feature"===a.type||"scene"===a.type)return w.resolve(a);if("map-image"===a.type)return a.load().then(function(){return g._getSubLayer(a,b).catch(function(){var b=new p("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:a});M.error(b);return null})})};e.prototype._getLayerJSON=function(a){return"function"===typeof a.toJSON?a.toJSON():a};e.prototype._updateDefaultSources=
function(){var a=this.defaultSources,b=this.includeDefaultSources;a.removeAll();b&&a.addMany(d.__spreadArrays(this._convertApplicationProperties(),this._convertHelperServices()));this.notifyChange("allSources")};e.prototype._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};e.prototype._clear=function(){this._abortGoTo();this._set("resultCount",null);this._set("results",null);this._set("suggestions",null);this._set("suggestionCount",null);this._set("selectedResult",
null);this._set("selectedSuggestion",null);this.emit("search-clear")};e.prototype._closePopup=function(){var a=this.get("view.popup"),b=this.resultGraphic;if(a&&b){var g=a.selectedFeature;g&&g===b&&a.close()}};e.prototype._suggestTimer=function(a,b){return w.after(null!=a?a:this.suggestionDelay,null,b&&b.signal)};e.prototype._createLocationForSearch=function(a){return a instanceof l?N.getPointFromGeometry(a.geometry):a instanceof u?a:Array.isArray(a)&&2===a.length?new u({longitude:a[0],latitude:a[1]}):
null};e.prototype._createSuggestionForSearch=function(a){if(a&&J(a,"key")&&J(a,"text")&&J(a,"sourceIndex"))return a;var b=this._createLocationForSearch(a),g="string"===typeof a?a:this.searchTerm,k=this.selectedSuggestion,e=this.selectedResult,c=(a=!a&&k&&e)&&k.location;return a&&k.key===e.key&&k.sourceIndex===e.sourceIndex||c?k:{location:m.unwrap(b),text:b?"":g,sourceIndex:null,key:null}};e.prototype._getFirstResult=function(a){var b=null;a&&a.some(function(a){a=a.results[0];var g=!!a;g&&(b=a);return g});
return b};e.prototype._selectFirstResult=function(a){return this.autoSelect&&a?this.select(a):w.resolve()};e.prototype._suggestImmediate=function(a,b){var g=this;return this.when().then(function(){return g._getSuggestionsFromSources(a,b)}).then(function(b){var k={activeSourceIndex:g.activeSourceIndex,searchTerm:a,numResults:0,numErrors:0,errors:[],results:[]};g._formatResponse(k,b);return k})};e.prototype._formatSourceResponse=function(a,b,g){var k=b&&b.value||[];b=b&&b.error;var e=this.allSources.getItemAt(g);
b?(a.errors.push({sourceIndex:g,source:e,error:b}),a.numErrors++):(a.results.push({sourceIndex:g,source:e,results:k}),a.numResults+=k.length)};e.prototype._formatResponse=function(a,b,g){var k=this;if(b)if(-1===a.activeSourceIndex){var e=g&&J(g,"sourceIndex")&&-1!==g.sourceIndex?g.sourceIndex:void 0;b.forEach(function(b,g){k._formatSourceResponse(a,b,void 0!==e?e:g)})}else this._formatSourceResponse(a,b[0],a.activeSourceIndex)};e.prototype._getResultsFromSources=function(a,b){var g=this,k=this.allSources,
e=!a.location&&J(a,"sourceIndex")?a.sourceIndex:this.activeSourceIndex,c=[];if(!k.length)return k=new p("search:no-sources-defined","At least one source is required.",{allSources:k}),M.error(k),w.reject(k);-1===e?k.forEach(function(k,e){c.push(g._getResultsFromSource(a,e,b))}):c.push(this._getResultsFromSource(a,e,b));return w.eachAlways(c)};e.prototype._getSuggestionsFromSources=function(a,b){var g=this,k=this.allSources,e=this.activeSourceIndex,c=[];if(!k.length)return k=new p("suggest:no-sources-defined",
"At least one source is required.",{allSources:k}),M.error(k),w.reject(k);-1===e?k.forEach(function(k,e){c.push(g._getSuggestionsFromSource(a,e,b))}):c.push(this._getSuggestionsFromSource(a,e,b));return w.eachAlways(c)};e.prototype._getResultsFromSource=function(a,b,g){var k=this.allSources.getItemAt(b),e=a.location,e=void 0===e?null:e,c=this.get("view.spatialReference")||S,q=J(k,"maxResults")?k.maxResults:this.maxResults,d=k instanceof G&&J(k,"exactMatch")?k.exactMatch:!1;return k.getResults({view:this.view,
sourceIndex:b,location:e,suggestResult:a,spatialReference:c,exactMatch:d,maxResults:q},g)};e.prototype._getSuggestionsFromSource=function(a,b,g){var k=this.allSources.getItemAt(b),e=J(k,"suggestionsEnabled")?k.suggestionsEnabled:this.suggestionsEnabled,c=a.length,q=J(k,"minSuggestCharacters")?k.minSuggestCharacters:this.minSuggestCharacters;return e&&a.trim()&&c>=q?(e=this.get("view.spatialReference")||S,c=J(k,"maxSuggestions")?k.maxSuggestions:this.maxSuggestions,k.getSuggestions({view:this.view,
sourceIndex:b,suggestTerm:a,spatialReference:e,maxSuggestions:c},g)):w.resolve()};e.prototype.createDefaultSymbol=function(a,b){if("point"===b)return new D({color:a.color,size:a.size,outline:{color:a.outline.color,width:a.outline.width}});if("polyline"===b)return new H({color:a.color,width:a.width});if("polygon"===b)return new C({color:a.color,outline:{color:a.outline.color,width:a.outline.width}})};e.prototype._getLayerSourcePopupTemplate=function(a){var b=a.layer;if(b)return J(a,"popupTemplate")?
a.popupTemplate:b.popupTemplate};e.prototype._getSourceIndexOfResult=function(a){var b=null;this.results.some(function(g){return g.results.some(function(k){return k===a?(b=g.sourceIndex,!0):!1})});return b};e.prototype._goToSearchResult=function(a){return d.__awaiter(this,void 0,void 0,function(){var b,g,k;return d.__generator(this,function(e){switch(e.label){case 0:return b=!!a,this._abortGoTo(),this._gotoController=g=w.createAbortController(),k={target:{target:a},options:{animate:b,signal:g.signal}},
[4,this.callGoTo(k)];case 1:return e.sent(),this._gotoController=null,[2]}})})};e.prototype._getDefaultSymbol=function(a){var b=this.get("view.map.basemap.id");a=m.get(a,"feature","geometry","type");return m.isSome(a)&&(b=(b=A.getSchemes({basemap:b,geometryType:a})||A.getSchemes({basemap:"topo",geometryType:a}))&&b.primaryScheme)?(b.color&&J(b,"opacity")&&(b.color.a=b.opacity),this.createDefaultSymbol(b,a)):this.defaultSymbol};e.prototype._removeHighlight=function(){this._handles.remove("highlight")};
e.prototype._getLayerView=function(a){return d.__awaiter(this,void 0,void 0,function(){var b,g;return d.__generator(this,function(k){switch(k.label){case 0:b=this.view;if(!a||!b)return[2,w.resolve(null)];g=a.layer;return[4,b.when()];case 1:return k.sent(),[2,b.whenLayerView(g)]}})})};e.prototype._highlightFeature=function(a){var b=a.graphic,g=b.attributes,k=b.layer.objectIdField;a=a.layerView.highlight(g&&g[k]||b);this._handles.add(a,"highlight")};e.ALL_INDEX=-1;d.__decorate([q.property({readOnly:!0,
dependsOn:["activeSourceIndex","allSources.length"],value:null})],e.prototype,"activeSource",null);d.__decorate([q.property({dependsOn:["allSources.length","searchAllEnabled"]})],e.prototype,"activeSourceIndex",null);d.__decorate([q.property({dependsOn:["messages"]})],e.prototype,"allPlaceholder",null);d.__decorate([q.property({dependsOn:["defaultSources.length","sources.length","includeDefaultSources"],readOnly:!0})],e.prototype,"allSources",null);d.__decorate([q.property()],e.prototype,"autoNavigate",
void 0);d.__decorate([q.property()],e.prototype,"autoSelect",void 0);d.__decorate([q.property()],e.prototype,"defaultPopupTemplate",void 0);d.__decorate([q.property({readOnly:!0})],e.prototype,"defaultSources",void 0);d.__decorate([q.property()],e.prototype,"defaultSymbol",void 0);d.__decorate([q.property()],e.prototype,"includeDefaultSources",void 0);d.__decorate([q.property()],e.prototype,"locationEnabled",null);d.__decorate([q.property()],e.prototype,"maxInputLength",void 0);d.__decorate([q.property()],
e.prototype,"maxResults",void 0);d.__decorate([q.property()],e.prototype,"maxSuggestions",void 0);d.__decorate([q.property()],e.prototype,"messages",void 0);d.__decorate([q.property()],e.prototype,"minSuggestCharacters",void 0);d.__decorate([q.property({readOnly:!0,dependsOn:["activeSourceIndex","activeSource.placeholder","allPlaceholder","allSources"]})],e.prototype,"placeholder",null);d.__decorate([q.property()],e.prototype,"popupEnabled",void 0);d.__decorate([q.property({type:c})],e.prototype,
"popupTemplate",void 0);d.__decorate([q.property({type:z})],e.prototype,"portal",void 0);d.__decorate([q.property()],e.prototype,"resultCount",void 0);d.__decorate([q.property()],e.prototype,"resultGraphicEnabled",void 0);d.__decorate([q.property({readOnly:!0})],e.prototype,"resultGraphic",void 0);d.__decorate([q.property({readOnly:!0})],e.prototype,"results",void 0);d.__decorate([q.property({readOnly:!0})],e.prototype,"selectedSuggestion",void 0);d.__decorate([q.property()],e.prototype,"searchAllEnabled",
void 0);d.__decorate([q.property({readOnly:!0})],e.prototype,"selectedResult",void 0);d.__decorate([q.property()],e.prototype,"searchTerm",null);d.__decorate([q.property({type:L})],e.prototype,"sources",void 0);d.__decorate([q.property({readOnly:!0,dependsOn:["allSources.length","updating"]})],e.prototype,"state",null);d.__decorate([q.property()],e.prototype,"suggestionDelay",void 0);d.__decorate([q.property()],e.prototype,"suggestionCount",void 0);d.__decorate([q.property({readOnly:!0})],e.prototype,
"suggestions",void 0);d.__decorate([q.property()],e.prototype,"suggestionsEnabled",void 0);d.__decorate([q.property({readOnly:!0})],e.prototype,"updating",null);d.__decorate([q.property()],e.prototype,"view",void 0);d.__decorate([q.property()],e.prototype,"clear",null);return e=d.__decorate([q.subclass("esri.widgets.Search.SearchViewModel")],e)}(P.GoToMixin(b.EventedMixin(e)))})},"esri/core/geolocationUtils":function(){define("require exports ../config ./Error ./has ./Logger ./promiseUtils ../geometry/Point ../geometry/support/webMercatorUtils ../portal/Portal ../tasks/GeometryService ../tasks/support/ProjectParameters".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g){function k(b,k,c){if(!k)return e.resolve(b);var q=k.spatialReference;return q.isWGS84?e.resolve(b):q.isWebMercator?e.resolve(p.geographicToWebMercator(b)):t(c).then(function(k){if(!k)throw new n("geometry-service:missing-url","Geometry service URL is missing");k=new a({url:k});var e=new g({geometries:[b],outSR:q});return k.project(e,c).then(function(a){return a[0]})})}function t(a){if(d.geometryServiceUrl)return e.resolve(d.geometryServiceUrl);var g=b.getDefault();
return g.load(a).catch(function(){}).then(function(){return g.get("helperServices.geometry.url")})}Object.defineProperty(f,"__esModule",{value:!0});var m=c.getLogger("esri.core.geolocationUtils"),w={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};f.supported=function(){var a=l("esri-geolocation");a||m.warn("geolocation-unsupported","Geolocation unsupported.");a&&((a=l("esri-secure-context"))||m.warn("insecure-context","Geolocation requires a secure origin."));return a};f.getCurrentPosition=function(a){a||
(a=w);return e.create(function(b,g){setTimeout(function(){return g(new n("geolocation:timeout","getting the current geolocation position timed out"))},15E3);navigator.geolocation.getCurrentPosition(b,g,a)})};f.positionToPoint=function(a,b){var g=a.position;a=a.view;var e=g&&g.coords||{},e={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed},g=g?{coords:e,timestamp:g.timestamp}:g;g=(g=g&&g.coords)?new h({longitude:g.longitude,
latitude:g.latitude,z:g.altitude||null,spatialReference:{wkid:4326}}):null;return k(g,a,b)}})},"esri/tasks/GeometryService":function(){define("require exports tslib ../geometry ../request ../core/jsonMap ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../geometry/support/jsonUtils ./Task ./operations/generalize ./operations/lengths ./operations/offset ./operations/relation ./operations/trimExtend ./support/GeneralizeParameters ./support/LengthsParameters ./support/OffsetParameters ./support/ProjectParameters ./support/RelationParameters ./support/TrimExtendParameters".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g,k,t,m,w,v,q,u,E,y){var B=new c.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),z=h.ensureType(u);return function(b){function c(a){a=b.call(this,a)||this;a.url=null;return a}d.__extends(c,b);c.prototype.areasAndLengths=function(a,b){a=d.__assign(d.__assign(d.__assign({},this.parsedUrl.query),{f:"json"}),a.toJSON());b=this._asValidOptions(a,b);return l(this.parsedUrl.path+"/areasAndLengths",b).then(function(a){return a.data})};
c.prototype.autoComplete=function(a,b,g){var c=a[0].spatialReference;a=d.__assign(d.__assign({},this.parsedUrl.query),{f:"json",sr:JSON.stringify(c.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)});g=this._asValidOptions(a,g);return l(this.parsedUrl.path+"/autoComplete",g).then(function(a){return(a.data.geometries||[]).map(function(a){return new n.Polygon({spatialReference:c,rings:a.rings})})})};c.prototype.buffer=
function(a,b){var g=d.__assign(d.__assign(d.__assign({},this.parsedUrl.query),{f:"json"}),a.toJSON()),c=a.outSpatialReference||a.geometries[0].spatialReference;a=this._asValidOptions(g,b);return l(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new n.Polygon({spatialReference:c,rings:a.rings})})})};c.prototype.convexHull=function(a,b){var g=a[0].spatialReference;a=d.__assign(d.__assign({},this.parsedUrl.query),{f:"json",sr:JSON.stringify(g.toJSON()),
geometries:JSON.stringify(this._encodeGeometries(a))});b=this._asValidOptions(a,b);return l(this.parsedUrl.path+"/convexHull",b).then(function(a){return p.fromJSON(a.data.geometry).set({spatialReference:g})})};c.prototype.cut=function(a,b,g){var c=a[0].spatialReference,k=a.map(function(a){return a.toJSON()});a=d.__assign(d.__assign({},this.parsedUrl.query),{f:"json",sr:JSON.stringify(c.toJSON()),target:JSON.stringify({geometryType:p.getJsonType(a[0]),geometries:k}),cutter:JSON.stringify(b.toJSON())});
g=this._asValidOptions(a,g);return l(this.parsedUrl.path+"/cut",g).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return p.fromJSON(a).set({spatialReference:c})})}})};c.prototype.densify=function(a,b){var g=a.geometries[0].spatialReference;a=d.__assign(d.__assign(d.__assign({},this.parsedUrl.query),{f:"json"}),a.toJSON());b=this._asValidOptions(a,b);return l(this.parsedUrl.path+"/densify",b).then(function(a){return(a.data.geometries||[]).map(function(a){return p.fromJSON(a).set({spatialReference:g})})})};
c.prototype.difference=function(a,b,g){var c=a[0].spatialReference;a={query:d.__assign(d.__assign({},this.parsedUrl.query),{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:p.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||g)a=d.__assign(d.__assign(d.__assign({},this.requestOptions),g),a);return l(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return p.fromJSON(a).set({spatialReference:c})})})};
c.prototype.distance=function(a,b){a=d.__assign(d.__assign(d.__assign({},this.parsedUrl.query),{f:"json"}),a.toJSON());b=this._asValidOptions(a,b);return l(this.parsedUrl.path+"/distance",b).then(function(a){return(a=a.data)&&a.distance})};c.prototype.fromGeoCoordinateString=function(a,b){var g={};g.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;g.strings=JSON.stringify(a.strings);g.conversionType=B.toJSON(a.conversionType||"mgrs");g.conversionMode=a.conversionMode;a=d.__assign(d.__assign(d.__assign({},
this.parsedUrl.query),{f:"json"}),g);b=this._asValidOptions(a,b);return l(this.parsedUrl.path+"/fromGeoCoordinateString",b).then(function(a){return a.data.coordinates})};c.prototype.generalize=function(b,g){b=w.from(b);var c=b.toJSON();b=a.generalizeToRESTParameters(b);b=d.__assign(d.__assign(d.__assign({},this.parsedUrl.query),{f:"json"}),b);var k=c.geometries[0].spatialReference;g=this._asValidOptions(b,g);return l(this.parsedUrl.path+"/generalize",g).then(function(a){return(a.data.geometries||
[]).map(function(a){return p.fromJSON(a).set({spatialReference:k})})})};c.prototype.intersect=function(a,b,g){var c=a[0].spatialReference;a=d.__assign(d.__assign({},this.parsedUrl.query),{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:p.getJsonType(b),geometry:b.toJSON()})});g=this._asValidOptions(a,g);return l(this.parsedUrl.path+"/intersect",g).then(function(a){return(a.data.geometries||[]).map(function(a){return p.fromJSON(a).set({spatialReference:c})})})};
c.prototype.labelPoints=function(a,b){var g=a.map(function(a){return a.toJSON()}),c=a[0].spatialReference;a=d.__assign(d.__assign({},this.parsedUrl.query),{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c.toJSON()),polygons:JSON.stringify(g)});b=this._asValidOptions(a,b);return l(this.parsedUrl.path+"/labelPoints",b).then(function(a){return(a.data.labelPoints||[]).map(function(a){return p.fromJSON(a).set({spatialReference:c})})})};c.prototype.lengths=function(a,b){a=v.from(a);a=g.lengthsToRESTParameters(a);
a=d.__assign(d.__assign(d.__assign({},this.parsedUrl.query),{f:"json"}),a);b=this._asValidOptions(a,b);return l(this.parsedUrl.path+"/lengths",b).then(function(a){return a.data})};c.prototype.offset=function(a,b){a=q.from(a);var g=k.offsetToRESTParameters(a),g=d.__assign(d.__assign(d.__assign({},this.parsedUrl.query),{f:"json"}),g),c=a.geometries[0].spatialReference;a=this._asValidOptions(g,b);return l(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return p.fromJSON(a).set({spatialReference:c})})})};
c.prototype.project=function(a,b){var g=this;a=z(a);var c=d.__assign(d.__assign(d.__assign({},this.parsedUrl.query),{f:"json"}),a.toJSON()),k=a.outSpatialReference,e=p.getJsonType(a.geometries[0]);a=this._asValidOptions(c,b);return l(this.parsedUrl.path+"/project",a).then(function(a){return g._decodeGeometries(a.data,e,k)})};c.prototype.relation=function(a,b){a=E.from(a);a=t.relationToRESTParameters(a);a=d.__assign(d.__assign(d.__assign({},this.parsedUrl.query),{f:"json"}),a);b=this._asValidOptions(a,
b);return l(this.parsedUrl.path+"/relation",b).then(function(a){return a.data.relations})};c.prototype.reshape=function(a,b,g){var c=a.spatialReference;a=d.__assign(d.__assign({},this.parsedUrl.query),{f:"json",sr:JSON.stringify(c.toJSON()),target:JSON.stringify({geometryType:p.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())});g=this._asValidOptions(a,g);return l(this.parsedUrl.path+"/reshape",g).then(function(a){return p.fromJSON(a.data.geometry).set({spatialReference:c})})};
c.prototype.simplify=function(a,b){var g=this,c=a[0].spatialReference,k=d.__assign(d.__assign({},this.parsedUrl.query),{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),e=p.getJsonType(a[0]);a=this._asValidOptions(k,b);return l(this.parsedUrl.path+"/simplify",a).then(function(a){return g._decodeGeometries(a.data,e,c)})};c.prototype.toGeoCoordinateString=function(a,b){var g={};g.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):
a.sr;g.coordinates=JSON.stringify(a.coordinates);g.conversionType=B.toJSON(a.conversionType||"mgrs");g.conversionMode=a.conversionMode;g.numOfDigits=a.numOfDigits;g.rounding=a.rounding;g.addSpaces=a.addSpaces;a=d.__assign(d.__assign(d.__assign({},this.parsedUrl.query),{f:"json"}),g);b=this._asValidOptions(a,b);return l(this.parsedUrl.path+"/toGeoCoordinateString",b).then(function(a){return a.data.strings})};c.prototype.trimExtend=function(a,b){a=y.from(a);var g=m.trimExtendToRESTParameters(a),g=d.__assign(d.__assign(d.__assign({},
this.parsedUrl.query),{f:"json"}),g),c=a.sr;a=this._asValidOptions(g,b);return l(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new n.Polyline({spatialReference:c,paths:a.paths})})})};c.prototype.union=function(a,b){var g=a[0].spatialReference;a=d.__assign(d.__assign({},this.parsedUrl.query),{f:"json",sr:JSON.stringify(g.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))});b=this._asValidOptions(a,b);return l(this.parsedUrl.path+
"/union",b).then(function(a){return p.fromJSON(a.data.geometry).set({spatialReference:g})})};c.prototype._asValidOptions=function(a,b){a={query:a};if(this.requestOptions||b)a=d.__assign(d.__assign(d.__assign({},this.requestOptions),b),a);return a};c.prototype._encodeGeometries=function(a){for(var b=[],g=a.length,c=0;c<g;c++)b.push(a[c].toJSON());return{geometryType:p.getJsonType(a[0]),geometries:b}};c.prototype._decodeGeometries=function(a,b,g){var c=p.getGeometryType(b);a=a.geometries;var k=[],e=
{spatialReference:g.toJSON()};a.forEach(function(a,b){k[b]=new c(d.__assign(d.__assign({},a),e))});return k};c.prototype._toProjectGeometry=function(a){var b=a.spatialReference.toJSON();return a instanceof n.Extent?new n.Polygon({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new n.Polyline({paths:[[].concat(a.points)],spatialReference:b})};c.prototype._fromProjectedGeometry=function(a,b,g){return"extent"===b?(a=a.rings[0],new n.Extent(a[0][0],
a[0][1],a[2][0],a[2][1],g)):new n.Multipoint({points:a.paths[0],spatialReference:g.toJSON()})};c.UNIT_METER=9001;c.UNIT_GERMAN_METER=9031;c.UNIT_FOOT=9002;c.UNIT_SURVEY_FOOT=9003;c.UNIT_CLARKE_FOOT=9005;c.UNIT_FATHOM=9014;c.UNIT_NAUTICAL_MILE=9030;c.UNIT_SURVEY_CHAIN=9033;c.UNIT_SURVEY_LINK=9034;c.UNIT_SURVEY_MILE=9035;c.UNIT_KILOMETER=9036;c.UNIT_CLARKE_YARD=9037;c.UNIT_CLARKE_CHAIN=9038;c.UNIT_CLARKE_LINK=9039;c.UNIT_SEARS_YARD=9040;c.UNIT_SEARS_FOOT=9041;c.UNIT_SEARS_CHAIN=9042;c.UNIT_SEARS_LINK=
9043;c.UNIT_BENOIT_1895A_YARD=9050;c.UNIT_BENOIT_1895A_FOOT=9051;c.UNIT_BENOIT_1895A_CHAIN=9052;c.UNIT_BENOIT_1895A_LINK=9053;c.UNIT_BENOIT_1895B_YARD=9060;c.UNIT_BENOIT_1895B_FOOT=9061;c.UNIT_BENOIT_1895B_CHAIN=9062;c.UNIT_BENOIT_1895B_LINK=9063;c.UNIT_INDIAN_FOOT=9080;c.UNIT_INDIAN_1937_FOOT=9081;c.UNIT_INDIAN_1962_FOOT=9082;c.UNIT_INDIAN_1975_FOOT=9083;c.UNIT_INDIAN_YARD=9084;c.UNIT_INDIAN_1937_YARD=9085;c.UNIT_INDIAN_1962_YARD=9086;c.UNIT_INDIAN_1975_YARD=9087;c.UNIT_FOOT_1865=9070;c.UNIT_RADIAN=
9101;c.UNIT_DEGREE=9102;c.UNIT_ARCMINUTE=9103;c.UNIT_ARCSECOND=9104;c.UNIT_GRAD=9105;c.UNIT_GON=9106;c.UNIT_MICRORADIAN=9109;c.UNIT_ARCMINUTE_CENTESIMAL=9112;c.UNIT_ARCSECOND_CENTESIMAL=9113;c.UNIT_MIL6400=9114;c.UNIT_BRITISH_1936_FOOT=9095;c.UNIT_GOLDCOAST_FOOT=9094;c.UNIT_INTERNATIONAL_CHAIN=109003;c.UNIT_INTERNATIONAL_LINK=109004;c.UNIT_INTERNATIONAL_YARD=109001;c.UNIT_STATUTE_MILE=9093;c.UNIT_SURVEY_YARD=109002;c.UNIT_50KILOMETER_LENGTH=109030;c.UNIT_150KILOMETER_LENGTH=109031;c.UNIT_DECIMETER=
109005;c.UNIT_CENTIMETER=109006;c.UNIT_MILLIMETER=109007;c.UNIT_INTERNATIONAL_INCH=109008;c.UNIT_US_SURVEY_INCH=109009;c.UNIT_INTERNATIONAL_ROD=109010;c.UNIT_US_SURVEY_ROD=109011;c.UNIT_US_NAUTICAL_MILE=109012;c.UNIT_UK_NAUTICAL_MILE=109013;c.UNIT_SQUARE_INCHES="esriSquareInches";c.UNIT_SQUARE_FEET="esriSquareFeet";c.UNIT_SQUARE_YARDS="esriSquareYards";c.UNIT_ACRES="esriAcres";c.UNIT_SQUARE_MILES="esriSquareMiles";c.UNIT_SQUARE_MILLIMETERS="esriSquareMillimeters";c.UNIT_SQUARE_CENTIMETERS="esriSquareCentimeters";
c.UNIT_SQUARE_DECIMETERS="esriSquareDecimeters";c.UNIT_SQUARE_METERS="esriSquareMeters";c.UNIT_ARES="esriAres";c.UNIT_HECTARES="esriHectares";c.UNIT_SQUARE_KILOMETERS="esriSquareKilometers";d.__decorate([e.property()],c.prototype,"url",void 0);return c=d.__decorate([e.subclass("esri.tasks.GeometryService")],c)}(b)})},"esri/tasks/operations/generalize":function(){define(["require","exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(r,f,d,n){Object.defineProperty(f,"__esModule",
{value:!0});var l=new d.default({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});f.generalizeToRESTParameters=function(c){var e=c.toJSON();c=e.geometries;var d=e.deviationUnit,e={maxDeviation:e.maxDeviation};c&&c.length&&(e.geometries=JSON.stringify({geometryType:n.getJsonType(c[0]),geometries:c}),e.sr=JSON.stringify(c[0].spatialReference));l.write(d,
e,"deviationUnit");return e}})},"esri/tasks/operations/lengths":function(){define(["require","exports","../../core/jsonMap"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});var n=new d.default({preserveShape:"preserve-shape"});f.lengthsToRESTParameters=function(d){var c=d.toJSON(),e=c.lengthUnit,h=c.geodesic,p=c.calculationType,b={};b.polylines=JSON.stringify(c.polylines);d=d.polylines[0].spatialReference;b.sr=d.wkid?d.wkid:JSON.stringify(d.toJSON());e&&(b.lengthUnit=e);h&&(b.geodesic=
h);p&&(b.calculationType=n.toJSON(p));return b}})},"esri/tasks/operations/offset":function(){define(["require","exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(r,f,d,n){Object.defineProperty(f,"__esModule",{value:!0});var l=new d.default({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),c=new d.default({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});f.offsetToRESTParameters=
function(e){var d=e.toJSON();e=d.geometries;var p=d.offsetHow,b=d.offsetUnit,d={bevelRatio:d.bevelRatio,offsetDistance:d.offsetDistance};e&&e.length&&(d.geometries=JSON.stringify({geometryType:n.getJsonType(e[0]),geometries:e}),d.sr=JSON.stringify(e[0].spatialReference));p&&(d.offsetHow=l.toJSON(p));b&&(d.offsetUnit=c.toJSON(b));return d}})},"esri/tasks/operations/relation":function(){define(["require","exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(r,f,d,n){Object.defineProperty(f,
"__esModule",{value:!0});var l=new d.default({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",
esriGeometryRelationRelation:"relation"});f.relationToRESTParameters=function(c){var e=c.toJSON(),d=e.geometries1;c=e.geometries2;var p=e.relation,e=e.relationParameter,b={};d&&d.length&&(b.geometries1=JSON.stringify({geometryType:n.getJsonType(d[0]),geometries:d}),d=d[0].spatialReference,b.sr=d.wkid?d.wkid:JSON.stringify(d));c&&0<c.length&&(b.geometries2=JSON.stringify({geometryType:n.getJsonType(c[0]),geometries:c}));p&&(b.relation=l.toJSON(p));e&&(b.relationParam=e);return b}})},"esri/tasks/operations/trimExtend":function(){define(["require",
"exports","../../core/jsonMap"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});var n=new d.default({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});f.trimExtendToRESTParameters=function(d){d=d.toJSON();var c=d.polylines,e=d.trimExtendTo,h={};h.extendHow=n.toJSON(d.extendHow);c&&c.length&&(h.polylines=JSON.stringify(c),h.sr=JSON.stringify(c[0].spatialReference));e&&(h.trimExtendTo=JSON.stringify(e));
return h}})},"esri/tasks/support/GeneralizeParameters":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),function(r,f,d,n,l,c,e){r=function(c){function h(b){b=c.call(this,b)||this;b.deviationUnit=null;b.geometries=null;b.maxDeviation=null;return b}d.__extends(h,c);d.__decorate([l.property({type:String,json:{write:!0}})],h.prototype,"deviationUnit",void 0);d.__decorate([l.property({json:{read:{reader:function(b){return b?
b.map(function(a){return e.fromJSON(a)}):null}},write:{writer:function(b,a){a.geometries=b.map(function(a){return a.toJSON()})}}}})],h.prototype,"geometries",void 0);d.__decorate([l.property({type:Number,json:{write:!0}})],h.prototype,"maxDeviation",void 0);return h=d.__decorate([l.subclass("esri.tasks.support.GeneralizeParameters")],h)}(n.JSONSupport);r.from=c.default(r);return r})},"esri/tasks/support/LengthsParameters":function(){define("require exports tslib ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),
function(r,f,d,n,l,c,e,h){r=function(e){function b(a){a=e.call(this,a)||this;a.calculationType=null;a.geodesic=null;a.lengthUnit=null;a.polylines=null;return a}d.__extends(b,e);d.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"calculationType",void 0);d.__decorate([c.property({type:Boolean,json:{write:!0}})],b.prototype,"geodesic",void 0);d.__decorate([c.property({json:{write:!0}})],b.prototype,"lengthUnit",void 0);d.__decorate([c.property({type:[n.Polyline],json:{read:{reader:function(a){return a?
a.map(function(a){return h.fromJSON(a)}):null}},write:{writer:function(a,b){b.polylines=a.map(function(a){return a.toJSON()})}}}})],b.prototype,"polylines",void 0);return b=d.__decorate([c.subclass("esri.tasks.support.LengthsParameters")],b)}(l.JSONSupport);r.from=e.default(r);return r})},"esri/tasks/support/OffsetParameters":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),
function(r,f,d,n,l,c,e){r=function(c){function h(b){b=c.call(this,b)||this;b.bevelRatio=null;b.geometries=null;b.offsetDistance=null;b.offsetHow=null;b.offsetUnit=null;return b}d.__extends(h,c);d.__decorate([l.property({type:Number,json:{write:!0}})],h.prototype,"bevelRatio",void 0);d.__decorate([l.property({json:{read:{reader:function(b){return b?b.map(function(a){return e.fromJSON(a)}):null}},write:{writer:function(b,a){a.geometries=b.map(function(a){return a.toJSON()})}}}})],h.prototype,"geometries",
void 0);d.__decorate([l.property({type:Number,json:{write:!0}})],h.prototype,"offsetDistance",void 0);d.__decorate([l.property({type:String,json:{write:!0}})],h.prototype,"offsetHow",void 0);d.__decorate([l.property({type:String,json:{write:!0}})],h.prototype,"offsetUnit",void 0);return h=d.__decorate([l.subclass("esri.tasks.support.OffsetParameters")],h)}(n.JSONSupport);r.from=c.default(r);return r})},"esri/tasks/support/ProjectParameters":function(){define("require exports tslib ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(r,f,d,n,l,c,e){var h=l.getLogger("esri.tasks.support.ProjectParameters");return function(p){function b(a){a=p.call(this,a)||this;a.geometries=null;a.outSpatialReference=null;a.transformation=null;a.transformForward=null;return a}d.__extends(b,p);Object.defineProperty(b.prototype,"outSR",{get:function(){h.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){h.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});b.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],c={};c.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());c.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());c.geometries=JSON.stringify({geometryType:e.getJsonType(b),geometries:a});this.transformation&&(c.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(c.transformForward=this.transformForward);return c};d.__decorate([c.property()],b.prototype,"geometries",void 0);d.__decorate([c.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);d.__decorate([c.property({json:{read:!1}})],b.prototype,"outSR",null);d.__decorate([c.property()],b.prototype,"transformation",void 0);d.__decorate([c.property()],b.prototype,"transformForward",void 0);return b=d.__decorate([c.subclass("esri.tasks.support.ProjectParameters")],
b)}(n.JSONSupport)})},"esri/tasks/support/RelationParameters":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),function(r,f,d,n,l,c,e){r=function(c){function h(b){b=c.call(this,b)||this;b.geometries1=null;b.geometries2=null;b.relation=null;b.relationParameter=null;return b}d.__extends(h,c);d.__decorate([l.property({json:{read:{reader:function(b){return b?b.map(function(a){return e.fromJSON(a)}):
null}},write:{writer:function(b,a){a.geometries1=b.map(function(a){return a.toJSON()})}}}})],h.prototype,"geometries1",void 0);d.__decorate([l.property({json:{read:{reader:function(b){return b?b.map(function(a){return e.fromJSON(a)}):null}},write:{writer:function(b,a){a.geometries2=b.map(function(a){return a.toJSON()})}}}})],h.prototype,"geometries2",void 0);d.__decorate([l.property({type:String,json:{write:!0}})],h.prototype,"relation",void 0);d.__decorate([l.property({type:String,json:{write:!0}})],
h.prototype,"relationParameter",void 0);return h=d.__decorate([l.subclass("esri.tasks.support.RelationParameters")],h)}(n.JSONSupport);r.from=c.default(r);return r})},"esri/tasks/support/TrimExtendParameters":function(){define("require exports tslib ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),function(r,f,d,n,l,c,e,h){r=function(e){function b(a){a=e.call(this,a)||this;a.extendHow="default-curve-extension";
a.polylines=null;a.trimExtendTo=null;return a}d.__extends(b,e);d.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"extendHow",void 0);d.__decorate([c.property({type:[n.Polyline],json:{read:{reader:function(a){return a?a.map(function(a){return h.fromJSON(a)}):null}},write:{writer:function(a,b){b.polylines=a.map(function(a){return a.toJSON()})}}}})],b.prototype,"polylines",void 0);d.__decorate([c.property({json:{read:{reader:function(a){return a?h.fromJSON(a):null}},write:{writer:function(a,
b){b.trimExtendTo=a.toJSON()}}}})],b.prototype,"trimExtendTo",void 0);return b=d.__decorate([c.subclass("esri.tasks.support.TrimExtendParameters")],b)}(l.JSONSupport);r.from=e.default(r);return r})},"esri/smartMapping/symbology/location":function(){define("require exports tslib ../../Color ./support/SymbologyBase ./support/utils".split(" "),function(r,f,d,n,l,c){function e(e,b){var a="mesh"!==e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case "point":case "multipoint":e=b.color;
var g=d.__assign({},b.outline);b=b.size;return{color:new n(e),outline:{color:new n(g.color),width:g.width},size:a?c.toWorldScale(b,a):b,opacity:1};case "polyline":return e=b.width,{color:new n(b.color),width:a?c.toWorldScale(e,a):e,opacity:1};case "polygon":e=b.size;var g=b.color,k=d.__assign({},b.outline);b=b.opacity;return{color:new n(g),outline:{color:new n(k.color),width:k.width},size:a?c.toWorldScale(e,a):e,opacity:b};case "mesh":return a=b.opacity,{color:new n(b.color),opacity:a}}}var h={default:{name:"default",
label:"Default",description:"Default theme for basic visualization of features.",schemes:{point:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:"1px"},size:"8px"}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,
255,255,.25],width:"1px"},size:"8px"},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:"1px"},size:"8px"}]}},polyline:{light:{primary:{color:[77,77,77,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[255,255,255,1],width:"2px"}]},dark:{primary:{color:[255,255,255,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[26,26,26,1],width:"2px"}]}},polygon:{light:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},
secondary:[{size:"12px",color:[128,128,128,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},{size:"12px",color:[255,255,255,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]},dark:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[178,178,178,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},{size:"12px",color:[26,26,26,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]}}}}};return new (function(c){function b(){return c.call(this,
{themeDictionary:h})||this}d.__extends(b,c);b.prototype.getSchemes=function(a){var b=this.getRawSchemes({theme:"default",basemap:a.basemap,geometryType:a.geometryType,basemapTheme:a.basemapTheme});if(b){var c=b.schemesInfo,d=b.basemapId,b=b.basemapTheme;return{primaryScheme:e(a,c.primary),secondarySchemes:c.secondary.map(function(b){return e(a,b)}).filter(Boolean),basemapId:d,basemapTheme:b}}};b.prototype.cloneScheme=function(a){if(a)return a=d.__assign({},a),a.color&&(a.color=new n(a.color)),"outline"in
a&&a.outline&&(a.outline={color:a.outline.color&&new n(a.outline.color),width:a.outline.width}),a};return b}(l))})},"esri/smartMapping/symbology/support/SymbologyBase":function(){define(["require","exports","tslib","./Theme"],function(r,f,d,n){return function(){function l(c){this.themes=null;c=c.themeDictionary;var e=new Map,d;for(d in c)e.set(d,new n(c[d]));this.themes=e}l.prototype.getThemes=function(c){var e=[];this.themes.forEach(function(h){h.isBasemapSupported(c)&&e.push({name:h.name,label:h.label,
description:h.description,basemaps:d.__spreadArrays(h.supportedBasemaps)})});return e};l.prototype.filterSchemesByName=function(c){var e=c.name;c=d.__rest(c,["name"]);if(e){var h=this.getSchemes(c);if(h){c=null;for(var p=0,h=d.__spreadArrays([h.primaryScheme],h.secondarySchemes);p<h.length;p++){var b=h[p];if(b.name.toLowerCase()===e.toLowerCase()){c=b;break}}return c}}};l.prototype.filterSchemesByTag=function(c){var e=c.includedTags,h=c.excludedTags;c=d.__rest(c,["includedTags","excludedTags"]);if(!e&&
!h)return[];var p=this.getSchemes(c);if(!p)return[];var b=!(e&&e.length),a=!(h&&h.length),g=[];c=function(c){var k=b?!0:e.some(function(a){return-1<c.tags.indexOf(a)}),d=!a&&h.some(function(a){return-1<c.tags.indexOf(a)});k&&!d&&g.push(c)};for(var k=0,p=d.__spreadArrays([p.primaryScheme],p.secondarySchemes);k<p.length;k++)c(p[k]);return g};l.prototype.getRawSchemes=function(c){var e=this.themes.get(c.theme);if(e)return e.getRawSchemes({basemap:c.basemap,geometryType:c.geometryType,basemapTheme:c.basemapTheme})};
return l}()})},"esri/smartMapping/symbology/support/Theme":function(){define(["require","exports","../../../core/lang","../../../core/maybe","../../support/utils"],function(r,f,d,n,l){return function(){function c(c){this.schemes=this.basemapGroups=this.supportedBasemaps=this.description=this.label=this.name=null;var e=c.label,d=c.description,b=c.schemes;this.name=c.name;this.label=e;this.description=d;this.schemes=b;c=c.basemapGroups||l.defaultBasemapGroups;e=[];if(c)for(var a in c)e=e.concat(c[a]);
this.supportedBasemaps=e;this.basemapGroups=c}c.prototype.isBasemapSupported=function(c){return(c=l.getBasemapId(c,this.supportedBasemaps))&&-1<this.supportedBasemaps.indexOf(c)?!0:!1};c.prototype.getRawSchemes=function(c){var e,p=c.basemap;e=c.basemapTheme;var b=null,a=null;p&&(b=l.getBasemapId(p,this.supportedBasemaps,!1))&&(p=l.getBasemapGroup(b),n.isSome(p)&&(a=p));!b&&e&&(b="dark"===e?"dark-gray":"gray",a=e);b||a||(b="gray",a="light");e=b;b=a;e&&(p=l.getBasemapGroup(e,this.basemapGroups),n.isSome(p)&&
(b=p));c=c.geometryType;"multipoint"===c?c="point":"mesh"===c&&(c="polygon");return{schemesInfo:d.clone((this.schemes[c]||this.schemes["default"])[b]),basemapId:e,basemapTheme:a}};return c}()})},"esri/smartMapping/support/utils":function(){define("require exports tslib ../../Basemap ../../core/string ./adapters/CSVLayerAdapter ./adapters/FeatureLayerAdapter ./adapters/LayerAdapter ./adapters/PointCloudLayerAdapter ./adapters/SceneLayerAdapter ../../support/arcadeOnDemand ../../support/basemapUtils".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g){function k(a){return l.padStart(a,2,"0")}function t(a,b,g){if("date"===b||"number"===b){"number"===b&&(a=new Date(a));b=g?a.getFullYear():a.getUTCFullYear();var c=k((g?a.getMonth():a.getUTCMonth())+1),e=k(g?a.getDate():a.getUTCDate()),q=k(g?a.getHours():a.getUTCHours()),d=k(g?a.getMinutes():a.getUTCMinutes());a=k(g?a.getSeconds():a.getUTCSeconds());a="TIMESTAMP'"+b+"-"+c+"-"+e+" "+q+":"+d+":"+a+"'"}return a}function m(a,b){if(b instanceof Date)return"date";if("number"===
typeof b)return"number";if("string"===typeof b&&(a=a.getField(b),"\x3cnow\x3e"!==b.toLowerCase()&&a&&"date"===a.type))return"field"}var w;Object.defineProperty(f,"__esModule",{value:!0});f.defaultBasemapGroups={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]};var v=(w={},w[0]={adapter:c,type:"csv",label:"CSVLayer"},
w[2]={adapter:e,type:"feature",label:"FeatureLayer"},w[1]={adapter:e,type:"geojson",label:"GeoJSONLayer"},w[3]={adapter:b,type:"scene",label:"SceneLayer"},w[4]={adapter:p,type:"point-cloud",label:"PointCloudLayer"},w),q=[0,2,1,3,4];f.unitValueInDays={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5};var u=["integer","small-integer"],E=null;f.getLayerTypeLabels=function(a){return a.map(function(a){return v[a].label})};f.createLayerAdapter=function(a,b){void 0===
b&&(b=q);if(a instanceof h)return a;var g=null;b.some(function(b){var c=a.type===v[b].type;c&&(g=new v[b].adapter({layer:a}));return c});return g};f.getFieldsList=function(b){return d.__awaiter(this,void 0,void 0,function(){var g,c,k,e,q;return d.__generator(this,function(d){switch(d.label){case 0:return g=b.field,c=b.normalizationField,k=b.valueExpression,e=[],k?E?[3,2]:[4,a.loadArcade()]:[3,3];case 1:E=q=d.sent().arcadeUtils,d.label=2;case 2:e=E.extractFieldNames(k),d.label=3;case 3:return g&&e.push(g),
c&&e.push(c),[2,e]}})})};f.getNormalizationType=function(a){var b=a.normalizationType;b||(a.normalizationField?b="field":null!=a.normalizationTotal&&(b="percent-of-total"));return b};f.getDateDiffSQL=function(a,b,g,c){var k=a.hasQueryEngine;g=t(g,m(a,g),k);a=t(b,m(a,b),k);a="("+g+" - "+a+")";k&&(a="("+a+" * "+f.unitValueInDays.milliseconds+")");c=f.unitValueInDays[c];k="/";1>c&&(c=1/c,k="*");return{sqlExpression:1===c?a:"("+a+" "+k+" "+c+")",sqlWhere:null}};f.getDateType=m;f.getBasemapGroup=function(a,
b){void 0===b&&(b=f.defaultBasemapGroups);for(var g in b)if(-1<b[g].indexOf(a))return g};f.getBasemapId=function(a,b,c){void 0===c&&(c=!0);var k=null;"string"===typeof a&&-1<b.indexOf(a)?k=a:a instanceof n&&(k=g.getWellKnownBasemapId(a));return c?k||"gray":k};f.isIntegerField=function(a,b){return(a=b&&a.getField(b))&&-1<u.indexOf(a.type)};f.castIntegerFieldToFloat=function(a){return"cast("+a+" as float)"}})},"esri/smartMapping/support/adapters/CSVLayerAdapter":function(){define("require exports tslib ../../../core/Error ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../../statistics/support/utils ../utils ./FeatureLayerAdapter ./support/utils ../../../tasks/support/generateRendererUtils".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a){function g(a){return"esri.tasks.support.ClassBreaksDefinition"===a.declaredClass}function k(a){return"esri.tasks.support.UniqueValueDefinition"===a.declaredClass}return function(t){function m(a){return t.call(this,a)||this}d.__extends(m,t);m.prototype._createGenerateRendererResult=function(c,e,q,m,t){return d.__awaiter(this,void 0,void 0,function(){var h,u,p,w,v;return d.__generator(this,function(d){switch(d.label){case 0:u=(h=c&&c.features)&&h.length;if(!u)throw new n("csv-layer-adapter:insufficient-data",
"No features are available to calculate statistics");p=null;return"percent-of-total"!==m?[3,2]:[4,b.calculateStatsFromMemory({field:e},h)];case 1:w=d.sent();p=w.sum;if(null==p)throw new n("csv-layer-adapter:invalid","invalid normalizationTotal");d.label=2;case 2:return g(t)?[4,b.getDataValues({field:e,normalizationType:m,normalizationField:q,normalizationTotal:p},h)]:[3,4];case 3:return v=d.sent().filter(function(a){return null!=a&&b.isValidNumber(a)}),[2,a.createGenerateRendererClassBreaks({definition:t,
values:v,normalizationTotal:p})];case 4:return k(t)?[4,b.getDataValues({field:e},h)]:[3,6];case 5:return v=d.sent().filter(function(a){return null!=a&&"string"===typeof a&&""!==a.trim()}),[2,a.createGenerateRendererUniqueValues(v)];case 6:return[2,void 0]}})})};m.prototype.generateRenderer=function(a,b){var c=this,d=a.classificationDefinition,m=null,t=null,p=null;g(d)?(m=d.classificationField,t=d.normalizationField,p=d.normalizationType):k(d)&&(m=d.attributeField);var w=this.layer;return h.getFieldsList({field:m,
normalizationField:t}).then(function(g){var k=w.createQuery();k.returnGeometry=!1;k.outFields=g;k.where=e.mergeWhereClauses(k.where,a.where);return w.queryFeatures(k,{signal:b}).then(function(a){return c._createGenerateRendererResult(a,m,t,p,d)})})};m.prototype.load=function(a){var b=this;a=this.layer.load(a).then(function(a){b.geometryType=a.geometryType;b.objectIdField=a.objectIdField;b.supportsSQLExpression=!0;b._hasLocalSource=!1;b.hasQueryEngine=!0});this.addResolvingPromise(a);return l.resolve(this)};
return m=d.__decorate([c.subclass("esri.smartMapping.support.adapters.CSVLayerAdapter")],m)}(p)})},"esri/smartMapping/statistics/support/utils":function(){define(["require","exports","../../../core/Error","../../../layers/support/fieldUtils"],function(r,f,d,n){function l(c,b){return new d(c,b)}function c(c,b){b&&(c=c?"("+c+") AND ("+b+")":b);return c}function e(c){var b=c.layer;return c.fields.filter(function(a){return!b.getField(a)})}function h(c){var b=c.layer;return c.fields.filter(function(a){a=
b.getFieldUsageInfo(a);return!a||!a.supportsStatistics})}Object.defineProperty(f,"__esModule",{value:!0});f.getSQLFilterForNormalization=function(c){var b=c.field,a=c.normalizationType;c=c.normalizationField;var g;"log"===a?g="(NOT "+b+" \x3d 0)":"field"===a&&(g="(NOT "+c+" \x3d 0)");return g};f.createError=l;f.getRangeExpr=function(e,b,a){b=null!=b?e+" \x3e\x3d "+b:"";e=null!=a?e+" \x3c\x3d "+a:"";a="";return(a=b&&e?c(b,e):b||e)?"("+a+")":""};f.verifyFieldType=function(c,b,a,g){var k=null;if(!b)k=
l(a,"'field' is not defined in the layer schema");else if(b.name===c.objectIdField||-1===g.indexOf(b.type))k=l(a,"'field' should be one of these types: "+g.join(","));return k};f.verifyNumericField=function(c,b,a){var g;b?b.name!==c.objectIdField&&n.isNumericField(b)||(g=l(a,"'field' should be one of these numeric types: "+n.numericTypes.join(","))):g=l(a,"'field' is not defined in the layer schema");return g};f.mergeWhereClauses=c;f.verifyBasicFieldValidity=function(c,b,a){var g=e({layer:c,fields:b});
if(g.length)return l(a,"Unknown fields: "+g.join(", ")+". You can only use fields defined in the layer schema");c=h({layer:c,fields:b});if(c.length)return l(a,"Unsupported fields: "+c.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")}})},"esri/smartMapping/support/adapters/FeatureLayerAdapter":function(){define("require exports tslib ../../../geometry ../../../core/arrayUtils ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/arcgisLayerUrl ../../../layers/support/fieldUtils ../../statistics/support/predominanceUtils ../../statistics/support/utils ../utils ./LayerAdapter ./support/utils ../../../tasks/GenerateRendererTask ../../../tasks/support/GenerateRendererParameters ../../../tasks/support/QuantizationParameters ../../../tasks/support/StatisticDefinition ../../../tasks/support/UniqueValueDefinition".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g,k,t,m,w,v,q,u,E,y,B,z,A){return function(q){function f(a){return q.call(this,a)||this}d.__extends(f,q);f.prototype.destroy=function(){this._hasLocalSource=null};f.prototype._isStatsSupportedOnService=function(){var a=this.layer;return!a.get("capabilities.query.supportsStatistics")||"multipatch"===this.geometryType&&!k.isHostedAgolService(a.url)&&10.5>a.version?h.reject(new c("feature-layer-adapter:not-supported","Layer does not support statistics query")):h.resolve()};
f.prototype._fetchFeaturesFromMemory=function(a,b,g){return d.__awaiter(this,void 0,void 0,function(){var k,e,q,m;return d.__generator(this,function(d){switch(d.label){case 0:return k=this.layer,this._hasLocalSource?[4,k.queryFeatures(b)]:[3,2];case 1:return e=d.sent(),[2,e.features];case 2:if(!a)throw new c("feature-layer-adapter:insufficient-data","view is required to fetch the features from layerView");return[4,a.whenLayerView(k)];case 3:return q=d.sent(),[4,p.whenFalseOnce(q,"updating")];case 4:return d.sent(),
[4,q.queryFeatures(b,{signal:g})];case 5:return m=d.sent(),[2,m.features]}})})};f.prototype._fetchFeaturesFromService=function(a,b){return this.layer.queryFeatures(a,{signal:b}).then(function(a){return a&&a.features})};f.prototype._fetchFeaturesForStats=function(a){var b=this;return v.getFieldsList({field:a.field,normalizationField:a.normalizationField,valueExpression:a.valueExpression}).then(function(g){return b.getSampleFeatures({sampleSize:-1,view:a.view,returnGeometry:a.returnGeometry,requiredFields:g,
signal:a.signal})})};f.prototype._hasRequiredFieldsInView=function(a,b){return d.__awaiter(this,void 0,void 0,function(){var g,c,k=this;return d.__generator(this,function(e){switch(e.label){case 0:return[4,b.whenLayerView(this.layer)];case 1:return g=e.sent(),[4,p.whenFalseOnce(g,"updating")];case 2:return e.sent(),c=!0,a&&a.length&&(c=a.every(function(a){a=k.getField(a);return-1<g.availableFields.indexOf(a.name)})),[2,c]}})})};f.prototype._summaryStatsFromGenRend=function(a){var b=a.normalizationType,
g=a.normalizationField;return this.classBreaks({field:a.field,numClasses:5,classificationMethod:"standard-deviation",standardDeviationInterval:.25,normalizationType:b,normalizationField:"field"===b?g:void 0,minValue:a.minValue,maxValue:a.maxValue,signal:a.signal}).then(function(a){var b,g,c;a.classBreakInfos.some(function(a){a.hasAvg&&(b=a);return!!b});b&&(c=b.maxValue-b.minValue,g=b.minValue+c/2,c*=4);return u.processSummaryStatisticsResult({min:a.minValue,max:a.maxValue,avg:g,stddev:c})})};f.prototype._getSummaryStatsQuery=
function(a,b){var g=a.field,c=a.normalizationType,k=a.normalizationField,e=a.normalizationTotal;b=this.supportsSQLExpression&&b?u.msSinceUnixEpochSQL(this,g):a.sqlExpression;var e=u.getFieldExpr({field:g,normalizationType:c,normalizationField:k,normalizationTotal:e,layer:this}),d=b||e,e=d?w.getRangeExpr(d,a.minValue,a.maxValue):null,g=w.getSQLFilterForNormalization({field:g,normalizationField:k,normalizationType:c});a=w.mergeWhereClauses(a.sqlWhere,g);a=w.mergeWhereClauses(a,e);g=this.layer.createQuery();
g.where=w.mergeWhereClauses(g.where,a);g.sqlFormat=b?"standard":null;g.outStatistics=u.statisticTypes.map(function(a){var b=new z;b.statisticType="variance"===a?"var":a;b.onStatisticField=d;b.outStatisticFieldName=a+"_value";return b});return g};f.prototype._summaryStatsFromServiceQuery=function(a,b){return d.__awaiter(this,void 0,void 0,function(){var g,c,k,e;return d.__generator(this,function(d){switch(d.label){case 0:return[4,this._isStatsSupportedOnService()];case 1:d.sent();if("percent-of-total"!==
a.normalizationType)return[3,3];g=a;return[4,this._getNormalizationTotal(a.field,a.normalizationType)];case 2:g.normalizationTotal=d.sent(),d.label=3;case 3:return c=this._getSummaryStatsQuery(a,b),[4,this.layer.queryFeatures(c,{signal:a.signal})];case 4:return k=d.sent(),e=u.getSummaryStatisticsFromFeatureSet(k,b),[2,u.processSummaryStatisticsResult(e)]}})})};f.prototype._summaryStatsFromClientQuery=function(a,b){return d.__awaiter(this,void 0,void 0,function(){var g,c,k;return d.__generator(this,
function(e){switch(e.label){case 0:return g=this._getSummaryStatsQuery(a,b),[4,this.layer.queryFeatures(g,{signal:a.signal})];case 1:return c=e.sent(),k=u.getSummaryStatisticsFromFeatureSet(c,b),[2,u.processSummaryStatisticsResult(k)]}})})};f.prototype._summaryStatsFromMemory=function(a,b){return d.__awaiter(this,void 0,void 0,function(){var g,k,e,q,m,t,h,p,w,v,f;return d.__generator(this,function(l){switch(l.label){case 0:return g=a.field,k=a.valueExpression,e=a.view,q={field:g,valueExpression:k,
normalizationField:a.normalizationField,view:e,signal:a.signal},(t=a.features)?[3,2]:[4,this._fetchFeaturesForStats(q)];case 1:t=l.sent(),l.label=2;case 2:h=(m=t)&&m.length;if(!h)throw new c("feature-layer-adapter:insufficient-data","No features are available to calculate statistics");p=d.__assign({},a);return"percent-of-total"!==p.normalizationType?[3,4]:[4,u.calculateStatsFromMemory({field:g},m)];case 3:w=l.sent();v=w.sum;if(null==v)throw new c("feature-layer-adapter:invalid","invalid normalizationTotal");
p.normalizationTotal=v;l.label=4;case 4:return[4,u.calculateStatsFromMemory(p,m,b)];case 5:return f=l.sent(),[2,u.processSummaryStatisticsResult(f)]}})})};f.prototype._uvFromGenRenderer=function(a,b){var g=this,c=a.field,k=new A;k.attributeField=c;var e=new y;e.classificationDefinition=k;return this.generateRenderer(e,a.signal).then(function(a){var b={},k=g.getField(c);a.uniqueValues.forEach(function(a){var g=a.value;if(null==g||""===g||"string"===typeof g&&(""===g.trim()||"\x3cnull\x3e"===g.toLowerCase()))g=
null;null==b[g]?b[g]={count:a.count,data:t.isNumericField(k)&&g?Number(g):g}:b[g].count+=a.count});return{count:b}}).then(function(g){return u.createUVResult(g,b,a.returnAllCodedValues)})};f.prototype._getUVQuery=function(a){var b=a.field,g=a.sqlExpression,c="countOF"+(b||"Expr"),k=new z;k.statisticType="count";k.onStatisticField=g?"1":b;k.outStatisticFieldName=c;c=this.layer.createQuery();c.where=w.mergeWhereClauses(c.where,a.sqlWhere);c.sqlFormat=g?"standard":null;c.outStatistics=[k];c.groupByFieldsForStatistics=
[b||g];return c};f.prototype._uvFromServiceQuery=function(a,b){var g=this;return this._isStatsSupportedOnService().then(function(){return g.layer.queryFeatures(g._getUVQuery(a),{signal:a.signal})}).then(function(b){return u.getUniqueValuesFromFeatureSet(b,g,a.field,null,a.signal)}).then(function(g){return u.createUVResult(g,b,a.returnAllCodedValues)})};f.prototype._uvFromClientQuery=function(a,b){return d.__awaiter(this,void 0,void 0,function(){var g,c,k,e;return d.__generator(this,function(d){switch(d.label){case 0:return g=
a.signal,c=this._getUVQuery(a),[4,this.layer.queryFeatures(c,{signal:g})];case 1:return k=d.sent(),[4,u.getUniqueValuesFromFeatureSet(k,this,a.field,null,g)];case 2:return e=d.sent(),[2,u.createUVResult(e,b,a.returnAllCodedValues)]}})})};f.prototype._uvFromMemory=function(a,b){return d.__awaiter(this,void 0,void 0,function(){var g,c,k,e,q,m,t;return d.__generator(this,function(d){switch(d.label){case 0:g=a.field;c=a.valueExpression;k=a.view;e=a.signal;q={field:g,valueExpression:c,view:k,signal:e};
if(!a.features)return[3,1];t=a.features;return[3,3];case 1:return[4,this._fetchFeaturesForStats(q)];case 2:t=d.sent(),d.label=3;case 3:return m=t,[2,u.calculateUniqueValuesFromMemory(a,m,b)]}})})};f.prototype._calcBinsSQL=function(a,b){var g=[],c=b.length;b.forEach(function(b,k){b=w.mergeWhereClauses(a+" \x3e\x3d "+b[0],a+(k===c-1?" \x3c\x3d ":" \x3c ")+b[1]);g.push("WHEN ("+b+") THEN "+(k+1))});return["CASE",g.join(" "),"ELSE 0 END"].join(" ")};f.prototype._getNormalizationTotal=function(a,b,g){return a&&
"percent-of-total"===b?this.summaryStatistics({field:a,signal:g}).then(function(a){return a.sum}):h.resolve(null)};f.prototype._getQueryParamsForExpr=function(a,b){var g=a.signal;if(!a.valueExpression&&!a.sqlExpression){var c=a.field,k=c?this.getField(c):null,k=t.isDateField(k);b={field:c,normalizationType:a.normalizationType,normalizationField:a.normalizationField,normalizationTotal:b,layer:this};return{sqlExpression:k?u.msSinceUnixEpochSQL(this,c):u.getFieldExpr(b),sqlWhere:k?null:a.sqlWhere||w.getSQLFilterForNormalization(a),
signal:g}}return{valueExpression:a.valueExpression,sqlExpression:a.sqlExpression,sqlWhere:a.sqlWhere,signal:g}};f.prototype._getDataRange=function(a,b,g){return null!=b&&null!=g?h.resolve({min:b,max:g}):this.summaryStatistics(a).then(function(a){return{min:a.min,max:a.max}})};f.prototype._histogramForExpr=function(a){var b=this;return this._getNormalizationTotal(a.field,a.normalizationType,a.signal).then(function(g){var c=b._getQueryParamsForExpr(a,g);return b._getDataRange(c,a.minValue,a.maxValue).then(function(k){var e=
k.min,d=k.max,q=a.numBins||10;k=u.getEqualIntervalBins(e,d,q);k=b._calcBinsSQL(c.sqlExpression,k);var m=new z({statisticType:"count",outStatisticFieldName:"countOFExpr",onStatisticField:"1"}),t=b.layer.createQuery();t.where=w.mergeWhereClauses(t.where,c.sqlWhere);t.sqlFormat="standard";t.outStatistics=[m];t.groupByFieldsForStatistics=[k];t.orderByFields=[k];return b._isStatsSupportedOnService().then(function(){return b.layer.queryFeatures(t,{signal:c.signal})}).then(function(a){return u.getHistogramFromFeatureSet(a,
e,d,q,g)})})})};f.prototype._histogramForField=function(a){var b=this,g=null,g=null!=a.minValue&&null!=a.maxValue?h.resolve({min:a.minValue,max:a.maxValue}):this.summaryStatistics(a).then(function(a){if(!a.count)throw new c("feature-layer-adapter:insufficient-data","Either the layer has no features or none of the features have data for the field");return{min:a.min,max:a.max}});return g.then(function(g){return b._getBins({min:g.min,max:g.max},a.field,a.numBins,a.signal)})};f.prototype._getBins=function(a,
b,g,c){void 0===g&&(g=10);var k=a.min,e=a.max,d=a.normTotal,q=a.excludeZerosExpr,t=a.intervals||u.getEqualIntervalBins(k,e,g);return this._queryBins(t,a.sqlExpr||b,q,c).then(function(a){return{bins:a.map(function(a,b){return{minValue:t[b][0],maxValue:t[b][1],count:a.value}}),minValue:k,maxValue:e,normalizationTotal:d}})};f.prototype._queryBins=function(a,b,g,c){for(var k=this,e=[],d=a.length,q=0;q<d;q++){var t=w.mergeWhereClauses(g,w.mergeWhereClauses(b+" \x3e\x3d "+a[q][0],null!==a[q][1]?b+(q===
d-1?" \x3c\x3d ":" \x3c ")+a[q][1]:""));e.push(t)}return h.eachAlways(e.map(function(a){return k.queryFeatureCount(a,c)}))};f.prototype._binParamsFromGenRend=function(a,b){var g=this,c=a.field,k=a.normalizationType,e=a.normalizationField,d=a.signal,q=w.getSQLFilterForNormalization({field:c,normalizationType:k,normalizationField:e});a=new y({classificationDefinition:u.createCBDefn({field:c,normalizationType:k,normalizationField:e,classificationMethod:a.classificationMethod,standardDeviationInterval:a.standardDeviationInterval,
breakCount:a.numBins||10}),where:w.mergeWhereClauses(q,b)});return this.generateRenderer(a,d).then(function(a){return u.generateBinParams({field:c,normalizationType:k,normalizationField:e,normalizationTotal:a.normalizationTotal,classBreaks:a.classBreaks,where:q,layer:g})})};f.prototype._histogramFromMemory=function(a){var b=this,g=a.field,k=a.normalizationType,e=a.valueExpression,q=a.classificationMethod,t=a.minValue,m=a.maxValue,p=a.view,w=a.signal,v={field:g,valueExpression:e,normalizationField:a.normalizationField,
view:p,signal:w};return(a.features?h.resolve(a.features):this._fetchFeaturesForStats(v)).then(function(v){if(!v||!v.length)throw new c("feature-layer-adapter:insufficient-data","No features are available to calculate histogram");var f=null!=t&&null!=m,l=null;q&&"equal-interval"!==q||k?(f=d.__assign({},a),f.features=v,l=b._getBinParamsFromMemory(f)):l=f?h.resolve({min:t,max:m,source:"parameters"}):b.summaryStatistics({field:g,valueExpression:e,features:v,view:p,signal:w}).then(function(a){return a.count?
{min:a.min,max:a.max}:h.reject(new c("feature-layer-adapter:insufficient-data","No features are available to calculate histogram"))});return l.then(function(b){return u.calculateHistogramFromMemory(a,b,v)})})};f.prototype._getBinParamsFromMemory=function(a){return d.__awaiter(this,void 0,void 0,function(){var b,g,c,k,e,q,t,m,h,p,v,f=this;return d.__generator(this,function(d){b=a.field;g=a.valueExpression;c=a.classificationMethod;k=a.standardDeviationInterval;e=a.normalizationType;q=a.normalizationField;
t=a.minValue;m=a.maxValue;h=a.features;p=a.view;v=a.signal;return[2,this._classBreaksFromMemory({field:b,valueExpression:g,normalizationType:e,normalizationField:q,classificationMethod:c,standardDeviationInterval:k,minValue:t,maxValue:m,numClasses:a.numBins,features:h,view:p,signal:v}).then(function(a){var g=a.normalizationTotal;a=a.classBreakInfos;var c=w.getSQLFilterForNormalization({field:b,normalizationType:e,normalizationField:q});return u.generateBinParams({field:b,normalizationType:e,normalizationField:q,
normalizationTotal:g,classBreaks:a,where:c,layer:f})})]})})};f.prototype._classBreaksFromGenRend=function(a){var b=a.field,g=a.normalizationType,c=a.normalizationField,k=a.normalizationTotal,e=a.signal,d=w.getSQLFilterForNormalization({field:b,normalizationType:g,normalizationField:c}),k=u.getFieldExpr({field:b,normalizationType:g,normalizationField:c,normalizationTotal:k,layer:this}),k=w.getRangeExpr(k,a.minValue,a.maxValue),b=u.createCBDefn({field:b,normalizationType:g,normalizationField:c,classificationMethod:a.classificationMethod,
standardDeviationInterval:a.standardDeviationInterval,breakCount:a.numClasses||5}),g=new y;g.classificationDefinition=b;g.where=w.mergeWhereClauses(d,k);return this.generateRenderer(g,e).then(function(b){return u.resolveCBResult(a,b)})};f.prototype._classBreaksFromInterpolation=function(a){for(var b=a.minValue,g=a.maxValue,c=a.numClasses||5,k=[],e=(g-b)/c,d=0;d<c;d++){var q=b+d*e;k.push({minValue:q,maxValue:q+e})}k[c-1].maxValue=g;a=u.resolveCBResult(a,{classBreaks:k,normalizationTotal:a.normalizationTotal});
return h.resolve(a)};f.prototype._classBreaksFromMemory=function(a){return d.__awaiter(this,void 0,void 0,function(){var b,g,k,e,q,t,m,h,p,w,v,f;return d.__generator(this,function(l){switch(l.label){case 0:return b=a.field,g=a.normalizationField,k=a.valueExpression,e=a.view,q=a.signal,t={field:b,valueExpression:k,normalizationField:g,view:e,signal:q},(h=a.features)?[3,2]:[4,this._fetchFeaturesForStats(t)];case 1:h=l.sent(),l.label=2;case 2:p=(m=h)&&m.length;if(!p)throw new c("feature-layer-adapter:insufficient-data",
"No features are available to calculate statistics");w=d.__assign({},a);return"percent-of-total"!==w.normalizationType?[3,4]:[4,u.calculateStatsFromMemory({field:b},m)];case 3:v=l.sent();f=v.sum;if(null==f)throw new c("feature-layer-adapter:invalid","invalid normalizationTotal");w.normalizationTotal=f;l.label=4;case 4:return[2,u.calculateClassBreaksFromMemory(w,m)]}})})};f.prototype._heatmapStatsFromMemory=function(a,b){return d.__awaiter(this,void 0,void 0,function(){var g,k,e,q,t,m,h,p,w,v,f,l;
return d.__generator(this,function(d){switch(d.label){case 0:return g=a.blurRadius,k=a.field,e=a.view,q=a.signal,t=e.state,m=t.resolution,h=t.size,p=new B.default({extent:e.extent,tolerance:m}),v=this._quantizeFeatures,(f=a.features)?[3,2]:[4,this._fetchFeaturesForStats({field:k,view:e,returnGeometry:!0,signal:q})];case 1:f=d.sent(),d.label=2;case 2:w=v.apply(this,[f,p,e]);if(!w||!w.length)return[2,{count:0,min:null,max:null,avg:null,stddev:null}];if(l=u.calculateHeatmapStats(w,g,b,k,h[0],h[1]))return[2,
{count:l.count,min:l.min,max:l.max,avg:l.mean,stddev:l.stdDev}];throw new c("feature-layer-adapter:invalid","unable to calculate heatmap statistics");}})})};f.prototype._quantizeFeatures=function(b,c,k){var d=this,q=a.toQuantizationTransform(c);c=k.spatialReference;var t=k.size,m=g.isWrappable(c);k=g.getInfo(c);var h=Math.round((k.valid[1]-k.valid[0])/q.scale[0]);return b.map(function(b){var g=new n.Point(e.unwrap(b.geometry));a.quantizePoint(q,g,g,g.hasZ,g.hasM);b.geometry=m?d._wrapPoint(g,h,t[0]):
g;return b})};f.prototype._wrapPoint=function(a,b,g){0>a.x?a.x+=b:a.x>g&&(a.x-=b);return a};f.prototype.getField=function(a){void 0===a&&(a="");return this.layer.getField(a)};f.prototype.getFieldUsageInfo=function(a){return this.getField(a)?{supportsLabelingInfo:!0,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:!0,supportsStatistics:!0}:null};f.prototype.getFieldDomain=function(a,b){return this.layer.getFieldDomain(a,b)};f.prototype.summaryStatistics=function(a){var b=this,g=a.field,
g=g?this.getField(g):null,k=t.isDateField(g),e=(g=a.valueExpression||a.sqlExpression)&&!a.sqlExpression,d=a.view,d=d&&"3d"===d.type;return this._hasLocalSource||a.features||e?e||a.features||d?this._summaryStatsFromMemory(a,k):this._summaryStatsFromClientQuery(a,k):this.supportsSQLExpression||!k&&!g?(a.normalizationType&&!this.supportsSQLExpression?this._summaryStatsFromGenRend(a):this._summaryStatsFromServiceQuery(a,k)).catch(function(){h.throwIfAborted(a.signal);return b._summaryStatsFromMemory(a,
k)}):h.reject(new c("feature-layer-adapter:not-supported","Layer does not support standardized SQL expression for queries"))};f.prototype.uniqueValues=function(a){var b=this,g=a.field,c=a.valueExpression,k=a.sqlExpression,e=a.signal,d=(g?this.getField(g):null)&&this.getFieldDomain(g),q=c&&(!k||!this.supportsSQLExpression),t=(g=a.view)&&"3d"===g.type;return this._hasLocalSource||a.features||q?q||a.features||t?this._uvFromMemory(a,d):this._uvFromClientQuery(a,d):this._uvFromServiceQuery(a,d).catch(function(g){h.throwIfAborted(e);
return a.field?b._uvFromGenRenderer(a,d):g}).catch(function(){h.throwIfAborted(e);return q||a.features||t?b._uvFromMemory(a,d):b._uvFromClientQuery(a,d)})};f.prototype.histogram=function(a){var b=this,g=a.field,k=a.normalizationType,e=a.normalizationField,d=a.classificationMethod,q=a.signal,m=g?this.getField(g):null,m=t.isDateField(m),p=a.valueExpression||a.sqlExpression,v=p&&!a.sqlExpression,f=this.supportsSQLExpression,l=!d||"equal-interval"===d,E=a.minValue,n=a.maxValue,y=null!=E&&null!=n,B=a.numBins||
10;return this._hasLocalSource||a.features||v?this._histogramFromMemory(a):(p||f)&&l?p&&!f?h.reject(new c("feature-layer-adapter:not-supported","Layer does not support standardized SQL expression for queries")):this._histogramForExpr(a):m&&l?h.reject(new c("feature-layer-adapter:not-supported","Normalization and date field are not allowed when layer does not support standardized SQL expression for queries")):k||!l?this._binParamsFromGenRend(a).then(function(d){if(!y)return b._getBins(d,g,B,q);if(E>
d.max||n<d.min)throw new c("histogram:insufficient-data","Range defined by 'minValue' and 'maxValue' does not intersect available data range of the field");if(l)return b._getBins({min:E,max:n,sqlExpr:d.sqlExpr,excludeZerosExpr:d.excludeZerosExpr},g,B,q);d=u.getFieldExpr({field:g,normalizationType:k,normalizationField:e,normalizationTotal:d.normTotal,layer:b});d=w.getRangeExpr(d,E,n);return b._binParamsFromGenRend(a,d).then(function(a){return b._getBins(a,g,B,q)})}):this._histogramForField(a)};f.prototype.classBreaks=
function(a){var b=this,g=!1!==a.analyzeData,c=this._hasLocalSource||a.features||a.valueExpression;return g&&c?this._classBreaksFromMemory(a):(g?this._classBreaksFromGenRend(a):this._classBreaksFromInterpolation(a)).catch(function(){h.throwIfAborted(a.signal);return b._classBreaksFromMemory(a)})};f.prototype.queryFeatureCount=function(a,b){if(this._hasLocalSource)return h.reject(new c("feature-layer-adapter:not-supported","Layer does not support count query"));var g=this.layer,k=g.createQuery();k.where=
w.mergeWhereClauses(k.where,a);return g.queryFeatureCount(k,{signal:b})};f.prototype.generateRenderer=function(a,b){var g=this.layer;if(this._hasLocalSource||10.1>g.version)return h.reject(new c("feature-layer-adapter:not-supported","Layer does not support generateRenderer operation (requires ArcGIS Server version 10.1+)"));var k=new E({url:g.parsedUrl.path,source:g.dynamicDataSource,gdbVersion:g.gdbVersion}),g=g.createQuery();a.where=w.mergeWhereClauses(a.where,g.where);return k.execute(a,{signal:b})};
f.prototype.heatmapStatistics=function(a){var b=this,g=a.field,c=a.fieldOffset,k=a.signal;return(g&&null==c?this.summaryStatistics({field:g,signal:k}):h.resolve(null)).then(function(g){var k=c||0;if(g){var e=g.min,q=g.max;g.count?e===q&&0===e?k=1:0>=q?k="abs":0>e&&(k=-1.01*e):k=1}return b._heatmapStatsFromMemory(a,k).then(function(a){return d.__assign(d.__assign({},a),{summaryStatistics:g,fieldOffset:k})})})};f.prototype.predominantCategories=function(a){return d.__awaiter(this,void 0,void 0,function(){var b,
g,k,e,q,t,h,u,p,w,v,f,l,E,n,y;return d.__generator(this,function(d){switch(d.label){case 0:if(!this._hasLocalSource&&!this.supportsSQLExpression)throw new c("feature-layer-adapter:not-supported","Layer does not support advanced SQL expressions and standardized queries");b=a.fields;g=a.view;k=a.signal;e=m.getArcadeForPredominantCategory(b);q=m.getSQLForPredominantCategoryName(b);return g&&this._hasLocalSource?[4,this._uvFromMemory({valueExpression:e,view:g,signal:k})]:[3,2];case 1:return h=d.sent(),
[3,4];case 2:return[4,this._uvFromServiceQuery({sqlExpression:q.expression,valueExpression:e,signal:k})];case 3:h=d.sent(),d.label=4;case 4:t=h;u=t.uniqueValueInfos;p=u.map(function(a){return a.value});w=b.filter(function(a){return-1===p.indexOf(a)});v=0;for(f=w;v<f.length;v++)l=f[v],u.push({value:l,count:0});u.sort(function(a,g){return b.indexOf(a.value)-b.indexOf(g.value)});E=0;for(n=u;E<n.length;E++)y=n[E],y.value===m.noDominantCategoryField&&(y.value=null);return[2,{predominantCategoryInfos:u}]}})})};
f.prototype.getSampleFeatures=function(a){return d.__awaiter(this,void 0,void 0,function(){var b,g,c,k,e,q,t,m,u,p,w,v,f,E;return d.__generator(this,function(d){switch(d.label){case 0:b=a.view,g=a.sampleSize,c=a.requiredFields,k=a.returnGeometry,e=a.signal,q=this.layer.createQuery(),t=1,q.outSpatialReference=a.spatialReference||b&&b.spatialReference,q.returnGeometry=!!k,q.outFields=c,m=[],u=!1,d.label=1;case 1:return d.trys.push([1,5,,6]),[4,this._hasRequiredFieldsInView(c,b)];case 2:return(u=d.sent())?
[4,this._fetchFeaturesFromMemory(b,q,e)]:[3,4];case 3:m=d.sent();if(m.length&&0<g&&g<=m.length)return[2,l.pickRandom(m,g,t)];d.label=4;case 4:return[3,6];case 5:return d.sent(),h.throwIfAborted(e),[3,6];case 6:return d.trys.push([6,10,,11]),this._hasLocalSource?[2,u?m:this._fetchFeaturesFromService(q,e)]:[4,this.queryFeatureCount(null,e)];case 7:p=d.sent();w=this.layer.capabilities.query.maxRecordCount;v=-1===g?p:g;v=w&&v>w?w:v;if(p<=m.length||m.length>=w)return[2,m];f=b.extent.width/b.width/b.scale*
4E5;q.maxAllowableOffset=a.resolution||f;return p<=v?[2,this._fetchFeaturesFromService(q,e)]:2E4>=p?[4,this.layer.queryObjectIds()]:[3,9];case 8:return E=d.sent(),q.objectIds=l.pickRandom(E,v,t),[2,this._fetchFeaturesFromService(q,e)];case 9:return this.layer.get("capabilities.query.supportsPagination")&&(q.num=Math.min(v,2E4)),[2,this._fetchFeaturesFromService(q,e)];case 10:return d.sent(),h.throwIfAborted(e),[2,m];case 11:return[2]}})})};f.prototype.load=function(a){var b=this;a=this.layer.load(a).then(function(a){b.geometryType=
a.geometryType;b.objectIdField=a.objectIdField;b.supportsSQLExpression=a.get("capabilities.query.supportsSqlExpression");b._hasLocalSource=!a.url&&!!a.source;b.hasQueryEngine=b._hasLocalSource;b.minScale=a.minScale;b.maxScale=a.maxScale;b.fullExtent=a.fullExtent});this.addResolvingPromise(a);return h.resolve(this)};d.__decorate([b.property({constructOnly:!0})],f.prototype,"layer",void 0);return f=d.__decorate([b.subclass("esri.smartMapping.support.adapters.FeatureLayerAdapter")],f)}(q)})},"esri/smartMapping/statistics/support/predominanceUtils":function(){define(["require",
"exports","../../support/utils"],function(r,f,d){function n(a){return"("+a.map(function(a){return a+" \x3e\x3d 0"}).join(" OR ")+")"}function l(a,b){var g=b.returnFieldName,c=b.defaultValue,e=b.layer,h=[];g&&c&&(b=a.map(function(a){return a+" \x3c\x3d 0"}).join(" AND "),h.push("WHEN "+b+" THEN "+c));b=function(b){var c=a.reduce(function(a,g){b!==g&&a.push(b+" \x3e "+g);return a},[]).join(" AND "),k=e&&d.isIntegerField(e,b),k=g&&"'"+b+"'"?"'"+b+"'":k?d.castIntegerFieldToFloat(b):b;h.push("WHEN "+c+
" THEN "+k)};for(var p=0;p<a.length;p++)b(a[p]);return"CASE "+h.join(" ")+" ELSE "+(c||"0")+" END"}function c(a){return a&&a.map(function(a){return'$feature["'+a+'"];'}).join("\n")+"\n"||""}function e(a,b){void 0===b&&(b=!1);a=a.map(function(a){return'"'+a+'"'});return"\n  var fieldNames \x3d [ "+a.join(", ")+" ];\n  var numFields \x3d "+a.length+";\n  var maxValueField \x3d null;\n  var maxValue \x3d -Infinity;\n  var value, i, totalValue \x3d null;\n\n  for(i \x3d 0; i \x3c numFields; i++) {\n    value \x3d $feature[fieldNames[i]];\n\n    if(value \x3e 0) {\n      if(value \x3e maxValue) {\n        maxValue \x3d value;\n        maxValueField \x3d fieldNames[i];\n      }\n      else if (value \x3d\x3d maxValue) {\n        maxValueField \x3d null;\n      }\n    }\n    "+
(b?"\n  if(value !\x3d null \x26\x26 value \x3e\x3d 0) {\n    if (totalValue \x3d\x3d null) { totalValue \x3d 0; }\n    totalValue \x3d totalValue + value;\n  }\n  ":"")+"\n  }\n  "}function h(a){var b=e(a);return"\n  "+c(a)+"\n  "+b+"\n  return maxValueField;\n  "}function p(a){var b=c(a);a=a.map(function(a){return'"'+a+'"'});return"\n  "+b+"\n  var fieldNames \x3d [ "+a.join(", ")+" ];\n  var numFields \x3d "+a.length+";\n  var value, i, totalValue \x3d null;\n\n  for(i \x3d 0; i \x3c numFields; i++) {\n    value \x3d $feature[fieldNames[i]];\n\n    if(value !\x3d null \x26\x26 value \x3e\x3d 0) {\n      if (totalValue \x3d\x3d null) { totalValue \x3d 0; }\n      totalValue \x3d totalValue + value;\n    }\n  }\n\n  return totalValue;\n  "}
function b(a){var b=e(a,!0);return"\n  "+c(a)+"\n  "+b+"\n\n  var strength \x3d null;\n\n  if (maxValueField !\x3d null \x26\x26 totalValue \x3e 0) {\n    strength \x3d (maxValue / totalValue) * 100;\n  }\n\n  return strength;\n  "}Object.defineProperty(f,"__esModule",{value:!0});f.noDominantCategoryField="no_dominant_category";f.getSQLForPredominantCategoryName=function(a){return{expression:l(a,{returnFieldName:!0,defaultValue:"'"+f.noDominantCategoryField+"'"})}};f.getPredominanceExpressions=function(a,
g){var c=g.join(" + "),e={sqlExpression:"("+c+")",sqlWhere:n(g)};a={sqlExpression:"(( ("+l(g,{layer:a})+") / ("+c+") ) * 100)",sqlWhere:n(g)+" AND (("+c+") \x3e 0)"};return{predominantCategory:{valueExpression:h(g)},size:{valueExpression:p(g),statisticsQuery:e,histogramQuery:e},opacity:{valueExpression:b(g),statisticsQuery:a,histogramQuery:a}}};f.getArcadeForPredominantCategory=h;f.getArcadeForPredominantCategoryValue=function(a){var b=e(a);return"\n  "+c(a)+"\n  "+b+"\n  return maxValue;\n  "};f.getArcadeForPredominantCategoryAlias=
function(a,b){var g=a.map(function(a){return a.fieldName}),e=c(g),d=a.map(function(a){return a.label?'"'+a.label+'"':'"'+a.fieldName+'"'}),h=g.map(function(a){return'Number($feature["'+a+'"])'}),p=[];b&&b.forEach(function(a,b){p.push("function getValueForExpr"+b+"() {\n  "+a.expression+" \n}");h.push("Number(getValueForExpr"+b+"())");d.push('"'+(a.title||a.name)+'"')});return"\n  "+e+"\n\n  "+(p.length?p.join("\n"):"")+"\n\n  var values \x3d [ "+h.join(", ")+" ];\n  var aliases \x3d [ "+d.join(", ")+
" ];\n  var numValues \x3d "+h.length+';\n  var maxValueAlias \x3d null;\n  var maxValue \x3d -Infinity;\n  var value, i, totalValue \x3d null;\n\n  for(i \x3d 0; i \x3c numValues; i++) {\n    value \x3d values[i];\n\n    if(value \x3e 0) {\n      if(value \x3e maxValue) {\n        maxValue \x3d value;\n        maxValueAlias \x3d aliases[i];\n      }\n      else if (value \x3d\x3d maxValue) {\n        maxValueAlias \x3d "Tie";\n      }\n    }\n  }\n  return maxValueAlias;\n  '};f.getArcadeForPredominanceMargin=
function(a){var b=c(a);a=a.map(function(a){return'$feature["'+a+'"]'});return"\n  "+b+"\n  var fieldValues \x3d [ "+a.join(", ")+" ];\n  var totalValue \x3d Sum(fieldValues);\n  var order \x3d Reverse(Sort(fieldValues));\n  return IIF(totalValue \x3e 0, Round(((order[0] - order[1]) / totalValue) * 100, 2), null);\n  "};f.getArcadeForSumOfFields=p;f.getArcadeForStrengthOfPredominance=b;f.getArcadeForOrderedFields=function(a,b){var g=a.map(function(a){return a.fieldName}),g=c(g),e=a.map(function(a){return'{\n    value: Number($feature["'+
a.fieldName+'"]),\n    alias: "'+(a.label||a.fieldName)+'"\n    }'}),d=[];b&&b.forEach(function(a,b){d.push("function getValueForExpr"+b+"() {\n  "+a.expression+" \n}");e.push("{\n          value: Number(getValueForExpr"+b+'()),\n          alias: "'+(a.title||a.name)+'"\n          }')});return"\n  "+g+"\n\n  "+(d.length?d.join("\n"):"")+"\n\n  var groups \x3d [ "+e.join(", ")+' ];\n  var numTopValues \x3d Count(groups);\n\n  function getValuesArray(arr){\n    var valuesArray \x3d []\n    for(var i in arr){\n      valuesArray[i] \x3d arr[i].value;\n    }\n    return valuesArray;\n  }\n\n  function findAliases(top5Array, fullArray){\n    var aliases \x3d [];\n    var found \x3d "";\n    for(var i in top5Array){\n      for(var k in fullArray){\n        if(top5Array[i] \x3d\x3d fullArray[k].value \x26\x26 Find(fullArray[k].alias, found) \x3d\x3d -1){\n          found +\x3d fullArray[k].alias;\n          aliases[Count(aliases)] \x3d {\n            alias: fullArray[k].alias,\n            value: top5Array[i]\n          };\n        }\n      }\n    }\n    return aliases;\n  }\n\n  function getTopGroups(groupsArray){\n    var values \x3d getValuesArray(groupsArray);\n    var top5Values \x3d IIF(Max(values) \x3e 0, Top(Reverse(Sort(values)),numTopValues), "no data");\n    var top5Aliases \x3d findAliases(top5Values,groupsArray);\n\n    if(TypeOf(top5Values) \x3d\x3d "String"){\n      return top5Values;\n    } else {\n      var content \x3d "";\n      for(var i in top5Aliases){\n        if(top5Aliases[i].value \x3e 0){\n          content +\x3d (i+1) + ". " + top5Aliases[i].alias + " (" + Text(top5Aliases[i].value, "#,###") + ")";\n          content +\x3d IIF(i \x3c numTopValues-1, TextFormatting.NewLine, "");\n        }\n      }\n    }\n\n    return content;\n  }\n\n  getTopGroups(groups);\n  '}})},
"esri/smartMapping/support/adapters/LayerAdapter":function(){define(["require","exports","tslib","../../../core/Loadable","../../../core/accessorSupport/decorators"],function(r,f,d,n,l){return function(c){function e(e){return c.call(this,e)||this}d.__extends(e,c);d.__decorate([l.property()],e.prototype,"geometryType",void 0);d.__decorate([l.property()],e.prototype,"objectIdField",void 0);d.__decorate([l.property()],e.prototype,"supportsSQLExpression",void 0);d.__decorate([l.property()],e.prototype,
"hasQueryEngine",void 0);d.__decorate([l.property()],e.prototype,"minScale",void 0);d.__decorate([l.property()],e.prototype,"maxScale",void 0);d.__decorate([l.property()],e.prototype,"fullExtent",void 0);return e=d.__decorate([l.subclass("esri.smartMapping.support.adapters.LayerAdapter")],e)}(n)})},"esri/smartMapping/support/adapters/support/utils":function(){define("require exports tslib ../../../../core/promiseUtils ../../../../renderers/support/heatmapUtils ../../utils ../../../../support/arcadeOnDemand ../../../../tasks/support/ClassBreaksDefinition ../../../../tasks/support/generateRendererUtils".split(" "),
function(r,f,d,n,l,c,e,h,p){function b(a,b,g){b=null==b?-Infinity:b;g=null==g?Infinity:g;return a.filter(function(a){return null!=a&&B(a)&&a>=b&&a<=g})}function a(a,b){return d.__awaiter(this,void 0,void 0,function(){var g,c,k,q,m,t,h,u,p,w,v;return d.__generator(this,function(d){switch(d.label){case 0:return g=a.field,c="function"===typeof g,k=a.valueExpression,q=a.normalizationType,m=a.normalizationField,t=a.normalizationTotal,h=[],u=a.view,w=p=null,k?C?[3,2]:[4,e.loadArcade()]:[3,3];case 1:C=v=
d.sent().arcadeUtils,d.label=2;case 2:p=C.createFunction(k),w=u&&C.getViewInfo({viewingMode:"2d"===u.type?"map":u.viewingMode,scale:u.scale,spatialReference:u.spatialReference}),d.label=3;case 3:if(!b)return[2,h];b.forEach(function(a){var b=a.attributes,e;k?(e=C.createExecContext(a,w),e=C.executeFunction(p,e)):c?e=g.call(null,a):b&&(e=b[g]);q&&null!=e&&B(e)&&(b=b&&parseFloat(b[m]),"log"===q&&0!==e?e=Math.log(e)*Math.LOG10E:"percent-of-total"===q&&B(t)&&0!==t?e=e/t*100:"field"===q&&B(b)&&0!==b&&(e/=
b));h.push(e)});return[2,h]}})})}function g(a,b){for(var g=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,k=null,e=null,d=null,q=null,t=0;t<a.length;t++)var m=a[t],k=k+m,g=Math.min(g,m),c=Math.max(c,m);if(t=a.length){e=k/t;for(q=d=0;q<a.length;q++)m=a[q],d+=Math.pow(m-e,2);q=b?1<t?d/(t-1):0:0<t?d/t:0;d=Math.sqrt(q)}else c=g=null;return{avg:e,count:t,max:c,min:g,stddev:d,sum:k,variance:q}}function k(a){var b=a.field,g=a.classificationMethod||"equal-interval",c=a.normalizationType,k=a.normalizationField,
e=new h;e.classificationField=b;e.breakCount=a.breakCount;e.classificationMethod=g;e.standardDeviationInterval="standard-deviation"===g?a.standardDeviationInterval||1:void 0;e.normalizationType=c;e.normalizationField="field"===c?k:void 0;return e}function t(a,b){var g=b.classBreaks,c=g[0].minValue,k=g[g.length-1].maxValue,e="standard-deviation"===a.classificationMethod,d=A,g=g.map(function(a){var b=a.label;a={minValue:a.minValue,maxValue:a.maxValue,label:b};if(e&&b){var g=b.match(d).map(function(a){return+a.trim()});
2===g.length?(a.minStdDev=g[0],a.maxStdDev=g[1],0>g[0]&&0<g[1]&&(a.hasAvg=!0)):1===g.length&&(-1<b.indexOf("\x3c")?(a.minStdDev=null,a.maxStdDev=g[0]):-1<b.indexOf("\x3e")&&(a.minStdDev=g[0],a.maxStdDev=null))}return a});return{minValue:c,maxValue:k,classBreakInfos:g,normalizationTotal:b.normalizationTotal}}function m(a,b,g){b=(b-a)/g;for(var c=[],k,e=1;e<=g;e++)k=a+b,k=Number(k.toFixed(16)),c.push([a,k]),a=k;return c}function w(a){var b=a.field,g=a.normalizationType,k=a.normalizationField,e=a.normalizationTotal;
a=c.isIntegerField(a.layer,b);var d=b;"percent-of-total"===g?d="(("+(a?c.castIntegerFieldToFloat(b):b)+" / "+e+") * 100)":"log"===g?d="(log("+b+") * "+x+")":"field"===g&&(d="("+(a?c.castIntegerFieldToFloat(b):b)+" / "+k+")");return d}function v(a,b){for(var g=-1,c=a.length-1;0<=c;c--)if(b>=a[c][0]){g=c;break}return g}function q(a,b){var g;b=b.toLowerCase();if(a)for(var c in a)if(c.toLowerCase()!==b){g=a[c];break}return g}function u(a,b){var g;b=b.toLowerCase();if(a)for(var c in a)if(c.toLowerCase()===
b){g=a[c];break}return g}function E(a,b){if(b)for(var g in a)a[g].label=b[g];return{count:a}}function y(a,b,g){var c=a.count;a=[];g&&b&&"coded-value"===b.type&&b.codedValues.forEach(function(a){a=a.code;c.hasOwnProperty(a)||(c[a]={data:a,count:0})});for(var k in c)b=c[k],a.push({value:b.data,count:b.count,label:b.label});return{uniqueValueInfos:a}}function B(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&-Infinity!==a}Object.defineProperty(f,"__esModule",{value:!0});var z=/_value$/i,A=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,
x=Math.LOG10E;f.statisticTypes="min max avg stddev count sum variance".split(" ");var C=null;f.getSummaryStatisticsFromFeatureSet=function(a,b){a=(a=a&&a.features)&&a[0]&&a[0].attributes;var g={},c;for(c in a)g[c.replace(z,"").toLowerCase()]=a[c];g.min===g.max&&null!=g.min&&null==g.stddev&&(g.stddev=g.variance=0);b&&("min max avg stddev sum variance".split(" ").forEach(function(a){null!=g[a]&&(g[a]=Math.ceil(g[a]))}),g.min===g.max&&null!=g.min&&(g.avg=g.min,g.stddev=g.variance=0));return g};f.calculateStatsFromMemory=
function(c,k,e){return d.__awaiter(this,void 0,void 0,function(){var q,t;return d.__generator(this,function(d){switch(d.label){case 0:return[4,a(c,k)];case 1:return q=d.sent(),q=b(q,c.minValue,c.maxValue),t=g(q,!c.normalizationType),e&&["avg","stddev","variance"].forEach(function(a){null!=t[a]&&(t[a]=Math.ceil(t[a]))}),[2,t]}})})};f.getDataValues=a;f.processSummaryStatisticsResult=function(a){for(var b in a)-1<f.statisticTypes.indexOf(b)&&(B(a[b])||(a[b]=null));return a};f.createCBDefn=k;f.calculateHeatmapStats=
function(a,b,g,c,k,e){void 0===b&&(b=10);var d=new Float64Array(k*e),q=l.createKernel(b);b=Math.round(3*b);var t=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,h=0,u=0,p=0,w=0;g=l.createValueFunction(c,g);for(c=0;c<a.length;c++)for(var v=a[c],f=v.geometry,E=f.x-b,n=f.y-b,y=Math.max(0,E),h=Math.max(0,n),R=Math.min(e,f.y+b),f=Math.min(k,f.x+b),v=+g(v.attributes),B=h;B<R;B++)for(var z=q[B-n],D=y;D<f;D++){var h=B*k+D,A=d[h],h=d[h]+=z*q[D-E]*v,A=h-A,u=u+A,p=p+A*A;h<t&&(t=h);h>m&&(m=h);w++}return w?
{mean:u/w,stdDev:Math.sqrt((p-u*u/w)/w),min:t,max:m,mid:(m-t)/2,count:w}:{mean:0,stddev:0,min:0,max:0,mid:0,count:0}};f.calculateClassBreaksFromMemory=function(g,c){return d.__awaiter(this,void 0,void 0,function(){var e,q,m,h;return d.__generator(this,function(d){switch(d.label){case 0:return e=g.normalizationTotal,q=k({field:g.field,normalizationType:g.normalizationType,normalizationField:g.normalizationField,classificationMethod:g.classificationMethod,standardDeviationInterval:g.standardDeviationInterval,
breakCount:g.numClasses||5}),[4,a(g,c)];case 1:return m=d.sent(),m=b(m,g.minValue,g.maxValue),h=p.createGenerateRendererClassBreaks({definition:q,values:m,normalizationTotal:e}),[2,t(g,h)]}})})};f.resolveCBResult=t;f.getEqualIntervalBins=m;f.generateBinParams=function(a){var b=[],g=a.classBreaks,c=g[0].minValue,k=g[g.length-1].maxValue;g.forEach(function(a){b.push([a.minValue,a.maxValue])});return{min:c,max:k,intervals:b,sqlExpr:w({field:a.field,normalizationType:a.normalizationType,normalizationField:a.normalizationField,
normalizationTotal:a.normalizationTotal,layer:a.layer}),excludeZerosExpr:a.where,normTotal:a.normalizationTotal}};f.getFieldExpr=w;f.calculateHistogramFromMemory=function(b,g,c){return d.__awaiter(this,void 0,void 0,function(){var k,e,q,t,h,u,p,w,f,l,E;return d.__generator(this,function(d){switch(d.label){case 0:return k=g.min,e=g.max,q=g.normTotal,t=b.numBins||10,h=g.intervals||m(k,e,t),u=h.map(function(a,b){return{minValue:h[b][0],maxValue:h[b][1],count:0}}),[4,a(b,c)];case 1:p=d.sent();w=0;for(f=
p;w<f.length;w++)l=f[w],null!=l&&l>=k&&l<=e&&(E=v(h,l),-1<E&&u[E].count++);return[2,{bins:u,minValue:k,maxValue:e,normalizationTotal:q}]}})})};f.getHistogramFromFeatureSet=function(a,b,g,c,k){var e={};a&&a.features&&a.features.forEach(function(a){var b=a.attributes;a=q(b,"countOFExpr");b=u(b,"countOFExpr");0!==a&&(e[a]=b)});var d=[];m(b,g,c).forEach(function(a,b){b=(b+1).toString();d.push({minValue:a[0],maxValue:a[1],count:e.hasOwnProperty(b)?e[b]:0})});return{bins:d,minValue:b,maxValue:g,normalizationTotal:k}};
f.getUniqueValuesFromFeatureSet=function(a,b,g,c,k){var e="countOF"+(g||"Expr"),d={},t=!1;(a&&a.features).forEach(function(a){var b=a.attributes;a=u(b,e);b=g?u(b,g):q(b,e);null===b&&0===a&&(t=!0);if(null==b||"string"===typeof b&&""===b.trim())b=null;null==d[b]?d[b]={count:a,data:b}:d[b].count+=a});return g&&t?b.queryFeatureCount(g+" is NULL",k).then(function(a){d["null"].count+=a||0;return E(d,c)}).catch(function(){n.throwIfAborted(k);return E(d,c)}):n.resolve(E(d,c))};f.createUVResult=y;f.calculateUniqueValuesFromMemory=
function(b,g,c){return d.__awaiter(this,void 0,void 0,function(){var k,e,q,t,m;return d.__generator(this,function(d){switch(d.label){case 0:return[4,a(b,g)];case 1:k=d.sent();e={};q=0;for(t=k;q<t.length;q++){m=t[q];if(null==m||"string"===typeof m&&""===m.trim())m=null;null==e[m]?e[m]={count:1,data:m}:e[m].count++}return[2,y({count:e},c,b.returnAllCodedValues)]}})})};f.msSinceUnixEpochSQL=function(a,b){return c.getDateDiffSQL(a,new Date(0),b,"milliseconds").sqlExpression};f.isValidNumber=B})},"esri/renderers/support/heatmapUtils":function(){define(["require",
"exports","../../core/global","../../core/mathUtils"],function(r,f,d,n){function l(c,e,b,a,g){c=new Uint32Array(c*c);e="buffer"in e?e:new Float64Array(e);b="buffer"in b?new Uint32Array(b.buffer):new Uint32Array((new Uint8Array(b)).buffer);g=b.length/(g-a);for(var k=0;k<e.length;k++)c[k]=b[n.clamp(Math.floor((e[k]-a)*g),0,b.length-1)];return c.buffer}function c(c){for(var e=Math.round(3*c),b=2*c*c,a=new Float64Array(2*e+1),g=0;g<=a.length;g++)a[g]=Math.exp(-Math.pow(g-e,2)/b)/Math.sqrt(2*Math.PI)*
(c/2);return a}function e(c,e){return"function"===typeof c?c:c?"string"===typeof e?function(b){return-1*+b[c]}:function(b){return+b[c]+e}:function(){return 1}}Object.defineProperty(f,"__esModule",{value:!0});f.generateGradient=function(){if(!("document"in d))return function(){return null};var c=document.createElement("canvas"),e=c.getContext("2d");c.height=512;c.width=1;return function(b){e.clearRect(0,0,1,c.height);var a=e.createLinearGradient(0,0,0,c.height),g=0;for(b=b.colorStops;g<b.length;g++){var k=
b[g],d=k.color;a.addColorStop(Math.max(k.ratio,.001),"rgba("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")")}e.fillStyle=a;e.fillRect(0,0,1,c.height);return e.getImageData(0,0,1,c.height).data}}();f.calculateHeatmapIntensityInfo=function(d,p,b,a){var g=p.blurRadius,k=p.fieldOffset,t=p.field;p=new Float64Array(b*a);for(var m=c(g),g=Math.round(3*g),h=Number.NEGATIVE_INFINITY,v,k=e(t,k),t=0;t<d.length;t++){var q=d[t],u=q.geometry,f=u.x-g,l=u.y-g,n=Math.max(0,f);v=Math.max(0,l);for(var z=Math.min(a,u.y+g),u=
Math.min(b,u.x+g),q=+k(q.attributes),A=v;A<z;A++)for(var x=m[A-l],r=n;r<u;r++)v=p[A*b+r]+=x*m[r-f]*q,v>h&&(h=v)}return{matrix:p.buffer,max:h}};f.drawHeatmap=function(c,e,b,a,g,k){c.canvas.width=c.canvas.height=e;c.clearRect(0,0,e,e);var d=c.getImageData(0,0,e,e);b&&a&&d.data.set(new Uint8ClampedArray(l(e,b,a,g,k)));c.putImageData(d,0,0)};f.createHeatmapImageData=l;f.createKernel=c;f.createValueFunction=e})},"esri/tasks/support/ClassBreaksDefinition":function(){define("require exports tslib ../../core/jsonMap ../../core/accessorSupport/decorators ./ClassificationDefinition".split(" "),
function(r,f,d,n,l,c){var e=new n.default({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),h=new n.default({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});return function(c){function b(){var a=null!==c&&c.apply(this,arguments)||this;a.breakCount=null;a.classificationField=null;a.classificationMethod=
null;a.normalizationField=null;a.normalizationType=null;a.type="class-breaks-definition";return a}d.__extends(b,c);Object.defineProperty(b.prototype,"standardDeviationInterval",{set:function(a){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",a)},enumerable:!0,configurable:!0});d.__decorate([l.property({json:{write:!0}})],b.prototype,"breakCount",void 0);d.__decorate([l.property({json:{write:!0}})],b.prototype,"classificationField",void 0);d.__decorate([l.property({type:String,
json:{read:e.read,write:e.write}})],b.prototype,"classificationMethod",void 0);d.__decorate([l.property({json:{write:!0}})],b.prototype,"normalizationField",void 0);d.__decorate([l.property({json:{read:h.read,write:h.write}})],b.prototype,"normalizationType",void 0);d.__decorate([l.property({value:null,json:{write:!0}})],b.prototype,"standardDeviationInterval",null);d.__decorate([l.property()],b.prototype,"type",void 0);return b=d.__decorate([l.subclass("esri.tasks.support.ClassBreaksDefinition")],
b)}(c)})},"esri/tasks/support/ClassificationDefinition":function(){define("require exports tslib ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/Symbol ./colorRamps".split(" "),function(r,f,d,n,l,c,e,h){var p=new n.default({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});return function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.baseSymbol=null;a.colorRamp=null;a.type=null;return a}d.__extends(a,
b);d.__decorate([c.property({type:e,json:{write:!0}})],a.prototype,"baseSymbol",void 0);d.__decorate([c.property({types:h.types,json:{read:{reader:h.fromJSON},write:!0}})],a.prototype,"colorRamp",void 0);d.__decorate([c.property({json:{read:p.read,write:p.write}})],a.prototype,"type",void 0);return a=d.__decorate([c.subclass("esri.tasks.support.ClassificationDefinition")],a)}(l.JSONSupport)})},"esri/tasks/support/generateRendererUtils":function(){define(["require","exports"],function(r,f){function d(a){var g=
a.definition,e=g.classificationMethod,d=g.breakCount,w=g.normalizationType,v=[],q=a.values;if(0===q.length)return[];var q=q.sort(function(a,b){return a-b}),u=q[0];a=q[q.length-1];if("equal-interval"===e)if(q.length>=d){q=(a-u)/d;e=u;for(g=1;g<d;g++){var f=Number((u+g*q).toFixed(6));v.push({minValue:e,maxValue:f,label:n(e,f,w)});e=f}v.push({minValue:e,maxValue:a,label:n(e,a,w)})}else q.forEach(function(a){v.push({minValue:a,maxValue:a,label:n(a,a,w)})});else if("natural-breaks"===e){for(var q=l(q),
y=c(q.uniqueValues,q.valueFrequency,d),e=u,g=1;g<d;g++)q.uniqueValues.length>g&&(f=Number(q.uniqueValues[y[g]].toFixed(6)),v.push({minValue:e,maxValue:f,label:n(e,f,w)}),e=f);v.push({minValue:e,maxValue:a,label:n(e,a,w)})}else if("quantile"===e)if(q.length>=d&&u!==a){e=u;u=Math.ceil(q.length/d);f=0;for(g=1;g<d;g++)y=u+f-1,y>q.length&&(y=q.length-1),0>y&&(y=0),v.push({minValue:e,maxValue:q[y],label:n(e,q[y],w)}),e=q[y],f+=u,u=Math.ceil((q.length-f)/(d-g));v.push({minValue:e,maxValue:a,label:n(e,a,
w)})}else for(e=-1,g=0;g<q.length;g++)f=q[g],f!==e&&(e=f,v.push({minValue:e,maxValue:f,label:n(e,f,w)}),e=f);else if("standard-deviation"===e)if(y=p(q),e=b(q,y),0===e)v.push({minValue:q[0],maxValue:q[0],label:n(q[0],q[0],w)});else{for(var q=h(u,a,d,y,e),q=q*e,B=0,e=u,g=d;1<=g;g--)u=Number((y-(g-.5)*q).toFixed(6)),v.push({minValue:e,maxValue:u,label:n(e,u,w)}),e=u,B++;f=Number((y+.5*q).toFixed(6));v.push({minValue:e,maxValue:f,label:n(e,f,w)});e=f;B++;for(g=1;g<=d;g++)f=B===2*d?a:Number((y+(g+.5)*
q).toFixed(6)),v.push({minValue:e,maxValue:f,label:n(e,f,w)}),e=f,B++}return v}function n(a,b,c){var g=null;return g=a===b?c&&"percent-of-total"===c?a+"%":a.toString():c&&"percent-of-total"===c?a+"% - "+b+"%":a+" - "+b}function l(a){for(var b=[],g=[],c=Number.MIN_VALUE,e=1,d=-1,q=0;q<a.length;q++){var h=a[q];h===c?(e++,g[d]=e):null!==h&&(b.push(h),c=h,e=1,g.push(e),d++)}return{uniqueValues:b,valueFrequency:g}}function c(b,c,d){var g=b.length,k=[];d>g&&(d=g);for(var t=0;t<d;t++)k.push(Math.round(t*
g/d-1));k.push(g-1);for(var t=e(k,b,c,d),g=t.mean,t=t.sdcm,q=d,h=0,p=0,f=0,l=0,n=!0,A=0;2>A&&n;A++){0===A&&(n=!1);for(var x=0;x<q-1;x++)for(;k[x+1]+1!==k[x+2];)if(k[x+1]+=1,h=a(x,k,b,c),f=h.sbMean,h=h.sbSdcm,p=a(x+1,k,b,c),l=p.sbMean,p=p.sbSdcm,h+p<t[x]+t[x+1])t[x]=h,t[x+1]=p,g[x]=f,g[x+1]=l,n=!0;else{--k[x+1];break}for(x=q-1;0<x;x--)for(;k[x]!==k[x-1]+1;)if(--k[x],h=a(x-1,k,b,c),f=h.sbMean,h=h.sbSdcm,p=a(x,k,b,c),l=p.sbMean,p=p.sbSdcm,h+p<t[x-1]+t[x])t[x-1]=h,t[x]=p,g[x-1]=f,g[x]=l,n=!0;else{k[x]+=
1;break}}n&&(t=e(k,b,c,d));return k}function e(b,c,e,d){for(var g=[],k=[],q=[],m=0,t=[],h=[],p=0;p<d;p++){var f=a(p,b,c,e);t.push(f.sbMean);h.push(f.sbSdcm);m+=h[p]}for(var l=m,n=!0;n||m<l;){n=!1;g=[];for(p=0;p<d;p++)g.push(b[p]);for(p=0;p<d;p++)for(q=b[p]+1;q<=b[p+1];q++)if(k=c[q],0<p&&q!==b[p+1]&&Math.abs(k-t[p])>Math.abs(k-t[p-1]))b[p]=q;else if(p<d-1&&b[p]!==q-1&&Math.abs(k-t[p])>Math.abs(k-t[p+1])){b[p+1]=q-1;break}l=m;m=0;k=[];q=[];for(p=0;p<d;p++)k.push(t[p]),q.push(h[p]),f=a(p,b,c,e),t[p]=
f.sbMean,h[p]=f.sbSdcm,m+=h[p]}if(m>l){for(p=0;p<d;p++)b[p]=g[p],t[p]=k[p],h[p]=q[p];m=l}return{mean:t,sdcm:h}}function h(a,b,c,e,d){a=Math.max(e-a,b-e)/d/c;return 1<=a?1:.5<=a?.5:.25}function p(a){for(var b=0,g=0;g<a.length;g++)b+=a[g];return b/=a.length}function b(a,b){for(var g=0,c=0;c<a.length;c++)var e=a[c],g=g+(e-b)*(e-b);g/=a.length;return Math.sqrt(g)}function a(a,b,c,e){for(var g=0,k=0,d=b[a]+1;d<=b[a+1];d++)var m=e[d],g=g+c[d]*m,k=k+m;0>=k&&console.log("Exception in Natural Breaks calculation");
g/=k;k=0;for(d=b[a]+1;d<=b[a+1];d++)k+=e[d]*Math.pow(c[d]-g,2);return{sbMean:g,sbSdcm:k}}Object.defineProperty(f,"__esModule",{value:!0});f.createGenerateRendererUniqueValues=function(a){a=l(a);for(var b=[],g=a.uniqueValues.length,c=0;c<g;c++){var e=a.uniqueValues[c];b.push({value:e,count:a.valueFrequency[c],label:e.toString()})}return{uniqueValues:b}};f.createGenerateRendererClassBreaks=function(a){var b=a.normalizationTotal;return{classBreaks:d(a),normalizationTotal:b}}})},"esri/tasks/GenerateRendererTask":function(){define("require exports tslib ../request ../core/promiseUtils ../core/accessorSupport/decorators ../layers/support/layerSourceUtils ../renderers/support/jsonUtils ./QueryTask ./Task ./support/Query ./support/StatisticDefinition".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g){return function(b){function k(a){a=b.call(this,a)||this;a._field=null;a.checkValueRange=null;a.gdbVersion=null;a.source=null;return a}d.__extends(k,b);Object.defineProperty(k.prototype,"parsedUrl",{get:function(){var a=this._parseUrl(this.url);a.path+="/generateRenderer";return a},enumerable:!0,configurable:!0});k.prototype.execute=function(a,b){var g=this,c=a.classificationDefinition;a=d.__assign(d.__assign({},a.toJSON()),{f:"json"});this._field="esri.tasks.support.ClassBreaksDefinition"===
c.declaredClass?c.classificationField:c.attributeField;this.source&&(c={source:e.sourceToJSON(this.source)},a.layer=JSON.stringify(c));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);a.classificationDef&&(a.classificationDef=JSON.stringify(a.classificationDef));c={query:a};if(this.requestOptions||b)c=d.__assign(d.__assign(d.__assign({},this.requestOptions),b),c);return n(this.parsedUrl.path,c).then(function(a){return g._handleExecuteResponse(a)})};k.prototype._handleExecuteResponse=function(b){var c=
this,e=b&&b.data;if(e){if(!this.checkValueRange)return b=this._processRendererJSON(e),l.resolve(b);b=new p(this.url);var k=new g({statisticType:"min",onStatisticField:this._field}),d=new g({statisticType:"max",onStatisticField:this._field}),k=new a({outStatistics:[k,d]});return b.execute(k).then(function(a){a=a.features[0].attributes;var b=null,g=null,k;for(k in a)0===k.toLowerCase().indexOf("min")?b=a[k]:g=a[k];return c._processRendererJSON(e,b,g)})}};k.prototype._processRendererJSON=function(a,
b,g){if("classBreaks"===a.type){var c=h.fromJSON(a);return{classBreaks:c.classBreakInfos.map(function(a,e){0===e&&void 0!==b&&null!==b&&(a.minValue=b);e===c.classBreakInfos.length-1&&void 0!==g&&null!==g&&(a.maxValue=g);return{minValue:a.minValue,maxValue:a.maxValue,label:a.label}}),normalizationTotal:c.normalizationTotal}}return{uniqueValues:a.uniqueValueInfos.map(function(c,e){0===e&&void 0!==b&&null!==b&&(c.value=b);e===a.uniqueValueInfos.length-1&&void 0!==g&&null!==g&&(c.value=g);return{count:c.count,
value:c.value,label:c.label}})}};d.__decorate([c.property()],k.prototype,"checkValueRange",void 0);d.__decorate([c.property()],k.prototype,"gdbVersion",void 0);d.__decorate([c.property()],k.prototype,"source",void 0);d.__decorate([c.property({readOnly:!0,dependsOn:["url"]})],k.prototype,"parsedUrl",null);return k=d.__decorate([c.subclass("esri.tasks.GenerateRendererTask")],k)}(b)})},"esri/tasks/support/GenerateRendererParameters":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ./ClassificationDefinition".split(" "),
function(r,f,d,n,l,c){return function(e){function h(){var c=null!==e&&e.apply(this,arguments)||this;c.classificationDefinition=null;c.where=null;return c}d.__extends(h,e);d.__decorate([l.property({type:c,json:{read:{source:"classificationDef"},write:{target:"classificationDef"}}})],h.prototype,"classificationDefinition",void 0);d.__decorate([l.property({type:String,json:{write:!0}})],h.prototype,"where",void 0);return h=d.__decorate([l.subclass("esri.tasks.support.GenerateRendererParameters")],h)}(n.JSONSupport)})},
"esri/tasks/support/UniqueValueDefinition":function(){define(["require","exports","tslib","../../core/accessorSupport/decorators","./ClassificationDefinition"],function(r,f,d,n,l){return function(c){function e(){var e=null!==c&&c.apply(this,arguments)||this;e.attributeField=null;e.attributeField2=null;e.attributeField3=null;e.fieldDelimiter=null;e.type="unique-value-definition";return e}d.__extends(e,c);Object.defineProperty(e.prototype,"uniqueValueFields",{get:function(){var c=[];this.attributeField&&
c.push(this.attributeField);this.attributeField2&&c.push(this.attributeField2);this.attributeField3&&c.push(this.attributeField3);return c},enumerable:!0,configurable:!0});d.__decorate([n.property()],e.prototype,"attributeField",void 0);d.__decorate([n.property()],e.prototype,"attributeField2",void 0);d.__decorate([n.property()],e.prototype,"attributeField3",void 0);d.__decorate([n.property({json:{write:!0}})],e.prototype,"fieldDelimiter",void 0);d.__decorate([n.property({dependsOn:["attributeField",
"attributeField2","attributeField3"],json:{write:!0}})],e.prototype,"uniqueValueFields",null);d.__decorate([n.property()],e.prototype,"type",void 0);return e=d.__decorate([n.subclass("esri.tasks.support.UniqueValueDefinition")],e)}(l)})},"esri/smartMapping/support/adapters/PointCloudLayerAdapter":function(){define("require exports tslib ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../../../layers/support/fieldUtils ./SceneLayerAdapter".split(" "),function(r,f,d,n,l,c,e){return function(e){function h(b){return e.call(this,
b)||this}d.__extends(h,e);h.prototype.getField=function(b){void 0===b&&(b="");return c.getField(this.layer.fields,b)};h.prototype.getFieldUsageInfo=function(b){b=this.getField(b);if(!b)return null;b=this._hasCachedStatistics(b.name);return{supportsLabelingInfo:b,supportsPopupTemplate:b,supportsRenderer:b,supportsLayerQuery:!1,supportsStatistics:b}};h.prototype.getFieldDomain=function(){return null};h.prototype.load=function(b){var a=this;b=this.layer.load(b).then(function(){a.geometryType="point";
a.objectIdField=null;a.supportsSQLExpression=!1;a.hasQueryEngine=!1});this.addResolvingPromise(b);return n.resolve(this)};return h=d.__decorate([l.subclass("esri.smartMapping.support.adapters.PointCloudLayerAdapter")],h)}(e)})},"esri/smartMapping/support/adapters/SceneLayerAdapter":function(){define("require exports tslib ../../../Graphic ../../../core/arrayUtils ../../../core/Error ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../layers/support/fieldUtils ../../statistics/support/utils ./FeatureLayerAdapter ./LayerAdapter ./support/utils ../../../tasks/support/FeatureSet".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g,k,t,m){return function(k){function f(a){return k.call(this,a)||this}d.__extends(f,k);f.prototype._hasCachedStatistics=function(a){return this.layer.hasCachedStatistics(a)};f.prototype._fetchFeaturesFromMemory=function(a,b){return a?a.whenLayerView(this.layer).then(function(a){var g=h.whenFalseOnce(a,"updating").then(function(){return a.queryFeatures(b)}).then(function(a){return"esri.tasks.support.FeatureSet"===a.declaredClass?a.features:a});return e.timeout(g,1E4,
null)}):e.reject(new c("scene-layer-adapter:insufficient-data","view is required to fetch the features from layerView"))};f.prototype._generateFeatureSetForCachedHistogram=function(a,b,g,c){void 0===b&&(b=a.minimum);void 0===g&&(g=a.maximum);for(var e=[],k=0;k<c;k++)e[k]=0;for(var d=a.counts.length,q=a.minimum,h=a.maximum,k=0;k<d;k++){var t=(k+.5)/d,t=((1-t)*q+t*h-b)/(g-b)*c;0<=t&&t<=c&&(e[t===c?c-1:Math.floor(t)]+=a.counts[k])}var p=[];e.forEach(function(a,b){var g=new n({attributes:{}});g.attributes.EXPR_1=
b+1;g.attributes.countOFExpr=a;p.push(g)});a=new m;a.features=p;return a};f.prototype._getCachedStatistics=function(a,b){var g=this.layer;return a.valueExpression||a.sqlExpression||a.sqlWhere||a.minValue||a.maxValue?e.reject(new c("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression', 'sqlWhere', 'minValue' or 'maxValue' is specified")):g.queryCachedStatistics(b&&b.name,{signal:a.signal}).then(function(a){var b=a.stats;a=b.min;
var g=b.max,c=b.avg,e=b.stddev,k=b.sum,d=b.variance,b=b.count;if(0!==a||0!==g)c=0===c?null:c,k=0===k?null:k,e=0===e?null:e,d=0===d?null:d,b=0===b?null:b;null==b&&null!=k&&null!=c&&(b=Math.round(k/c));return{avg:c,count:b,max:g,min:a,stddev:e,sum:k,variance:d}})};f.prototype._getSummaryStatisticsFromMemory=function(a,g){return d.__awaiter(this,void 0,void 0,function(){var e,k,q,h,m,p,u,f;return d.__generator(this,function(w){switch(w.label){case 0:if(!a.features)return[3,1];k=a.features;return[3,3];
case 1:return[4,this._fetchFeaturesFromMemory(a.view)];case 2:k=w.sent(),w.label=3;case 3:q=(e=k)&&e.length;if(!q)throw new c("scene-layer-adapter:insufficient-data","No features are available to calculate statistics");h=b.isDateField(g);m=d.__assign({},a);return"percent-of-total"!==m.normalizationType?[3,5]:[4,t.calculateStatsFromMemory({field:m.field},e)];case 4:p=w.sent();u=p.sum;if(null==u)throw new c("scene-layer-adapter:invalid","invalid normalizationTotal");m.normalizationTotal=u;w.label=5;
case 5:return[4,t.calculateStatsFromMemory(m,e,h)];case 6:return f=w.sent(),[2,t.processSummaryStatisticsResult(f)]}})})};f.prototype._getCachedStatisticsForUniqueValues=function(a,g){var k=this,d=this.layer,q=g&&g.name,h=g&&this.getFieldDomain(a.field);return a.valueExpression||a.sqlExpression||a.sqlWhere?e.reject(new c("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression' or 'sqlWhere' is specified")):d.queryCachedStatistics(q,
{signal:a.signal}).then(function(c){var e=c.stats;c=c.labels&&c.labels.labels;var h={},p=[];if(e.mostFrequentValues){var u="countOF"+q;e.mostFrequentValues.forEach(function(a){var c=new n({attributes:{}});c.attributes[q]=g&&g.name!==d.objectIdField&&(b.isNumericField(g)||b.isDateField(g))?Number(a.value):a.value;c.attributes[u]=a.count;p.push(c)});c&&c.forEach(function(a){h[a.value]=a.label})}e=new m;e.features=p;return t.getUniqueValuesFromFeatureSet(e,k,a.field,h,a.signal)}).then(function(b){return t.createUVResult(b,
h,a.returnAllCodedValues)})};f.prototype._getUniqueValuesFromMemory=function(a,b){var g=b&&this.getFieldDomain(a.field);return(a.features?e.resolve(a.features):this._fetchFeaturesFromMemory(a.view)).then(function(b){return t.calculateUniqueValuesFromMemory(a,b,g)})};f.prototype._getCachedStatisticsForHistogram=function(a,b){var g=this,k=this.layer;return a.valueExpression||a.sqlExpression||a.sqlWhere||a.normalizationType?e.reject(new c("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression' or 'sqlExpression' or 'sqlWhere' or 'normalizationType' is specified")):
k.queryCachedStatistics(b&&b.name,{signal:a.signal}).then(function(b){b=b.stats;var c=a.minValue,e=a.maxValue,c=null!=c?c:b.min,e=null!=e?e:b.max,k=a.numBins||10;b=g._generateFeatureSetForCachedHistogram(b.histogram,c,e,k);return t.getHistogramFromFeatureSet(b,c,e,k)})};f.prototype._getClassBreaksFromMemory=function(a){return d.__awaiter(this,void 0,void 0,function(){var b,g,e,k,q,h;return d.__generator(this,function(m){switch(m.label){case 0:if(!a.features)return[3,1];g=a.features;return[3,3];case 1:return[4,
this._fetchFeaturesFromMemory(a.view)];case 2:g=m.sent(),m.label=3;case 3:e=(b=g)&&b.length;if(!e)throw new c("scene-layer-adapter:insufficient-data","No features are available to calculate statistics");k=d.__assign({},a);return"percent-of-total"!==k.normalizationType?[3,5]:[4,t.calculateStatsFromMemory({field:k.field},b)];case 4:q=m.sent();h=q.sum;if(null==h)throw new c("scene-layer-adapter:invalid","invalid normalizationTotal");k.normalizationTotal=h;m.label=5;case 5:return[2,t.calculateClassBreaksFromMemory(k,
b)]}})})};f.prototype._getHistogramFromMemory=function(a){var b=this;return(a.features?e.resolve(a.features):this._fetchFeaturesFromMemory(a.view)).then(function(g){if(!g||!g.length)throw new c("scene-layer-adapter:insufficient-data","No features are available to calculate histogram");var k=a.field,q=a.normalizationType,h=a.valueExpression,m=a.classificationMethod,p=a.minValue,u=a.maxValue,f=a.view,w=null!=p&&null!=u,l=null;m&&"equal-interval"!==m||q?(k=d.__assign({},a),k.features=g,l=b._getBinParamsFromMemory(k)):
l=w?e.resolve({min:p,max:u}):b.summaryStatistics({field:k,valueExpression:h,features:g,view:f,signal:a.signal}).then(function(a){return a.count?{min:a.min,max:a.max}:e.reject(new c("feature-layer-adapter:insufficient-data","No features are available to calculate histogram"))});return l.then(function(b){return t.calculateHistogramFromMemory(a,b,g)})})};f.prototype._getBinParamsFromMemory=function(b){return d.__awaiter(this,void 0,void 0,function(){var g,c,e,k,q,h,m,p,f,w,l=this;return d.__generator(this,
function(d){g=b.field;c=b.valueExpression;e=b.classificationMethod;k=b.standardDeviationInterval;q=b.normalizationType;h=b.normalizationField;m=b.minValue;p=b.maxValue;f=b.features;w=b.view;return[2,this._getClassBreaksFromMemory({field:g,valueExpression:c,normalizationType:q,normalizationField:h,classificationMethod:e,standardDeviationInterval:k,minValue:m,maxValue:p,numClasses:b.numBins,features:f,view:w}).then(function(b){var c=b.normalizationTotal;b=b.classBreakInfos;var e=a.getSQLFilterForNormalization({field:g,
normalizationType:q,normalizationField:h});return t.generateBinParams({field:g,normalizationType:q,normalizationField:h,normalizationTotal:c,classBreaks:b,where:e,layer:l})})]})})};f.prototype.getField=function(a){void 0===a&&(a="");return this.layer.getField(a)};f.prototype.getFieldUsageInfo=function(a){a=this.getField(a);if(!a)return null;a=this.layer.getFieldUsageInfo(a.name);return{supportsLabelingInfo:a.supportsLabelingInfo,supportsPopupTemplate:a.supportsPopupTemplate,supportsRenderer:a.supportsRenderer,
supportsLayerQuery:a.supportsLayerQuery,supportsStatistics:!0}};f.prototype.getFieldDomain=function(a,b){return this._featureLayerAdapter?this._featureLayerAdapter.getFieldDomain(a,b):null};f.prototype.summaryStatistics=function(a){var b=this,g=this.getField(a.field);return this._featureLayerAdapter?this._featureLayerAdapter.summaryStatistics(a):this._hasCachedStatistics(g&&g.name)?this._getCachedStatistics(a,g).catch(function(){e.throwIfAborted(a.signal);return b._getSummaryStatisticsFromMemory(a,
g)}):this._getSummaryStatisticsFromMemory(a,g)};f.prototype.uniqueValues=function(a){var b=this,g=this.getField(a.field);return this._featureLayerAdapter?this._featureLayerAdapter.uniqueValues(a):this._hasCachedStatistics(g&&g.name)?this._getCachedStatisticsForUniqueValues(a,g).catch(function(){e.throwIfAborted(a.signal);return b._getUniqueValuesFromMemory(a,g)}):this._getUniqueValuesFromMemory(a,g)};f.prototype.histogram=function(a){var b=this,g=this.getField(a.field);return this._featureLayerAdapter?
this._featureLayerAdapter.histogram(a):this._hasCachedStatistics(g&&g.name)?this._getCachedStatisticsForHistogram(a,g).catch(function(){e.throwIfAborted(a.signal);return b._getHistogramFromMemory(a)}):this._getHistogramFromMemory(a)};f.prototype.classBreaks=function(a){var b=this.getField(a.field);return this._featureLayerAdapter?this._featureLayerAdapter.classBreaks(a):this._hasCachedStatistics(b&&b.name)?e.reject(new c("scene-layer-adapter:not-supported","Cached stats not supported")):this._getClassBreaksFromMemory(a)};
f.prototype.queryFeatureCount=function(a,b){return this._featureLayerAdapter?this._featureLayerAdapter.queryFeatureCount(a,b):e.reject(new c("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support count query"))};f.prototype.generateRenderer=function(a,b){return this._featureLayerAdapter?this._featureLayerAdapter.generateRenderer(a,b):e.reject(new c("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support generateRenderer operation"))};
f.prototype.heatmapStatistics=function(a){return this._featureLayerAdapter?this._featureLayerAdapter.heatmapStatistics(a):e.reject(new c("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support heatmapStatistics operation"))};f.prototype.predominantCategories=function(a){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(b){if(this._featureLayerAdapter)return[2,this._featureLayerAdapter.predominantCategories(a)];throw new c("scene-layer-adapter:not-supported",
"SceneLayer without associated FeatureLayer does not support predominantCategories");})})};f.prototype.getSampleFeatures=function(a){return d.__awaiter(this,void 0,void 0,function(){var b,g,e,k,h,q,t;return d.__generator(this,function(m){switch(m.label){case 0:if("mesh"===this.layer.geometryType)throw new c("scene-layer-adapter:not-supported","getSampleFeatures does not support scene layer with mesh geometry type");b=a.view;g=a.sampleSize;e=1;k=this.layer.createQuery();k.outFields=null;k.returnGeometry=
!0;k.where=null;k.num=g;h=[];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this._fetchFeaturesFromMemory(b,k)];case 2:return h=m.sent(),h.length&&0<g&&g<=h.length?[2,l.pickRandom(h,g,e)]:[3,4];case 3:return m.sent(),[3,4];case 4:q=null;if(!this._featureLayerAdapter)return[3,6];t=d.__assign({},a);delete t.view;return[4,this._featureLayerAdapter.getSampleFeatures(t)];case 5:q=m.sent(),m.label=6;case 6:return q&&q.length?[2,q]:[2,l.pickRandom(h,h.length,e)]}})})};f.prototype.load=function(a){var b=
this,c=this.layer.load(a).then(function(c){var e=c.associatedLayer;b.geometryType=c.geometryType;if(e)return b._featureLayerAdapter=new g({layer:e}),b._featureLayerAdapter.load(a).then(function(){b.objectIdField=b._featureLayerAdapter.objectIdField;b.supportsSQLExpression=b._featureLayerAdapter.supportsSQLExpression;b.minScale=b._featureLayerAdapter.minScale;b.maxScale=b._featureLayerAdapter.maxScale;b.fullExtent=b._featureLayerAdapter.fullExtent});b.objectIdField=c.objectIdField;b.supportsSQLExpression=
!1;b.hasQueryEngine=!1;b.fullExtent=c.fullExtent});this.addResolvingPromise(c);return e.resolve(this)};d.__decorate([p.property({constructOnly:!0})],f.prototype,"layer",void 0);return f=d.__decorate([p.subclass("esri.smartMapping.support.adapters.SceneLayerAdapter")],f)}(k)})},"esri/smartMapping/symbology/support/utils":function(){define(["require","exports","../../../core/arrayUtils","../../../core/screenUtils","../../support/utils"],function(r,f,d,n,l){function c(a,b){return a.r===b.r&&a.g===b.g&&
a.b===b.b}function e(a){var b=a.width,c=a.height,e=a.pixelSizeAt(a.toMap(n.createScreenPoint(.5*b,.5*c),{exclude:[]}));0>=e&&(e=a.pixelSizeAt(a.toMap(n.createScreenPoint(.5*b,.95*c),{exclude:[]})),0>=e&&(b=a.camera.position.clone(),b.z=0,e=2*a.pixelSizeAt(b)));return e}Object.defineProperty(f,"__esModule",{value:!0});var h="streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),p=["satellite","hybrid",
"dark-gray","dark-gray-vector","streets-night-vector"],b=[].concat(h).concat(p);f.hasIdenticalColors=function(a,b){var g=0;if(a.length===b.length){var e=a.every(function(a,g){return c(a,b[g])});e?g=1:(e=a.slice(0).reverse().every(function(a,g){return c(a,b[g])}))&&(g=-1)}return g};f.getPixelSize=e;f.toWorldScale=function(a,b){return Math.ceil(e(b)*n.pt2px(n.toPt(a)))};f.getStorageType=function(a){return"multipoint"===a?"point":"mesh"===a?"polygon":a};f.getBasemapTheme=function(a){a=l.getBasemapId(a,
b,!1);if(!a)return null;if(-1<h.indexOf(a))return"light";if(-1<p.indexOf(a))return"dark"};f.getTagsFromSchemes=function(a){if(!a)return[];var b=new Set,c=[a.primaryScheme];a.secondarySchemes&&c.push.apply(c,a.secondarySchemes);for(a=0;a<c.length;a++){var e=c[a];e&&"tags"in e&&e.tags&&e.tags.forEach(function(a){return b.add(a)})}return d.keysOfSet(b)}})},"esri/widgets/Search/LayerSearchSource":function(){define("require exports tslib ../../core/lang ../../core/accessorSupport/decorators ./SearchSource ./support/layerSearchUtils".split(" "),
function(r,f,d,n,l,c,e){return function(c){function h(){var a=null!==c&&c.apply(this,arguments)||this;a.displayField=null;a.exactMatch=null;a.orderByFields=null;a.searchFields=null;a.searchTemplate=null;a.suggestionTemplate=null;a.getResults=function(b,c){return e.getResults(d.__assign({source:a},b),c)};a.getSuggestions=function(b,c){return e.getSuggestions(d.__assign({source:a},b),c)};return a}d.__extends(h,c);b=h;Object.defineProperty(h.prototype,"layer",{set:function(a){this._set("layer",a);a&&
a.load().catch(function(){})},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"name",{get:function(){return this._getLayerTitle()||""},set:function(a){void 0===a?this._clearOverride("name"):this._override("name",a)},enumerable:!0,configurable:!0});h.prototype.clone=function(){return new b({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?n.clone(this.outFields):
null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?n.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})};
h.prototype._getFirstStringField=function(){var a=this.layer,b="";a&&a.fields&&a.fields.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b};h.prototype._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};h.prototype._getSearchFieldsString=function(){var a=this.layer;return a.loaded?": "+(this.searchFields||[this._getDisplayField()]).map(function(b){var g=a.getField(b);return g&&g.alias||b}).join(", "):""};h.prototype._getLayerTitle=
function(){var a=this.layer;if(a&&(a=a.title))return""+a+this._getSearchFieldsString()};var b;d.__decorate([l.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],h.prototype,"displayField",void 0);d.__decorate([l.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],h.prototype,"exactMatch",void 0);d.__decorate([l.property({value:null})],h.prototype,"layer",null);d.__decorate([l.property({dependsOn:["layer.title","layer.loaded"]})],h.prototype,
"name",null);d.__decorate([l.property({type:[String],json:{write:!0}})],h.prototype,"orderByFields",void 0);d.__decorate([l.property()],h.prototype,"searchFields",void 0);d.__decorate([l.property()],h.prototype,"searchTemplate",void 0);d.__decorate([l.property()],h.prototype,"suggestionTemplate",void 0);return h=b=d.__decorate([l.subclass("esri.widgets.Search.LayerSearchSource")],h)}(c)})},"esri/widgets/Search/SearchSource":function(){define("require exports tslib ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(r,f,d,n,l,c){return function(e){function h(c){c=e.call(this,c)||this;c.autoNavigate=null;c.filter=null;c.getResults=null;c.getSuggestions=null;c.maxResults=null;c.maxSuggestions=null;c.minSuggestCharacters=null;c.outFields=null;c.placeholder="";c.popupEnabled=null;c.popupTemplate=null;c.prefix="";c.resultGraphicEnabled=null;c.resultSymbol=null;c.suggestionsEnabled=null;c.suffix="";c.withinViewEnabled=!1;c.zoomScale=null;return c}d.__extends(h,e);d.__decorate([c.property()],h.prototype,"autoNavigate",
void 0);d.__decorate([c.property()],h.prototype,"filter",void 0);d.__decorate([c.property()],h.prototype,"getResults",void 0);d.__decorate([c.property()],h.prototype,"getSuggestions",void 0);d.__decorate([c.property()],h.prototype,"maxResults",void 0);d.__decorate([c.property()],h.prototype,"maxSuggestions",void 0);d.__decorate([c.property()],h.prototype,"minSuggestCharacters",void 0);d.__decorate([c.property()],h.prototype,"outFields",void 0);d.__decorate([c.property()],h.prototype,"placeholder",
void 0);d.__decorate([c.property()],h.prototype,"popupEnabled",void 0);d.__decorate([c.property()],h.prototype,"popupTemplate",void 0);d.__decorate([c.property()],h.prototype,"prefix",void 0);d.__decorate([c.property()],h.prototype,"resultGraphicEnabled",void 0);d.__decorate([c.property()],h.prototype,"resultSymbol",void 0);d.__decorate([c.property()],h.prototype,"suggestionsEnabled",void 0);d.__decorate([c.property()],h.prototype,"suffix",void 0);d.__decorate([c.property()],h.prototype,"withinViewEnabled",
void 0);d.__decorate([c.property()],h.prototype,"zoomScale",void 0);return h=d.__decorate([c.subclass("esri.widgets.Search.SearchSource")],h)}(n.IdentifiableMixin(l.JSONSupport))})},"esri/widgets/Search/support/layerSearchUtils":function(){define("require exports ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/Polygon ./geometryUtils".split(" "),function(r,f,d,n,l,c,e,h,p,b,a){function g(a,
b){var g=a.filter;b=b&&b.extent;a=a.withinViewEnabled&&b?b:void 0;return g&&g.geometry||a}function k(a){return a?a.load().then(h.resolve).catch(h.reject):h.resolve()}function t(a){return a&&!!a.get("capabilities.query.supportsPagination")}function m(a){var b="";a&&(a=a.fields)&&a.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b}function w(a,b){return a&&b?b.every(function(b){return!!a.getField(b)}):!1}function v(a){for(var b=0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1}
function q(a,b,g){var c=null;(a=a.codedValues)&&a.some(function(a){var e=a.name,e=g?e:e.toLowerCase();return(g?b:b.toLowerCase())===e?(c=a.code.toString(),!0):!1});return c}function u(a,b){return(b=b&&b.where)?"("+a+") AND ("+b+")":a}function E(a,b,g,c,e){var k=b.definitionExpression,d="";if(a){var h=x.test(b.url)&&v(a)?"N":"";g&&g.forEach(function(g){var k=b.getField(g);g=((g="function"===typeof b.getFieldDomain&&b.getFieldDomain(g))&&"coded-value"===g.type?q(g,a,e):null)||a||null;if(null!==g){var m=
k.type,k=k.name;"string"===m||"date"===m||"global-id"===m?e?k=u(k+" \x3d "+h+"'"+g+"'",c):(g=g.toUpperCase(),k=u("UPPER("+k+") LIKE "+h+"'%"+g+"%'",c)):"oid"===m||"small-integer"===m||"integer"===m||"single"===m||"double"===m?(g=Number(g),k=isNaN(g)?null:u(k+" \x3d "+g,c)):k=u(k+" \x3d "+g,c);k&&(d+=d?" OR ("+k+")":"("+k+")")}})}return k?"("+k+") AND ("+d+")":d}function y(a,b){var g=null;(a=a.codedValues)&&a.length&&a.some(function(a){return a.code===b?(g=a.name,!0):!1});return g}function B(a,b,g){var c=
a.layer,e=a.attributes,k="function"===typeof c.getFieldDomain&&c.getFieldDomain(g);return b?d.substitute(b,e):g&&a.hasOwnProperty("attributes")&&e.hasOwnProperty(g)?(a=e[g],g=c.getField(g),k&&"coded-value"===k.type?y(k,a):g&&"date"===g.type?d.formatDate(new Date(a)):"number"===typeof a?a.toString():"string"!==typeof a?"":a.trim()):""}function z(a,b,g,c){return a.features.map(function(a){var e=a.attributes[a.layer.objectIdField];return{text:B(a,b.suggestionTemplate,c),key:e,sourceIndex:g}})}function A(g,
c,k,d,h,q,m){return g.features.map(function(g){var t=g.clone(),p=g.layer,p=(p=p&&p.objectIdField)&&g.attributes[p],f=B(g,k.searchTemplate,h),u=a.createExtentFromGeometry(t.geometry,c,q),u="number"===typeof m?a.scaleExtent(l.clone(u),c,m):u;g=g.clone();e.isSome(u)&&(g.geometry=b.fromExtent(u));return{extent:u,target:g,feature:t,key:p,name:f,sourceIndex:d}})}Object.defineProperty(f,"__esModule",{value:!0});var x=/https?:\/\/services.*\.arcgis\.com/i,C=/(?:\{([^}]+)\})/g,H=c.getLogger("esri.widgets.Search.support.layerSearchUtils");
f.getResults=function(a,b){var c=a.exactMatch,e=void 0===c?!1:c,d=a.location,h=a.maxResults,q=a.spatialReference,f=a.source,u=a.sourceIndex,l=a.suggestResult,v=a.view,y=f.layer,B=f.filter,z=f.zoomScale,D=v&&v.scale,r=g(f,v),x=b&&b.signal;return k(y).then(function(){var a=y.popupTemplate;return a?a.getRequiredFields(y.fields):null}).then(function(a){var b=y.objectIdField,g=y.returnZ,c=f.displayField||f.layer.displayField||m(f.layer);if(!y.getField(c))throw H.error("invalid-field: displayField is invalid."),
new n("getResults():invalid-field","displayField is invalid.");a=a&&a.length?a:[c];var k=(a=f.outFields||a)&&-1!==a.indexOf("*");-1!==a.indexOf(b)||k||a.push(b);if(!k&&!w(y,a))throw H.error("invalid-field: outField is invalid."),new n("getResults():invalid-field","outField is invalid.");b=y.createQuery();if(k=f.orderByFields)b.orderByFields=k;q&&(b.outSpatialReference=q,k=1/p.getMetersPerUnitForSR(q))&&(b.maxAllowableOffset=k);k=!!y.get("capabilities.data.supportsZ");b.returnZ=k&&!1!==g;b.returnGeometry=
!0;a&&(b.outFields=a);if(d)b.geometry=d;else if(l.key)b.objectIds=[parseInt(l.key,10)];else{g=f.searchFields||[c];if(!w(y,g))throw H.error("invalid-field: search field is invalid."),new n("getResults():invalid-field","search field is invalid.");t(y)&&(b.num=h);r&&(b.geometry=r);if(!l.text.trim())return[];a=f.prefix;k=f.suffix;a=(""+(void 0===a?"":a)+l.text+(void 0===k?"":k)).replace(/\'/g,"''");g=E(a,y,g,B,e);if(!g)return[];b.where=g}return y.queryFeatures(b,{signal:x}).then(function(a){return A(a,
v,f,u,c,D,z)})})};f.getSuggestions=function(a,b){var c=a.source,e=a.spatialReference,d=a.suggestTerm,h=a.maxSuggestions,q=a.sourceIndex,p=c.layer,f=c.filter,u=b&&b.signal,l=g(c,a.view);return k(p).then(function(){if(!t(p))return[];var a=c.displayField||c.layer.displayField||m(c.layer),b=c.searchFields||[a],g=[];c.suggestionTemplate?c.suggestionTemplate.replace(C,function(a,b){g.push(b);return a}):g.push(a);var k=g&&-1!==g.indexOf("*");-1!==g.indexOf(p.objectIdField)||k||g.push(p.objectIdField);var v=
!!p.getField(a),k=k||w(p,g),y=w(p,b);if(!v)throw H.error("invalid-field: displayField is invalid."),new n("getSuggestions():invalid-field","displayField is invalid.");if(!k)throw H.error("invalid-field: outField is invalid."),new n("getSuggestions():invalid-field","outField is invalid.");if(!y)throw H.error("invalid-field: search field is invalid."),new n("getSuggestions():invalid-field","search field is invalid.");v=p.createQuery();if(k=c.orderByFields)v.orderByFields=k;v.outSpatialReference=e;v.returnGeometry=
!1;v.num=h;v.outFields=g;l&&(v.geometry=l);if(!d.trim())return[];k=c.prefix;y=c.suffix;k=(""+(void 0===k?"":k)+d+(void 0===y?"":y)).replace(/\'/g,"''");b=E(k,p,b,f,!1);if(!b)return[];v.where=b;return p.queryFeatures(v,{signal:u}).then(function(b){return z(b,c,q,a)})})}})},"esri/widgets/Search/support/geometryUtils":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/scaleUtils ../../../views/MapView".split(" "),
function(r,f,d,n,l,c,e,h,p){function b(a,b,c){var g=a.hasZ?a.z:void 0;return b&&b.map?(c?h.getExtentForScale(b,c):b.extent).clone().centerAt(a).set({zmax:g,zmin:g}):new d.Extent({xmin:a.x-.25,ymin:a.y-.25,xmax:a.x+.25,ymax:a.y+.25,spatialReference:a.spatialReference,zmin:g,zmax:g})}Object.defineProperty(f,"__esModule",{value:!0});var a=l.getLogger("esri.widgets.Search.support.geometryUtils");f.getPointWithElevation=function(b,c){return c?b?b.hasZ||c instanceof p?e.resolve(b):(c=c.get("map.ground"))&&
c.layers.length?c.queryElevation(b).then(function(a){return a.geometry}):e.resolve(b):(a.error("missing-parameter: point is missing."),e.reject(new n("searchgeometryutils:missing-parameter","point is missing."))):(a.error("missing-parameter: view is missing."),e.reject(new n("searchgeometryutils:missing-parameter","view is missing.")))};f.getPointFromGeometry=function(a){return a instanceof d.Point?a:a instanceof d.Extent?a.center:a instanceof d.Polygon?a.centroid:a instanceof d.Multipoint?a.getPoint(0):
a instanceof d.Polyline?a.getPoint(0,0):null};f.createExtentFromGeometry=function(a,e,h){if(c.isNone(a))return null;if(a instanceof d.Extent)return a;if(a instanceof d.Multipoint||a instanceof d.Polygon||a instanceof d.Polyline)return a.extent;if(a instanceof d.Point)return b(a,e,h)};f.scaleExtent=function(a,e,d){return c.isNone(a)||c.isNone(e)?null:b(a.center,e,d)}})},"esri/geometry/support/scaleUtils":function(){define(["require","exports","../../core/unitUtils"],function(r,f,d){function n(f,c){c=
d.getMetersPerUnitForSR(c);return f/(c*d.inchesPerMeter*96)}Object.defineProperty(f,"__esModule",{value:!0});f.getScale=function(f,c){c=c||f.extent;f=f.width;var e=d.getMetersPerUnitForSR(c&&c.spatialReference);return c&&f?c.width/f*e*d.inchesPerMeter*96:0};f.getResolutionForScale=n;f.getScaleForResolution=function(f,c){c=d.getMetersPerUnitForSR(c);return f*c*d.inchesPerMeter*96};f.getExtentForScale=function(d,c){var e=d.extent;d=d.width;c=n(c,e.spatialReference);return e.clone().expand(c*d/e.width)}})},
"esri/views/MapView":function(){define("require exports tslib ../Graphic ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/Logger ../core/maybe ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./DOMContainer ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground @dojo/framework/shim/Promise".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g,k,t,m,w,v,q,u,E,y,B,z,A,x){function C(){return d.__awaiter(this,void 0,void 0,function(){var a,b,g,c,e,k,h;return d.__generator(this,function(d){switch(d.label){case 0:return[4,Promise.all([new Promise(function(a,b){r(["./webgl"],a,b)}),new Promise(function(a,b){r(["./2d/mapViewDeps"],a,b)}),new Promise(function(a,b){r(["./2d/engine"],a,b)})])];case 1:return a=d.sent(),b=a[1],g=b.GraphicsView2D,c=b.LabelManager,e=b.MapViewNavigation,k=b.MagnifierView2D,h=a[2].Stage,
I=g,G=c,O=e,K=k,F=h,[2]}})})}function H(a,b,g){a&&(Array.isArray(a)||l.isCollection(a)?0!==a.length&&a.forEach(function(a){return H(a,b,g)}):a instanceof n?b.add(a):g.add(a))}var D=p.getLogger("esri.views.MapView"),F,I,G,O,K;return function(p){function f(a){a=p.call(this,a)||this;a._magnifierView=null;a._stage=null;a._resolveWhenReady=[];a.rootLayerViews=new c({root:a,rootCollectionNames:["basemapView.baseLayerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(a){return null}});
a.graphicsView=null;a.highlightOptions=new y;a.magnifier=new q;a.inputManager=new E({view:a});a.mapViewNavigation=null;a.supersampleScreenhotsEnabled=!0;a.ui=new A;a.rendering=!1;t.initialize();return a}d.__extends(f,p);f.prototype.destroy=function(){this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};Object.defineProperty(f.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,
"textureManager",{get:function(){return this._stage.painter.textureManager},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"navigating",{get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)},enumerable:!0,configurable:!0});f.prototype.toMap=function(a){g.isSupportedScreenPointEvent(a)&&(a=g.createScreenPointFromSupportedEvent(this,a));return p.prototype.toMap.call(this,a)};f.prototype.hitTest=function(b,c){var e=g.isSupportedScreenPointEvent(b)?g.createScreenPointFromSupportedEvent(this,
b):b;if(!this.ready||isNaN(e.x)||isNaN(e.y))return a.resolve({screenPoint:e,results:[]});var k=this.toMap(e);b=[this.graphicsView];b.push.apply(b,this.allLayerViews.toArray().reverse());var d=new Set,h=new Set,q=new Set,m=new Set;c&&(H(c&&c.include,d,q),H(c&&c.exclude,h,m));return a.all(b.map(function(a){return!a||!a.hitTest||0<q.size&&!a.layer||0<q.size&&a.layer&&!q.has(a.layer)||0<m.size&&a.layer&&m.has(a.layer)?null:a.hitTest(e.x,e.y)})).then(function(a){return{screenPoint:e,results:a.filter(function(a){return null!=
a&&(0<d.size?d.has(a):!0)&&(0<h.size?!h.has(a):!0)}).map(function(a){return{mapPoint:k,graphic:a}})}})};f.prototype.takeScreenshot=function(b){return this.ready?this._stage.takeScreenshot(B.toRenderSettings(b,this),this.allLayerViews):a.reject("Map view cannot be used before it is ready")};f.prototype.on=function(a,b,g,c){return(g=this.inputManager&&this.viewEvents.on(a,b,g,c))?g:p.prototype.on.call(this,a,b)};f.prototype.hasEventListener=function(a){return p.prototype.hasEventListener.call(this,
a)||this.viewEvents.hasHandler(a)};f.prototype.whenLayerView=function(a){return p.prototype.whenLayerView.call(this,a)};f.prototype.graphicChanged=function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};f.prototype.whenReady=function(){var b=this;return a.create(function(a){b.ready?a(b):b._resolveWhenReady.push(a)})};f.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};f.prototype.validate=function(){var g=z.check({checkMajorWebPerformanceCaveat:!1});h("safari")&&9>
h("safari")&&(g=new e("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:h("safari")}));return b.isSome(g)?(D.warn("#validate()",g.message),a.reject(g)):C()};f.prototype._startup=function(){var a=this;this.timeline.begin("MapView Startup");p.prototype._startup.call(this);this.graphics.owner=this;var b=new F(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,
debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),g=new I({view:this,graphics:this.graphics,requestUpdateCallback:function(){return a.requestUpdate()}}),c=new O({view:this,animationManager:this.animationManager}),e=new G({view:this});this._magnifierView=new K;this._magnifierView.magnifier=this.magnifier;this._stage=b;this.frameTask.graphicsView=g;this._set("graphicsView",g);this._set("mapViewNavigation",c);this._set("labelManager",e);this.handles.add([this.rootLayerViews.on("change",
function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",b.renderRequested)}),b.on("will-render",function(){return a._set("rendering",b.renderRequested)}),b.on("webgl-error",function(b){return a.fatalError=b.error}),k.init(this,"stationary",function(a){return b.stationary=a},!0),k.init(this,"state.id",function(){return b.state=a.state},!0),k.init(this,"background",function(a){return b.background=a},!0),k.init(this,"magnifier",function(b){return a._magnifierView.magnifier=
b},!0),k.init(this,"renderingOptions",function(a){return b.renderingOptions=a},!0),k.init(this,"highlightOptions",function(){return b.highlightOptions=a.highlightOptions},!0)],"map-view");b.state=this.state;b.background=this.background;this._updateStageChildren();g=this._resolveWhenReady;this._resolveWhenReady=[];g.forEach(function(b){return b(a)});this.timeline.end("MapView Startup")};f.prototype._teardown=function(){this.handles.remove("map-view");this.layerViewManager.clear();this.labelManager.destroy();
this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;p.prototype._teardown.call(this)};f.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.rootLayerViews.forEach(function(b){a._stage.addChild(b.container)});this._stage.addChild(this.graphicsView.container);
this._stage.addChild(this._magnifierView)};d.__decorate([m.property({type:x,dependsOn:["map.initialViewProperties?.background"]})],f.prototype,"background",null);d.__decorate([m.property()],f.prototype,"graphicsView",void 0);d.__decorate([m.property({type:y})],f.prototype,"highlightOptions",void 0);d.__decorate([m.property({type:q})],f.prototype,"magnifier",void 0);d.__decorate([m.property({readOnly:!0})],f.prototype,"inputManager",void 0);d.__decorate([m.property({readOnly:!0})],f.prototype,"textureManager",
null);d.__decorate([m.property({readOnly:!0})],f.prototype,"mapViewNavigation",void 0);d.__decorate([m.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],f.prototype,"navigating",null);d.__decorate([m.property({type:Boolean,constructOnly:!0})],f.prototype,"supersampleScreenhotsEnabled",void 0);d.__decorate([m.property({type:A})],f.prototype,"ui",void 0);d.__decorate([m.property({readOnly:!0})],f.prototype,"rendering",void 0);d.__decorate([m.property({constructOnly:!0})],f.prototype,
"renderCanvas",void 0);d.__decorate([m.property({constructOnly:!0})],f.prototype,"deactivatedWebGLExtensions",void 0);d.__decorate([m.property({constructOnly:!0})],f.prototype,"debugWebGLExtensions",void 0);return f=d.__decorate([m.subclass("esri.views.MapView")],f)}(w.BreakpointsOwner(v.DOMContainer(u)))})},"esri/views/BreakpointsOwner":function(){define("require exports tslib ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators".split(" "),function(r,f,d,n,l,c,
e){function h(a,b){return b?p[a].valueToClassName[b].split(" "):[]}Object.defineProperty(f,"__esModule",{value:!0});var p={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var c=this.values;return b<=a.xsmall?c.xsmall:b<=a.small?c.small:b<=a.medium?c.medium:b<=a.large?c.large:c.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var c=this.values;return b<=a.xsmall?c.xsmall:b<=a.small?c.small:b<=a.medium?c.medium:b<=a.large?c.large:c.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},b={xsmall:544,small:768,medium:992,large:1200};f.BreakpointsOwner=
function(a){return function(a){function g(){for(var g=[],c=0;c<arguments.length;c++)g[c]=arguments[c];g=a.apply(this,g)||this;g._breakpointsHandles=new l;g.orientation=null;g.widthBreakpoint=null;g.heightBreakpoint=null;g.breakpoints=b;return g}d.__extends(g,a);g.prototype.initialize=function(){this._breakpointsHandles.add(c.init(this,["breakpoints","size"],this._updateClassNames))};g.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=
null)};Object.defineProperty(g.prototype,"breakpoints",{set:function(a){var g=this._get("breakpoints");if(a!==g){g=(g=a)&&g.xsmall<g.small&&g.small<g.medium&&g.medium<g.large;if(!g){var c=JSON.stringify(b,null,2);console.warn("provided breakpoints are not valid, using defaults:"+c)}a=g?a:b;this._set("breakpoints",d.__assign({},a))}},enumerable:!0,configurable:!0});g.prototype._updateClassNames=function(){if(this.container){var a=n.acquire(),b=n.acquire(),g=!1,c;for(c in p){var e=this[c],k=p[c].getValue({viewSize:this.size,
breakpoints:this.breakpoints});e!==k&&(g=!0,this[c]=k,h(c,e).forEach(function(a){return b.push(a)}),h(c,k).forEach(function(b){return a.push(b)}))}g&&(this._applyClassNameChanges(a,b),n.release(a),n.release(b))}};g.prototype._applyClassNameChanges=function(a,b){var g=this.container;g&&(b.forEach(function(a){return g.classList.remove(a)}),a.forEach(function(a){return g.classList.add(a)}))};g.prototype._removeActiveClassNames=function(){var a=this.container;if(a)for(var b in p)h(b,this[b]).forEach(function(b){return a.classList.remove(b)})};
d.__decorate([e.property()],g.prototype,"breakpoints",null);d.__decorate([e.property()],g.prototype,"orientation",void 0);d.__decorate([e.property()],g.prototype,"widthBreakpoint",void 0);d.__decorate([e.property()],g.prototype,"heightBreakpoint",void 0);return g=d.__decorate([e.subclass("esri.views.BreakpointsOwner")],g)}(a)}})},"esri/views/Magnifier":function(){define(["require","exports","tslib","../core/Accessor","../core/accessorSupport/decorators"],function(r,f,d,n,l){return function(c){function e(e){e=
c.call(this,e)||this;e.factor=1.5;e.offsetX=0;e.offsetY=0;e.position=null;e.visible=!1;return e}d.__extends(e,c);Object.defineProperty(e.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});d.__decorate([l.property({type:Number})],e.prototype,"factor",void 0);d.__decorate([l.property({type:Number})],e.prototype,"offsetX",void 0);d.__decorate([l.property({type:Number})],e.prototype,"offsetY",void 0);d.__decorate([l.property()],e.prototype,"position",
void 0);d.__decorate([l.property({readOnly:!0,dependsOn:["factor","offsetX","offsetY","position","visible"]})],e.prototype,"version",null);d.__decorate([l.property({type:Boolean})],e.prototype,"visible",void 0);return e=d.__decorate([l.subclass("esri.views.Magnifier")],e)}(n)})},"esri/views/MapViewBase":function(){define("require exports tslib ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils ./2d/support/Timeline".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g,k,t,m,w,v,q,u,E,y,B,z,A){var x=e.getLogger("esri.views.MapView");return function(e){function m(a){var b=e.call(this,a)||this;b._stationaryTimer=null;b.frameTask=new q.default(b);b.featuresTilingScheme=null;b.fullOpacity=1;b.graphicsView=null;b.initialExtent=null;b.labelManager=null;b.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};b.resizeAlign="center";b.timeline=new A.Timeline;b.type="2d";b.constraints=
new E;b.padding={top:0,right:0,bottom:0,left:0};var g=b.handles,c=function(){return b.notifyChange("updating")};g.add([b.watch("viewpoint",function(){b._lastStationaryEventTimestamp=performance.now();b._flipStationary(160)},!0),b.on("resize",function(a){return b._resizeHandler(a)}),b.watch("animationManager.animation",function(a){b.animation=a}),b.allLayerViews.on("change",function(){c();g.remove("map-view-base-layerViewsUpdating");g.add(b.allLayerViews.map(function(a){return a.watch("updating",c)}),
"map-view-base-layerViewsUpdating")})],"map-view-base");return b}d.__extends(m,e);m.prototype.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};Object.defineProperty(m.prototype,"animation",{set:function(a){var b=this,g=this._get("animation");a!==g&&(g&&g.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),this.frameTask.animationInProgress=!0,g=function(){a===b._get("animation")&&(b._set("animation",null),b.frameTask.requestFrame());
b.frameTask.animationInProgress=!1},a.when(g,g)))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=this.state.paddedViewState,b=a.center;return new n.Point({x:b[0],y:b[1],spatialReference:a.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.ready){var b=this.viewpoint;z.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else x.error("#center",
"incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"constraints",{set:function(a){var b=this,g=this._get("constraints");g&&(this.handles.remove("map-view-base-constraints"),g.destroy());this._set("constraints",a);a&&(a.view=this,this.ready&&(this.state.viewpoint=a.fit(this.state.paddedViewState.viewpoint)),this.handles.add(a.on("update",function(){b.ready&&
b.state&&(b.state.viewpoint=a.fit(b.state.paddedViewState.viewpoint))}),"map-view-base-constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"extent",{get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.ready?(a=this.viewpoint,z.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",
null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):x.error("#extent","invalid extent size"):x.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,g=this.scale,c=this.viewpoint,e=this.zoom;
return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==g||-1!==e)||c?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){this.ready?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!0,
configurable:!0});Object.defineProperty(m.prototype,"rotation",{get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.ready){var b=this.viewpoint;z.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"scale",{get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.ready){var b=this.viewpoint;z.scaleTo(b,b,a);this.viewpoint=
b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"stationary",{get:function(){return!this.animation&&!this.navigating&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"updating",{get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||
!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(function(a){return!a.destroyed&&!("layerViews"in a)&&!0===a.updating}))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"viewpoint",{get:function(){if(!this.ready)return this._get("viewpoint");var a=this.state.paddedViewState;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.ready?(a=new l({targetGeometry:new n.Point,scale:0,rotation:0}),
z.copy(a,b),this.constraints.constrain(a,this.state.paddedViewState.viewpoint),this.state.viewpoint=a,this.frameTask.requestFrame(),this._set("viewpoint",a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?x.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?x.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+
" with view's spatialReference "+JSON.stringify(this.spatialReference)):x.error("#viewpoint","geometry not defined")}},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&
(b=this.viewpoint,z.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});m.prototype.goTo=function(a,g){var c=this;if(a)return b.whenTrueOnce(this,"ready",g&&g.signal).then(function(){c.animation&&(c.animation=null);var b=d.__assign({animate:!0},g),e=z.createAsync(a,c);c._gotoTask={};return b.animate?c._gotoAnimated(e,b):c._gotoImmediate(e,b)});x.error("#goTo()","target cannot be null or undefined")};
m.prototype.hitTest=function(a){return h.reject("Should be implemented by subclasses")};m.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(g){return d.__assign(d.__assign({},g),{mapPoint:b.toMap(a)})})};m.prototype.toMap=function(a){if(!this.ready)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new n.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};m.prototype.isTileInfoRequired=function(){return!0};m.prototype.toScreen=function(a){if(!this.ready)return null;
a=this._normalizeInput(a);a=[a.x,a.y];a=this.state.toScreen(a,a);return p.createScreenPoint(a[0],a[1])};m.prototype.pixelSizeAt=function(){return this.ready?this.state.resolution:(x.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};m.prototype.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};m.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};
m.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};m.prototype.importLayerView=function(a){return u.layerView2DImporter.importLayerView(a)};m.prototype.hasLayerViewModule=function(a){return u.layerView2DImporter.hasLayerViewModule(a)};m.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new w;this.animation.update(a);return this.animation};m.prototype._cancellableGoTo=function(a,
b,g){var c=this,e=g.then(function(){a===c._gotoTask&&(c.animation=null)}).catch(function(g){a===c._gotoTask&&(c.animation=null,b.done||(b.stop(),c.frameTask.animationInProgress=!1));throw g;}),k=h.create(function(a){return a(e)});b.when().catch(function(){a===c._gotoTask&&k.cancel&&k.cancel()});return k};m.prototype._gotoImmediate=function(a,b){var g=this,e=this._gotoTask,k=this._createOrReplaceAnimation(a);a=a.then(function(a){h.throwIfAborted(b);if(e!==g._gotoTask)throw new c("view:goto-interrupted",
"Goto was interrupted");g.viewpoint=k.target=a;k.finish()});return this._cancellableGoTo(e,k,a)};m.prototype._gotoAnimated=function(a,b){var g=this,e=this._gotoTask,k=this._createOrReplaceAnimation(a);a=a.then(function(a){if(e!==g._gotoTask)throw new c("view:goto-interrupted","Goto was interrupted");k.update(a);g.animationManager.animate(k,g.viewpoint,b);return k.when().then(function(){},function(){})});return this._cancellableGoTo(e,k,a)};m.prototype._resizeHandler=function(a){var b=this.state;if(b){var g=
this.state.paddedViewState.viewpoint,c=this.state.paddedViewState.size.concat();b.size=[a.width,a.height];z.resize(g,g,c,this.state.paddedViewState.size,this.resizeAlign);g=this.constraints.constrain(g,null);this.state.viewpoint=g}};m.prototype._startup=function(){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new v.default({view:this}));this._set("state",new y({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("featuresTilingScheme",
new B.TileInfoView(k.create({spatialReference:this.spatialReference,size:512})));this._set("ready",!0);this.frameTask&&this.frameTask.start()};m.prototype._teardown=function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);var a=this.state.paddedViewState,b=a.center,g=a.spatialReference,c=a.rotation,a=a.scale,b=new n.Point({x:b[0],y:b[1],spatialReference:g});this._set("viewpoint",null);this._set("extent",
null);this._set("center",b);this._set("zoom",-1);this._set("rotation",c);this._set("scale",a);this._set("spatialReference",g);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this.animation=null};m.prototype._flipStationary=function(a){var b=this;return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(function(){b._stationaryTimer=null;var a=performance.now()-b._lastStationaryEventTimestamp;160>
a&&(b._stationaryTimer=b._flipStationary(a))},a)};m.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var c=a&&a.targetGeometry||a;return b?c?b.equals(c.spatialReference)?a:g.canProject(c,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=g.project(c,b),a):g.project(c,b):null:null:a};m.prototype._getDefaultViewpoint=function(){var a=this.constraints,b=this._get("zoom"),g=this._get("scale"),c=this._normalizeInput(this._get("center")),e=this._normalizeInput(this._get("extent")),
k=this._get("rotation"),d=this._normalizeInput(this._get("viewpoint"));a.effectiveLODs?-1!==b&&(g=a.zoomToScale(b)):b=-1;var h=null,m=null,b=0,a=d&&d.rotation,q=d&&d.targetGeometry;q&&("extent"===q.type?h=q:"point"===q.type&&(m=q,b=d.scale));d=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));q=this._normalizeInput(this.initialExtent);e=e||h||d||q;c=c||m||e&&e.center;m=this.get("map.initialViewProperties.viewpoint.scale");g=g||b||m||e&&z.extentToScale(e,this.size);
b=this.get("map.initialViewProperties.viewpoint.rotation");return c&&g?new l({targetGeometry:c,scale:g,rotation:k||a||b||0}):null};d.__decorate([a.property()],m.prototype,"_stationaryTimer",void 0);d.__decorate([a.property()],m.prototype,"animation",null);d.__decorate([a.property({readOnly:!0})],m.prototype,"animationManager",void 0);d.__decorate([a.property({value:null,type:n.Point,dependsOn:["state.id","ready"]})],m.prototype,"center",null);d.__decorate([a.property({type:E})],m.prototype,"constraints",
null);d.__decorate([a.property({value:null,type:n.Extent,dependsOn:["state.id","ready"]})],m.prototype,"extent",null);d.__decorate([a.property({readOnly:!0})],m.prototype,"featuresTilingScheme",void 0);d.__decorate([a.property()],m.prototype,"fullOpacity",void 0);d.__decorate([a.property()],m.prototype,"graphicsView",void 0);d.__decorate([a.property({type:n.Extent})],m.prototype,"initialExtent",void 0);d.__decorate([a.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],m.prototype,"initialExtentRequired",
null);d.__decorate([a.property()],m.prototype,"labelManager",void 0);d.__decorate([a.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return d.__assign({top:0,right:0,bottom:0,left:0},a)}})],m.prototype,"padding",null);d.__decorate([a.property({type:Object})],m.prototype,"renderingOptions",void 0);d.__decorate([a.property()],m.prototype,"resizeAlign",void 0);d.__decorate([a.property({readOnly:!0,dependsOn:["state.id"]})],m.prototype,"resolution",null);d.__decorate([a.property({value:0,
type:Number,dependsOn:["state.id","ready"]})],m.prototype,"rotation",null);d.__decorate([a.property({value:0,type:Number,dependsOn:["state.id","ready"]})],m.prototype,"scale",null);d.__decorate([a.property({type:n.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],m.prototype,"spatialReference",void 0);d.__decorate([a.property({readOnly:!0})],m.prototype,"state",void 0);d.__decorate([a.property({dependsOn:["animation","navigating",
"resizing","_stationaryTimer"]})],m.prototype,"stationary",null);d.__decorate([a.property({type:A.Timeline,readOnly:!0})],m.prototype,"timeline",void 0);d.__decorate([a.property({readOnly:!0})],m.prototype,"type",void 0);d.__decorate([a.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],m.prototype,"updating",null);d.__decorate([a.property({value:null,type:l,dependsOn:["state.id","ready"]})],m.prototype,"viewpoint",null);d.__decorate([a.property({value:-1,
dependsOn:["state.id"]})],m.prototype,"zoom",null);return m=d.__decorate([a.subclass("esri.views.MapViewBase")],m)}(t.PopupView(m))})},"esri/layers/support/TileInfo":function(){define("require exports tslib ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g,k){var t=new l.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});return function(c){function m(a){a=c.call(this,a)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}d.__extends(m,c);f=m;m.create=function(b){void 0===
b&&(b={size:256,spatialReference:n.SpatialReference.WebMercator});var g=b.resolutionFactor||1,c=b.scales,k=b.size||256,d=b.spatialReference||n.SpatialReference.WebMercator;if(!a.isValid(d)){g=[];if(c)for(b=0;b<c.length;b++){var m=c[b];g.push({level:b,scale:m,resolution:m})}else{var h=5E-4;for(b=23;0<=b;b--)g.unshift({level:b,scale:h,resolution:h}),h*=2}return new f({dpi:96,lods:g,origin:new n.Point(0,0,d),size:[k,k],spatialReference:d})}var m=a.getInfo(d),q=b.origin?new n.Point({x:b.origin.x,y:b.origin.y,
spatialReference:d}):m?new n.Point({x:m.origin[0],y:m.origin[1],spatialReference:d}):new n.Point({x:0,y:0,spatialReference:d}),t=1/(39.37*e.getMetersPerUnitForSR(d)*96),p=[];if(c)for(b=0;b<c.length;b++)m=c[b],h=m*t,p.push({level:b,scale:m,resolution:h});else for(m=a.isGeographic(d)?512/k*5.916575275917094E8:256/k*5.91657527591555E8,c=Math.ceil(24/g),p.push({level:0,scale:m,resolution:m*t}),b=1;b<c;b++)m/=Math.pow(2,g),h=m*t,p.push({level:b,scale:m,resolution:h});return new f({dpi:96,lods:p,origin:q,
size:[k,k],spatialReference:d})};Object.defineProperty(m.prototype,"isWrappable",{get:function(){var b=this.spatialReference,g=this.origin;if(b&&g){var c=a.getInfo(b);return b.isWrappable&&Math.abs(c.origin[0]-g.x)<=c.dx}return!1},enumerable:!0,configurable:!0});m.prototype.readOrigin=function(a,b){return n.Point.fromJSON(d.__assign({spatialReference:b.spatialReference},a))};Object.defineProperty(m.prototype,"lods",{set:function(a){var b=this,g=0,c=0,e=[];this._levelToLOD={};a&&(g=-Infinity,c=Infinity,
a.forEach(function(a){e.push(a.scale);g=a.scale>g?a.scale:g;c=a.scale<c?a.scale:c;b._levelToLOD[a.level]=a}));this._set("scales",e);this._set("minScale",g);this._set("maxScale",c);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});m.prototype.readSize=function(a,b){return[b.cols,b.rows]};m.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};m.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var g=
Math.round(a);return b[g]+(g-a)*(b[Math.round(a-.5)]-b[g])};m.prototype.scaleToZoom=function(a){for(var b=this.scales,g=b.length-1,c=0;c<g;c++){var e=b[c],k=b[c+1];if(e<=a)break;if(k===a)return c+1;if(e>a&&k<a)return c+1-(a-k)/(e-k)}return c};m.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};m.prototype.tileAt=function(c,e,k,d){var m=this.lodAt(c);if(!m)return null;var h;if("number"===
typeof e)h=e,e=k;else{if(a.equals(e.spatialReference,this.spatialReference))h=e.x,e=e.y;else{d=g.project(e,this.spatialReference);if(!d)return null;h=d.x;e=d.y}d=k}k=m.resolution*this.size[0];m=m.resolution*this.size[1];d||(d={id:null,level:0,row:0,col:0,extent:b.create()});d.level=c;d.row=Math.floor((this.origin.y-e)/m+.001);d.col=Math.floor((h-this.origin.x)/k+.001);this.updateTileInfo(d);return d};m.prototype.updateTileInfo=function(a){var g=this.lodAt(a.level);if(g){var c=g.resolution*this.size[0],
g=g.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=b.create());a.extent[0]=this.origin.x+a.col*c;a.extent[1]=this.origin.y-(a.row+1)*g;a.extent[2]=a.extent[0]+c;a.extent[3]=a.extent[1]+g}};m.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};m.prototype.getTileBounds=function(a,b){var g=
this.lodAt(b.level).resolution,c=g*this.size[0],g=g*this.size[1];a[0]=this.origin.x+b.col*c;a[1]=this.origin.y-(b.row+1)*g;a[2]=a[0]+c;a[3]=a[1]+g;return a};m.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};m.prototype.clone=function(){return f.fromJSON(this.write({}))};m.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,g=0;g<a.length;g++){var c=a[g];this._upsampleLevels[c.level]={parentLevel:b?b.level:-1,factor:b?
b.resolution/c.resolution:0};b=c}};var f;d.__decorate([h.property({type:Number,json:{write:!0}})],m.prototype,"compressionQuality",void 0);d.__decorate([h.property({type:Number,json:{write:!0}})],m.prototype,"dpi",void 0);d.__decorate([h.property({type:String,json:{read:t.read,write:t.write,origins:{"web-scene":{read:!1,write:!1}}}})],m.prototype,"format",void 0);d.__decorate([h.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],m.prototype,"isWrappable",null);d.__decorate([h.property({type:n.Point,
json:{write:!0}})],m.prototype,"origin",void 0);d.__decorate([h.reader("origin")],m.prototype,"readOrigin",null);d.__decorate([h.property({type:[k],value:null,json:{write:!0}})],m.prototype,"lods",null);d.__decorate([h.property({readOnly:!0})],m.prototype,"minScale",void 0);d.__decorate([h.property({readOnly:!0})],m.prototype,"maxScale",void 0);d.__decorate([h.property({readOnly:!0})],m.prototype,"scales",void 0);d.__decorate([h.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?
[a,a]:[256,256]}})],m.prototype,"size",void 0);d.__decorate([h.reader("size",["rows","cols"])],m.prototype,"readSize",null);d.__decorate([h.writer("size",{cols:{type:p.Integer},rows:{type:p.Integer}})],m.prototype,"writeSize",null);d.__decorate([h.property({type:n.SpatialReference,json:{write:!0}})],m.prototype,"spatialReference",void 0);return m=f=d.__decorate([h.subclass("esri.layers.support.TileInfo")],m)}(c.JSONSupport)})},"esri/layers/support/LOD":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(r,f,d,n,l,c){return function(e){function h(b){b=e.call(this,b)||this;b.level=0;b.levelValue=null;b.resolution=0;b.scale=0;return b}d.__extends(h,e);p=h;h.prototype.clone=function(){return new p({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var p;d.__decorate([l.property({type:c.Integer,json:{write:!0}})],h.prototype,"level",void 0);d.__decorate([l.property({type:String,json:{write:!0}})],h.prototype,"levelValue",void 0);d.__decorate([l.property({type:Number,
json:{write:!0}})],h.prototype,"resolution",void 0);d.__decorate([l.property({type:Number,json:{write:!0}})],h.prototype,"scale",void 0);return h=p=d.__decorate([l.subclass("esri.layers.support.LOD")],h)}(n.JSONSupport)})},"esri/views/PopupView":function(){define("require exports tslib ../core/arrayUtils ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(r,f,d,n,l,c,e){Object.defineProperty(f,"__esModule",{value:!0});f.PopupView=function(h){return function(h){function b(){return null!==
h&&h.apply(this,arguments)||this}d.__extends(b,h);b.prototype.fetchPopupFeatures=function(a,b){return d.__awaiter(this,void 0,void 0,function(){var g,e,m,h,p,q,f,l,y;return d.__generator(this,function(k){switch(k.label){case 0:return[4,this.when()];case 1:return k.sent(),[4,this._prepareFetchPopupFeatures(a,b)];case 2:return g=k.sent(),e=g.location,m=g.queryArea,h=g.layerViewsAndGraphics,p=g.clientOnlyGraphics,q=c.resolve(p),f=this._queryLayerPopupFeatures({queryArea:m,layerViewsAndGraphics:h,options:b}),
l=f.map(function(a){return a.promise}),y=c.eachAlwaysValues(d.__spreadArrays([q],l)).then(n.flatten),[2,{location:e,clientOnlyGraphics:p,allGraphicsPromise:y,promisesPerLayerView:f}]}})})};b.prototype._queryLayerPopupFeatures=function(a){var b=a.queryArea,c=a.options;return a.layerViewsAndGraphics.map(function(a){var g=a.layerView;a={clientGraphics:a.graphics,event:l.isSome(c)?c.event:null,signal:l.isSome(c)?c.signal:null,defaultPopupTemplateEnabled:l.isSome(c)?!!c.defaultPopupTemplateEnabled:!1};
a=g.fetchPopupFeatures(b,a);return{layerView:g,promise:a}})};b.prototype._isValidPopupGraphic=function(a,b){return a&&!!a.getEffectivePopupTemplate(l.isSome(b)&&b.defaultPopupTemplateEnabled)};b.prototype._prepareFetchPopupFeatures=function(a,b){return d.__awaiter(this,void 0,void 0,function(){var g,c,e,h,p,q,f,l;return d.__generator(this,function(k){switch(k.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return g=k.sent(),c=g.clientGraphics,e=g.queryArea,h=g.location,p=this._getFetchPopupLayerViews(),
q=this._graphicsPerFetchPopupLayerView(c,p),f=q.layerViewsAndGraphics,l=q.clientOnlyGraphics,[2,{clientOnlyGraphics:l,layerViewsAndGraphics:f,queryArea:e,location:h}]}})})};b.prototype._popupHitTestGraphics=function(a,b){return d.__awaiter(this,void 0,void 0,function(){var g,c,e,h,p,q,f=this;return d.__generator(this,function(k){switch(k.label){case 0:return[4,this.popupHitTest(a)];case 1:return g=k.sent(),c=g.results,e=g.mapPoint,h=c.filter(function(a){return f._isValidPopupGraphic(a.graphic,b)}),
p=h.length?h[0].mapPoint:null,q=h.map(function(a){return a.graphic}),[2,{clientGraphics:q,queryArea:e,location:e||p}]}})})};b.prototype._getFetchPopupLayerViews=function(){var a=this,b=[];this.allLayerViews.forEach(function(g){a._isValidPopupLayerView(g)&&b.push(g)});l.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};b.prototype._isValidPopupLayerView=function(a){return l.isSome(a)&&(!("layer"in a)||!a.suspended)&&"fetchPopupFeatures"in
a};b.prototype._graphicsPerFetchPopupLayerView=function(a,b){var g=[],c=new Map;b=b.map(function(a){var b=[];"layer"in a?c.set(a.layer,b):c.set(a.graphics,b);return{layerView:a,graphics:b}});for(var e=0;e<a.length;e++){var d=a[e],h=c.get(d.layer)||null;h?h.push(d):g.push(d)}return{layerViewsAndGraphics:b,clientOnlyGraphics:g}};return b=d.__decorate([e.subclass("esri.views.PopupView")],b)}(h)}})},"esri/views/2d/AnimationManager":function(){define("require exports tslib ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a){Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(a,g,c,e){var k=a.targetGeometry,d=g.targetGeometry;e?"string"===typeof e&&(e=b.parse(e)||b.easingFunctions.ease):e=b.easingFunctions.ease;this.easing=e;this.duration=c;this.sCenterX=k.x;this.sCenterY=k.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=d.x;this.tCenterY=d.y;this.tScale=g.scale;this.tRotation=g.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-
this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}a.prototype.applyRatio=function(a,b){var g=this.easing(b),c,e;1<=b?(b=this.tCenterX,c=this.tCenterY,e=this.tRotation,g=this.tScale):(b=this.sCenterX+g*this.dCenterX,c=this.sCenterY+g*this.dCenterY,e=this.sRotation+g*this.dRotation,g=this.sScale+g*this.dScale);a.targetGeometry.x=b;a.targetGeometry.y=c;a.scale=g;a.rotation=e};
return a}();r=function(c){function k(a){a=c.call(this,a)||this;a.duration=200;a.transition=null;a.easing=b.easingFunctions.ease;a.view=null;a.viewpoint=null;a.viewpoint=new l({targetGeometry:new n.Point,scale:0,rotation:0});a._updateTask=e.addFrameTask({postRender:a._postRender.bind(a)});a._updateTask.pause();return a}d.__extends(k,c);k.prototype.destroy=function(){this._updateTask.remove();this._updateTask=null};k.prototype.animate=function(b,c,e){var k=this;this.stop();a.copy(this.viewpoint,c);
this.transition=new g(this.viewpoint,b.target,e&&e.duration||this.duration,e&&e.easing||this.easing);c=function(){k.animation===b&&k._updateTask&&("finished"===b.state&&(k.transition.applyRatio(k.viewpoint,1),k.view.state&&(k.view.state.viewpoint=k.viewpoint.clone())),k.animation=null,k.updateFunction=null)};b.when(c,c);this._startTime=performance.now();this._updateTask.resume();return this.animation=b};k.prototype.animateContinous=function(a,b){var g=this;this.stop();this.updateFunction=b;this.viewpoint=
a;var c=new p({target:a.clone()});a=function(){g.animation===c&&g._updateTask&&(g.animation=null,g.updateFunction=null)};c.when(a,a);this._startTime=performance.now();this._updateTask.resume();return this.animation=c};k.prototype.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};k.prototype._postRender=function(a){var b=this.animation;b&&b.state!==p.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,a.deltaTime):(a=(performance.now()-
this._startTime)/this.transition.duration,b=1<=a,this.transition.applyRatio(this.viewpoint,a),b&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};d.__decorate([h.property()],k.prototype,"animation",void 0);d.__decorate([h.property()],k.prototype,"duration",void 0);d.__decorate([h.property()],k.prototype,"transition",void 0);d.__decorate([h.property()],k.prototype,"easing",void 0);d.__decorate([h.property()],k.prototype,"view",
void 0);d.__decorate([h.property()],k.prototype,"viewpoint",void 0);return k=d.__decorate([h.subclass("esri.views.2d.AnimationManager")],k)}(c);f.default=r})},"esri/views/2d/unitBezier":function(){define(["require","exports"],function(r,f){function d(d,c,e,h){function p(c,e){var k,d,h,m;h=c;for(d=0;8>d;d++){m=((g*h+a)*h+b)*h-c;if(Math.abs(m)<e)return h;k=(3*g*h+2*a)*h+b;if(1E-6>Math.abs(k))break;h-=m/k}k=0;d=1;h=c;if(h<k)return k;if(h>d)return d;for(;k<d;){m=((g*h+a)*h+b)*h;if(Math.abs(m-c)<e)break;
c>m?k=h:d=h;h=.5*(d-k)+k}return h}var b=3*d,a=3*(e-d)-b,g=1-b-a,k=3*c,t=3*(h-c)-k,m=1-k-t;return function(a,b){void 0===b&&(b=1E-6);a=p(a,b);return((m*a+t)*a+k)*a}}Object.defineProperty(f,"__esModule",{value:!0});f.unitBezier=d;var n=/^cubic-bezier\((.*)\)/;f.easingFunctions={};f.parse=function(l){var c=f.easingFunctions[l]||null;!c&&(l=n.exec(l))&&(l=l[1].split(",").map(function(c){return parseFloat(c.trim())}),4!==l.length||l.some(function(c){return isNaN(c)})||(c=d.apply(d,l)));return c};f.easingFunctions.ease=
d(.25,.1,.25,1);f.easingFunctions.linear=d(0,0,1,1);f.easingFunctions.easeIn=f.easingFunctions["ease-in"]=d(.42,0,1,1);f.easingFunctions.easeOut=f.easingFunctions["ease-out"]=d(0,0,.58,1);f.easingFunctions.easeInOut=f.easingFunctions["ease-in-out"]=d(.42,0,.58,1)})},"esri/views/2d/viewpointUtils":function(){define("require exports tslib ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g,k,t,m,w,v,q,u,E,y){function B(a,g,c,e){return e&&c&&!e.equals(c)&&E.canProject(e,c)&&e.isWebMercator?(e.isWebMercator?(c=g[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(b.common.toRadian(c)),a=k.vec2.set(a,b.common.toRadian(g[0])*J,.5*J*Math.log((1+c)/(1-c)))):(c=b.common.toDegree(g[0]/J),a=k.vec2.set(a,c-360*Math.floor((c+180)/360),b.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*g[1]/J))))),a):k.vec2.copy(a,g)}function z(a){return a.wkid?a:a.spatialReference||
q.WGS84}function A(a,b){return b.type?k.vec2.set(a,b.x,b.y):k.vec2.copy(a,b)}function x(a,b){return Math.max(a.width/b[0],a.height/b[1])*Q(a.spatialReference)}function C(a,b,g,k){return d.__awaiter(this,void 0,void 0,function(){var h,p,t,f,q,u,n,y,B,z,A,r,x,L,S,T,U,D,H,F,I,G,K,J,O,M,N,P;return d.__generator(this,function(d){switch(d.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];l.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];
p=a.every(function(a){return"attributes"in a});t=a.some(function(a){return!a.geometry});f=a;if(!(p&&t&&b&&b.allLayerViews))return[3,2];q=new Map;u=0;for(n=a;u<n.length;u++)y=n[u],B=y.layer,z=q.get(B)||[],A=y.attributes[B.objectIdField],null!=A&&z.push(A),q.set(B,z);r=[];q.forEach(function(a,g){var c=b.allLayerViews.find(function(a){return a.layer.id===g.id});if("queryFeatures"in c){var e=g.createQuery();e.objectIds=a;e.returnGeometry=!0;r.push(c.queryFeatures(e))}});return[4,e.all(r)];case 1:x=d.sent();
L=[];S=0;for(T=x;S<T.length;S++)if((U=T[S])&&U.features&&U.features.length)for(D=0,H=U.features;D<H.length;D++)y=H[D],c.isSome(y.geometry)&&L.push(y.geometry);f=L;d.label=2;case 2:F=0,I=f,d.label=3;case 3:if(!(F<I.length))return[3,6];G=I[F];return[4,C(G,b,g,k)];case 4:k=d.sent(),d.label=5;case 5:return F++,[3,3];case 6:return[2,k];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];h=new v(a);return[3,12];case 8:if(!(a instanceof w))return[3,9];h=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];h=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];K=a.layer;J=b.allLayerViews.find(function(a){return a.layer.id===K.id});if(!("queryFeatures"in J))return[3,12];O=K.createQuery();O.objectIds=[a.attributes[K.objectIdField]];O.returnGeometry=!0;return[4,J.queryFeatures(O)];case 11:M=d.sent(),h=c.get(M,"features",0,"geometry"),d.label=12;case 12:if(c.isNone(h))return[2,null];N="point"===h.type?new m({xmin:h.x,
ymin:h.y,xmax:h.x,ymax:h.y,spatialReference:h.spatialReference}):h.extent;if(!N)return[2,null];P=E.canProject(N,g);if(!N.spatialReference.equals(g)&&P)N=E.project(N,g);else if(!P)return[2,null];k=k?k.union(N):N.clone();return[2,k]}})})}function H(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var g=0,c=0,e=0;e<a.length;e++)(b=a[e].layer)&&b.minScale&&b.maxScale&&(g=b.minScale<g?b.minScale:g,c=b.maxScale>c?b.maxScale:c);return g&&c?{min:g,max:c}:null}}}function D(a,b){return d.__awaiter(this,void 0,void 0,function(){var g,c,e,k,h,p,f,q,u,l,w,r,L,S,D,F,I,G,K,J;return d.__generator(this,function(d){switch(d.label){case 0:if(!a||!b)return[2,new n({targetGeometry:new v,scale:0,rotation:0})];g=b.spatialReference;c=b.constraints;e=b.padding;k=b.viewpoint;
h=b.size;p=e?h[0]-e.left-e.right:h[0];f=e?h[1]-e.top-e.bottom:h[1];q=[p,f];u=null;a instanceof n?u=a:a.viewpoint?u=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(u=a.target);l=null;if(!u||!u.targetGeometry)return[3,1];l=u.targetGeometry;return[3,10];case 1:if(!(a instanceof m))return[3,2];l=a;return[3,10];case 2:return a||a&&("center"in a||"extent"in a||"target"in a)?[4,C(a.center,b,g)]:[3,10];case 3:return(L=d.sent())?[3,5]:[4,C(a.extent,b,g)];case 4:L=d.sent(),d.label=5;case 5:return(r=
L)?[3,7]:[4,C(a.target,b,g)];case 6:r=d.sent(),d.label=7;case 7:return(w=r)?[3,9]:[4,C(a,b,g)];case 8:w=d.sent(),d.label=9;case 9:l=w,d.label=10;case 10:!l&&k&&k.targetGeometry?l=k.targetGeometry:!l&&b.extent&&(l=b.extent);S=z(l);g||(g=z(b.spatialReference||b.extent||l));if(!y.canProject(l,g)&&S&&!S.equals(g))return[2,null];D=A(t.vec2f64.create(),l.center?l.center:l);F=new v(B(D,D,S,g),g);I=null;I=u&&u.targetGeometry&&"point"===u.targetGeometry.type?u.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:
a.hasOwnProperty("zoom")&&-1!==a.zoom&&c&&c.effectiveLODs?c.zoomToScale(a.zoom):Array.isArray(l)||"point"===l.type||"extent"===l.type&&0===l.width&&0===l.height?b.extent&&E.canProject(b.extent,g)?x(E.project(b.extent,g),q):b.extent?x(b.extent,q):k.scale:E.canProject(l.extent,g)?x(E.project(l.extent,g),q):x(l.extent,q);if(G=H(a))G.min&&G.min>I?I=G.min:G.max&&G.max<I&&(I=G.max);K=0;u?K=u.rotation:a.hasOwnProperty("rotation")?K=a.rotation:k&&(K=k.rotation);J=new n({targetGeometry:F,scale:I,rotation:K});
c&&(J=c.fit(J),c.rotationEnabled||(J.rotation=K));return[2,J]}})})}function F(a,b){var g=a.targetGeometry,c=b.targetGeometry;g.x=c.x;g.y=c.y;g.spatialReference=c.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function I(a,b,g){return g?k.vec2.set(a,.5*(b[0]-g.right+g.left),.5*(b[1]-g.bottom+g.top)):k.vec2.scale(a,b,.5)}function G(b,g,c,e){f.getTransform(b,g,c,e);return a.mat2d.invert(b,b)}function O(a,b,g){var c=N(b);b=Math.abs(Math.cos(c));c=Math.abs(Math.sin(c));return k.vec2.set(a,
Math.round(g[1]*c+g[0]*b),Math.round(g[1]*b+g[0]*c))}function K(a){var b=a.scale;a=a.targetGeometry.spatialReference;a=u.isValid(a)?1/(39.37*h.getMetersPerUnitForSR(a)*96):1;return b*a}function N(a){return b.common.toRadian(a.rotation)||0}function Q(a){return u.isValid(a)?39.37*h.getMetersPerUnitForSR(a)*96:1}function P(a){return a.isWrappable?(a=u.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(f,"__esModule",{value:!0});var J=p.wgs84Radius,M=180/Math.PI;f.extentToScale=x;f.create=D;f.copy=
F;f.getAnchor=I;f.getExtent=function(){var a=t.vec2f64.create();return function(b,g,c){var e=g.targetGeometry;A(a,e);g=.5*K(g);b.xmin=a[0]-g*c[0];b.ymin=a[1]-g*c[1];b.xmax=a[0]+g*c[0];b.ymax=a[1]+g*c[1];b.spatialReference=e.spatialReference;return b}}();f.setExtent=function(a,b,g,c,e){f.centerAt(a,b,g.center);a.scale=x(g,c);e&&e.constraints&&e.constraints.constrain(a);return a};f.getOuterExtent=function(){var a=t.vec2f64.create(),b=t.vec2f64.create();return function(g,c,e){A(a,c.targetGeometry);O(b,
c,e);e=.5*K(c);g.set({xmin:a[0]-e*b[0],ymin:a[1]-e*b[1],xmax:a[0]+e*b[0],ymax:a[1]+e*b[1],spatialReference:c.targetGeometry.spatialReference});return g}}();f.getOuterSize=O;f.getPaddingScreenTranslation=function(){var a=t.vec2f64.create();return function(b,g,c){return k.vec2.sub(b,k.vec2.scale(b,g,.5),I(a,g,c))}}();f.getPaddingMapTranslation=function(){var b=g.mat2df64.create(),c=t.vec2f64.create();return function(g,e,d,h){var m=K(e);e=N(e);k.vec2.set(c,m,m);a.mat2d.fromScaling(b,c);a.mat2d.rotate(b,
b,e);a.mat2d.translate(b,b,f.getPaddingScreenTranslation(c,d,h));a.mat2d.translate(b,b,[0,h.top-h.bottom]);return k.vec2.set(g,b[4],b[5])}}();f.getResolution=K;f.getResolutionToScaleFactor=Q;f.getMatrix=function(){var b=t.vec2f64.create(),g=t.vec2f64.create(),c=t.vec2f64.create();return function(e,d,h,m,p,t){k.vec2.negate(b,d);k.vec2.scale(g,h,.5*t);k.vec2.set(c,1/m*t,-1/m*t);a.mat2d.identity(e);a.mat2d.translate(e,e,g);p&&a.mat2d.rotate(e,e,p);a.mat2d.scale(e,e,c);a.mat2d.translate(e,e,b);return e}}();
f.getTransform=function(){var a=t.vec2f64.create();return function(b,g,c,e){var k=K(g),d=N(g);A(a,g.targetGeometry);return f.getMatrix(b,a,c,k,d,e)}}();f.getTransformNoRotation=function(){var a=t.vec2f64.create();return function(b,g,c,e){var k=K(g);A(a,g.targetGeometry);return f.getMatrix(b,a,c,k,0,e)}}();f.getWorldWidth=P;f.getWorldScreenWidth=function(a,b){return Math.round(P(a)/b)};f.createAsync=function(a,b){return D(a,b)};f.angleBetween=function(){var a=t.vec2f64.create(),b=t.vec2f64.create(),
g=[0,0,0];return function(c,e,d){k.vec2.subtract(a,c,e);k.vec2.normalize(a,a);k.vec2.subtract(b,c,d);k.vec2.normalize(b,b);k.vec2.cross(g,a,b);c=Math.acos(k.vec2.dot(a,b)/(k.vec2.length(a)*k.vec2.length(b)))*M;0>g[2]&&(c=-c);isNaN(c)&&(c=0);return c}}();f.addPadding=function(){var a=t.vec2f64.create();return function(b,g,c,e){var k=b.targetGeometry;F(b,g);f.getPaddingMapTranslation(a,g,c,e);k.x+=a[0];k.y+=a[1];return b}}();f.removePadding=function(){var a=t.vec2f64.create();return function(b,g,c,
e){var k=b.targetGeometry;F(b,g);f.getPaddingMapTranslation(a,g,c,e);k.x-=a[0];k.y-=a[1];return b}}();f.centerAt=function(){var a=t.vec2f64.create();return function(b,g,c){F(b,g);g=b.targetGeometry;var e=z(c),k=z(g);A(a,c);B(a,a,e,k);g.x=a[0];g.y=a[1];return b}}();f.pixelSize=function(a){return K(a)};f.resize=function(){var a=t.vec2f64.create();return function(b,g,c,e,d){d||(d="center");k.vec2.sub(a,c,e);k.vec2.scale(a,a,.5);c=a[0];e=a[1];switch(d){case "center":k.vec2.set(a,0,0);break;case "left":k.vec2.set(a,
-c,0);break;case "top":k.vec2.set(a,0,e);break;case "right":k.vec2.set(a,c,0);break;case "bottom":k.vec2.set(a,0,-e);break;case "top-left":k.vec2.set(a,-c,e);break;case "bottom-left":k.vec2.set(a,-c,-e);break;case "top-right":k.vec2.set(a,c,e);break;case "bottom-right":k.vec2.set(a,c,-e)}f.translateBy(b,g,a);return b}}();f.rotateBy=function(a,b,g){F(a,b);a.rotation+=g;return a};f.rotateTo=function(a,b,g){F(a,b);a.rotation=g;return a};f.scaleBy=function(){var a=t.vec2f64.create();return function(b,
g,c,e,d){F(b,g);isNaN(c)||0===c||(f.toMap(a,e,g,d),b.scale=g.scale*c,f.toScreen(a,a,b,d),f.translateBy(b,b,k.vec2.set(a,a[0]-e[0],e[1]-a[1])));return b}}();f.scaleTo=function(a,b,g){F(a,b);a.scale=g;return a};f.scaleAndRotateBy=function(){var a=t.vec2f64.create();return function(b,g,c,e,d,h){F(b,g);isNaN(c)||0===c||(f.toMap(a,d,g,h),b.scale=g.scale*c,b.rotation+=e,f.toScreen(a,a,b,h),f.translateBy(b,b,k.vec2.set(a,a[0]-d[0],d[1]-a[1])));return b}}();f.padAndScaleAndRotateBy=function(){var a=t.vec2f64.create(),
b=t.vec2f64.create();return function(g,c,e,d,h,m,p){f.getPaddingScreenTranslation(b,m,p);k.vec2.add(a,h,b);return d?f.scaleAndRotateBy(g,c,e,d,a,m):f.scaleBy(g,c,e,a,m)}}();f.toMap=function(){var a=g.mat2df64.create();return function(b,g,c,e){return k.vec2.transformMat2d(b,g,G(a,c,e,1))}}();f.toScreen=function(){var a=g.mat2df64.create();return function(b,g,c,e){return k.vec2.transformMat2d(b,g,f.getTransform(a,c,e,1))}}();f.translateBy=function(){var b=t.vec2f64.create(),c=g.mat2df64.create();return function(g,
e,d){F(g,e);var h=K(e),m=g.targetGeometry;a.mat2d.fromRotation(c,N(e));a.mat2d.scale(c,c,t.vec2f64.fromValues(h,h));k.vec2.transformMat2d(b,d,c);m.x+=b[0];m.y+=b[1];return g}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});f.common=d})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});
f.mat2d=d})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(r,f,d){function n(c,e,d){var h=e[0],b=e[1],a=e[2],g=e[3],k=e[4];e=e[5];var t=d[0],m=d[1],f=d[2],l=d[3],q=d[4];d=d[5];c[0]=h*t+a*m;c[1]=b*t+g*m;c[2]=h*f+a*l;c[3]=b*f+g*l;c[4]=h*q+a*d+k;c[5]=b*q+g*d+e;return c}function l(c,e,d){c[0]=e[0]-d[0];c[1]=e[1]-d[1];c[2]=e[2]-d[2];c[3]=e[3]-d[3];c[4]=e[4]-d[4];c[5]=e[5]-d[5];return c}Object.defineProperty(f,"__esModule",{value:!0});f.copy=function(c,
e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];return c};f.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c};f.set=function(c,e,d,p,b,a,g){c[0]=e;c[1]=d;c[2]=p;c[3]=b;c[4]=a;c[5]=g;return c};f.invert=function(c,e){var d=e[0],p=e[1],b=e[2],a=e[3],g=e[4];e=e[5];var k=d*a-p*b;if(!k)return null;k=1/k;c[0]=a*k;c[1]=-p*k;c[2]=-b*k;c[3]=d*k;c[4]=(b*e-a*g)*k;c[5]=(p*g-d*e)*k;return c};f.determinant=function(c){return c[0]*c[3]-c[1]*c[2]};f.multiply=n;f.rotate=function(c,
e,d){var h=e[0],b=e[1],a=e[2],g=e[3],k=e[4];e=e[5];var t=Math.sin(d);d=Math.cos(d);c[0]=h*d+a*t;c[1]=b*d+g*t;c[2]=h*-t+a*d;c[3]=b*-t+g*d;c[4]=k;c[5]=e;return c};f.scale=function(c,e,d){var h=e[1],b=e[2],a=e[3],g=e[4],k=e[5],t=d[0];d=d[1];c[0]=e[0]*t;c[1]=h*t;c[2]=b*d;c[3]=a*d;c[4]=g;c[5]=k;return c};f.translate=function(c,e,d){var h=e[0],b=e[1],a=e[2],g=e[3],k=e[4];e=e[5];var t=d[0];d=d[1];c[0]=h;c[1]=b;c[2]=a;c[3]=g;c[4]=h*t+a*d+k;c[5]=b*t+g*d+e;return c};f.fromRotation=function(c,e){var d=Math.sin(e);
e=Math.cos(e);c[0]=e;c[1]=d;c[2]=-d;c[3]=e;c[4]=0;c[5]=0;return c};f.fromScaling=function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=e[1];c[4]=0;c[5]=0;return c};f.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=e[0];c[5]=e[1];return c};f.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};f.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};f.add=function(c,e,d){c[0]=
e[0]+d[0];c[1]=e[1]+d[1];c[2]=e[2]+d[2];c[3]=e[3]+d[3];c[4]=e[4]+d[4];c[5]=e[5]+d[5];return c};f.subtract=l;f.multiplyScalar=function(c,e,d){c[0]=e[0]*d;c[1]=e[1]*d;c[2]=e[2]*d;c[3]=e[3]*d;c[4]=e[4]*d;c[5]=e[5]*d;return c};f.multiplyScalarAndAdd=function(c,e,d,p){c[0]=e[0]+d[0]*p;c[1]=e[1]+d[1]*p;c[2]=e[2]+d[2]*p;c[3]=e[3]+d[3]*p;c[4]=e[4]+d[4]*p;c[5]=e[5]+d[5]*p;return c};f.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]};f.equals=function(c,
e){var h=c[0],p=c[1],b=c[2],a=c[3],g=c[4];c=c[5];var k=e[0],t=e[1],m=e[2],f=e[3],l=e[4];e=e[5];return Math.abs(h-k)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(p-t)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(t))&&Math.abs(b-m)<=d.EPSILON*Math.max(1,Math.abs(b),Math.abs(m))&&Math.abs(a-f)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(g-l)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(l))&&Math.abs(c-e)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};f.mul=n;f.sub=l})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require",
"exports","./factories/mat2df64"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});f.mat2df64=d})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(r,f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){return[1,0,0,1,0,0]};f.clone=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5]]};f.fromValues=function(d,f,l,c,e,h){return[d,f,l,c,e,h]};f.createView=function(d,f){return new Float64Array(d,f,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require",
"exports","./math/vec2"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});f.vec2=d})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(r,f,d){function n(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}function l(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a}function c(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a}function e(a,b){var g=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(g*g+a*a)}function h(a,b){var g=b[0]-a[0];a=b[1]-a[1];return g*
g+a*a}function p(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function b(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(f,"__esModule",{value:!0});f.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};f.set=function(a,b,c){a[0]=b;a[1]=c;return a};f.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a};f.subtract=n;f.multiply=l;f.divide=c;f.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};f.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};
f.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};f.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};f.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};f.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};f.scaleAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;return a};f.distance=e;f.squaredDistance=h;f.length=p;f.squaredLength=b;f.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};f.inverse=
function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};f.normalize=function(a,b){var c=b[0],g=b[1],c=c*c+g*g;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};f.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};f.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};f.lerp=function(a,b,c,e){var g=b[0];b=b[1];a[0]=g+e*(c[0]-g);a[1]=b+e*(c[1]-b);return a};f.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};f.transformMat2=function(a,
b,c){var g=b[0];b=b[1];a[0]=c[0]*g+c[2]*b;a[1]=c[1]*g+c[3]*b;return a};f.transformMat2d=function(a,b,c){var g=b[0];b=b[1];a[0]=c[0]*g+c[2]*b+c[4];a[1]=c[1]*g+c[3]*b+c[5];return a};f.transformMat3=function(a,b,c){var g=b[0];b=b[1];a[0]=c[0]*g+c[3]*b+c[6];a[1]=c[1]*g+c[4]*b+c[7];return a};f.transformMat4=function(a,b,c){var g=b[0];b=b[1];a[0]=c[0]*g+c[4]*b+c[12];a[1]=c[1]*g+c[5]*b+c[13];return a};f.rotate=function(a,b,c,e){var g=b[0]-c[0];b=b[1]-c[1];var d=Math.sin(e);e=Math.cos(e);a[0]=g*e-b*d+c[0];
a[1]=g*d+b*e+c[1];return a};f.angle=function(a,b){var c=a[0];a=a[1];var g=b[0];b=b[1];var e=c*c+a*a;0<e&&(e=1/Math.sqrt(e));var d=g*g+b*b;0<d&&(d=1/Math.sqrt(d));c=(c*g+a*b)*e*d;return 1<c?0:-1>c?Math.PI:Math.acos(c)};f.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};f.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};f.equals=function(a,b){var c=a[0];a=a[1];var g=b[0];b=b[1];return Math.abs(c-g)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),
Math.abs(b))};f.len=p;f.sub=n;f.mul=l;f.div=c;f.dist=e;f.sqrDist=h;f.sqrLen=b})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});f.vec2f64=d})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(r,f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){return[0,0]};f.clone=function(d){return[d[0],d[1]]};f.fromValues=function(d,
f){return[d,f]};f.fromArray=function(d){for(var f=[0,0],l=Math.min(2,d.length),c=0;c<l;++c)f[c]=d[c];return f};f.createView=function(d,f){return new Float64Array(d,f,2)};f.zeros=function(){return[0,0]};f.ones=function(){return[1,1]};f.unitX=function(){return[1,0]};f.unitY=function(){return[0,1]};f.ZEROS=[0,0];f.ONES=[1,1];f.UNIT_X=[1,0];f.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/maybe","../../core/scheduling"],function(r,f,d,n){Object.defineProperty(f,
"__esModule",{value:!0});r=function(){function f(c){var e=this;this.view=c;this._frameTaskHandle=null;this._updateRequested=!1;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=function(){e._updateParameters.state=e.view.state;e._updateParameters.stationary=e.view.stationary;e._updateParameters.pixelRatio=window.devicePixelRatio;e._updateParameters.renderingOptions=e.view.renderingOptions};this.update=function(){e._updateRequested=!1;if(e.updateEnabled){var c=e.view,f=
c.basemapView,b=c.graphicsView,a=c.labelManager,g=c.layerViews,c=c.state.id;f.baseLayerViews.forEach(e._updateLayerView,e);g.forEach(e._updateLayerView,e);f.referenceLayerViews.forEach(e._updateLayerView,e);d.isSome(a)&&(a.lastUpdateId!==c&&(a.viewChange(),a.lastUpdateId=c),a.updateRequested&&a.processUpdate(e._updateParameters));d.isSome(b)&&(b.lastUpdateId!==c&&(b.viewChange(),b.lastUpdateId=c),b.updateRequested&&b.processUpdate(e._updateParameters));e.animationInProgress||e._updateRequested||e._frameTaskHandle.pause()}}}
f.prototype.destroy=function(){this.stop()};f.prototype.start=function(){var c=this;this.stationary=this.view.stationary;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._stationaryHandle=this.view.watch("stationary",function(e){c.stationary=e;c.requestFrame()});this._frameTaskHandle=n.addFrameTask(this)};f.prototype.stop=function(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),
this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};f.prototype.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};f.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};f.prototype._updateLayerView=function(c){var e=this.view.state,d=c.lastUpdateId;if(null==d||!this.stationary&&!c.moving)c.moving=!0,c.moveStart();d!==e.id&&c.viewChange();this.stationary&&
c.moving&&(c.moving=!1,c.moveEnd());c.lastUpdateId=e.id;c.updateRequested&&c.processUpdate(this._updateParameters);"layerViews"in c&&c.layerViews.forEach(this._updateLayerView,this)};return f}();f.default=r})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe","@dojo/framework/shim/Promise"],function(r,f,d,n){function l(){return Promise.all([new Promise(function(c,b){r(["../webgl"],c,b)}),new Promise(function(c,b){r(["./engine"],
c,b)})])}Object.defineProperty(f,"__esModule",{value:!0});var c=function(){return l().then(function(){return new Promise(function(c,b){r(["./layers/TileLayerView2D"],c,b)})})},e=function(){return l().then(function(){return new Promise(function(c,b){r(["./layers/FeatureLayerView2D"],c,b)})})},h={"base-dynamic":function(){return l().then(function(){return new Promise(function(c,b){r(["./layers/BaseDynamicLayerView2D"],c,b)})})},"base-tile":c,"bing-maps":c,csv:e,"geo-rss":function(){return l().then(function(){return new Promise(function(c,
b){r(["./layers/GeoRSSLayerView2D"],c,b)})})},feature:e,geojson:e,graphics:function(){return l().then(function(){return new Promise(function(c,b){r(["./layers/GraphicsLayerView2D"],c,b)})})},group:function(){return l().then(function(){return new Promise(function(c,b){r(["./layers/GroupLayerView2D"],c,b)})})},imagery:function(){return l().then(function(){return new Promise(function(c,b){r(["./layers/ImageryLayerView2D"],c,b)})})},"imagery-tile":function(){return l().then(function(){return new Promise(function(c,
b){r(["./layers/ImageryTileLayerView2D"],c,b)})})},kml:function(){return l().then(function(){return new Promise(function(c,b){r(["./layers/KMLLayerView2D"],c,b)})})},"map-image":function(){return l().then(function(){return new Promise(function(c,b){r(["./layers/MapImageLayerView2D"],c,b)})})},"map-notes":function(){return l().then(function(){return new Promise(function(c,b){r(["./layers/MapNotesLayerView2D"],c,b)})})},"ogc-feature":e,"open-street-map":c,route:function(){return l().then(function(){return new Promise(function(c,
b){r(["./layers/RouteLayerView2D"],c,b)})})},stream:function(){return l().then(function(){return new Promise(function(c,b){r(["./layers/StreamLayerView2D"],c,b)})})},tile:c,"vector-tile":function(){return l().then(function(){return new Promise(function(c,b){r(["./layers/VectorTileLayerView2D"],c,b)})})},"web-tile":c,wms:function(){return l().then(function(){return new Promise(function(c,b){r(["./layers/WMSLayerView2D"],c,b)})})},wmts:function(){return l().then(function(){return new Promise(function(c,
b){r(["./layers/WMTSLayerView2D"],c,b)})})},"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};f.layerView2DImporter={hasLayerViewModule:function(c){return n.isSome(h[c.type])},importLayerView:function(c){var b=h[c.type];if(!n.isSome(b))throw c=c.declaredClass?c.declaredClass.slice(c.declaredClass.lastIndexOf(".")+1):"Unknown",b=c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new d(b+":view-not-supported",
c+" is not supported in 2D");return b(c)}}})},"esri/views/2d/MapViewConstraints":function(){define("require exports tslib ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),function(r,f,d,n,l,c,e,h){return function(f){function b(){var a=null!==f&&f.apply(this,arguments)||this;a.lods=null;a.minScale=0;a.maxScale=0;a.minZoom=-1;a.maxZoom=-1;a.rotationEnabled=!0;a.snapToZoom=!0;return a}d.__extends(b,
f);b.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};b.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(b.prototype,"_rotation",{get:function(){return new e({rotationEnabled:this.rotationEnabled})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&
b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_zoom",{get:function(){return new h({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,configurable:!0});b.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};b.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||a<=
b};b.prototype.constrain=function(a,b){this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};b.prototype.fit=function(a){return this._zoom.fit(a)};b.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};b.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)};b.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};b.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};b.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};
d.__decorate([l.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],b.prototype,"effectiveLODs",void 0);d.__decorate([l.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],b.prototype,"effectiveMinScale",void 0);d.__decorate([l.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],b.prototype,"effectiveMaxScale",void 0);d.__decorate([l.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],b.prototype,"effectiveMinZoom",void 0);d.__decorate([l.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],
b.prototype,"effectiveMaxZoom",void 0);d.__decorate([l.property({type:[c]})],b.prototype,"lods",void 0);d.__decorate([l.property()],b.prototype,"minScale",void 0);d.__decorate([l.property()],b.prototype,"maxScale",void 0);d.__decorate([l.property()],b.prototype,"minZoom",void 0);d.__decorate([l.property()],b.prototype,"maxZoom",void 0);d.__decorate([l.property()],b.prototype,"rotationEnabled",void 0);d.__decorate([l.property()],b.prototype,"snapToZoom",void 0);d.__decorate([l.property()],b.prototype,
"view",void 0);d.__decorate([l.property({type:e,dependsOn:["rotationEnabled"]})],b.prototype,"_rotation",null);d.__decorate([l.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],b.prototype,"_defaultLODs",null);d.__decorate([l.property({readOnly:!0,type:h,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],b.prototype,"_zoom",null);return b=d.__decorate([l.subclass("esri.views.2d.MapViewConstraints")],b)}(n.EventedAccessor)})},"esri/views/2d/constraints/RotationConstraint":function(){define(["require",
"exports","tslib","../../../core/Accessor","../../../core/accessorSupport/decorators"],function(r,f,d,n,l){return function(c){function e(){var e=null!==c&&c.apply(this,arguments)||this;e.enabled=!0;e.rotationEnabled=!0;return e}d.__extends(e,c);h=e;e.prototype.constrain=function(c,b){if(!this.enabled||!b)return c;this.rotationEnabled||(c.rotation=b.rotation);return c};e.prototype.clone=function(){return new h({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var h;d.__decorate([l.property()],
e.prototype,"enabled",void 0);d.__decorate([l.property()],e.prototype,"rotationEnabled",void 0);return e=h=d.__decorate([l.subclass("esri.views.2d.constraints.RotationConstraint")],e)}(n)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports tslib ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),function(r,f,d,n,l,c){return function(e){function h(b){b=e.call(this,b)||this;b._lodByScale={};b._scales=[];b.effectiveLODs=
null;b.effectiveMinZoom=-1;b.effectiveMaxZoom=-1;b.effectiveMinScale=0;b.effectiveMaxScale=0;b.lods=null;b.minZoom=-1;b.maxZoom=-1;b.minScale=0;b.maxScale=0;b.snapToZoom=!0;return b}d.__extends(h,e);f=h;h.prototype.initialize=function(){var b,a,c=this,e=this.lods;a=this.minScale;b=this.maxScale;var d=this.minZoom,h=this.maxZoom,f=-1,p=-1,q=!1,l=!1;0!==a&&0!==b&&a<b&&(b=[b,a],a=b[0],b=b[1]);if(e&&e.length){e=e.map(function(a){return a.clone()});e.sort(function(a,b){return b.scale-a.scale});e.forEach(function(a,
b){return a.level=b});for(var n,y=0,B=e;y<B.length;y++){var z=B[y];!q&&0<a&&a>=z.scale&&(f=z.level,q=!0);!l&&0<b&&b>=z.scale&&(p=n?n.level:-1,l=!0);n=z}-1===d&&(d=0===a?0:f);-1===h&&(h=0===b?e.length-1:p);d=Math.max(d,0);d=Math.min(d,e.length-1);h=Math.max(h,0);h=Math.min(h,e.length-1);d>h&&(a=[h,d],d=a[0],h=a[1]);a=e[d].scale;b=e[h].scale;e.splice(0,d);e.splice(h-d+1,e.length);e.forEach(function(a,b){c._lodByScale[a.scale]=a;c._scales[b]=a.scale});this._set("effectiveLODs",e);this._set("effectiveMinZoom",
d);this._set("effectiveMaxZoom",h)}this._set("effectiveMinScale",a);this._set("effectiveMaxScale",b)};h.prototype.constrain=function(b,a){if(a&&b.scale===a.scale)return b;var c=this.effectiveMinScale,e=this.effectiveMaxScale,d=b.targetGeometry,h=a&&a.targetGeometry,f=0!==c&&b.scale>c;if(0!==e&&b.scale<e||f)c=f?c:e,h&&(a=(c-a.scale)/(b.scale-a.scale),d.x=h.x+(d.x-h.x)*a,d.y=h.y+(d.y-h.y)*a),b.scale=c;this.snapToZoom&&this.effectiveLODs&&(b.scale=this._getClosestScale(b.scale));return b};h.prototype.fit=
function(b){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(b,null);var a=this.scaleToZoom(b.scale);b.scale=this.zoomToScale(.99<Math.abs(a-Math.floor(a))?Math.round(a):Math.floor(a));return b};h.prototype.zoomToScale=function(b){if(!this.effectiveLODs)return 0;b-=this.effectiveMinZoom;b=Math.max(0,b);var a=this._scales;if(0>=b)return a[0];if(b>=a.length)return a[a.length-1];var c=Math.round(b);return a[c]+(c-b)*(a[Math.round(b-.5)]-a[c])};h.prototype.scaleToZoom=function(b){if(!this.effectiveLODs)return-1;
var a=this._scales,c,e;if(b>=a[0])return this.effectiveMinZoom;if(b<=a[a.length-1])return this.effectiveMaxZoom;for(var d=0;d<a.length-1;d++){c=a[d];e=a[d+1];if(e===b)return a=d+this.effectiveMinZoom,a+1;if(c>b&&e<b)return a=d+this.effectiveMinZoom,a+1-(b-e)/(c-e)}};h.prototype.snapToClosestScale=function(b){if(!this.effectiveLODs)return b;b=this.scaleToZoom(b);return this.zoomToScale(Math.round(b))};h.prototype.snapToNextScale=function(b,a){void 0===a&&(a=.5);if(!this.effectiveLODs)return b*a;b=
Math.round(this.scaleToZoom(b));return this.zoomToScale(b+1)};h.prototype.snapToPreviousScale=function(b,a){void 0===a&&(a=2);if(!this.effectiveLODs)return b*a;b=Math.round(this.scaleToZoom(b));return this.zoomToScale(b-1)};h.prototype.clone=function(){return new f({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};h.prototype._getClosestScale=function(b){if(this._lodByScale[b])return this._lodByScale[b].scale;b=this._scales.reduce(function(a,
c){return Math.abs(c-b)<=Math.abs(a-b)?c:a},this._scales[0]);return this._lodByScale[b].scale};var f;d.__decorate([l.property({readOnly:!0})],h.prototype,"effectiveLODs",void 0);d.__decorate([l.property({readOnly:!0})],h.prototype,"effectiveMinZoom",void 0);d.__decorate([l.property({readOnly:!0})],h.prototype,"effectiveMaxZoom",void 0);d.__decorate([l.property({readOnly:!0})],h.prototype,"effectiveMinScale",void 0);d.__decorate([l.property({readOnly:!0})],h.prototype,"effectiveMaxScale",void 0);d.__decorate([l.property({type:[c]})],
h.prototype,"lods",void 0);d.__decorate([l.property()],h.prototype,"minZoom",void 0);d.__decorate([l.property()],h.prototype,"maxZoom",void 0);d.__decorate([l.property()],h.prototype,"minScale",void 0);d.__decorate([l.property()],h.prototype,"maxScale",void 0);d.__decorate([l.property()],h.prototype,"snapToZoom",void 0);return h=f=d.__decorate([l.subclass("esri.views.2d.constraints.ZoomConstraint")],h)}(n)})},"esri/views/2d/PaddedViewState":function(){define("require exports tslib ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(r,f,d,n,l,c,e,h,p){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}d.__extends(b,a);d.__decorate([l.property()],b.prototype,"left",void 0);d.__decorate([l.property()],b.prototype,"top",void 0);d.__decorate([l.property()],b.prototype,"right",void 0);d.__decorate([l.property()],b.prototype,"bottom",void 0);return b=d.__decorate([l.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(n);return function(a){function g(){for(var g=
[],d=0;d<arguments.length;d++)g[d]=arguments[d];var h=a.apply(this,g)||this;h.paddedViewState=new p;h._updateContent=function(){var a=e.vec2f64.create();return function(){var b=h._get("size"),g=h._get("padding");if(b&&g){var e=h.paddedViewState;c.vec2.set(a,g.left+g.right,g.top+g.bottom);c.vec2.subtract(a,b,a);c.vec2.copy(e.size,a);if(b=e.viewpoint)h.viewpoint=b}}}();h.watch(["size","padding"],h._updateContent,!0);h.padding=new b;h.size=[0,0];return h}d.__extends(g,a);Object.defineProperty(g.prototype,
"padding",{set:function(a){this._set("padding",a||new b)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.paddedViewState.viewpoint=a;h.addPadding(b,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var c=b.targetGeometry;a.center[0]=c.x;a.center[1]=c.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=c.spatialReference;this._update()}},enumerable:!0,configurable:!0});d.__decorate([l.property()],g.prototype,
"paddedViewState",void 0);d.__decorate([l.property({type:b})],g.prototype,"padding",null);d.__decorate([l.property()],g.prototype,"viewpoint",null);return g=d.__decorate([l.subclass("esri.views.2d.PaddedViewState")],g)}(p)})},"esri/views/2d/ViewState":function(){define("require exports tslib ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g,k,t,m,w,v,q){var u=[0,0];return function(c){function f(){for(var g=[],e=0;e<arguments.length;e++)g[e]=arguments[e];g=c.apply(this,g)||this;g._viewpoint2D={center:w.vec2f64.create(),rotation:0,scale:0,spatialReference:null};g.center=[0,0];g.extent=new n.Extent;g.id=0;g.inverseTransform=a.mat2df64.create();g.resolution=0;g.rotation=0;g.scale=0;g.transform=a.mat2df64.create();g.transformNoRotation=a.mat2df64.create();g.displayMat3=k.mat3f32.create();g.displayViewMat3=
k.mat3f32.create();g.viewMat3=k.mat3f32.create();g.viewMat2d=b.mat2df32.create();g.worldScreenWidth=0;g.size=[0,0];return g}d.__extends(f,c);E=f;Object.defineProperty(f.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,
c=a.targetGeometry;b.center[0]=c.x;b.center[1]=c.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=c.spatialReference}this._update()},enumerable:!0,configurable:!0});f.prototype.copy=function(a){var b=this.size,c=this.viewpoint;c&&b?(this.viewpoint=q.copy(c,a.viewpoint),this._set("size",t.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};f.prototype.clone=function(){return new E({size:this.size,
viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};f.prototype.toMap=function(a,b,c){if(v.isVec2(b))return t.vec2.transformMat2d(a,b,this.inverseTransform);u[0]=b;u[1]=c;return t.vec2.transformMat2d(a,u,this.inverseTransform)};f.prototype.toScreen=function(a,b,c){if(v.isVec2(b))return t.vec2.transformMat2d(a,b,this.transform);u[0]=b;u[1]=c;return t.vec2.transformMat2d(a,u,this.transform)};f.prototype.toScreenNoRotation=function(a,b,c){if(v.isVec2(b))return t.vec2.transformMat2d(a,b,this.transformNoRotation);
u[0]=b;u[1]=c;return t.vec2.transformMat2d(a,u,this.transformNoRotation)};f.prototype.getScreenTransform=function(a,b){var c=this._viewpoint2D.center,g=this._get("pixelRatio")||1,e=this._get("size");q.getMatrix(a,c,e,b,0,g);return a};f.prototype._update=function(){var a=this._viewpoint2D,b=a.center,c=a.spatialReference,e=a.scale,d=a.rotation,a=this._get("pixelRatio")||1,k=this._get("size"),f=new l({targetGeometry:new n.Point(b[0],b[1],c),scale:e,rotation:d});this._set("viewpoint",f);if(k&&c&&e)return this.resolution=
q.getResolution(f),this.rotation=d,this.scale=e,this.spatialReference=c,t.vec2.copy(this.center,b),g.mat3.set(this.displayMat3,0!==k[0]?2/k[0]:0,0,0,0,0!==k[1]?-2/k[1]:0,0,-1,1,1),e=g.mat3.identity(this.viewMat3),b=m.vec2f32.fromValues(k[0]/2,k[1]/2),c=m.vec2f32.fromValues(-k[0]/2,-k[1]/2),d=h.common.toRadian(d),g.mat3.translate(e,e,b),g.mat3.rotate(e,e,d),g.mat3.translate(e,e,c),g.mat3.multiply(this.displayViewMat3,this.displayMat3,e),e=p.mat2d.identity(this.viewMat2d),p.mat2d.translate(e,e,b),p.mat2d.rotate(e,
e,d),p.mat2d.translate(e,e,c),q.getExtent(this.extent,f,k),q.getTransform(this.transform,f,k,a),p.mat2d.invert(this.inverseTransform,this.transform),q.getTransformNoRotation(this.transformNoRotation,f,k,a),this.worldScreenWidth=q.getWorldScreenWidth(this.spatialReference,this.resolution),this._set("id",this.id+1),this};var E;d.__decorate([e.property({readOnly:!0})],f.prototype,"id",void 0);d.__decorate([e.property({value:1,json:{write:!0}})],f.prototype,"pixelRatio",null);d.__decorate([e.property({json:{write:!0}})],
f.prototype,"size",null);d.__decorate([e.property({type:l,json:{write:!0}})],f.prototype,"viewpoint",null);return f=E=d.__decorate([e.subclass("esri.views.2d.ViewState")],f)}(c.JSONSupport)})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});f.mat2df32=d})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],function(r,f){function d(d,f,c,e){var h=
f[e];f=f[e+1];d[e]=c[0]*h+c[2]*f+c[4];d[e+1]=c[1]*h+c[3]*f+c[5]}Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){var d=new Float32Array(6);d[0]=1;d[3]=1;return d};f.clone=function(d){var f=new Float32Array(6);f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];f[4]=d[4];f[5]=d[5];return f};f.fromValues=function(d,f,c,e,h,p){var b=new Float32Array(6);b[0]=d;b[1]=f;b[2]=c;b[3]=e;b[4]=h;b[5]=p;return b};f.createView=function(d,f){return new Float32Array(d,f,6)};f.transform=d;f.transformMany=
function(f,l,c,e,h,p){void 0===e&&(e=0);void 0===h&&(h=0);void 0===p&&(p=2);for(h=h||l.length/p;e<h;e++)d(f,l,c,e*p)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});f.mat3=d})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(r,f,d){function n(c,e,d){var h=e[0],b=e[1],a=e[2],g=e[3],k=e[4],f=e[5],m=e[6],l=e[7];e=e[8];var v=d[0],q=d[1],u=d[2],
n=d[3],y=d[4],B=d[5],r=d[6],A=d[7];d=d[8];c[0]=v*h+q*g+u*m;c[1]=v*b+q*k+u*l;c[2]=v*a+q*f+u*e;c[3]=n*h+y*g+B*m;c[4]=n*b+y*k+B*l;c[5]=n*a+y*f+B*e;c[6]=r*h+A*g+d*m;c[7]=r*b+A*k+d*l;c[8]=r*a+A*f+d*e;return c}function l(c,e,d){c[0]=e[0]-d[0];c[1]=e[1]-d[1];c[2]=e[2]-d[2];c[3]=e[3]-d[3];c[4]=e[4]-d[4];c[5]=e[5]-d[5];c[6]=e[6]-d[6];c[7]=e[7]-d[7];c[8]=e[8]-d[8];return c}Object.defineProperty(f,"__esModule",{value:!0});f.fromMat4=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[4];c[4]=e[5];c[5]=e[6];c[6]=
e[8];c[7]=e[9];c[8]=e[10];return c};f.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];c[6]=e[6];c[7]=e[7];c[8]=e[8];return c};f.set=function(c,e,d,f,b,a,g,k,t,m){c[0]=e;c[1]=d;c[2]=f;c[3]=b;c[4]=a;c[5]=g;c[6]=k;c[7]=t;c[8]=m;return c};f.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};f.transpose=function(c,e){if(c===e){var d=e[1],f=e[2],b=e[5];c[1]=e[3];c[2]=e[6];c[3]=d;c[5]=e[7];c[6]=f;c[7]=b}else c[0]=e[0],c[1]=e[3],c[2]=
e[6],c[3]=e[1],c[4]=e[4],c[5]=e[7],c[6]=e[2],c[7]=e[5],c[8]=e[8];return c};f.invert=function(c,e){var d=e[0],f=e[1],b=e[2],a=e[3],g=e[4],k=e[5],t=e[6],m=e[7];e=e[8];var l=e*g-k*m,v=-e*a+k*t,q=m*a-g*t,u=d*l+f*v+b*q;if(!u)return null;u=1/u;c[0]=l*u;c[1]=(-e*f+b*m)*u;c[2]=(k*f-b*g)*u;c[3]=v*u;c[4]=(e*d-b*t)*u;c[5]=(-k*d+b*a)*u;c[6]=q*u;c[7]=(-m*d+f*t)*u;c[8]=(g*d-f*a)*u;return c};f.adjoint=function(c,e){var d=e[0],f=e[1],b=e[2],a=e[3],g=e[4],k=e[5],t=e[6],m=e[7];e=e[8];c[0]=g*e-k*m;c[1]=b*m-f*e;c[2]=
f*k-b*g;c[3]=k*t-a*e;c[4]=d*e-b*t;c[5]=b*a-d*k;c[6]=a*m-g*t;c[7]=f*t-d*m;c[8]=d*g-f*a;return c};f.determinant=function(c){var e=c[3],d=c[4],f=c[5],b=c[6],a=c[7],g=c[8];return c[0]*(g*d-f*a)+c[1]*(-g*e+f*b)+c[2]*(a*e-d*b)};f.multiply=n;f.translate=function(c,e,d){var h=e[0],b=e[1],a=e[2],g=e[3],k=e[4],f=e[5],m=e[6],l=e[7];e=e[8];var v=d[0];d=d[1];c[0]=h;c[1]=b;c[2]=a;c[3]=g;c[4]=k;c[5]=f;c[6]=v*h+d*g+m;c[7]=v*b+d*k+l;c[8]=v*a+d*f+e;return c};f.rotate=function(c,e,d){var h=e[0],b=e[1],a=e[2],g=e[3],
k=e[4],f=e[5],m=e[6],l=e[7];e=e[8];var v=Math.sin(d);d=Math.cos(d);c[0]=d*h+v*g;c[1]=d*b+v*k;c[2]=d*a+v*f;c[3]=d*g-v*h;c[4]=d*k-v*b;c[5]=d*f-v*a;c[6]=m;c[7]=l;c[8]=e;return c};f.scale=function(c,e,d){var h=d[0],b=d[1];d=d[2];c[0]=h*e[0];c[1]=h*e[1];c[2]=h*e[2];c[3]=b*e[3];c[4]=b*e[4];c[5]=b*e[5];c[6]=d*e[6];c[7]=d*e[7];c[8]=d*e[8];return c};f.scaleByVec2=function(c,e,d){var h=d[0];d=d[1];c[0]=h*e[0];c[1]=h*e[1];c[2]=h*e[2];c[3]=d*e[3];c[4]=d*e[4];c[5]=d*e[5];return c};f.fromTranslation=function(c,
e){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=e[0];c[7]=e[1];c[8]=1;return c};f.fromRotation=function(c,e){var d=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=d;c[2]=0;c[3]=-d;c[4]=e;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};f.fromScaling=function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=0;c[4]=e[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};f.fromMat2d=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=0;c[3]=e[2];c[4]=e[3];c[5]=0;c[6]=e[4];c[7]=e[5];c[8]=1;return c};f.fromQuat=function(c,e){var d=e[0],f=e[1],b=e[2];e=e[3];var a=
d+d,g=f+f,k=b+b,d=d*a,t=f*a,f=f*g,m=b*a,l=b*g,b=b*k,a=e*a,g=e*g;e*=k;c[0]=1-f-b;c[3]=t-e;c[6]=m+g;c[1]=t+e;c[4]=1-d-b;c[7]=l-a;c[2]=m-g;c[5]=l+a;c[8]=1-d-f;return c};f.normalFromMat4Legacy=function(c,e){var d=e[0],f=e[1],b=e[2],a=e[4],g=e[5],k=e[6],t=e[8],m=e[9];e=e[10];var l=e*g-k*m,v=-e*a+k*t,q=m*a-g*t,u=d*l+f*v+b*q;if(!u)return null;u=1/u;c[0]=l*u;c[1]=(-e*f+b*m)*u;c[2]=(k*f-b*g)*u;c[3]=v*u;c[4]=(e*d-b*t)*u;c[5]=(-k*d+b*a)*u;c[6]=q*u;c[7]=(-m*d+f*t)*u;c[8]=(g*d-f*a)*u;return c};f.normalFromMat4=
function(c,e){var d=e[0],f=e[1],b=e[2],a=e[3],g=e[4],k=e[5],t=e[6],m=e[7],l=e[8],v=e[9],q=e[10],u=e[11],n=e[12],y=e[13],B=e[14];e=e[15];var r=d*k-f*g,A=d*t-b*g,x=d*m-a*g,C=f*t-b*k,H=f*m-a*k,D=b*m-a*t,F=l*y-v*n,I=l*B-q*n,l=l*e-u*n,G=v*B-q*y,v=v*e-u*y,q=q*e-u*B,u=r*q-A*v+x*G+C*l-H*I+D*F;if(!u)return null;u=1/u;c[0]=(k*q-t*v+m*G)*u;c[1]=(t*l-g*q-m*I)*u;c[2]=(g*v-k*l+m*F)*u;c[3]=(b*v-f*q-a*G)*u;c[4]=(d*q-b*l+a*I)*u;c[5]=(f*l-d*v-a*F)*u;c[6]=(y*D-B*H+e*C)*u;c[7]=(B*x-n*D-e*A)*u;c[8]=(n*H-y*x+e*r)*u;return c};
f.projection=function(c,e,d){c[0]=2/e;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/d;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c};f.str=function(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+")"};f.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};f.add=function(c,e,d){c[0]=e[0]+d[0];c[1]=e[1]+d[1];c[2]=e[2]+d[2];c[3]=e[3]+d[3];
c[4]=e[4]+d[4];c[5]=e[5]+d[5];c[6]=e[6]+d[6];c[7]=e[7]+d[7];c[8]=e[8]+d[8];return c};f.subtract=l;f.multiplyScalar=function(c,e,d){c[0]=e[0]*d;c[1]=e[1]*d;c[2]=e[2]*d;c[3]=e[3]*d;c[4]=e[4]*d;c[5]=e[5]*d;c[6]=e[6]*d;c[7]=e[7]*d;c[8]=e[8]*d;return c};f.multiplyScalarAndAdd=function(c,e,d,f){c[0]=e[0]+d[0]*f;c[1]=e[1]+d[1]*f;c[2]=e[2]+d[2]*f;c[3]=e[3]+d[3]*f;c[4]=e[4]+d[4]*f;c[5]=e[5]+d[5]*f;c[6]=e[6]+d[6]*f;c[7]=e[7]+d[7]*f;c[8]=e[8]+d[8]*f;return c};f.exactEquals=function(c,e){return c[0]===e[0]&&
c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]&&c[6]===e[6]&&c[7]===e[7]&&c[8]===e[8]};f.equals=function(c,e){var f=c[0],p=c[1],b=c[2],a=c[3],g=c[4],k=c[5],t=c[6],m=c[7];c=c[8];var l=e[0],v=e[1],q=e[2],u=e[3],n=e[4],y=e[5],B=e[6],r=e[7];e=e[8];return Math.abs(f-l)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(p-v)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(v))&&Math.abs(b-q)<=d.EPSILON*Math.max(1,Math.abs(b),Math.abs(q))&&Math.abs(a-u)<=d.EPSILON*Math.max(1,Math.abs(a),
Math.abs(u))&&Math.abs(g-n)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(n))&&Math.abs(k-y)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(y))&&Math.abs(t-B)<=d.EPSILON*Math.max(1,Math.abs(t),Math.abs(B))&&Math.abs(m-r)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(r))&&Math.abs(c-e)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};f.mul=n;f.sub=l})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});
f.mat3f32=d})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(r,f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){var d=new Float32Array(9);d[0]=1;d[4]=1;d[8]=1;return d};f.clone=function(d){var f=new Float32Array(9);f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];f[4]=d[4];f[5]=d[5];f[6]=d[6];f[7]=d[7];f[8]=d[8];return f};f.fromValues=function(d,f,l,c,e,h,p,b,a){var g=new Float32Array(9);g[0]=d;g[1]=f;g[2]=l;g[3]=c;g[4]=e;g[5]=h;g[6]=
p;g[7]=b;g[8]=a;return g};f.createView=function(d,f){return new Float32Array(d,f,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});f.vec2f32=d})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(r,f){function d(){return new Float32Array(2)}function n(c,e){var b=new Float32Array(2);b[0]=c;b[1]=e;return b}function l(){return n(1,1)}function c(){return n(1,
0)}function e(){return n(0,1)}Object.defineProperty(f,"__esModule",{value:!0});f.create=d;f.clone=function(c){var e=new Float32Array(2);e[0]=c[0];e[1]=c[1];return e};f.fromValues=n;f.createView=function(c,e){return new Float32Array(c,e,2)};f.zeros=function(){return d()};f.ones=l;f.unitX=c;f.unitY=e;f.ZEROS=d();f.ONES=l();f.UNIT_X=c();f.UNIT_Y=e()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(r,f){function d(d){return d instanceof Float32Array&&2<=d.length}
function n(d){return Array.isArray(d)&&2<=d.length}Object.defineProperty(f,"__esModule",{value:!0});f.isVec2f32=d;f.isVec2f64=n;f.isVec2=function(f){return d(f)||n(f)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),function(r,f,d,n,l,c){Object.defineProperty(f,"__esModule",{value:!0});f.TileInfoView=d;f.TileKey=n;f.TileQueue=l;f.TileStrategy=c})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),
function(r,f,d,n,l,c,e){var h=new c("0/0/0/0"),p=function(){function a(a,b,c,e,d,f,h,p){this.x=a;this.ymin=b;this.ymax=c;this.invM=e;this.leftAdjust=d;this.rightAdjust=f;this.leftBound=h;this.rightBound=p}a.create=function(b,c){var g;b[1]>c[1]&&(g=[c,b],b=g[0],c=g[1]);g=b[0];b=b[1];var e=c[0];c=c[1];var d=e-g,k=c-b,k=0!==k?d/k:0,f=(Math.ceil(b)-b)*k,h=(Math.floor(b)-b)*k;return new a(g,Math.floor(b),Math.ceil(c),k,0>d?f:h,0>d?h:f,0>d?e:g,0>d?g:e)};a.prototype.incrRow=function(){this.x+=this.invM};
a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),b=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,b){var c=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var g=a.lods.slice();g.sort(function(a,b){return b.scale-a.scale});var e=this._lodInfos=g.map(function(c){return n.create(a,
c,b)});g.forEach(function(a,b){c._infoByLevel[a.level]=e[b];c._infoByScale[a.scale]=e[b];c.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0});a.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileBounds(a,h,
c):a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileCoords(a,h,c):a};a.prototype.getTileCoverage=function(a,c,d){void 0===c&&(c=192);void 0===d&&(d="closest");d="closest"===d?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);var g=l.pool.acquire(d),k=this._wrap,f;f=Infinity;var h=-Infinity,t,n,y=g.spans;b[0][0]=b[0][1]=b[1][1]=b[3][0]=-c;b[1][0]=b[2][0]=a.size[0]+c;b[2][1]=b[3][1]=a.size[1]+c;for(c=0;c<
b.length;c++){var B=b[c];a.toMap(B,B);B[0]=d.getColumnForX(B[0]);B[1]=d.getRowForY(B[1])}a=[];B=3;for(c=0;4>c;c++){if(b[c][1]!==b[B][1]){var r=p.create(b[c],b[B]);f=Math.min(r.ymin,f);h=Math.max(r.ymax,h);void 0===a[r.ymin]&&(a[r.ymin]=[]);a[r.ymin].push(r)}B=c}if(null==f||null==h||100<h-f)return null;for(B=[];f<h;){null!=a[f]&&(B=B.concat(a[f]));t=Infinity;n=-Infinity;for(c=B.length-1;0<=c;c--)r=B[c],t=Math.min(t,r.getLeftCol()),n=Math.max(n,r.getRightCol());t=Math.floor(t);n=Math.floor(n);if(f>=
d.first[1]&&f<=d.last[1])if(k)if(d.size[0]<d.worldSize[0])for(r=Math.floor(n/d.worldSize[0]),c=Math.floor(t/d.worldSize[0]);c<=r;c++)y.push(new e(f,Math.max(d.getFirstColumnForWorld(c),t),Math.min(d.getLastColumnForWorld(c),n)));else y.push(new e(f,t,n));else t>d.last[0]||n<d.first[0]||(t=Math.max(t,d.first[0]),n=Math.min(n,d.last[0]),y.push(new e(f,t,n)));f+=1;for(c=B.length-1;0<=c;c--)r=B[c],r.ymax>=f?r.incrRow():B.splice(c,1)}return g};a.prototype.getTileParentId=function(a){h.set(a);a=this._lodInfos.indexOf(this._infoByLevel[h.level])-
1;if(0>a)return null;this._getTileIdAtLOD(h,this._lodInfos[a],h);return h.id};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};a.prototype.intersects=function(a,b){h.set(b);b=this._infoByLevel[h.level];var c=a.lodInfo;if(c.resolution>b.resolution){this._getTileIdAtLOD(h,c,h);for(var g=c.denormalizeCol(h.col,h.world),e=0,d=a.spans;e<d.length;e++){var k=
d[e];if(k.row===h.row&&k.colFrom<=g&&k.colTo>=g)return!0}}if(c.resolution<b.resolution){d=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=d[0];var g=d[1],e=d[2],d=d[3],f=b.denormalizeCol(h.col,h.world),k=c.getColumnForX(b.getXForColumn(f)),p=c.getRowForY(b.getYForRow(h.row)),f=c.getColumnForX(b.getXForColumn(f+1))-1;b=c.getRowForY(b.getYForRow(h.row+1))-1;
return!(k>d||f<e||p>g||b<a)}var l=c.denormalizeCol(h.col,h.world);return a.spans.some(function(a){return a.row===h.row&&a.colFrom<=l&&a.colTo>=l})};a.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=d.getInfo(this.tileInfo.spatialReference),c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};a.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];
for(var c=1;c<b.length-1;c++)if(a>b[c]+1E-6)return this._infoByScale[b[c-1]];return this._infoByScale[b[b.length-1]]};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,c){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]);return this._infoByScale[a]};a.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var c=b.length-1;0<=c;c--)if(a<b[c])return c===b.length-
1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[c]].level+(b[c]-a)/(b[c]-b[c+1]);return this._infoByScale[b[0]].level};a.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};a.prototype._getTileIdAtLOD=function(a,b,c){var g=this._infoByLevel[c.level];a.set(c);if(b.resolution<g.resolution)return null;if(b.resolution===g.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*g.resolution/b.resolution+.01);a.row=Math.floor(c.row*g.resolution/b.resolution+.01);return a};
return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(r,f,d,n){function l(c,d,f){c[0]=d;c[1]=f;return c}var c=new n("0/0/0/0");return function(){function e(c,e,b,a,g,d,f,m,l,v,q,u){this.level=c;this.resolution=e;this.scale=b;this.origin=a;this.first=g;this.last=d;this.size=f;this.norm=m;this.worldStart=l;this.worldEnd=v;this.worldSize=q;this.wrap=u}e.create=function(c,f,b){var a=d.getInfo(c.spatialReference),
g=[c.origin.x,c.origin.y],k=[c.size[0]*f.resolution,c.size[1]*f.resolution],h=[-Infinity,-Infinity],m=[Infinity,Infinity],p=[Infinity,Infinity];b&&(l(h,Math.max(0,Math.floor((b.xmin-g[0])/k[0])),Math.max(0,Math.floor((g[1]-b.ymax)/k[1]))),l(m,Math.max(0,Math.floor((b.xmax-g[0])/k[0])),Math.max(0,Math.floor((g[1]-b.ymin)/k[1]))),l(p,m[0]-h[0]+1,m[1]-h[1]+1));var v;c.isWrappable?(c=[Math.ceil(Math.round(2*a.origin[1]/f.resolution)/c.size[0]),p[1]],a=[Math.floor((a.origin[0]-g[0])/k[0]),h[1]],b=[c[0]+
a[0]-1,m[1]],v=!0):(a=h,b=m,c=p,v=!1);return new e(f.level,f.resolution,f.scale,g,h,m,p,k,a,b,c,v)};e.prototype.normalizeCol=function(c){if(!this.wrap)return c;var e=this.worldSize[0];return 0>c?e-1-Math.abs((c+1)%e):c%e};e.prototype.denormalizeCol=function(c,e){return this.wrap?this.worldSize[0]*e+c:c};e.prototype.getWorldForColumn=function(c){return this.wrap?Math.floor(c/this.worldSize[0]):0};e.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};e.prototype.getLastColumnForWorld=
function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};e.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};e.prototype.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};e.prototype.getRowForY=function(c){return(this.origin[1]-c)/this.norm[1]};e.prototype.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};e.prototype.getTileBounds=function(e,d,b){void 0===b&&(b=!1);c.set(d);var a=b?c.col:this.denormalizeCol(c.col,c.world),g=c.row;d=this.getXForColumn(a);
b=this.getYForRow(g+1);a=this.getXForColumn(a+1);g=this.getYForRow(g);e[0]=d;e[1]=b;e[2]=a;e[3]=g;return e};e.prototype.getTileCoords=function(e,d,b){void 0===b&&(b=!1);c.set(d);d=b?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(e)?l(e,this.getXForColumn(d),this.getYForRow(c.row)):(e.x=this.getXForColumn(d),e.y=this.getYForRow(c.row));return e};return e}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(r,f,d){return function(){function f(d,
c,e,f){this.set(d,c,e,f)}f.getId=function(d,c,e,f){return"object"===typeof d?d.level+"/"+d.row+"/"+d.col+"/"+d.world:d+"/"+c+"/"+e+"/"+f};Object.defineProperty(f.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});f.prototype.acquire=function(d,c,e,f){this.set(d,c,e,f)};f.prototype.equals=function(d){return this.level===d.level&&this.row===d.row&&this.col===d.col&&
this.world===d.world};f.prototype.release=function(){this.world=this.col=this.row=this.level=0};f.prototype.set=function(d,c,e,f){null==d?this.world=this.col=this.row=this.level=0:"object"===typeof d?(this.level=d.level||0,this.row=d.row||0,this.col=d.col||0,this.world=d.world||0):"string"===typeof d?(d=d.split("/"),c=d[1],e=d[2],f=d[3],this.level=parseFloat(d[0]),this.row=parseFloat(c),this.col=parseFloat(e),this.world=parseFloat(f)):(this.level=+d,this.row=+c,this.col=+e,this.world=+f||0);return this};
f.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};f.prototype.getChildKeys=function(){var d=this.level+1,c=this.row<<1,e=this.col<<1,h=this.world;return[new f(d,c,e,h),new f(d,c,e+1,h),new f(d,c+1,e,h),new f(d,c+1,e+1,h)]};f.prototype.compareRowMajor=function(d){return this.row<d.row?-1:this.row>d.row?1:this.col<d.col?-1:this.col>d.col?1:0};f.pool=new d(f,null,null,25,50);return f}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports",
"../../../core/ObjectPool"],function(r,f,d){return function(){function f(){this.spans=[]}f.prototype.acquire=function(d){this.lodInfo=d};f.prototype.release=function(){this.lodInfo=null;this.spans.length=0};f.prototype.forEach=function(d,c){var e=this.spans,f=this.lodInfo,p=f.level;if(0!==e.length)for(var b=0;b<e.length;b++)for(var a=e[b],g=a.row,k=a.colTo,a=a.colFrom;a<=k;a++)d.call(c,p,g,f.normalizeCol(a),f.getWorldForColumn(a))};f.pool=new d(f);return f}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require",
"exports"],function(r,f){return function(){return function(d,f,l){this.row=d;this.colFrom=f;this.colTo=l}}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports tslib ../../../core/Accessor ../../../core/SetUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),function(r,f,d,n,l,c,e,h){function p(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var b=new Set,a=[],g=new Map,k=[0,0];return function(f){function m(a){a=
f.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}d.__extends(m,f);m.prototype.initialize=function(){var a=this,b=this.process;this._queue=new h.QueueProcessor({concurrency:this.concurrency,process:function(c,g){c=a._keyToItem.get(c);return b(c,{signal:g})},peeker:"scale-first"===this.strategy?function(b){return a._peekByScaleFirst(b)}:function(b){return a._peekByCenterFirst(b)}})};m.prototype.destroy=function(){this.clear();this._queue.destroy();
this._queue=null};Object.defineProperty(m.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"updating",{get:function(){return 0<this.length||0<this.onGoingCount},enumerable:!0,configurable:!0});m.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};m.prototype.clear=
function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};m.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};m.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&this._queue.isOngoing(a)};m.prototype.pause=function(){this._queue.pause()};m.prototype.push=function(a){var b=this,c=a.key.id;if(this.has(c))return this.get(c);var g=this._queue.push(c),e=function(){b._keyToItem.delete(c);b.notifyChange("updating")};
this._keyToItem.set(c,a);g.then(e,e);this.notifyChange("updating");return g};m.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};m.prototype.resume=function(){this._queue.resume()};m.prototype._peekByScaleFirst=function(c){var e=this;if(!this.state)return l.firstOfSet(c);var d=this.tileInfoView,k=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;c.forEach(function(a){a=e._keyToItem.get(a);var c=e.tileInfoView.getTileScale(a.key);g.has(c)||(g.set(c,[]),k=Math.max(c,k),
f=Math.min(c,f));g.get(c).push(a.key);b.add(c)});var m=this.state.scale;g.has(m)||(p(a,b),a.sort(),m=a.reduce(function(a,b){return Math.abs(b-m)<Math.abs(a-m)?b:a},a[0]));m=Math.min(m,k);m=Math.max(m,f);c=g.get(m);var h=d.getClosestInfoForScale(m),t=h.getColumnForX(this.state.center[0]),n=h.getRowForY(this.state.center[1]);c.sort(function(a,b){var c=h.denormalizeCol(a.col,a.world),g=h.denormalizeCol(b.col,b.world);return Math.sqrt((t-c)*(t-c)+(n-a.row)*(n-a.row))-Math.sqrt((t-g)*(t-g)+(n-b.row)*(n-
b.row))});b.clear();g.clear();return c[0].id};m.prototype._peekByCenterFirst=function(a){var b=this;if(!this.state)return l.firstOfSet(a);var c=this.tileInfoView,g=this.state.center,d=Number.POSITIVE_INFINITY,f=null;a.forEach(function(a){a=b._keyToItem.get(a);c.getTileCoords(k,a.key);var m=e.vec2.distance(k,g);m<d&&(d=m,f=a.key)});return f.id};d.__decorate([c.property({constructOnly:!0})],m.prototype,"concurrency",void 0);d.__decorate([c.property({constructOnly:!0})],m.prototype,"process",void 0);
d.__decorate([c.property()],m.prototype,"state",void 0);d.__decorate([c.property({constructOnly:!0})],m.prototype,"strategy",void 0);d.__decorate([c.property({constructOnly:!0})],m.prototype,"tileInfoView",void 0);d.__decorate([c.property({readOnly:!0})],m.prototype,"updating",null);return m=d.__decorate([c.subclass("esri.views.2d.tiling.TileQueue")],m)}(n)})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),
function(r,f,d,n,l,c){Object.defineProperty(f,"__esModule",{value:!0});var e=function(){return function(c,e){this.item=c;this.controller=e;this.promise=null}}();r=function(){function f(c){var b=this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;c.concurrency&&(this.concurrency=c.concurrency);this._queue=new l.default(c.peeker);this.process=c.process;var a=c.scheduler;c.task&&d.isSome(a)&&(this._task=
a.registerTask(c.task,function(a){return b.update(a)},function(){return b.needsUpdate()}))}f.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(f.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});f.prototype.abort=function(c){(c=this._controllers.get(c))&&c.abort()};f.prototype.clear=function(){this._queue.clear();
var c=[];this._controllers.forEach(function(b){return c.push(b)});this._controllers.clear();c.forEach(function(b){return b.abort()});this._processingItems.clear();this._cancelNext()};f.prototype.get=function(c){return(c=this._deferreds.get(c))?c.promise:void 0};f.prototype.isOngoing=function(c){return this._processingItems.has(c)};f.prototype.has=function(c){return this._deferreds.has(c)};f.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};f.prototype.push=function(c){var b=
this,a=this.get(c);if(a)return a;var g,a=n.createAbortController(),e=function(){d.remove();b._deferreds.delete(c);b._controllers.delete(c);b._queue.remove(c);b._processingItems.delete(c);b._scheduleNext()},d=n.onAbortOrThrow(a.signal,function(){var a=b._processingItems.get(c);a&&a.controller.abort();e();g.reject(n.createAbortError())});g=n.createDeferred();this._deferreds.set(c,g);this._controllers.set(c,a);g.promise.then(e,e);this._queue.push(c);this._scheduleNext();return g.promise};f.prototype.reset=
function(){var c=[];this._processingItems.forEach(function(a){return c.push(a)});this._processingItems.clear();for(var b=0;b<c.length;b++){var a=c[b];this._queue.push(a.item);a.controller.abort()}this._scheduleNext()};f.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};f.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};f.prototype.update=function(c){for(;!c.done&&0<this._queue.length&&this._processingItems.size<
this.concurrency;)this._process(this._queue.pop()),c.madeProgress()};f.prototype._scheduleNext=function(){var e=this;this._task||this._isPaused||this._schedule||(this._schedule=c.schedule(function(){e._schedule=null;e._next()}))};f.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};f.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};f.prototype._processResult=function(c,
b){this._canProcessFulfillment(c)&&(this._scheduleNext(),this._deferreds.get(c.item).resolve(b))};f.prototype._processError=function(c,b){this._canProcessFulfillment(c)&&(this._scheduleNext(),this._deferreds.get(c.item).reject(b))};f.prototype._canProcessFulfillment=function(c){return this._deferreds.get(c.item)&&this._processingItems.get(c.item)===c?!0:!1};f.prototype._process=function(c){var b=this;if(!d.isNone(c)){var a,g=n.createAbortController(),k=new e(c,g);this._processingItems.set(c,k);try{a=
this.process(c,g.signal)}catch(t){this._processError(k,t)}a&&"function"===typeof a.then?(k.promise=a,a.then(function(a){return b._processResult(k,a)},function(a){return b._processError(k,a)})):this._processResult(k,a)}};Object.defineProperty(f.prototype,"test",{get:function(){var c=this;return{update:function(b){return c.update(b)}}},enumerable:!0,configurable:!0});return f}();f.QueueProcessor=r})},"esri/core/Queue":function(){define(["require","exports","./SetUtils"],function(r,f,d){Object.defineProperty(f,
"__esModule",{value:!0});r=function(){function f(f){void 0===f&&(f=function(c){return d.firstOfSet(c)});this._peeker=f;this._items=new Set}Object.defineProperty(f.prototype,"length",{get:function(){return this._items.size},enumerable:!0,configurable:!0});f.prototype.clear=function(){this._items.clear()};f.prototype.peek=function(){if(0!==this._items.size)return this._peeker(this._items)};f.prototype.push=function(d){this.contains(d)||this._items.add(d)};f.prototype.contains=function(d){return this._items.has(d)};
f.prototype.pop=function(){if(0!==this.length){var d=this.peek();this._items.delete(d);return d}};f.prototype.remove=function(d){this._items.delete(d)};return f}();f.default=r})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","./TileCache","./TileCoverage","./TileKey"],function(r,f,d,n,l){var c=new l(0,0,0,0),e=new Map,h=[],p=[];return function(){function b(a){var b=this;this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";
this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new d.default(a.cacheSize,this.tileInfoView,function(a){b.releaseTile(a)}))}b.prototype.destroy=function(){this.tileIndex.clear()};
b.prototype.update=function(a){var b=this,d=this.resampling,f=this.tileIndex,m=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);p.length=0;h.length=0;e.clear();if(m){var l=this.tileInfoView.tileInfo,v=l.minScale,q=l.maxScale,u=m.spans,E=m.lodInfo,y=E.level,B=a.state,r=B.scale,l=B.center,B=B.resolution,A=!a.stationary&&r>this._previousScale;this._previousScale=r;this.tiles.length=0;if(!d&&(r>v||r<q))return this.tiles.length=0,e.clear(),f.forEach(function(a){b.releaseTile(a)}),
f.clear(),p.length=0,h.length=0,e.clear(),n.pool.release(m),!0;f.forEach(function(a){return a.visible=!0});q=v=0;if(0<u.length)for(r=0;r<u.length;r++){a=u[r];for(var x=a.row,C=a.colTo,H=a.colFrom;H<=C;H++)if(v++,a=c.set(y,x,E.normalizeCol(H),E.getWorldForColumn(H)).id,f.has(a))d=f.get(a),d.isReady?(e.set(a,d),q++):A||this._addParentTile(a,e);else{d=void 0;if(this._tileCache&&this._tileCache.has(a)){if(d=this._tileCache.pop(a),this.tileIndex.set(a,d),d.isReady){e.set(a,d);q++;continue}}else d=this.acquireTile(c),
this.tileIndex.set(a,d);A||this._addParentTile(a,e)}}var D=q===v;f.forEach(function(a,g){c.set(g);if(!e.has(g)){var d=b.tileInfoView.intersects(m,c);!d||!A&&D?"purge"===b.cachePolicy?c.level===y&&d||h.push(g):(c.level>y||!d)&&h.push(g):a.isReady?p.push(g):c.level>y&&h.push(g)}});for(u=0;u<p.length;u++)a=p[u],(d=f.get(a))&&d.isReady&&e.set(a,d);for(u=0;u<h.length;u++)a=h[u],d=f.get(a),this._tileCache?this._tileCache.add(d):this.releaseTile(d),f["delete"](a);e.forEach(function(a){return b.tiles.push(a)});
f.forEach(function(a){e.has(a.key.id)||(a.visible=!1)});this._tileCache&&this._tileCache.prune(y,l,B);n.pool.release(m);return D}};b.prototype.clear=function(a){var b=this;void 0===a&&(a=!0);var c=this.tileIndex;a&&c.forEach(function(a){b.releaseTile(a)});c.clear()};b.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if((c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||b.set(c.key.id,c);break}}else if(this._tileCache&&
this._tileCache.has(a)&&(c=this._tileCache.pop(a),this.tileIndex.set(a,c),c&&c.isReady)){b.has(c.key.id)||b.set(c.key.id,c);break}}};return b}()})},"esri/views/2d/tiling/TileCache":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});r=function(){function f(d,c,e){this.maxSize=d;this.tileInfoView=c;this.removedFunc=e;this._tilePerId=new Map;this._tileKeysPerLevel=[]}f.prototype.has=function(d){return this._tilePerId.has(d)};
f.prototype.get=function(d){return this._tilePerId.get(d)};f.prototype.pop=function(d){var c=this._tilePerId.get(d);if(!c)return null;var e=this._tileKeysPerLevel[c.key.level];this._tilePerId["delete"](d);for(var f=0;f<e.length;f++)if(e[f].id===d){e.splice(f,1);break}c.visible=!0;return c};f.prototype.add=function(d){d.visible=!1;var c=d.key,e=c.id;this._tilePerId.has(e)||(this._tilePerId.set(e,d),d=c.level,this._tileKeysPerLevel[d]||(this._tileKeysPerLevel[d]=[]),this._tileKeysPerLevel[d].push(c))};
f.prototype.prune=function(d,c,e){var f=this._tilePerId.size;if(!(f<=this.maxSize)){for(var p=this._tileKeysPerLevel.length-1;f>this.maxSize&&0<=p;)p!==d&&(f=this._pruneAroundCenterTile(f,c,e,p)),p--;f>this.maxSize&&(f=this._pruneAroundCenterTile(f,c,e,d))}};f.prototype._pruneAroundCenterTile=function(f,c,e,h){h=this._tileKeysPerLevel[h];if(!h||0===h.length)return f;var p=this.tileInfoView.tileInfo,b=p.size,a=p.origin,g=e*b[0],k=e*b[1],t=[0,0],m=[0,0];for(h.sort(function(b,e){t[0]=a.x+g*(b.col+.5);
t[1]=a.y-k*(b.row+.5);m[0]=a.x+g*(e.col+.5);m[1]=a.y-k*(e.row+.5);return d.vec2.squaredDistance(t,c)-d.vec2.squaredDistance(m,c)});0<h.length&&(e=h.pop(),this._removeTile(e.id),f--,f!==this.maxSize););return f};f.prototype._removeTile=function(d){var c=this._tilePerId.get(d);this.removedFunc&&this.removedFunc(c);this._tilePerId["delete"](d)};return f}();f.default=r})},"esri/views/2d/support/Timeline":function(){define(["require","exports"],function(r,f){Object.defineProperty(f,"__esModule",{value:!0});
r=function(){function d(){this._names=new Map}d.prototype.begin=function(d){this._names.has(d)||(this._names.set(d,!1),-1!==d.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark("Esri."+d+".Start"))};d.prototype.end=function(d){this._names.has(d)&&!this._names.get(d)&&(this._names.set(d,!0),performance.mark("Esri."+d+".End"))};d.prototype.record=function(d){this._names.has(d)||(this._names.set(d,!0),performance.mark("Esri."+d))};return d}();f.Timeline=r})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports tslib ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g,k,t,m,w,v,q,u,E,y,B,z,A,x){var C={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},H={zoomIn:["\x3d","+"],zoomOut:["-","_"]},D={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(f){function n(){var a=null!==f&&f.apply(this,arguments)||this;a._handles=new l;return a}d.__extends(n,f);n.prototype.initialize=function(){var a=this;this._handles.add([c.whenNot(this.view,
"ready",function(){return a._disconnect()}),c.when(this.view,"ready",function(){return a._connect()})])};n.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};n.prototype._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};n.prototype._connect=function(){var e=this,d=new q.BrowserEventSource(this.view.surface,this.view.input),
f=[new z.ImmediateDoubleClick,new A.PointerClickHoldAndDrag,new x.SingleAndDoubleClick,new B.Drag(this.view.navigation),new y.DoubleTapDrag],f=new u.InputManager({eventSource:d,recognizers:f});f.installHandlers("prevent-context-menu",[new E.PreventContextMenu],u.ViewEventPriorities.INTERNAL);f.installHandlers("navigation",[new v.PinchRotateAndZoom(this.view),new g.GamepadNavigation(this.view),new w.MouseWheelZoom(this.view),new h.DoubleClickZoom(this.view),new h.DoubleClickZoom(this.view,["Ctrl"]),
new b.DragPan(this.view,"primary"),new k.KeyPan(this.view,C),new m.KeyZoom(this.view,H),new t.KeyRotate(this.view,D),new a.DragRotate(this.view,"secondary"),new p.DoubleTapDragZoom(this.view,"touch")],u.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(f);this._source=d;this._inputManager=f;c.init(this.view.navigation,"browserTouchPanEnabled",function(a){e._source.browserTouchPanningEnabled=!a})};Object.defineProperty(n.prototype,"test",{get:function(){return{inputManager:this._inputManager}},
enumerable:!0,configurable:!0});d.__decorate([e.property()],n.prototype,"view",void 0);return n=d.__decorate([e.subclass("esri.views.2d.input.MapViewInputManager")],n)}(n)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","tslib","../../../input/InputHandler","../../../input/handlers/support"],function(r,f,d,n,l){Object.defineProperty(f,"__esModule",{value:!0});r=function(c){function e(e,d){var b=c.call(this,!0)||this;b.view=e;b.registerIncoming("double-click",
d,function(a){return b._handleDoubleClick(a,d)});return b}d.__extends(e,c);e.prototype._handleDoubleClick=function(c,e){l.eventMatchesPointerAction(c.data,"primary")&&(c.stopPropagation(),e?this.view.mapViewNavigation.zoomOut([c.data.x,c.data.y]):this.view.mapViewNavigation.zoomIn([c.data.x,c.data.y]))};return e}(n.InputHandler);f.DoubleClickZoom=r})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(r,f){Object.defineProperty(f,"__esModule",{value:!0});f.eventMatchesPointerAction=
function(d,f){switch(f){case "primary":return"touch"===d.pointerType||0===d.button;case "secondary":return"touch"!==d.pointerType&&2===d.button;case "tertiary":return"touch"!==d.pointerType&&1===d.button}};f.eventMatchesMousePointerAction=function(d,f){if("touch"===d.pointerType)return!1;switch(f){case "primary":return 0===d.button;case "secondary":return 2===d.button;case "tertiary":return 1===d.button}}})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["require","exports","tslib",
"../../../../core/compilerUtils","../../../input/InputHandler"],function(r,f,d,n,l){Object.defineProperty(f,"__esModule",{value:!0});r=function(c){function e(e,d,b){var a=c.call(this,!0)||this;a.view=e;a.pointerType=d;a.registerIncoming("double-tap-drag",b,function(b){return a._handleDoubleTapDrag(b)});return a}d.__extends(e,c);e.prototype._handleDoubleTapDrag=function(c){var e=c.data;if(e.pointerType===this.pointerType){c.stopPropagation();var b=e.action;c=e.delta;var a=this.view,e=a.mapViewNavigation;
switch(b){case "begin":this._currentScale=this._startScale=b=a.scale;this._previousDelta=c;e.begin();break;case "update":if(this._previousDelta.y===c.y)break;this._previousDelta=c;c=this._startScale*Math.pow(1.015,c.y);e.setViewpointImmediate(c/this._currentScale);this._currentScale=c;break;case "end":b=a.constraints;a=b.effectiveLODs;if(!b.snapToZoom||!a){e.end();break}a=b.snapScale(this._currentScale);c=(0<c.y?Math.max(a,b.snapToPreviousScale(this._startScale)):Math.min(a,b.snapToNextScale(this._startScale)))/
this._currentScale;e.zoom(c);break;default:n.neverReached(b)}}};return e}(l.InputHandler);f.DoubleTapDragZoom=r})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports tslib ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(r,f,d,n,l,c){Object.defineProperty(f,"__esModule",{value:!0});r=function(e){function f(d,b,a){var g=e.call(this,!0)||this;g.view=d;g.pointerAction=b;g.registerIncoming("drag",a,function(a){return g._handleDrag(a)});
g.registerIncoming("pointer-down",function(){return g.stopMomentumNavigation()});var k=g.view.mapViewNavigation;g.dragEventSeparator=new n.DragEventSeparator({start:function(a,b){k.pan.begin(g.view,b.data);b.stopPropagation()},update:function(a,b){k.pan.update(g.view,b.data);b.stopPropagation()},end:function(a,b){k.pan.end(g.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,g.pointerAction)}});return g}d.__extends(f,e);f.prototype._handleDrag=
function(c){var b=this.view.mapViewNavigation;b.pinch.zoomMomentum||b.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(c)};f.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return f}(l.InputHandler);f.DragPan=r})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(r,f){Object.defineProperty(f,"__esModule",{value:!0});r=function(){function d(d){this.callbacks=d;this.currentCount=
0;this.callbacks.condition||(this.callbacks.condition=function(){return!0})}d.prototype.handle=function(d){var f=d.data,c=f.pointers.size;switch(f.action){case "start":this.currentCount=c;this.emitStart(d);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(d);break;case "update":this.emitUpdate(d);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(d);break;case "end":this.emitEnd(d),this.currentCount=0}this.previousEvent=
d};d.prototype.emitStart=function(d){this.startEvent=d;this.callbacks.condition(this.currentCount,d)&&this.callbacks.start(this.currentCount,d,this.startEvent)};d.prototype.emitUpdate=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.update(this.currentCount,d,this.startEvent)};d.prototype.emitEnd=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.end(this.currentCount,d,this.startEvent);this.startEvent=null};return d}();f.DragEventSeparator=r})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports tslib ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(r,f,d,n,l,c){Object.defineProperty(f,"__esModule",{value:!0});r=function(e){function f(d,b,a){var g=e.call(this,!0)||this;g.view=d;g.pointerAction=b;var f=g.view.mapViewNavigation;g.dragEventSeparator=new n.DragEventSeparator({start:function(a,b){f.rotate.begin(g.view,b.data);b.stopPropagation()},update:function(a,b){f.rotate.update(g.view,b.data);b.stopPropagation()},end:function(a,b){f.rotate.end();b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,
g.pointerAction)}});g.registerIncoming("drag",a,function(a){return g.dragEventSeparator.handle(a)});return g}d.__extends(f,e);return f}(l.InputHandler);f.DragRotate=r})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports tslib ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(r,f,d,n,l,c,e,h,p){Object.defineProperty(f,"__esModule",
{value:!0});r=function(f){function k(a){var b=f.call(this,!0)||this;b.view=a;b.frameTask=null;b.watchHandles=new n;b.currentDevice=null;b.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};b.handle=b.registerIncoming("gamepad",function(a){return b.handleEvent(a)});b.handle.pause();return b}d.__extends(k,f);k.prototype.onInstall=function(a){var b=this;f.prototype.onInstall.call(this,a);this.watchHandles.add([c.init(this.view.navigation.gamepad,"enabled",function(a){a?(b.handle.resume(),b.frameTask||
(b.frameTask=l.addFrameTask({update:function(a){return b.frameUpdate(a.deltaTime)}}))):(b.handle.pause(),b.frameTask&&(b.frameTask.remove(),b.frameTask=null))})])};k.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);f.prototype.onUninstall.call(this)};k.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&this.currentDevice!==a.data.device||("end"===a.data.action?
(this.currentDevice=null,p.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,p.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};k.prototype.frameUpdate=function(c){var d=this.transformation;if(!p.isZeroTransformation(d)){var f=this.view.viewpoint.clone(),k=a*this.view.navigation.gamepad.velocityFactor*c;e.translateBy(f,f,[d.translation[0]*k,-d.translation[1]*k]);k=this.view.size;e.scaleAndRotateBy(f,f,1+d.translation[2]*g*c,this.view.constraints.rotationEnabled?
-d.heading*b*c:0,[k[0]/2,k[1]],k);c=this.view.constraints.constrain(f,this.view.viewpoint);this.view.viewpoint=c}};return k}(h.InputHandler);f.GamepadNavigation=r;var b=.06,a=.7,g=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(r,f,d){function n(d){var c=d*d;0>d&&(c*=-1);return c}Object.defineProperty(f,"__esModule",{value:!0});f.quadraticAccentuation=n;f.resetTransformation=function(d){d.translation[0]=0;
d.translation[1]=0;d.translation[2]=0;d.heading=0;d.tilt=0;return d};f.extractTransformation=function(f,c,e){var h=f.state;f=f.device;c="forward-down"===c.tiltDirection?1:-1;"standard"===f.deviceType?(e.translation[0]=n(h.axes[0]),e.translation[1]=n(h.axes[1]),e.translation[2]=n(h.buttons[7])-n(h.buttons[6]),e.heading=n(h.axes[2]),e.tilt=n(h.axes[3])):"spacemouse"===f.deviceType&&(e.translation[0]=1.2*n(h.axes[0]),e.translation[1]=1.2*n(h.axes[1]),e.translation[2]=2*-n(h.axes[2]),e.heading=1.2*n(h.axes[5]),
e.tilt=1.2*n(h.axes[3]));e.tilt*=c;d.vec3.scale(e.translation,e.translation,1);return e};f.extractTransformationKeyboard=function(d,c){c.translation[0]=d[1]-d[0];c.translation[1]=d[3]-d[2];c.translation[2]=d[4]-d[5];c.heading=d[7]-d[6];c.tilt=d[8]-d[9];c.zoom=d[10]-d[11];return c};f.isZeroTransformation=function(d){return 0===d.translation[0]&&0===d.translation[1]&&0===d.translation[2]&&0===d.heading&&0===d.tilt&&0===d.zoom}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports",
"tslib","../../../input/InputHandler"],function(r,f,d,n){Object.defineProperty(f,"__esModule",{value:!0});r=function(f){function c(c,d,p){var b,a=f.call(this,!0)||this;a.view=c;a.keys=d;a._pressed=!1;a._keyMap=(b={},b[d.left]="left",b[d.right]="right",b[d.up]="up",b[d.down]="down",b);a.registerIncoming("key-down",p,function(b){return a._handleKeyDown(b)});a.registerIncoming("key-up",p,function(b){return a._handleKeyUp(b)});a.registerIncoming("blur",p,function(){return a._handleBlur()});return a}d.__extends(c,
f);c.prototype._handleKeyDown=function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,d){var e=this._keyMap[c.data.key];if(this._pressed=null!=e){if(d)switch(this.view.mapViewNavigation.begin(),e){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();
break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(n.InputHandler);f.KeyPan=r})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","tslib","../../../input/InputHandler"],function(r,f,d,n){Object.defineProperty(f,"__esModule",{value:!0});r=function(f){function c(c,d,p){var b,a=f.call(this,!0)||this;a.view=c;
a.keys=d;a._pressed=!1;a._keyToDirection=(b={},b[d.clockwiseOption1]="clockwise",b[d.clockwiseOption2]="clockwise",b[d.counterClockwiseOption1]="counterClockwise",b[d.counterClockwiseOption2]="counterClockwise",b[d.resetOption1]="reset",b[d.resetOption2]="reset",b);a.registerIncoming("key-down",p,function(b){return a._handleKeyDown(b)});a.registerIncoming("key-up",p,function(b){return a._handleKeyUp(b)});a.registerIncoming("blur",p,function(){return a._handleBlur()});return a}d.__extends(c,f);c.prototype._handleKeyDown=
function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,d){var e=c.modifiers;if(!(0<e.size&&!e.has("Shift")||!this.view.constraints.rotationEnabled)&&(e=this._keyToDirection[c.data.key],this._pressed=null!=e)){if(d)switch(this.view.mapViewNavigation.begin(),e){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();
break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(n.InputHandler);f.KeyRotate=r})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","tslib","../../../../core/compilerUtils","../../../input/InputHandler"],function(r,f,d,n,l){Object.defineProperty(f,"__esModule",{value:!0});r=function(c){function e(d,
e,b){var a=c.call(this,!0)||this;a.view=d;a.keys=e;a._keysToZoomAction={};a.registerIncoming("key-down",b,function(b){return a._handleKeyDown(b)});e.zoomIn.forEach(function(b){return a._keysToZoomAction[b]=0});e.zoomOut.forEach(function(b){return a._keysToZoomAction[b]=1});return a}d.__extends(e,c);e.prototype._handleKeyDown=function(c){this._handleKey(c)};e.prototype._handleKey=function(c){var d=c.modifiers;if(!(0<d.size)||d.has("Shift"))if(d=c.data.key,d in this._keysToZoomAction){var d=this._keysToZoomAction[d],
b=this.view.mapViewNavigation,a=null;switch(d){case 0:a=b.zoomIn();break;case 1:a=b.zoomOut();break;default:n.neverReached(d);return}b.begin();a.then(function(){return b.end()});c.stopPropagation()}};return e}(l.InputHandler);f.KeyZoom=r})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","tslib","../../../input/InputHandler"],function(r,f,d,n){Object.defineProperty(f,"__esModule",{value:!0});r=function(f){function c(c,d){var e=f.call(this,!0)||this;e.view=c;e._canZoom=
!0;e.registerIncoming("mouse-wheel",d,function(b){return e._handleMouseWheel(b)});return e}d.__extends(c,f);c.prototype._handleMouseWheel=function(c){var d=this;if(this.view.navigation.mouseWheelZoomEnabled&&(c.preventDefault(),c.stopPropagation(),this._canZoom)){var e=this.view.mapViewNavigation;c=c.data;if(c=e.zoom(1/Math.pow(.6,1/60*c.deltaY),[c.x,c.y]))this._canZoom=!1,c.catch(function(){}).then(function(){d._canZoom=!0;e.end()})}};return c}(n.InputHandler);f.MouseWheelZoom=r})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require",
"exports","tslib","../../../input/DragEventSeparator","../../../input/InputHandler"],function(r,f,d,n,l){Object.defineProperty(f,"__esModule",{value:!0});r=function(c){function e(d){var e=c.call(this,!0)||this;e.view=d;e.registerIncoming("drag",function(a){return e._handleDrag(a)});e.registerIncoming("pointer-down",function(){return e.stopMomentumNavigation()});var b=e.view.mapViewNavigation;e.dragEventSeparator=new n.DragEventSeparator({start:function(a,c){b.pinch.begin(e.view,c.data);c.stopPropagation()},
update:function(a,c){b.pinch.update(e.view,c.data);c.stopPropagation()},end:function(a,c){b.pinch.end(e.view);c.stopPropagation()},condition:function(a){return 2<=a}});return e}d.__extends(e,c);e.prototype._handleDrag=function(c){this.dragEventSeparator.handle(c)};e.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return e}(l.InputHandler);f.PinchRotateAndZoom=r})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),
function(r,f,d,n,l,c,e){Object.defineProperty(f,"__esModule",{value:!0});var h=d("trident"),p=d("edge"),b=d("chrome"),a=d("ff"),g=d("safari");r=function(){function d(a,b){var c=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=a;l.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,
"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new e.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return c._callback("gamepad",
a)}}d.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(d.prototype,"browserTouchPanningEnabled",{get:function(){return this._browserTouchPanningEnabled},set:function(a){this._browserTouchPanningEnabled=
a;this._updateTouchAction();this._updateTouchEventHandling()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)a&&a.has(c)||(this._element.removeEventListener(k[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&k[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,
a);b._element.addEventListener(k[a],c);b._active[a]=c}});this._gamepadSource.hasEventListeners=a&&a.has("gamepad")},enumerable:!0,configurable:!0});d.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};d.prototype._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":
"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};d.prototype._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};d.prototype._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};d.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(w){}};d.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=n.createScreenPointFromNativeEvent(this._element,a);d.test.disableSubpixelCoordinates&&(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};d.prototype._handleKey=function(a,
b){var d=c.eventKey(b);d&&"key-up"===a&&this._keyDownState.delete(d);b={native:b,key:d,repeat:d&&this._keyDownState.has(d)};d&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};d.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,b)};d.prototype._handlePointerPreventDefault=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,
{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,c)};d.prototype._handleMouseWheel=function(c,d){var e=d.deltaY;switch(d.deltaMode){case 0:if(h||p)e=e/document.documentElement.clientHeight*600;break;case 1:e*=30;break;case 2:e*=900}h||p?e*=.7:b||g?e*=.6:a&&(e*=1.375);var f=Math.abs(e);100<f&&(e=e/f*200/(1+Math.exp(-.02*(f-100))));d=this._updateNormalizedPointerLikeEvent(d,{native:d,x:0,y:0,deltaY:e});this._callback(c,
d)};d.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};d.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};d.prototype._preventAltKeyDefault=function(a){"Alt"===a.key&&a.preventDefault()};d.prototype._preventMultiTouchPanning=function(a){1<a.touches.length&&a.preventDefault()};d.test={disableSubpixelCoordinates:!1};return d}();f.BrowserEventSource=r;var k={"key-down":"keydown",
"key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function r(c,d){d=d||Object.create(null);var e=document.createEvent("Event");e.initEvent(c,
d.bubbles||!1,d.cancelable||!1);c=2;for(var g;c<b.length;c++)g=b[c],e[g]=d[g]||a[c];e.buttons=d.buttons||0;c=0;c=d.pressure&&e.buttons?d.pressure:e.buttons?.5:0;e.x=e.clientX;e.y=e.clientY;e.pointerId=d.pointerId||0;e.width=d.width||0;e.height=d.height||0;e.pressure=c;e.tiltX=d.tiltX||0;e.tiltY=d.tiltY||0;e.twist=d.twist||0;e.tangentialPressure=d.tangentialPressure||0;e.pointerType=d.pointerType||"";e.hwTimestamp=d.hwTimestamp||0;e.isPrimary=d.isPrimary||!1;return e}function f(){this.array=[];this.size=
0}function d(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);z&&(this.observer=new z(this.mutationWatcher.bind(this)))}function n(a){return"body /shadow-deep/ "+l(a)}function l(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function e(){if(H){x.forEach(function(a){String(a)===a?(C+=l(a)+c(a)+"\n",D&&(C+=n(a)+c(a)+"\n")):(C+=a.selectors.map(l)+c(a.rule)+"\n",D&&(C+=a.selectors.map(n)+c(a.rule)+
"\n"))});var a=document.createElement("style");a.textContent=C;document.head.appendChild(a)}}function h(a){if(!v.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function p(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var b="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),a=[!1,!1,null,null,
0,0,0,0,!1,!1,!1,!1,0,null,0,0],g=window.Map&&window.Map.prototype.forEach?Map:f;f.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var k="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
t=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],m={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},w="undefined"!==typeof SVGElementInstance,v={pointermap:new g,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(Z){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new r(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},
fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<k.length;d++)c=k[d],b[c]=a[c]||t[d],w&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in m))return b},propagate:function(a,
b,c){for(var d=a.target,e=[];null!=d&&d!==document&&!d.contains(a.relatedTarget);)if(e.push(d),d=d.parentNode,!d)return;c&&e.reverse();e.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b,c){this.captureInfo[a]&&this.releaseCapture(a,c);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,c);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var d=new r("gotpointercapture");d.pointerId=
a;d._target=b;c||this.asyncDispatchEvent(d)},releaseCapture:function(a,b){var c=this.captureInfo[a];if(c){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var d=new r("lostpointercapture");d.pointerId=a;d._target=c;b||this.asyncDispatchEvent(d)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,
a))}};v.boundHandler=v.eventHandler.bind(v);var q={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,
c),e;for(e=this.targetingShadow(d);e;){if(a=e.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;e=this.olderShadow(e)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},u=Array.prototype.forEach.call.bind(Array.prototype.forEach),
E=Array.prototype.map.call.bind(Array.prototype.map),y=Array.prototype.slice.call.bind(Array.prototype.slice),B=Array.prototype.filter.call.bind(Array.prototype.filter),z=window.MutationObserver||window.WebKitMutationObserver,A={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};d.prototype={watchSubtree:function(a){this.observer&&q.canTarget(a)&&this.observer.observe(a,A)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?
this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){u(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(y(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===
document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=E(a,this.findElements,this);b.push(B(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,
this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var x=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],C="",H=window.PointerEvent||window.MSPointerEvent,D=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,F=v.pointermap,I=[1,4,2,8,16],G=!1;try{G=1===(new MouseEvent("test",{buttons:1})).buttons}catch(R){}var O={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){v.listen(a,
this.events)},unregister:function(a){v.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,e=b.length,g;d<e&&(g=b[d]);d++){var f=Math.abs(a-g.y);if(25>=Math.abs(c-g.x)&&25>=f)return!0}},prepareEvent:function(a){var b=v.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,
b){var c=F.get(this.POINTER_ID);a.buttons=0!==b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=F.get(this.POINTER_ID),c=this.prepareEvent(a);G||(c.buttons=I[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);F.set(this.POINTER_ID,a);b&&0!==b.buttons?v.move(c):v.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;F.set(this.POINTER_ID,a);v.move(b)}},
mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=F.get(this.POINTER_ID),c=this.prepareEvent(a);if(!G){var d=I[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}F.set(this.POINTER_ID,a);c.buttons&=~I[c.button];0===c.buttons?v.up(c):v.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;F.set(this.POINTER_ID,a);v.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;v.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);v.cancel(a);this.deactivateMouse()},deactivateMouse:function(){F.delete(this.POINTER_ID)}},K=v.captureInfo,N=q.findTarget.bind(q),Q=q.allShadows.bind(q),P=v.pointermap,J,M={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){J.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);
c&&(a._scrollType=c,v.listen(a,this.events),Q(a).forEach(function(a){a._scrollType=c;v.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;v.unlisten(a,this.events);Q(a).forEach(function(a){a._scrollType=void 0;v.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,Q(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):
d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===P.size||1===P.size&&P.has(1))this.firstTouch=
a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=
1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=v.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=K[d]||N(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=2*(a.radiusX||a.webkitRadiusX||0);c.height=2*(a.radiusY||a.webkitRadiusY||0);c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;
var e=this;c.preventDefault=function(){e.scrolling=!1;e.firstXY=null;b.preventDefault()};return c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var d;a<c.length;a++)d=c[a],b.call(this,this.touchToPointer(d))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=
null;return b}},findTouch:function(a,b){for(var c=0,d=a.length,e;c<d&&(e=a[c]);c++)if(e.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(P.size>=b.length){var c=[];P.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){P.set(a.pointerId,
{target:a.target,out:a,outTarget:a.target});v.enterOver(a);v.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=P.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;v.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(v.leaveOut(c),v.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=
a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(v.up(a),v.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){v.cancel(a);v.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){P.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=O.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},
b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};J=new d(M.elementAdded,M.elementRemoved,M.elementChanged,M);var L=v.pointermap,S=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,T={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){v.listen(a,this.events)},unregister:function(a){v.unlisten(a,this.events)},
POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;S&&(b=v.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){L.delete(a)},MSPointerDown:function(a){L.set(a.pointerId,a);a=this.prepareEvent(a);v.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);v.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);v.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);v.leaveOut(a)},MSPointerOver:function(a){a=
this.prepareEvent(a);v.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);v.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=v.makeEvent("lostpointercapture",a);v.dispatchEvent(a)},MSGotPointerCapture:function(a){a=v.makeEvent("gotpointercapture",a);v.dispatchEvent(a)}},U,V,Y;window.navigator.msPointerEnabled?(U=function(a){h(a);p(this);0!==v.pointermap.get(a).buttons&&(v.setCapture(a,this,!0),this.msSetPointerCapture(a))},V=function(a){h(a);v.releaseCapture(a,
!0);this.msReleasePointerCapture(a)}):(U=function(a){h(a);p(this);0!==v.pointermap.get(a).buttons&&v.setCapture(a,this)},V=function(a){h(a);v.releaseCapture(a)});Y=function(a){return!!v.captureInfo[a]};var X=window.PointerEvent||window.MSPointerEvent;return{dispatcher:v,Installer:d,PointerEvent:r,PointerMap:g,targetFinding:q,applyGlobal:function(){e();window.PointerEvent||(window.PointerEvent=r,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,
enumerable:!0}),v.registerSource("ms",T)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),v.registerSource("mouse",O),void 0!==window.ontouchstart&&v.registerSource("touch",M)),v.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:U},releasePointerCapture:{value:V},hasPointerCapture:{value:Y}})},applyLocal:function(a){X||(window.PointerEvent||(window.navigator.msPointerEnabled?
v.registerSource("ms",T):(v.registerSource("mouse",O),void 0!==window.ontouchstart&&v.registerSource("touch",M)),v.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=U.bind(a),a.releasePointerCapture=V.bind(a),a.hasPointerCapture=Y.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/gamepad/GamepadSource":function(){define(["require","exports","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],
function(r,f,d,n,l){Object.defineProperty(f,"__esModule",{value:!0});r=function(){function c(c,d){var e=this;this.element=c;this.input=d;this._hasEventListeners=!1;this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(b){return e.connectGamepad(b)}),window.addEventListener("gamepadconnected",function(b){return e.connectGamepad(b.gamepad)}),window.addEventListener("gamepaddisconnected",function(b){return e.disconnectGamepad(b.gamepad)}),
this.ensurePollingState()}c.prototype.destroy=function(){var c=this;this.ensurePollingState();this.supported&&(window.removeEventListener("gamepadconnected",function(d){return c.connectGamepad(d.gamepad)}),window.removeEventListener("gamepaddisconnected",function(d){return c.disconnectGamepad(d.gamepad)}))};Object.defineProperty(c.prototype,"hasEventListeners",{set:function(c){this._hasEventListeners!==c&&(this._hasEventListeners=c,this.ensurePollingState())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"eventsEnabled",{get:function(){return this.supported&&0<this.inputDevices.length&&this._hasEventListeners},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"onEvent",{set:function(c){this.callback=c},enumerable:!0,configurable:!0});c.prototype.connectGamepad=function(c){var d=new n(c);"unknown"!==d.deviceType&&(this.inputDevices[c.index]=d,this.input.gamepad.devices.add(d));this.ensurePollingState()};c.prototype.disconnectGamepad=function(c){var d=c.index,e=this.inputDevices[d];
e&&(this.emitGamepadEvent(c,l.extractState(e),!1),this.inputDevices.splice(d,1),this.latestUpdate.splice(d,1),this.input.gamepad.devices.remove(e),this.ensurePollingState())};c.prototype.ensurePollingState=function(){this.eventsEnabled?this.startPolling():this.stopPolling()};c.prototype.startPolling=function(){var c=this;null==this.frameTask&&(this.frameTask=d.addFrameTask({update:function(){return c.readGamepadState()}}))};c.prototype.stopPolling=function(){null!=this.frameTask&&(this.frameTask.remove(),
this.frameTask=null,this.latestUpdate=[])};c.prototype.readGamepadState=function(){var c=this,d=document.hasFocus(),f=this.element.contains(document.activeElement),b="document"===this.input.gamepad.enabledFocusMode&&!d||"view"===this.input.gamepad.enabledFocusMode&&!f;this.forEachGamepad(function(a){var d=c.inputDevices[a.index];if(d){var e=c.latestUpdate[a.index],d=l.extractState(d),f=b||l.stateIdle(d);e&&(e.timestamp===a.timestamp||!e.active&&f||l.stateEqual(e.state,d))||c.emitGamepadEvent(a,d,
!f)}})};c.prototype.forEachGamepad=function(c){for(var d=window.navigator.getGamepads(),e=0;e<d.length;e++){var b=d[e];this.validate(b)&&c(b)}};c.prototype.emitGamepadEvent=function(c,d,f){var b=this.latestUpdate[c.index];if((b=b&&b.active)||f)this.latestUpdate[c.index]={timestamp:c.timestamp,state:d,active:f},this.callback&&this.callback({device:this.inputDevices[c.index],state:d,action:!b&&f?"start":b&&f?"update":"end"})};c.prototype.validate=function(c){if(!c||!c.connected)return!1;for(var d=0;d<
c.axes.length;d++)if(isNaN(c.axes[d]))return!1;return!0};return c}();f.GamepadSource=r})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../../core/mathUtils"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});f.extractState=function(f){var l=f.native;return l?{buttons:l.buttons.map(function(c){return c.pressed?c.value?c.value:1:0}),axes:l.axes.map(function(c){var e=f.axisThreshold,h=Math.abs(c);c=h<e?0:d.sign(c)*(h-e)/(1-e);return c})}:{buttons:[],
axes:[]}};f.stateEqual=function(d,f){if(d.axes.length!==f.axes.length||d.buttons.length!==f.buttons.length)return!1;for(var c=0;c<d.axes.length;c++)if(d.axes[c]!==f.axes[c])return!1;for(c=0;c<d.buttons.length;c++)if(d.buttons[c]!==f.buttons[c])return!1;return!0};f.stateIdle=function(d){for(var f=0;f<d.axes.length;f++)if(0!==d.axes[f])return!1;for(f=0;f<d.buttons.length;f++)if(0!==d.buttons[f])return!1;return!0}})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports",
"tslib","../InputHandler"],function(r,f,d,n){Object.defineProperty(f,"__esModule",{value:!0});r=function(f){function c(){var c=f.call(this,!0)||this;c.registerIncoming("context-menu",function(c){c.data.native.preventDefault()});return c}d.__extends(c,f);return c}(n.InputHandler);f.PreventContextMenu=r;f.default=r})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("require exports tslib ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),
function(r,f,d,n,l,c,e,h,p,b){Object.defineProperty(f,"__esModule",{value:!0});r=function(a){function g(b,d,g,f,h){void 0===b&&(b=p.DefaultParameters.maximumDoubleClickDelay);void 0===d&&(d=p.DefaultParameters.maximumDoubleClickDistance);void 0===g&&(g=p.DefaultParameters.maximumDoubleTouchDelay);void 0===f&&(f=p.DefaultParameters.maximumDoubleTouchDistance);void 0===h&&(h=n.default);var k=a.call(this,!1)||this;k.maximumDoubleClickDelay=b;k.maximumDoubleClickDistance=d;k.maximumDoubleTouchDelay=g;
k.maximumDoubleTouchDistance=f;k._clock=h;k._doubleTapDragReady=!1;k._doubleTapDragActive=!1;k._dragStartCenter=c.createScreenPoint(0,0);k._pointerState=new Map;k._doubleTapDrag=k.registerOutgoing("double-tap-drag");k._dragEventSeparator=new e.DragEventSeparator({start:function(a,b){return k._dragStart(a,b)},update:function(a,b){return k._dragUpdate(b)},end:function(a,b){return k._dragEnd(b)}});k.registerIncoming("drag",function(a){return k._dragEventSeparator.handle(a)});k.registerIncoming("pointer-down",
function(a){return k._handlePointerDown(a)});k.registerIncoming("pointer-up",function(){return k._handlePointerUp()});return k}d.__extends(g,a);g.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleTapTimeout&&(a.doubleTapTimeout.remove(),a.doubleTapTimeout=null)})};Object.defineProperty(g.prototype,"hasPendingInputs",{get:function(){return l.someMap(this._pointerState,function(a){return null!=a.doubleTapTimeout})},enumerable:!0,configurable:!0});g.prototype._clearPointerDown=
function(a){var b=this._pointerState.get(a);b&&(b.doubleTapTimeout.remove(),b.doubleTapTimeout=null,this._pointerState.delete(a),this.refreshHasPendingInputs())};g.prototype._createDoubleTapDragData=function(a,b,c){return{action:a,delta:b,button:c.button,buttons:c.buttons,pointer:c.pointer,pointers:c.pointers,pointerType:c.pointerType,timestamp:c.timestamp}};g.prototype._dragStart=function(a,b){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var d=b.data;
a=b.modifiers;this._dragStartCenter=d.center;d=this._createDoubleTapDragData("begin",c.createScreenPoint(0,0),d);this._doubleTapDrag.emit(d,void 0,a);b.stopPropagation()}};g.prototype._dragUpdate=function(a){if(this._doubleTapDragActive){var b=a.data,d=a.modifiers,e=b.center,e=c.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("update",e,b);this._doubleTapDrag.emit(b,void 0,d);a.stopPropagation()}};g.prototype._dragEnd=function(a){if(this._doubleTapDragActive){var b=
a.data,d=a.modifiers,e=b.center,e=c.createScreenPoint(e.x-this._dragStartCenter.x,e.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("end",e,b);this._doubleTapDrag.emit(b,void 0,d);this._doubleTapDragActive=!1;a.stopPropagation()}};g.prototype._handlePointerDown=function(a){var c=a.data,d=this._pointerId(c),e=this._pointerState.get(d),g=c.native.pointerType;e?(g="touch"===g?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(d),b.manhattanDistance(e.event.data,
c)>g?this._storePointerDown(a):this._doubleTapDragReady=!0):this._storePointerDown(a)};g.prototype._handlePointerUp=function(){this._doubleTapDragReady=!1};g.prototype._pointerId=function(a){var b=a.native;a=b.pointerId;var c=b.button,b=b.pointerType;return"mouse"===b?a+":"+c:""+b};g.prototype._storePointerDown=function(a){var b=this,c=a.data,d=c.native.pointerType,e=this._pointerId(c),c=this._clock.setTimeout(function(){return b._clearPointerDown(e)},"touch"===d?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);
this._pointerState.set(e,{event:a,doubleTapTimeout:c});this.refreshHasPendingInputs()};return g}(h.InputHandler);f.DoubleTapDrag=r})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports tslib ../../../core/clock ../../../core/MapUtils ../InputHandler ./support".split(" "),function(r,f,d,n,l,c,e){Object.defineProperty(f,"__esModule",{value:!0});f.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};
r=function(c){function h(b,a,d,e,h){void 0===b&&(b=f.DefaultParameters.maximumDoubleClickDelay);void 0===a&&(a=f.DefaultParameters.maximumDoubleClickDistance);void 0===d&&(d=f.DefaultParameters.maximumDoubleTouchDelay);void 0===e&&(e=f.DefaultParameters.maximumDoubleTouchDistance);void 0===h&&(h=n.default);var g=c.call(this,!1)||this;g.maximumDoubleClickDelay=b;g.maximumDoubleClickDistance=a;g.maximumDoubleTouchDelay=d;g.maximumDoubleTouchDistance=e;g._clock=h;g._pointerState=new Map;g._click=g.registerOutgoing("click");
g._doubleClick=g.registerOutgoing("double-click");g.registerIncoming("immediate-click",g._handleImmediateClick.bind(g));g.registerIncoming("pointer-drag",g._handlePointerDrag.bind(g));g.registerIncoming("drag",g._handleDrag.bind(g));return g}d.__extends(h,c);h.prototype.onUninstall=function(){this._pointerState.forEach(function(b){null!=b.doubleClickTimeout&&(b.doubleClickTimeout.remove(),b.doubleClickTimeout=null)})};Object.defineProperty(h.prototype,"hasPendingInputs",{get:function(){return l.someMap(this._pointerState,
function(b){return null!=b.doubleClickTimeout})},enumerable:!0,configurable:!0});h.prototype._pointerId=function(b){b=b.native;return"mouse"===b.pointerType?b.pointerId+":"+b.button:""+b.pointerType};h.prototype._handleImmediateClick=function(b){var a=b.data,c=this._pointerId(a),d=this._pointerState.get(c);if(d){var f="touch"===a.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e.manhattanDistance(d.event.data,a)>f?(this._clearDoubleClickTimeout(c,!0),this._startClick(b)):
(this._clearDoubleClickTimeout(c,!1),this._doubleClick.emit(d.event.data,void 0,d.event.modifiers))}else this._startClick(b)};h.prototype._startClick=function(b){var a=this,c=this._pointerId(b.data);this._pointerState.set(c,{event:b,doubleClickTimeout:this._clock.setTimeout(function(){return a._doubleClickTimeoutExceeded(c)},"touch"===b.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};h.prototype._handlePointerDrag=function(b){b=
this._pointerId(b.data.currentEvent);this._clearDoubleClickTimeout(b,!0)};h.prototype._handleDrag=function(b){b=this._pointerId(b.data.pointer);this._clearDoubleClickTimeout(b,!0)};h.prototype._clearDoubleClickTimeout=function(b,a){var c=this._pointerState.get(b);c&&(c.doubleClickTimeout.remove(),c.doubleClickTimeout=null,a&&this._doubleClickTimeoutExceeded(b),this._pointerState.delete(b),this.refreshHasPendingInputs())};h.prototype._doubleClickTimeoutExceeded=function(b){var a=this._pointerState.get(b);
this._click.emit(a.event.data,void 0,a.event.modifiers);a.doubleClickTimeout=null;this._pointerState.delete(b);this.refreshHasPendingInputs()};return h}(c.InputHandler);f.SingleAndDoubleClick=r})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});f.manhattanDistance=function(d,f){return Math.abs(f.x-d.x)+Math.abs(f.y-d.y)};f.euclideanDistance=function(d,f){var c=f.x-d.x;d=f.y-
d.y;return Math.sqrt(c*c+d*d)};f.fitCircleLSQ=function(f,l){l?(l.radius=0,l.center.x=0,l.center.y=0):l={radius:0,center:d.createScreenPoint()};if(0===f.length)return l;if(1===f.length)return l.center.x=f[0].x,l.center.y=f[0].y,l;if(2===f.length){var c=f[0];f=f[1];var e=[f.x-c.x,f.y-c.y],h=e[0],e=e[1];l.radius=Math.sqrt(h*h+e*e)/2;l.center.x=(c.x+f.x)/2;l.center.y=(c.y+f.y)/2;return l}for(var p=0,b=0,a=0;a<f.length;a++)p+=f[a].x,b+=f[a].y;for(var p=p/f.length,b=b/f.length,g=f.map(function(a){return a.x-
p}),k=f.map(function(a){return a.y-b}),t=c=l=0,m=0,n=h=0,a=e=0;a<g.length;a++){var v=g[a],q=k[a],u=v*v,E=q*q;l+=u;c+=E;t+=v*q;m+=u*v;h+=E*q;n+=v*E;e+=q*u}a=l;g=t;k=c;m=.5*(m+n);h=.5*(h+e);e=a*k-t*g;n=(m*k-h*g)/e;h=(a*h-t*m)/e;e=d.createScreenPoint(n+p,h+b);return{radius:Math.sqrt(n*n+h*h+(l+c)/f.length),center:e}}})},"esri/views/input/recognizers/Drag":function(){define("require exports tslib ../../../core/screenUtils ../../../layers/support/timeUtils ../InputHandler ./support".split(" "),function(r,
f,d,n,l,c,e){function h(a){var b=[];a.forEach(function(a){b.push(n.createScreenPoint(a.event.x,a.event.y))});return e.fitCircleLSQ(b)}function p(b){var c=h(b),d=0;b.forEach(function(b){for(var e=a(b,c),e=e-b.lastAngle;e>Math.PI;)e-=2*Math.PI;for(;e<-Math.PI;)e+=2*Math.PI;e=b.lastAngle+e;b.lastAngle=e;d+=e-b.initialAngle});d/=b.size||1;return{angle:d,radius:c.radius,center:c.center}}function b(a){var b=new Map;a.forEach(function(a,c){return b.set(c,a.event)});return b}function a(a,b){a=a.event;return Math.atan2(a.y-
b.center.y,a.x-b.center.x)}Object.defineProperty(f,"__esModule",{value:!0});r=function(c){function e(a){var b=c.call(this,!1)||this;b.navigationTouch=a;b.startStateModifiers=new Set;b.activePointerMap=new Map;b.isDragging=!1;b.isCurrentDragSuppressed=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));
b.registerIncoming("pointer-cancel",b.handlePointerUpAndPointerLost.bind(b));return b}d.__extends(e,c);e.prototype.createPayload=function(a,c,d,e){return{action:a,pointerType:this.pointerType,button:this.mouseButton,buttons:c.buttons,timestamp:e,pointers:b(this.activePointerMap),pointer:c,angle:d.angle,radius:d.radius,center:d.center}};e.prototype.addPointer=function(b){var c=b.native.pointerId,d=p(this.activePointerMap).angle;b={event:b,initialAngle:0,lastAngle:0};this.activePointerMap.set(c,b);
c=a(b,h(this.activePointerMap));b.initialAngle=c;b.lastAngle=c;this.updatePointerAngles(d)};e.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};e.prototype.removePointer=function(a){var b=p(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};e.prototype.updatePointerAngles=function(b){var c=p(this.activePointerMap);this.activePointerMap.forEach(function(d){d.initialAngle=
a(d,c)-b;d.lastAngle=a(d,c)-b})};e.prototype.emitEvent=function(a,b,c){var d=p(this.activePointerMap);this.drag.emit(this.createPayload(a,b,d,c),void 0,this.startStateModifiers)};e.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,c=l.Milliseconds(a.timestamp);this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",a.data,c),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(b)):
(this.removePointer(b),this.emitEvent("removed",a.data,l.Milliseconds(a.timestamp))))};e.prototype.handlePointerDrag=function(a){var b=a.data,c=b.currentEvent,d=l.Milliseconds(a.timestamp);switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),!this.isCurrentDragSuppressed&&this.emitEvent("update",c,d)):(this.addPointer(c),this.emitEvent("added",c,d),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(c),this.pointerType=
a.data.startEvent.pointerType,this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",c,d))}};Object.defineProperty(e.prototype,"isSuppressed",{get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size},enumerable:!0,configurable:!0});return e}(c.InputHandler);f.Drag=
r;(function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(f.Button||(f.Button={}))})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("require exports tslib ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(r,f,d,n,l,c,e){Object.defineProperty(f,"__esModule",{value:!0});r=function(f){function h(b,a,d,e,h){void 0===b&&(b=c.DefaultParameters.maximumDoubleClickDelay);
void 0===a&&(a=c.DefaultParameters.maximumDoubleClickDistance);void 0===d&&(d=c.DefaultParameters.maximumDoubleTouchDelay);void 0===e&&(e=c.DefaultParameters.maximumDoubleTouchDistance);void 0===h&&(h=n.default);var g=f.call(this,!1)||this;g.maximumDoubleClickDelay=b;g.maximumDoubleClickDistance=a;g.maximumDoubleTouchDelay=d;g.maximumDoubleTouchDistance=e;g._clock=h;g._pointerState=new Map;g._immediateDoubleClick=g.registerOutgoing("immediate-double-click");g.registerIncoming("pointer-down",g._handlePointerDown.bind(g));
g.registerIncoming("pointer-up",function(a){g._handlePointerLoss(a,"pointer-up")});g.registerIncoming("pointer-capture-lost",function(a){g._handlePointerLoss(a,"pointer-capture-lost")});g.registerIncoming("pointer-cancel",function(a){g._handlePointerLoss(a,"pointer-cancel")});return g}d.__extends(h,f);h.prototype.onUninstall=function(){this._pointerState.forEach(function(b){b.immediateDoubleClick&&b.immediateDoubleClick.timeoutHandle.remove()});f.prototype.onUninstall.call(this)};h.prototype._handlePointerDown=
function(b){b=b.data;var a=this._pointerId(b);this._pointerState.has(a)||(this._pointerState.set(a,{downButton:b.native.button,immediateDoubleClick:null}),this.startCapturingPointer(b.native))};h.prototype._handlePointerLoss=function(b,a){var c=b.data,d=this._pointerId(c);if((d=this._pointerState.get(d))&&"pointer-up"===a&&d.downButton===c.native.button)if(a=d.immediateDoubleClick){a.timeoutHandle.remove();var f="touch"===b.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;
e.manhattanDistance(a,b.data)>f?this._startImmediateDoubleClick(b,d):(this._immediateDoubleClick.emit(b.data,void 0,a.modifiers),this._removeState(c))}else this._startImmediateDoubleClick(b,d)};h.prototype._startImmediateDoubleClick=function(b,a){var c=this;a.immediateDoubleClick={x:b.data.x,y:b.data.y,modifiers:b.modifiers,timeoutHandle:this._clock.setTimeout(function(){return c._removeState(b.data)},"touch"===b.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};
h.prototype._pointerId=function(b){b=b.native;return"mouse"===b.pointerType?b.pointerId+":"+b.button:""+b.pointerType};h.prototype._removeState=function(b){var a=this._pointerId(b);this._pointerState.delete(a);this.stopCapturingPointer(b.native);this.refreshHasPendingInputs()};return h}(l.InputHandler);f.ImmediateDoubleClick=r})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports tslib ../../../core/clock ../InputHandler ./support".split(" "),function(r,f,d,
n,l,c){Object.defineProperty(f,"__esModule",{value:!0});f.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};r=function(e){function h(c,b,a,d,k,h){void 0===c&&(c=f.DefaultParameters.maximumClickDelay);void 0===b&&(b=f.DefaultParameters.movementUntilMouseDrag);void 0===a&&(a=f.DefaultParameters.movementUntilPenDrag);void 0===d&&(d=f.DefaultParameters.movementUntilTouchDrag);void 0===k&&(k=f.DefaultParameters.holdDelay);
void 0===h&&(h=n.default);var g=e.call(this,!1)||this;g.maximumClickDelay=c;g.movementUntilMouseDrag=b;g.movementUntilPenDrag=a;g.movementUntilTouchDrag=d;g.holdDelay=k;g._clock=h;g._pointerState=new Map;g._pointerDrag=g.registerOutgoing("pointer-drag");g._immediateClick=g.registerOutgoing("immediate-click");g._pointerHold=g.registerOutgoing("hold");g.registerIncoming("pointer-down",g._handlePointerDown.bind(g));g.registerIncoming("pointer-up",function(a){g._handlePointerLoss(a,"pointer-up")});g.registerIncoming("pointer-capture-lost",
function(a){g._handlePointerLoss(a,"pointer-capture-lost")});g.registerIncoming("pointer-cancel",function(a){g._handlePointerLoss(a,"pointer-cancel")});g._moveHandle=g.registerIncoming("pointer-move",g._handlePointerMove.bind(g));g._moveHandle.pause();return g}d.__extends(h,e);h.prototype.onUninstall=function(){this._pointerState.forEach(function(c){null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null)});e.prototype.onUninstall.call(this)};h.prototype._handlePointerDown=function(c){var b=
this,a=c.data,d=a.native.pointerId,e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(function(){var a=b._pointerState.get(d);a&&(a.isDragging||(b._pointerHold.emit(a.previousEvent,void 0,c.modifiers),a.holdEmitted=!0),a.holdTimeout=null)},this.holdDelay));e={startEvent:a,previousEvent:a,startTimestamp:c.timestamp,isDragging:!1,downButton:a.native.button,holdTimeout:e,modifiers:new Set};this._pointerState.set(d,e);this.startCapturingPointer(a.native);this._moveHandle.resume();1<this._pointerState.size&&
this.startDragging(c)};h.prototype._createPointerDragData=function(c,b,a){return{action:c,startEvent:b.startEvent,previousEvent:b.previousEvent,currentEvent:a}};h.prototype._handlePointerMove=function(d){var b=d.data,a=this._pointerState.get(b.native.pointerId);if(a){if(a.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",a,b),void 0,a.modifiers);else{var e=c.euclideanDistance(b,a.startEvent),f=this._getDragThreshold(b.native.pointerType);e>f&&this.startDragging(d)}a.previousEvent=
b}};h.prototype._getDragThreshold=function(c){switch(c){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}};h.prototype.startDragging=function(c){var b=this,a=c.data,d=a.native.pointerId;this._pointerState.forEach(function(e){null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null);e.isDragging||(e.modifiers=c.modifiers,e.isDragging=!0,d===e.startEvent.native.pointerId?b._pointerDrag.emit(b._createPointerDragData("start",
e,a)):b._pointerDrag.emit(b._createPointerDragData("start",e,e.previousEvent),c.timestamp))})};h.prototype._handlePointerLoss=function(c,b){var a=c.data,d=a.native.pointerId,e=this._pointerState.get(d);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,"pointer-up"===b?a:e.previousEvent),void 0,e.modifiers):"pointer-up"===b&&e.downButton===a.native.button&&c.timestamp-e.startTimestamp<=this.maximumClickDelay&&
!e.holdEmitted&&this._immediateClick.emit(a),this._pointerState.delete(d),this.stopCapturingPointer(a.native),0===this._pointerState.size&&this._moveHandle.pause())};return h}(l.InputHandler);f.PointerClickHoldAndDrag=r})},"esri/views/2d/support/HighlightOptions":function(){define("require exports tslib ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(r,f,d,n,l,c){var e=0;return function(f){function h(){var b=null!==f&&f.apply(this,arguments)||this;
b.color=new n([0,255,255]);b.haloOpacity=1;b.fillOpacity=.25;return b}d.__extends(h,f);Object.defineProperty(h.prototype,"version",{get:function(){return e++},enumerable:!0,configurable:!0});d.__decorate([c.property({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],h.prototype,"version",null);d.__decorate([c.property({type:n})],h.prototype,"color",void 0);d.__decorate([c.property({type:n})],h.prototype,"haloColor",void 0);d.__decorate([c.property()],h.prototype,"haloOpacity",
void 0);d.__decorate([c.property()],h.prototype,"fillOpacity",void 0);return h=d.__decorate([c.subclass("esri.views.2d.support.HighlightOptions")],h)}(l)})},"esri/views/support/screenshotUtils":function(){define(["require","exports","tslib","../../core/compilerUtils","../../core/mathUtils"],function(r,f,d,n,l){function c(c,d){var e=c||{},g=e.format,f=e.quality,k=e.rotation,e=e.disableSlice,h=a(c,d.padding),q;q=d.width-h.left-h.right;d=d.height-h.top-h.bottom;h={x:0,y:0,width:q,height:d};if(c&&c.area){null!=
c.area.x&&(h.x=Math.floor(c.area.x));null!=c.area.y&&(h.y=Math.floor(c.area.y));var u=null!=c.area.width?Math.floor(c.area.width):null,t=null!=c.area.height?Math.floor(c.area.height):null;h.width=q-h.x;h.height=d-h.y;null!=u&&null!=t?(h.width=Math.min(h.width,u),h.height=Math.min(h.height,t)):null==u&&null!=t?(u=Math.min(h.width,u),h.height*=u/h.width,h.width=u):null!=u&&null==t&&(u=Math.min(h.height,t),h.width*=u/h.height,h.height=u)}h=b(h,c);u=Math.floor(Math.max(h.x,0));t=Math.floor(Math.max(h.y,
0));q={x:u,y:t,width:Math.floor(Math.min(h.width,q-u)),height:Math.floor(Math.min(h.height,d-t))};d=q.width/q.height;h=h.width/h.height;h!==d&&(h>d?(d=Math.floor(q.width/h),q={x:q.x,y:Math.floor(q.y+(q.height-d)/2),width:q.width,height:d}):(d=Math.floor(q.height*h),q={x:Math.floor(q.x+(q.width-d)/2),y:q.y,width:d,height:q.height}));h=p(c,q);d=h.width;h=h.height;a:switch(g){case "png":case "jpg":case "jpeg":break a;case null:case void 0:g=m;break a;default:n.neverReached(g),g=m}u=w[g];f=l.clamp(null!=
f?f:u,0,100);return{format:g,quality:f,area:q,width:d,height:h,rotation:k,disableSlice:!!e,ignoreBackground:!(!c||!c.ignoreBackground),ignorePadding:!(!c||!c.ignorePadding)}}function e(a,b){return a.toDataURL(t[b.format],b.quality/100)}function h(a,b,c){c||(g||(g=document.createElement("canvas"),g.width=1,g.height=1),c=g);return c.getContext("2d").createImageData(a,b)}function p(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==
c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function b(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var c=a.width/a.height;if(c===b)return a;if(c<b)return b=Math.floor(a.height*b),a.x-=(b-a.width)/2,a.width=b,a;b=Math.floor(a.width/b);a.y-=(b-a.height)/2;a.height=b;return a}function a(a,b){return!b||a&&a.ignorePadding?v:b}Object.defineProperty(f,"__esModule",{value:!0});f.completeUserSettings=
c;f.toRenderSettings=function(b,d){var e=c(b,d),g=e.area,f=e.width/g.width,k=a(e,d.padding),h=k.left+k.right,m=k.top+k.bottom;return{framebufferWidth:Math.floor((d.width-h)*f+h),framebufferHeight:Math.floor((d.height-m)*f+m),region:{x:Math.floor(g.x*f)+k.left,y:Math.floor(g.y*f)+k.top,width:e.width,height:e.height},format:e.format,quality:e.quality,rotation:e.rotation,pixelRatio:f,layers:b&&b.layers?b.layers:[],disableSlice:e.disableSlice,ignoreBackground:e.ignoreBackground,ignorePadding:e.ignorePadding}};
f.encodeResult=function(a,b,c,d){if(d.premultipliedAlpha)for(var g=a.data,f=g.length,k=0;k<f;k+=4){var h=g[k+3];0<h&&(h/=255,g[k+0]/=h,g[k+1]/=h,g[k+2]/=h)}c.width=a.width;c.height=a.height;g=c.getContext("2d");g.putImageData(a,0,0);d.flipY&&(g.save(),g.globalCompositeOperation="copy",g.scale(1,-1),g.translate(0,-g.canvas.height),g.drawImage(g.canvas,0,0),g.restore());a=g.getImageData(0,0,a.width,a.height);b=e(c,b);c.width=0;c.height=0;return{dataUrl:b,data:a}};f.toDataUrl=e;f.createEmptyImageData=
function(a,b,c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(a,b)}catch(y){k=!1}return h(a,b,c)};f.wrapImageData=function(a,b,c,d){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(a,b,c)}catch(B){k=!1}b=h(b,c,d);b.data.set(a,0);return b};f.resampleHermite=function(a,b,c,d,e,g,f,k){void 0===d&&(d=0);void 0===e&&(e=0);void 0===g&&(g=a.width-d);void 0===f&&(f=a.height-e);void 0===k&&(k=!1);var h=
a.data,m=b.width,q=b.height,u=b.data;g/=m;f/=q;var t=Math.ceil(g/2),l=Math.ceil(f/2);a=a.width;for(var p=0;p<q;p++)for(var v=0;v<m;v++){for(var n=4*(v+(k?q-p-1:p)*m),w=0,E=0,y=0,r=0,B=0,z=0,x=(p+.5)*f,A=Math.floor(p*f);A<(p+1)*f;A++)for(var V=Math.abs(x-(A+.5))/l,Y=(v+.5)*g,V=V*V,X=Math.floor(v*g);X<(v+1)*g;X++){var R=Math.abs(Y-(X+.5))/t,R=Math.sqrt(V+R*R);if(!(1<=R)){var R=2*R*R*R-3*R*R+1,W=4*(d+X+(e+A)*a),z=z+R*h[W+3],E=E+R;!c&&255>h[W+3]&&(R=R*h[W+3]/255);y+=R*h[W];r+=R*h[W+1];B+=R*h[W+2];w+=
R}}u[n]=y/w;u[n+1]=r/w;u[n+2]=B/w;u[n+3]=z/E}return b};f.screenshotSuperSampleSettings=function(b,c,e){if(!c)return b;c=b.framebufferWidth;var g=b.framebufferHeight,f=b.pixelRatio,k=b.region;e=a(b,e);var h=e.left+e.right,m=e.top+e.bottom,q=c-h,u=g-m,t=Math.min(8,Math.min((2048-h)/q,(2048-m)/u));return 1.5>t?b:d.__assign(d.__assign({},b),{framebufferWidth:Math.round(q*t)+h,framebufferHeight:Math.round(u*t)+m,pixelRatio:f*t,resample:{region:{x:Math.round((k.x-e.left)*t)+e.left,y:Math.round((k.y-e.top)*
t)+e.top,width:Math.round(k.width*t),height:Math.round(k.height*t)},width:c,height:g}})};var g=null,k=!0,t={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},m="jpg",w={png:100,jpg:98,jpeg:98},v={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require","exports","tslib","../../core/Error","../../core/has"],function(r,f,d,n,l){Object.defineProperty(f,"__esModule",{value:!0});var c={checkMajorWebPerformanceCaveat:!0};f.check=function(e){e=d.__assign(d.__assign({},
c),e);return l("esri-webgl")?e.checkMajorWebPerformanceCaveat&&l("esri-webgl-major-performance-caveat")?new n("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):l("esri-webgl-high-precision-fragment")?l("esri-webgl-vertex-shader-samplers")?l("esri-webgl-element-index-uint")?l("esri-webgl-standard-derivatives")?l("esri-webgl-instanced-arrays")?null:new n("webgl:instanced-arrays-required",
"WebGL support for instanced rendering is required but not supported."):new n("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new n("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new n("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new n("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):
new n("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define(["require","exports","tslib","../../../core/accessorSupport/decorators","../DefaultUI"],function(r,f,d,n,l){return function(c){function e(d){d=c.call(this,d)||this;d.components=["attribution","zoom"];return d}d.__extends(e,c);d.__decorate([n.property()],e.prototype,"components",void 0);return e=d.__decorate([n.subclass("esri.views.ui.2d.DefaultUI2D")],e)}(l)})},"esri/views/ui/DefaultUI":function(){define("require exports tslib ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a){return function(e){function g(a){a=e.call(this,a)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}d.__extends(g,e);g.prototype.initialize=function(){this._handles.add([n.init(this,"components",this._componentsWatcher.bind(this)),n.init(this,"view",this._updateViewAwareWidgets.bind(this))])};g.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=
b._find(a))b.remove(a),a.destroy()})};g.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b._find(c))&&c.widget)&&void 0!==c.view&&(c.view=a)})};g.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};g.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};g.prototype._addComponents=function(a){var b=this;this.initialized&&
a.forEach(function(a){return b.add(b._createComponent(a),b._defaultPositionLookup[a])})};g.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new c({id:a,node:b})};g.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};g.prototype._createAttribution=function(){return new h({view:this.view})};
g.prototype._createCompass=function(){return new p({view:this.view})};g.prototype._createNavigationToggle=function(){return new b({view:this.view})};g.prototype._createZoom=function(){return new a({view:this.view})};d.__decorate([l.property()],g.prototype,"components",void 0);return g=d.__decorate([l.subclass("esri.views.ui.DefaultUI")],g)}(e)})},"esri/views/ui/Component":function(){define("require exports tslib ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),
function(r,f,d,n,l,c){return function(e){function f(){var c=null!==e&&e.apply(this,arguments)||this;c.widget=null;return c}d.__extends(f,e);f.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(f.prototype,"id",{get:function(){return this.get("widget.id")||this.get("node.id")},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"node",{set:function(c){var b=this._get("node");c!==b&&(c&&c.classList.add("esri-component"),b&&b.classList.remove("esri-component"),
this._set("node",c))},enumerable:!0,configurable:!0});f.prototype.castNode=function(c){if(!c)return this._set("widget",null),null;if("string"===typeof c||c&&"nodeType"in c)return this._set("widget",null),l.byId(c);c&&"function"===typeof c.render&&!c.domNode&&(c.domNode=document.createElement("div"));this._set("widget",c);return c.domNode};d.__decorate([c.property()],f.prototype,"id",null);d.__decorate([c.property()],f.prototype,"node",null);d.__decorate([c.cast("node")],f.prototype,"castNode",null);
d.__decorate([c.property({readOnly:!0})],f.prototype,"widget",void 0);return f=d.__decorate([c.subclass("esri.views.ui.Component")],f)}(n)})},"esri/views/ui/UI":function(){define("require exports tslib ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(r,f,d,n,l,c,e,h,p,b){function a(a){return"object"!==typeof a||a instanceof p||"declaredClass"in a||!("component"in
a||"index"in a||"position"in a)?null:a}function g(a,b){var c=b.bottom,d=b.left,e=b.right;a.style.top=b.top;a.style.bottom=c;a.style.left=d;a.style.right=e}var k={left:0,top:0,bottom:0,right:0},t={bottom:30,top:15,right:15,left:15};return function(f){function m(a){a=f.call(this,a)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._componentToKey=new Map;a._handles=new c;a.view=null;a._initContainers();return a}d.__extends(m,f);m.prototype.initialize=function(){this._handles.add([e.init(this,
"view.padding, container",this._applyViewPadding.bind(this)),e.init(this,"padding",this._applyUIPadding.bind(this))])};m.prototype.destroy=function(){this.container=null;for(var a=0,b=this._components;a<b.length;a++)b[a].destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};Object.defineProperty(m.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(a.classList.add("esri-ui"),this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),
g(b,{top:"",bottom:"",left:"",right:""}),n.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"padding",{get:function(){return this._get("padding")},set:function(a){a?this._override("padding",a):this._clearOverride("padding")},enumerable:!0,
configurable:!0});m.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:d.__assign(d.__assign({},t),a)};Object.defineProperty(m.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});m.prototype.add=function(b,c){var d=this,e,g;if(Array.isArray(b))b.forEach(function(a){return d.add(a,c)});else{var f=a(b);f&&(e=f.index,c=f.position,
b=f.component,g=f.key);c&&"object"===typeof c&&(e=c.index,g=c.key,c=c.position);!b||c&&!this._isValidPosition(c)||(b instanceof p||(b=new p({node:b})),this._place({component:b,position:c,index:e}),this._components.push(b),g&&this._componentToKey.set(b,g))}};m.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var d=this._find(a);if(d){var e=this._componentToKey;if(!e.has(a)||e.get(a)===b)return e=this._components.indexOf(d),d.node.parentNode&&
d.node.parentNode.removeChild(d.node),this._componentToKey.delete(a),this._components.splice(e,1)[0]}}};m.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";return"manual"===a?Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)}):this._isValidPosition(a)?Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this):null};m.prototype.move=function(b,c){var d=this;Array.isArray(b)&&b.forEach(function(a){return d.move(a,c)});if(b){var e,g=a(b)||a(c);g&&(e=g.index,c=g.position,b=g.component||b);(!c||this._isValidPosition(c))&&(b=this.remove(b))&&this.add(b,{position:c,index:e})}};m.prototype.find=function(a){return a?(a=this._findById(a))&&(a.widget||a.node):null};m.prototype._find=function(a){return a?a instanceof p?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||
a):null};m.prototype._getViewPadding=function(){return this.get("view.padding")||k};m.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};m.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var c=document.createElement("div");c.classList.add("esri-ui-inner-container");c.classList.add("esri-ui-manual-container");var e=document.createElement("div");
e.classList.add("esri-ui-top-left");e.classList.add("esri-ui-corner");a.appendChild(e);var g=document.createElement("div");g.classList.add("esri-ui-top-right");g.classList.add("esri-ui-corner");a.appendChild(g);var f=document.createElement("div");f.classList.add("esri-ui-bottom-left");f.classList.add("esri-ui-corner");a.appendChild(f);var k=document.createElement("div");k.classList.add("esri-ui-bottom-right");k.classList.add("esri-ui-corner");a.appendChild(k);this._innerContainer=a;this._manualContainer=
c;a=b.isRTL();this._cornerNameToContainerLookup={"top-left":e,"top-right":g,"bottom-left":f,"bottom-right":k,"top-leading":a?g:e,"top-trailing":a?e:g,"bottom-leading":a?k:f,"bottom-trailing":a?f:k};this._positionNameToContainerLookup=d.__assign({manual:c},this._cornerNameToContainerLookup)};m.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};m.prototype._place=function(a){var b=a.component,c=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var d=
-1<c,e=b.widget;e&&!e._started&&"function"===typeof e.postMixInProperties&&"function"===typeof e.buildRendering&&"function"===typeof e.postCreate&&"function"===typeof e.startup&&b.widget.startup();d?(d=Array.prototype.slice.call(a.children),0===c?a.firstChild?n.insertBefore(b.node,a.firstChild):a.appendChild(b.node):c>=d.length?a.appendChild(b.node):n.insertBefore(b.node,d[c])):a.appendChild(b.node)};m.prototype._applyViewPadding=function(){var a=this.container;a&&g(a,this._toPxPosition(this._getViewPadding()))};
m.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&g(a,this._toPxPosition(this.padding))};m.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};m.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};m.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(d){(c=d===a)&&(b=d);return c});return b};m.prototype._findById=function(a){var b=null,
c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};m.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};d.__decorate([h.property()],m.prototype,"container",null);d.__decorate([h.property({dependsOn:["view.height"]})],m.prototype,"height",null);d.__decorate([h.property({value:t})],m.prototype,"padding",null);d.__decorate([h.cast("padding")],m.prototype,"castPadding",null);d.__decorate([h.property()],
m.prototype,"view",void 0);d.__decorate([h.property({dependsOn:["view.width"]})],m.prototype,"width",null);return m=d.__decorate([h.subclass("esri.views.ui.UI")],m)}(l.EventedAccessor)})},"esri/widgets/Attribution":function(){define("require exports tslib ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(r,f,d,n,l,c,e,h){return function(c){function b(a,b){a=c.call(this,a,b)||this;a._isOpen=!1;a._attributionTextOverflowed=
!1;a._prevSourceNodeHeight=0;a.iconClass="esri-icon-description";a.itemDelimiter=" | ";a.label=void 0;a.messages=null;a.view=null;a.viewModel=new e;return a}d.__extends(b,c);b.prototype.initialize=function(){var a=this;this.own(n.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(b.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},
enumerable:!0,configurable:!0});b.prototype.render=function(){var a,b=(a={},a["esri-attribution--open"]=this._isOpen,a);return h.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",b),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};b.prototype.renderPoweredBy=function(){return h.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",h.tsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",
target:"_blank",rel:"noreferrer"},"Esri"))};b.prototype.renderSourcesNode=function(){var a,b=this._isOpen,c=this._isInteractive(),d=c?0:-1,e=this.attributionText,f=c?"button":void 0,b=(a={},a["esri-attribution__sources--open"]=b,a["esri-interactive"]=c,a);return h.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",b),innerHTML:e,role:f,tabIndex:d})};b.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=
a.clientWidth};b.prototype._afterSourcesNodeUpdate=function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};b.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};b.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};
d.__decorate([l.property({dependsOn:["viewModel.items.length","itemDelimiter"],readOnly:!0}),h.renderable()],b.prototype,"attributionText",null);d.__decorate([l.property()],b.prototype,"iconClass",void 0);d.__decorate([l.property(),h.renderable()],b.prototype,"itemDelimiter",void 0);d.__decorate([l.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);d.__decorate([l.property(),h.renderable(),h.messageBundle("esri/widgets/Attribution/t9n/Attribution")],b.prototype,
"messages",void 0);d.__decorate([l.aliasOf("viewModel.view")],b.prototype,"view",void 0);d.__decorate([l.property({type:e}),h.renderable(["state","view.size"])],b.prototype,"viewModel",void 0);d.__decorate([h.accessibleHandler()],b.prototype,"_toggleState",null);return b=d.__decorate([l.subclass("esri.widgets.Attribution")],b)}(c)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports tslib ../../geometry ../../core/arrayUtils ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),
function(r,f,d,n,l,c,e,h,p,b,a,g){function k(a,b){return a.length!==b.length||a.some(function(a,c){return a.text!==b[c].text})}function t(a,b,c){c&&b&&(l.find(a,function(a){return a.layerView===b&&a.text===c})||a.push({text:c,layerView:b}))}var m=[];return function(f){function h(a){var b=f.call(this,a)||this;b.clear=function(){b._fetchedAttributionData.clear();b._pendingAttributions.clear();b.handles.remove("suspension");b.notifyChange("state")};b._pendingAttributions=new Set;b._fetchedAttributionData=
new Map;b.items=new e;b.view=null;b._allLayerViewsChange=function(a){b.handles.remove("suspension");var c=b.get("view.allLayerViews");c&&b.handles.add(c.map(function(a){return a.watch(["suspended","attributionVisible"],b._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){b._pendingAttributions.delete(a);b._fetchedAttributionData.delete(a)});b._updateAttributionItems()};b._updateAttributionItems=function(){var a=b.get("view.allLayerViews");m.length=0;a?(a.forEach(function(a){if(!a.suspended&&
a.get("layer.attributionVisible")){var c=a.layer;if(c&&"copyright"in c&&"function"===typeof c.originOf&&"user"===c.originOf("copyright"))t(m,a,c.copyright);else if(c.hasAttributionData)if(b._fetchedAttributionData.has(a)){var d=b._fetchedAttributionData.get(a);d&&t(m,a,b._getDynamicAttribution(d,b.view,c))}else b._fetchAttributionData(a);else(d=c.get("portalItem.accessInformation"))?t(m,a,d):t(m,a,c.copyright)}}),k(b.items,m)&&(b.items.removeAll(),b.items.addMany(m)),b.notifyChange("state")):b.clear()};
b.handles.add([p.on(b,"view.allLayerViews","change",b._allLayerViewsChange,b._allLayerViewsChange,b.clear),p.whenTrue(b,"view.stationary",function(){return b._updateAttributionItems()})]);return b}d.__extends(h,f);h.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(h.prototype,"state",{get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"},enumerable:!0,configurable:!0});
h.prototype._fetchAttributionData=function(a){return d.__awaiter(this,void 0,void 0,function(){var b,e;return d.__generator(this,function(d){switch(d.label){case 0:if(this._pendingAttributions.has(a))return[2];this._pendingAttributions.add(a);return[4,c.result(a.layer.fetchAttributionData())];case 1:return b=d.sent(),this._pendingAttributions.has(a)&&(e=b.ok?this._createContributionIndex(b.value,"bing-maps"===a.layer.type):null,this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,
e)),this._updateAttributionItems(),[2]}})})};h.prototype._createContributionIndex=function(a,b){a=a.contributors;var c={};if(!a)return c;for(var d=0;d<a.length;d++){var e=a[d],f=e.coverageAreas;if(!f)return;for(var k=0;k<f.length;k++)for(var h=f[k],m=h.bbox,q=h.zoomMin-(b&&h.zoomMin?1:0),l=h.zoomMax-(b&&h.zoomMax?1:0),h={extent:g.geographicToWebMercator({xmin:m[1],ymin:m[0],xmax:m[3],ymax:m[2],spatialReference:n.SpatialReference.WGS84}),attribution:e.attribution||"",score:null!=h.score?h.score:100,
id:d};q<=l;q++)c[q]=c[q]||[],c[q].push(h)}c.maxKey=Math.max.apply(null,Object.keys(c));return c};h.prototype._getDynamicAttribution=function(b,c,d){var e=c.extent;d=d.tileInfo.scaleToZoom(c.scale);d=Math.min(b.maxKey,Math.round(d));if(!e||null==d||-1>=d)return"";b=b[d];var f=g.project(e.center.clone().normalize(),c.spatialReference),k={};return b?b.filter(function(b){var c=!k[b.id]&&f&&a.extentContainsPoint(b.extent,f);c&&(k[b.id]=!0);return c}).sort(function(a,b){return b.score-a.score||a.objectId-
b.objectId}).map(function(a){return a.attribution}).join(", "):""};d.__decorate([b.property({readOnly:!0,type:e})],h.prototype,"items",void 0);d.__decorate([b.property({dependsOn:["view.ready"],readOnly:!0})],h.prototype,"state",null);d.__decorate([b.property()],h.prototype,"view",void 0);return h=d.__decorate([b.subclass("esri.widgets.Attribution.AttributionViewModel")],h)}(h.HandleOwner)})},"esri/widgets/Compass":function(){define("require exports tslib ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),
function(r,f,d,n,l,c,e){return function(f){function h(b,a){b=f.call(this,b,a)||this;b.goToOverride=null;b.iconClass="esri-icon-locate-circled";b.label=void 0;b.messages=null;b.view=null;b.viewModel=new c;return b}d.__extends(h,f);h.prototype.reset=function(){};h.prototype.render=function(){var b,a,c=this.viewModel,d=c.orientation,c=c.state,f="disabled"===c,h="compass"===("rotation"===c?"rotation":"compass"),c=f?-1:0,f=(b={},b["esri-disabled"]=f,b["esri-interactive"]=!f,b);b=(a={},a["esri-icon-compass"]=
h,a["esri-icon-dial"]=!h,a);a=this.messages;return e.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",f),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":a.reset,title:a.reset},e.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",b),styles:this._toRotationTransform(d)}),e.tsx("span",{class:"esri-icon-font-fallback-text"},a.reset))};h.prototype._reset=function(){this.viewModel.reset()};h.prototype._toRotationTransform=
function(b){return{transform:"rotateZ("+b.z+"deg)"}};d.__decorate([n.aliasOf("viewModel.goToOverride")],h.prototype,"goToOverride",void 0);d.__decorate([n.property()],h.prototype,"iconClass",void 0);d.__decorate([n.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],h.prototype,"label",void 0);d.__decorate([n.property(),e.renderable(),e.messageBundle("esri/widgets/Compass/t9n/Compass")],h.prototype,"messages",void 0);d.__decorate([n.aliasOf("viewModel.view")],h.prototype,"view",void 0);
d.__decorate([n.property({type:c}),e.renderable(["viewModel.orientation","viewModel.state"])],h.prototype,"viewModel",void 0);d.__decorate([n.aliasOf("viewModel.reset")],h.prototype,"reset",null);d.__decorate([e.accessibleHandler()],h.prototype,"_reset",null);return h=d.__decorate([n.subclass("esri.widgets.Compass")],h)}(l)})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports tslib ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),
function(r,f,d,n,l,c,e,h){return function(f){function b(a){a=f.call(this,a)||this;a._handles=new l;a.orientation={x:0,y:0,z:0};a.view=null;a._updateForCamera=a._updateForCamera.bind(a);a._updateForRotation=a._updateForRotation.bind(a);a._updateRotationWatcher=a._updateRotationWatcher.bind(a);a.view;return a}d.__extends(b,f);b.prototype.initialize=function(){this._handles.add(c.init(this,"view",this._updateRotationWatcher))};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=
null};Object.defineProperty(b.prototype,"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});b.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};
b.prototype._updateForRotation=function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};b.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};b.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(c.init(this,"view.rotation",this._updateForRotation)):this._handles.add(c.init(this,"view.camera",this._updateForCamera)))};d.__decorate([e.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],
readOnly:!0})],b.prototype,"canShowNorth",null);d.__decorate([e.property()],b.prototype,"orientation",void 0);d.__decorate([e.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],b.prototype,"state",null);d.__decorate([e.property()],b.prototype,"view",void 0);d.__decorate([e.property()],b.prototype,"reset",null);return b=d.__decorate([e.subclass("esri.widgets.CompassViewModel")],b)}(h.GoToMixin(n))})},"esri/widgets/NavigationToggle":function(){define("require exports tslib ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),
function(r,f,d,n,l,c,e){return function(f){function h(b,a){b=f.call(this,b,a)||this;b.iconClass="esri-icon-pan2";b.label=void 0;b.messages=null;b.view=null;b.viewModel=new c;return b}d.__extends(h,f);Object.defineProperty(h.prototype,"layout",{set:function(b){"horizontal"!==b&&(b="vertical");this._set("layout",b)},enumerable:!0,configurable:!0});h.prototype.toggle=function(){};h.prototype.render=function(){var b,a,c,d="disabled"===this.get("viewModel.state"),f="pan"===this.get("viewModel.navigationMode"),
h=(b={},b["esri-disabled"]=d,b["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,b);b=(a={},a["esri-navigation-toggle__button--active"]=f,a);a=(c={},c["esri-navigation-toggle__button--active"]=!f,c);c=d?-1:0;d=this.messages.toggle;return e.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",h),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":d,title:d},e.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",
b)},e.tsx("span",{class:"esri-icon-pan"})),e.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--rotate",a)},e.tsx("span",{class:"esri-icon-rotate"})))};h.prototype._toggle=function(){this.toggle()};d.__decorate([n.property()],h.prototype,"iconClass",void 0);d.__decorate([n.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],h.prototype,"label",void 0);d.__decorate([n.property({value:"vertical"}),e.renderable()],h.prototype,
"layout",null);d.__decorate([n.property(),e.renderable(),e.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],h.prototype,"messages",void 0);d.__decorate([n.aliasOf("viewModel.view"),e.renderable()],h.prototype,"view",void 0);d.__decorate([n.property({type:c}),e.renderable(["viewModel.state","viewModel.navigationMode"])],h.prototype,"viewModel",void 0);d.__decorate([n.aliasOf("viewModel.toggle")],h.prototype,"toggle",null);d.__decorate([e.accessibleHandler()],h.prototype,"_toggle",
null);return h=d.__decorate([n.subclass("esri.widgets.NavigationToggle")],h)}(l)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports tslib ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(r,f,d,n,l,c,e){return function(f){function h(b){b=f.call(this,b)||this;b._handles=new l;b.navigationMode="pan";b.view=null;b.toggle=b.toggle.bind(b);return b}d.__extends(h,f);h.prototype.initialize=
function(){this._handles.add(c.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};h.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(h.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});h.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};h.prototype._setNavigationMode=
function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};d.__decorate([e.property({dependsOn:["view.ready"],readOnly:!0})],h.prototype,"state",null);d.__decorate([e.property()],h.prototype,"navigationMode",void 0);d.__decorate([e.property()],h.prototype,"view",void 0);d.__decorate([e.property()],h.prototype,"toggle",null);return h=d.__decorate([e.subclass("esri.widgets.NavigationToggleViewModel")],h)}(n)})},"esri/widgets/Zoom":function(){define("require exports tslib ../core/accessorSupport/decorators ./Widget ./support/widget ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),
function(r,f,d,n,l,c,e,h){return function(f){function b(a,b){a=f.call(this,a,b)||this;a.iconClass="esri-icon-zoom-in-magnifying-glass";a.label=void 0;a.messages=null;a.view=null;a.viewModel=new h;return a}d.__extends(b,f);b.prototype.initialize=function(){this._zoomInButton=new e({action:this.zoomIn,iconClass:"esri-icon-plus"});this._zoomOutButton=new e({action:this.zoomOut,iconClass:"esri-icon-minus"})};b.prototype.destroy=function(){this._zoomInButton.destroy();this._zoomOutButton.destroy();this._zoomOutButton=
this._zoomInButton=null};Object.defineProperty(b.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});b.prototype.render=function(){var a,b=this.viewModel,d=(a={},a["esri-zoom--horizontal"]="horizontal"===this.layout,a);this._zoomInButton.enabled="ready"===b.state&&b.canZoomIn;this._zoomOutButton.enabled="ready"===b.state&&b.canZoomOut;this._zoomInButton.title=this.messages.zoomIn;this._zoomOutButton.title=this.messages.zoomOut;
return c.tsx("div",{class:this.classes("esri-zoom esri-widget",d)},this._zoomInButton.render(),this._zoomOutButton.render())};b.prototype.zoomIn=function(){};b.prototype.zoomOut=function(){};d.__decorate([n.property()],b.prototype,"iconClass",void 0);d.__decorate([n.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);d.__decorate([n.property({value:"vertical"}),c.renderable()],b.prototype,"layout",null);d.__decorate([n.property(),c.renderable(),c.messageBundle("esri/widgets/Zoom/t9n/Zoom")],
b.prototype,"messages",void 0);d.__decorate([n.aliasOf("viewModel.view"),c.renderable()],b.prototype,"view",void 0);d.__decorate([n.property({type:h}),c.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],b.prototype,"viewModel",void 0);d.__decorate([n.aliasOf("viewModel.zoomIn")],b.prototype,"zoomIn",null);d.__decorate([n.aliasOf("viewModel.zoomOut")],b.prototype,"zoomOut",null);return b=d.__decorate([n.subclass("esri.widgets.Zoom")],b)}(l)})},"esri/widgets/Zoom/IconButton":function(){define("require exports tslib ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(r,f,d,n,l,c){return function(e){function f(){var c=null!==e&&e.apply(this,arguments)||this;c.enabled=!0;c.iconClass="";c.title="";return c}d.__extends(f,e);f.prototype.render=function(){var d,b,a=this.enabled?0:-1,e=(d={},d["esri-disabled"]=!this.enabled,d["esri-interactive"]=this.enabled,d);d=(b={},b[this.iconClass]=!!this.iconClass,b);return c.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",e),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",
tabIndex:a,title:this.title},c.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",d)}),c.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};f.prototype._triggerAction=function(){this.action.call(this)};d.__decorate([n.property()],f.prototype,"action",void 0);d.__decorate([n.property(),c.renderable()],f.prototype,"enabled",void 0);d.__decorate([n.property(),c.renderable()],f.prototype,"iconClass",void 0);d.__decorate([n.property(),c.renderable()],f.prototype,
"title",void 0);d.__decorate([c.accessibleHandler()],f.prototype,"_triggerAction",null);return f=d.__decorate([n.subclass("esri.widgets.IconButton")],f)}(l)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports tslib ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(r,f,d,n,l,c,e,h){return function(f){function b(a){a=f.call(this,a)||this;a.canZoomIn=!1;a.canZoomOut=!1;a.zoomIn=a.zoomIn.bind(a);
a.zoomOut=a.zoomOut.bind(a);return a}d.__extends(b,f);b.prototype.destroy=function(){this.view=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new e({view:a}):"3d"===a.type&&(this._zoomConditions=new h({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});b.prototype.zoomIn=
function(){if(this.canZoomIn){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():l.ignoreAbortErrors(a.goTo({zoomFactor:2}))}};b.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():l.ignoreAbortErrors(a.goTo({zoomFactor:.5}))}};d.__decorate([c.property()],b.prototype,"_zoomConditions",void 0);d.__decorate([c.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],b.prototype,"canZoomIn",void 0);d.__decorate([c.property({aliasOf:"_zoomConditions.canZoomOut",
readOnly:!0})],b.prototype,"canZoomOut",void 0);d.__decorate([c.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"state",null);d.__decorate([c.property()],b.prototype,"view",null);d.__decorate([c.property()],b.prototype,"zoomIn",null);d.__decorate([c.property()],b.prototype,"zoomOut",null);return b=d.__decorate([c.subclass("esri.widgets.Zoom.ZoomViewModel")],b)}(n)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define(["require","exports","tslib","../../core/Accessor","../../core/accessorSupport/decorators"],
function(r,f,d,n,l){return function(c){function e(){return null!==c&&c.apply(this,arguments)||this}d.__extends(e,c);Object.defineProperty(e.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),d=this.get("view.constraints.effectiveMaxScale");return 0===d||c>d},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||
this.get("view.scale"),d=this.get("view.constraints.effectiveMinScale");return 0===d||c<d},enumerable:!0,configurable:!0});d.__decorate([l.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],e.prototype,"canZoomIn",null);d.__decorate([l.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],e.prototype,"canZoomOut",null);d.__decorate([l.property()],
e.prototype,"view",void 0);return e=d.__decorate([l.subclass("esri.widgets.Zoom.ZoomConditions2D")],e)}(n)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define(["require","exports","tslib","../../core/Accessor","../../core/accessorSupport/decorators"],function(r,f,d,n,l){return function(c){function e(){return null!==c&&c.apply(this,arguments)||this}d.__extends(e,c);Object.defineProperty(e.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,
"canZoomOut",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});d.__decorate([l.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"canZoomIn",null);d.__decorate([l.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"canZoomOut",null);d.__decorate([l.property()],e.prototype,"view",void 0);return e=d.__decorate([l.subclass("esri.widgets.Zoom.ZoomConditions3D")],e)}(n)})},"esri/webmap/background/ColorBackground":function(){define("require exports tslib ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(r,f,d,n,l,c,e){return function(f){function h(a){a=f.call(this,a)||this;a.color=new n([0,0,0,1]);return a}d.__extends(h,f);b=h;h.prototype.clone=function(){return new b(c.clone({color:this.color}))};var b;d.__decorate([e.property({type:n,json:{write:!0}})],h.prototype,"color",void 0);return h=b=d.__decorate([e.subclass("esri.webmap.background.ColorBackground")],h)}(l.JSONSupport)})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require","exports","./math/mat4"],function(r,f,d){Object.defineProperty(f,
"__esModule",{value:!0});f.mat4=d})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(r,f,d,n){function l(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function c(b,a,c){var d=a[0],e=a[1],g=a[2],f=a[3],h=a[4],q=a[5],l=a[6],n=a[7],p=a[8],r=a[9],z=a[10],A=a[11],x=a[12],C=a[13],H=a[14];a=a[15];var D=c[0],F=c[1],I=c[2],G=c[3];b[0]=D*d+F*h+I*p+G*x;
b[1]=D*e+F*q+I*r+G*C;b[2]=D*g+F*l+I*z+G*H;b[3]=D*f+F*n+I*A+G*a;D=c[4];F=c[5];I=c[6];G=c[7];b[4]=D*d+F*h+I*p+G*x;b[5]=D*e+F*q+I*r+G*C;b[6]=D*g+F*l+I*z+G*H;b[7]=D*f+F*n+I*A+G*a;D=c[8];F=c[9];I=c[10];G=c[11];b[8]=D*d+F*h+I*p+G*x;b[9]=D*e+F*q+I*r+G*C;b[10]=D*g+F*l+I*z+G*H;b[11]=D*f+F*n+I*A+G*a;D=c[12];F=c[13];I=c[14];G=c[15];b[12]=D*d+F*h+I*p+G*x;b[13]=D*e+F*q+I*r+G*C;b[14]=D*g+F*l+I*z+G*H;b[15]=D*f+F*n+I*A+G*a;return b}function e(b,a,c){var d=a[0],e=a[1],g=a[2],f=a[3],h=d+d,q=e+e,l=g+g;a=d*h;var n=d*
q,d=d*l,p=e*q,e=e*l,g=g*l,h=f*h,q=f*q,f=f*l;b[0]=1-(p+g);b[1]=n+f;b[2]=d-q;b[3]=0;b[4]=n-f;b[5]=1-(a+g);b[6]=e+h;b[7]=0;b[8]=d+q;b[9]=e-h;b[10]=1-(a+p);b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];b[15]=1;return b}function h(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];b[4]=a[4]-c[4];b[5]=a[5]-c[5];b[6]=a[6]-c[6];b[7]=a[7]-c[7];b[8]=a[8]-c[8];b[9]=a[9]-c[9];b[10]=a[10]-c[10];b[11]=a[11]-c[11];b[12]=a[12]-c[12];b[13]=a[13]-c[13];b[14]=a[14]-c[14];b[15]=a[15]-c[15];return b}Object.defineProperty(f,
"__esModule",{value:!0});f.copy=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};f.set=function(b,a,c,d,e,f,h,l,q,u,n,p,r,z,A,x,C){b[0]=a;b[1]=c;b[2]=d;b[3]=e;b[4]=f;b[5]=h;b[6]=l;b[7]=q;b[8]=u;b[9]=n;b[10]=p;b[11]=r;b[12]=z;b[13]=A;b[14]=x;b[15]=C;return b};f.identity=l;f.transpose=function(b,a){if(b===a){var c=a[1],d=a[2],e=a[3],f=a[6],h=a[7],l=a[11];
b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=f;b[11]=a[14];b[12]=e;b[13]=h;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};f.invert=function(b,a){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],l=a[5],q=a[6],u=a[7],n=a[8],p=a[9],r=a[10],z=a[11],A=a[12],x=a[13],C=a[14];a=a[15];var H=c*l-d*h,D=c*q-e*h,F=c*u-f*h,I=d*q-e*l,G=d*u-f*l,O=e*u-
f*q,K=n*x-p*A,N=n*C-r*A,Q=n*a-z*A,P=p*C-r*x,J=p*a-z*x,M=r*a-z*C,L=H*M-D*J+F*P+I*Q-G*N+O*K;if(!L)return null;L=1/L;b[0]=(l*M-q*J+u*P)*L;b[1]=(e*J-d*M-f*P)*L;b[2]=(x*O-C*G+a*I)*L;b[3]=(r*G-p*O-z*I)*L;b[4]=(q*Q-h*M-u*N)*L;b[5]=(c*M-e*Q+f*N)*L;b[6]=(C*F-A*O-a*D)*L;b[7]=(n*O-r*F+z*D)*L;b[8]=(h*J-l*Q+u*K)*L;b[9]=(d*Q-c*J-f*K)*L;b[10]=(A*G-x*F+a*H)*L;b[11]=(p*F-n*G-z*H)*L;b[12]=(l*N-h*P-q*K)*L;b[13]=(c*P-d*N+e*K)*L;b[14]=(x*D-A*I-C*H)*L;b[15]=(n*I-p*D+r*H)*L;return b};f.adjoint=function(b,a){var c=a[0],
d=a[1],e=a[2],f=a[3],h=a[4],l=a[5],q=a[6],u=a[7],n=a[8],p=a[9],r=a[10],z=a[11],A=a[12],x=a[13],C=a[14];a=a[15];b[0]=l*(r*a-z*C)-p*(q*a-u*C)+x*(q*z-u*r);b[1]=-(d*(r*a-z*C)-p*(e*a-f*C)+x*(e*z-f*r));b[2]=d*(q*a-u*C)-l*(e*a-f*C)+x*(e*u-f*q);b[3]=-(d*(q*z-u*r)-l*(e*z-f*r)+p*(e*u-f*q));b[4]=-(h*(r*a-z*C)-n*(q*a-u*C)+A*(q*z-u*r));b[5]=c*(r*a-z*C)-n*(e*a-f*C)+A*(e*z-f*r);b[6]=-(c*(q*a-u*C)-h*(e*a-f*C)+A*(e*u-f*q));b[7]=c*(q*z-u*r)-h*(e*z-f*r)+n*(e*u-f*q);b[8]=h*(p*a-z*x)-n*(l*a-u*x)+A*(l*z-u*p);b[9]=-(c*
(p*a-z*x)-n*(d*a-f*x)+A*(d*z-f*p));b[10]=c*(l*a-u*x)-h*(d*a-f*x)+A*(d*u-f*l);b[11]=-(c*(l*z-u*p)-h*(d*z-f*p)+n*(d*u-f*l));b[12]=-(h*(p*C-r*x)-n*(l*C-q*x)+A*(l*r-q*p));b[13]=c*(p*C-r*x)-n*(d*C-e*x)+A*(d*r-e*p);b[14]=-(c*(l*C-q*x)-h*(d*C-e*x)+A*(d*q-e*l));b[15]=c*(l*r-q*p)-h*(d*r-e*p)+n*(d*q-e*l);return b};f.determinant=function(b){var a=b[0],c=b[1],d=b[2],e=b[3],f=b[4],h=b[5],l=b[6],q=b[7],u=b[8],n=b[9],p=b[10],r=b[11],z=b[12],A=b[13],x=b[14];b=b[15];return(a*h-c*f)*(p*b-r*x)-(a*l-d*f)*(n*b-r*A)+(a*
q-e*f)*(n*x-p*A)+(c*l-d*h)*(u*b-r*z)-(c*q-e*h)*(u*x-p*z)+(d*q-e*l)*(u*A-n*z)};f.multiply=c;f.translate=function(b,a,c){var d=c[0],e=c[1];c=c[2];var g=void 0,f=void 0,h=void 0,q=void 0,l=void 0,n=void 0,p=void 0,r=void 0,z=void 0,A=void 0,x=void 0,C=void 0;a===b?(b[12]=a[0]*d+a[4]*e+a[8]*c+a[12],b[13]=a[1]*d+a[5]*e+a[9]*c+a[13],b[14]=a[2]*d+a[6]*e+a[10]*c+a[14],b[15]=a[3]*d+a[7]*e+a[11]*c+a[15]):(g=a[0],f=a[1],h=a[2],q=a[3],l=a[4],n=a[5],p=a[6],r=a[7],z=a[8],A=a[9],x=a[10],C=a[11],b[0]=g,b[1]=f,b[2]=
h,b[3]=q,b[4]=l,b[5]=n,b[6]=p,b[7]=r,b[8]=z,b[9]=A,b[10]=x,b[11]=C,b[12]=g*d+l*e+z*c+a[12],b[13]=f*d+n*e+A*c+a[13],b[14]=h*d+p*e+x*c+a[14],b[15]=q*d+r*e+C*c+a[15]);return b};f.scale=function(b,a,c){var d=c[0],e=c[1];c=c[2];b[0]=a[0]*d;b[1]=a[1]*d;b[2]=a[2]*d;b[3]=a[3]*d;b[4]=a[4]*e;b[5]=a[5]*e;b[6]=a[6]*e;b[7]=a[7]*e;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};f.rotate=function(b,a,c,d){var e=d[0],g=d[1];d=d[2];var f=Math.sqrt(e*e+
g*g+d*d),k=void 0,h=void 0,l=void 0,p=void 0,r=void 0,B=void 0,z=void 0,A=void 0,x=void 0,C=void 0,H=void 0,D=void 0,F=void 0,I=void 0,G=void 0,O=void 0,K=void 0,N=void 0,Q=void 0,P=void 0,J=void 0,M=void 0,h=k=void 0;if(f<n.EPSILON)return null;f=1/f;e*=f;g*=f;d*=f;k=Math.sin(c);h=Math.cos(c);l=1-h;p=a[0];r=a[1];B=a[2];z=a[3];A=a[4];x=a[5];C=a[6];H=a[7];D=a[8];F=a[9];I=a[10];G=a[11];O=e*e*l+h;K=g*e*l+d*k;N=d*e*l-g*k;Q=e*g*l-d*k;P=g*g*l+h;J=d*g*l+e*k;M=e*d*l+g*k;k=g*d*l-e*k;h=d*d*l+h;b[0]=p*O+A*K+
D*N;b[1]=r*O+x*K+F*N;b[2]=B*O+C*K+I*N;b[3]=z*O+H*K+G*N;b[4]=p*Q+A*P+D*J;b[5]=r*Q+x*P+F*J;b[6]=B*Q+C*P+I*J;b[7]=z*Q+H*P+G*J;b[8]=p*M+A*k+D*h;b[9]=r*M+x*k+F*h;b[10]=B*M+C*k+I*h;b[11]=z*M+H*k+G*h;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};f.rotateX=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[4],g=a[5],f=a[6],h=a[7],l=a[8],n=a[9],p=a[10],r=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=e*c+l*d;b[5]=g*c+n*
d;b[6]=f*c+p*d;b[7]=h*c+r*d;b[8]=l*c-e*d;b[9]=n*c-g*d;b[10]=p*c-f*d;b[11]=r*c-h*d;return b};f.rotateY=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[0],g=a[1],f=a[2],h=a[3],l=a[8],n=a[9],p=a[10],r=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=e*c-l*d;b[1]=g*c-n*d;b[2]=f*c-p*d;b[3]=h*c-r*d;b[8]=e*d+l*c;b[9]=g*d+n*c;b[10]=f*d+p*c;b[11]=h*d+r*c;return b};f.rotateZ=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[0],g=a[1],
f=a[2],h=a[3],l=a[4],n=a[5],p=a[6],r=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=e*c+l*d;b[1]=g*c+n*d;b[2]=f*c+p*d;b[3]=h*c+r*d;b[4]=l*c-e*d;b[5]=n*c-g*d;b[6]=p*c-f*d;b[7]=r*c-h*d;return b};f.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};f.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];
b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.fromRotation=function(b,a,c){var d=c[0],e=c[1];c=c[2];var g=Math.sqrt(d*d+e*e+c*c),f=void 0,h=void 0,l=void 0;if(g<n.EPSILON)return null;g=1/g;d*=g;e*=g;c*=g;f=Math.sin(a);h=Math.cos(a);l=1-h;b[0]=d*d*l+h;b[1]=e*d*l+c*f;b[2]=c*d*l-e*f;b[3]=0;b[4]=d*e*l-c*f;b[5]=e*e*l+h;b[6]=c*e*l+d*f;b[7]=0;b[8]=d*c*l+e*f;b[9]=e*c*l-d*f;b[10]=c*c*l+h;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.fromXRotation=function(b,
a){var c=Math.sin(a);a=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=c;b[7]=0;b[8]=0;b[9]=-c;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.fromYRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=0;b[2]=-c;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=c;b[9]=0;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.fromZRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=c;b[2]=0;b[3]=0;b[4]=-c;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=
0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.fromRotationTranslation=e;f.fromQuat2=function(b,a){var c=p,d=-a[0],f=-a[1],h=-a[2],l=a[3],n=a[4],q=a[5],u=a[6],r=a[7],y=d*d+f*f+h*h+l*l;0<y?(c[0]=2*(n*l+r*d+q*h-u*f)/y,c[1]=2*(q*l+r*f+u*d-n*h)/y,c[2]=2*(u*l+r*h+n*f-q*d)/y):(c[0]=2*(n*l+r*d+q*h-u*f),c[1]=2*(q*l+r*f+u*d-n*h),c[2]=2*(u*l+r*h+n*f-q*d));e(b,a,c);return b};var p=d.create();f.getTranslation=function(b,a){b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};f.getScaling=function(b,a){var c=a[0],d=a[1],
e=a[2],f=a[4],h=a[5],l=a[6],q=a[8],n=a[9];a=a[10];b[0]=Math.sqrt(c*c+d*d+e*e);b[1]=Math.sqrt(f*f+h*h+l*l);b[2]=Math.sqrt(q*q+n*n+a*a);return b};f.getRotation=function(b,a){var c=a[0]+a[5]+a[10],d=0;0<c?(d=2*Math.sqrt(c+1),b[3]=.25*d,b[0]=(a[6]-a[9])/d,b[1]=(a[8]-a[2])/d,b[2]=(a[1]-a[4])/d):a[0]>a[5]&&a[0]>a[10]?(d=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/d,b[0]=.25*d,b[1]=(a[1]+a[4])/d,b[2]=(a[8]+a[2])/d):a[5]>a[10]?(d=2*Math.sqrt(1+a[5]-a[0]-a[10]),b[3]=(a[8]-a[2])/d,b[0]=(a[1]+a[4])/d,b[1]=
.25*d,b[2]=(a[6]+a[9])/d):(d=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/d,b[0]=(a[8]+a[2])/d,b[1]=(a[6]+a[9])/d,b[2]=.25*d);return b};f.fromRotationTranslationScale=function(b,a,c,d){var e=a[0],g=a[1],f=a[2],k=a[3],h=e+e,l=g+g,n=f+f;a=e*h;var p=e*l,e=e*n,r=g*l,g=g*n,f=f*n,h=k*h,l=k*l,k=k*n,n=d[0],z=d[1];d=d[2];b[0]=(1-(r+f))*n;b[1]=(p+k)*n;b[2]=(e-l)*n;b[3]=0;b[4]=(p-k)*z;b[5]=(1-(a+f))*z;b[6]=(g+h)*z;b[7]=0;b[8]=(e+l)*d;b[9]=(g-h)*d;b[10]=(1-(a+r))*d;b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];
b[15]=1;return b};f.fromRotationTranslationScaleOrigin=function(b,a,c,d,e){var g=a[0],f=a[1],k=a[2],h=a[3],l=g+g,n=f+f,p=k+k;a=g*l;var t=g*n,r=g*p,g=f*n,f=f*p,A=k*p,k=h*l,n=h*n,x=h*p,C=d[0],H=d[1],p=d[2];d=e[0];h=e[1];e=e[2];var l=(1-(g+A))*C,D=(t+x)*C,C=(r-n)*C,t=(t-x)*H,A=(1-(a+A))*H,H=(f+k)*H,r=(r+n)*p,f=(f-k)*p;a=(1-(a+g))*p;b[0]=l;b[1]=D;b[2]=C;b[3]=0;b[4]=t;b[5]=A;b[6]=H;b[7]=0;b[8]=r;b[9]=f;b[10]=a;b[11]=0;b[12]=c[0]+d-(l*d+t*h+r*e);b[13]=c[1]+h-(D*d+A*h+f*e);b[14]=c[2]+e-(C*d+H*h+a*e);b[15]=
1;return b};f.fromQuat=function(b,a){var c=a[0],d=a[1],e=a[2];a=a[3];var f=c+c,h=d+d,l=e+e,c=c*f,q=d*f,d=d*h,n=e*f,p=e*h,e=e*l,f=a*f,h=a*h;a*=l;b[0]=1-d-e;b[1]=q+a;b[2]=n-h;b[3]=0;b[4]=q-a;b[5]=1-c-e;b[6]=p+f;b[7]=0;b[8]=n+h;b[9]=p-f;b[10]=1-c-d;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.frustum=function(b,a,c,d,e,f,h){var g=1/(c-a),k=1/(e-d),l=1/(f-h);b[0]=2*f*g;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*f*k;b[6]=0;b[7]=0;b[8]=(c+a)*g;b[9]=(e+d)*k;b[10]=(h+f)*l;b[11]=-1;b[12]=0;b[13]=0;b[14]=h*
f*2*l;b[15]=0;return b};f.perspective=function(b,a,c,d,e){a=1/Math.tan(a/2);var g=void 0;b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=e&&Infinity!==e?(g=1/(d-e),b[10]=(e+d)*g,b[14]=2*e*d*g):(b[10]=-1,b[14]=-2*d);return b};f.perspectiveFromFieldOfView=function(b,a,c,d){var e=Math.tan(a.upDegrees*Math.PI/180),g=Math.tan(a.downDegrees*Math.PI/180),f=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var h=2/(f+
a),k=2/(e+g);b[0]=h;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=k;b[6]=0;b[7]=0;b[8]=-((f-a)*h*.5);b[9]=(e-g)*k*.5;b[10]=d/(c-d);b[11]=-1;b[12]=0;b[13]=0;b[14]=d*c/(c-d);b[15]=0;return b};f.ortho=function(b,a,c,d,e,f,h){var g=1/(a-c),k=1/(d-e),l=1/(f-h);b[0]=-2*g;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*k;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*l;b[11]=0;b[12]=(a+c)*g;b[13]=(e+d)*k;b[14]=(h+f)*l;b[15]=1;return b};f.lookAt=function(b,a,c,d){var e=void 0,g=void 0,f=void 0,h=void 0,k=void 0,p=void 0,r=void 0,y=void 0,B=
void 0,z=void 0,A=a[0],x=a[1];a=a[2];f=d[0];h=d[1];d=d[2];r=c[0];y=c[1];c=c[2];if(Math.abs(A-r)<n.EPSILON&&Math.abs(x-y)<n.EPSILON&&Math.abs(a-c)<n.EPSILON)return l(b);r=A-r;y=x-y;B=a-c;z=1/Math.sqrt(r*r+y*y+B*B);r*=z;y*=z;B*=z;e=h*B-d*y;g=d*r-f*B;f=f*y-h*r;(z=Math.sqrt(e*e+g*g+f*f))?(z=1/z,e*=z,g*=z,f*=z):f=g=e=0;h=y*f-B*g;k=B*e-r*f;p=r*g-y*e;(z=Math.sqrt(h*h+k*k+p*p))?(z=1/z,h*=z,k*=z,p*=z):p=k=h=0;b[0]=e;b[1]=h;b[2]=r;b[3]=0;b[4]=g;b[5]=k;b[6]=y;b[7]=0;b[8]=f;b[9]=p;b[10]=B;b[11]=0;b[12]=-(e*A+
g*x+f*a);b[13]=-(h*A+k*x+p*a);b[14]=-(r*A+y*x+B*a);b[15]=1;return b};f.targetTo=function(b,a,c,d){var e=a[0],g=a[1];a=a[2];var f=d[0],h=d[1],k=d[2];d=e-c[0];var l=g-c[1];c=a-c[2];var n=d*d+l*l+c*c;0<n&&(n=1/Math.sqrt(n),d*=n,l*=n,c*=n);var p=h*c-k*l,k=k*d-f*c,f=f*l-h*d,n=p*p+k*k+f*f;0<n&&(n=1/Math.sqrt(n),p*=n,k*=n,f*=n);b[0]=p;b[1]=k;b[2]=f;b[3]=0;b[4]=l*f-c*k;b[5]=c*p-d*f;b[6]=d*k-l*p;b[7]=0;b[8]=d;b[9]=l;b[10]=c;b[11]=0;b[12]=e;b[13]=g;b[14]=a;b[15]=1;return b};f.str=function(b){return"mat4("+
b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};f.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};f.add=function(b,a,
c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+c[5];b[6]=a[6]+c[6];b[7]=a[7]+c[7];b[8]=a[8]+c[8];b[9]=a[9]+c[9];b[10]=a[10]+c[10];b[11]=a[11]+c[11];b[12]=a[12]+c[12];b[13]=a[13]+c[13];b[14]=a[14]+c[14];b[15]=a[15]+c[15];return b};f.subtract=h;f.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;b[6]=a[6]*c;b[7]=a[7]*c;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12]*c;b[13]=a[13]*c;b[14]=a[14]*
c;b[15]=a[15]*c;return b};f.multiplyScalarAndAdd=function(b,a,c,d){b[0]=a[0]+c[0]*d;b[1]=a[1]+c[1]*d;b[2]=a[2]+c[2]*d;b[3]=a[3]+c[3]*d;b[4]=a[4]+c[4]*d;b[5]=a[5]+c[5]*d;b[6]=a[6]+c[6]*d;b[7]=a[7]+c[7]*d;b[8]=a[8]+c[8]*d;b[9]=a[9]+c[9]*d;b[10]=a[10]+c[10]*d;b[11]=a[11]+c[11]*d;b[12]=a[12]+c[12]*d;b[13]=a[13]+c[13]*d;b[14]=a[14]+c[14]*d;b[15]=a[15]+c[15]*d;return b};f.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&
b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};f.equals=function(b,a){var c=b[0],d=b[1],e=b[2],f=b[3],h=b[4],l=b[5],q=b[6],p=b[7],r=b[8],y=b[9],B=b[10],z=b[11],A=b[12],x=b[13],C=b[14];b=b[15];var H=a[0],D=a[1],F=a[2],I=a[3],G=a[4],O=a[5],K=a[6],N=a[7],Q=a[8],P=a[9],J=a[10],M=a[11],L=a[12],S=a[13],T=a[14];a=a[15];return Math.abs(c-H)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(H))&&Math.abs(d-D)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&
Math.abs(e-F)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(F))&&Math.abs(f-I)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(h-G)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(G))&&Math.abs(l-O)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(q-K)<=n.EPSILON*Math.max(1,Math.abs(q),Math.abs(K))&&Math.abs(p-N)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(r-Q)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(Q))&&Math.abs(y-P)<=n.EPSILON*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(B-
J)<=n.EPSILON*Math.max(1,Math.abs(B),Math.abs(J))&&Math.abs(z-M)<=n.EPSILON*Math.max(1,Math.abs(z),Math.abs(M))&&Math.abs(A-L)<=n.EPSILON*Math.max(1,Math.abs(A),Math.abs(L))&&Math.abs(x-S)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(S))&&Math.abs(C-T)<=n.EPSILON*Math.max(1,Math.abs(C),Math.abs(T))&&Math.abs(b-a)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};f.mul=c;f.sub=h})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(r,f,d){Object.defineProperty(f,
"__esModule",{value:!0});f.mat4f32=d})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(r,f){function d(){var d=new Float32Array(16);d[0]=1;d[5]=1;d[10]=1;d[15]=1;return d}Object.defineProperty(f,"__esModule",{value:!0});f.create=d;f.clone=function(d){var f=new Float32Array(16);f[0]=d[0];f[1]=d[1];f[2]=d[2];f[3]=d[3];f[4]=d[4];f[5]=d[5];f[6]=d[6];f[7]=d[7];f[8]=d[8];f[9]=d[9];f[10]=d[10];f[11]=d[11];f[12]=d[12];f[13]=d[13];f[14]=d[14];f[15]=d[15];return f};
f.fromValues=function(d,f,c,e,h,p,b,a,g,k,t,m,r,v,q,u){var l=new Float32Array(16);l[0]=d;l[1]=f;l[2]=c;l[3]=e;l[4]=h;l[5]=p;l[6]=b;l[7]=a;l[8]=g;l[9]=k;l[10]=t;l[11]=m;l[12]=r;l[13]=v;l[14]=q;l[15]=u;return l};f.createView=function(d,f){return new Float32Array(d,f,16)};f.IDENTITY=d()})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});f.vec3f32=d})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(r,f){function d(){return new Float32Array(3)}function n(c,b,a){var d=new Float32Array(3);d[0]=c;d[1]=b;d[2]=a;return d}function l(){return n(1,1,1)}function c(){return n(1,0,0)}function e(){return n(0,1,0)}function h(){return n(0,0,1)}Object.defineProperty(f,"__esModule",{value:!0});f.create=d;f.clone=function(c){var b=new Float32Array(3);b[0]=c[0];b[1]=c[1];b[2]=c[2];return b};f.fromValues=n;f.createView=function(c,b){return new Float32Array(c,b,3)};f.zeros=function(){return d()};
f.ones=l;f.unitX=c;f.unitY=e;f.unitZ=h;f.ZEROS=d();f.ONES=l();f.UNIT_X=c();f.UNIT_Y=e();f.UNIT_Z=h()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(r,f,d){Object.defineProperty(f,"__esModule",{value:!0});f.vec4f32=d})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(r,f){function d(){return new Float32Array(4)}function n(b,a,c,d){var e=new Float32Array(4);e[0]=b;e[1]=a;e[2]=c;e[3]=d;return e}
function l(){return n(1,1,1,1)}function c(){return n(1,0,0,0)}function e(){return n(0,1,0,0)}function h(){return n(0,0,1,0)}function p(){return n(0,0,0,1)}Object.defineProperty(f,"__esModule",{value:!0});f.create=d;f.clone=function(b){var a=new Float32Array(4);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};f.fromValues=n;f.createView=function(b,a){return new Float32Array(b,a,4)};f.zeros=function(){return d()};f.ones=l;f.unitX=c;f.unitY=e;f.unitZ=h;f.unitW=p;f.ZEROS=d();f.ONES=l();f.UNIT_X=c();
f.UNIT_Y=e();f.UNIT_Z=h();f.UNIT_W=p()})},"esri/widgets/Search/LocatorSearchSource":function(){define("require exports tslib ../../core/lang ../../core/accessorSupport/decorators ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),function(r,f,d,n,l,c,e,h){return function(e){function b(){var a=null!==e&&e.apply(this,arguments)||this;a.categories=null;a.countryCode=null;a.defaultZoomScale=null;a.locator=null;a.locationType=null;a.name="";a.placeholder="";a.searchTemplate="";a.singleLineFieldName=
null;a.suggestionsEnabled=null;a.zoomScale=null;a.getResults=function(b,c){return h.getResults(d.__assign({source:a},b),c)};a.getSuggestions=function(b,c){return h.getSuggestions(d.__assign({source:a},b),c)};return a}d.__extends(b,e);a=b;b.prototype.readLocator=function(a,b){return(a=b.url)?new c({url:a}):null};b.prototype.writeLocator=function(a,b){b.url=a?a.url:null};b.prototype.clone=function(){return new a({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,
minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?n.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?n.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,
locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};var a;d.__decorate([l.property()],b.prototype,"categories",void 0);d.__decorate([l.property()],b.prototype,"countryCode",void 0);d.__decorate([l.property({json:{write:!0}})],b.prototype,"defaultZoomScale",void 0);d.__decorate([l.property({type:c})],b.prototype,"locator",void 0);d.__decorate([l.reader("locator",["url"])],b.prototype,"readLocator",null);d.__decorate([l.writer("locator")],
b.prototype,"writeLocator",null);d.__decorate([l.property()],b.prototype,"locationType",void 0);d.__decorate([l.property({json:{write:!0}})],b.prototype,"name",void 0);d.__decorate([l.property({json:{write:!0}})],b.prototype,"placeholder",void 0);d.__decorate([l.property()],b.prototype,"searchTemplate",void 0);d.__decorate([l.property({json:{write:!0}})],b.prototype,"singleLineFieldName",void 0);d.__decorate([l.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],b.prototype,"suggestionsEnabled",
void 0);d.__decorate([l.property({json:{write:!0}})],b.prototype,"zoomScale",void 0);return b=a=d.__decorate([l.subclass("esri.widgets.Search.LocatorSearchSource")],b)}(e)})},"esri/tasks/Locator":function(){define("require exports tslib ../request ../core/accessorSupport/decorators ../geometry/SpatialReference ./Task ./support/AddressCandidate".split(" "),function(r,f,d,n,l,c,e,h){return function(e){function b(a){a=e.call(this,a)||this;a.outSpatialReference=null;a.url=null;return a}d.__extends(b,
e);b.prototype.addressToLocations=function(a,b){var c=a.address,e=a.categories,g=a.countryCode,f=a.forStorage,h=a.location,l=a.locationType,p=a.magicKey,r=a.maxLocations,y=a.outFields;a=a.searchExtent;var B=h?h.clone().normalize():null,z=a?a.shiftCentralMeridian():null,A=this.outSpatialReference,h=this.parsedUrl;a=this.requestOptions;e={f:"json",outSR:A?JSON.stringify(A.toJSON()):null,outFields:y?y.join(","):null,searchExtent:z?JSON.stringify(z.toJSON()):null,category:e?e.join(","):null,countryCode:g||
null,magicKey:p||null,location:B,locationType:l||null,maxLocations:r||null,forStorage:f||null};c={query:this._encode(d.__assign(d.__assign(d.__assign({},h.query),c),e))};b=d.__assign(d.__assign(d.__assign({},a),b),c);return n(h.path+"/findAddressCandidates",b).then(this._handleAddressToLocationsResponse)};b.prototype.suggestLocations=function(a,b){var c=this.parsedUrl,e=this.requestOptions,g=a.location,f=a.searchExtent,g=g?g.clone().normalize():null,f=f?f.shiftCentralMeridian():null;a={f:"json",text:a.text,
maxSuggestions:a.maxSuggestions,searchExtent:f?JSON.stringify(f.toJSON()):null,category:a.categories?a.categories.join(","):null,countryCode:a.countryCode||null,location:g};a={query:this._encode(d.__assign(d.__assign({},c.query),a))};b=d.__assign(d.__assign(d.__assign({},e),b),a);return n(c.path+"/suggest",b).then(this._handleSuggestLocationsResponse)};b.prototype.addressesToLocations=function(a,b){var c=this.outSpatialReference,e=this.parsedUrl,g=this.requestOptions,f=a.addresses,h=a.categories,
l=a.locationType;a=a.countryCode;var p=[];Array.isArray(f)&&f.forEach(function(a){p.push({attributes:a})});c={category:h?h.join(","):null,sourceCountry:a||null,addresses:JSON.stringify({records:p}),locationType:l||null,f:"json",outSR:c?JSON.stringify(c):null};c={query:this._encode(d.__assign(d.__assign({},e.query),c))};b=d.__assign(d.__assign(d.__assign({},g),b),c);return n(e.path+"/geocodeAddresses",b).then(this._handleAddressesToLocationsResponse)};b.prototype.locationToAddress=function(a,b){var c=
a.locationType,e=(a=a.location)?a.clone().normalize():null,g="undefined"!==typeof e,f=this.outSpatialReference;a=this.parsedUrl;var h=this.requestOptions,c={outSR:f?JSON.stringify(f.toJSON()):null,location:g?JSON.stringify(e.toJSON()):null,locationType:c||null,f:"json"},c={query:this._encode(d.__assign(d.__assign({},a.query),c))};b=d.__assign(d.__assign(d.__assign({},h),b),c);return n(a.path+"/reverseGeocode",b).then(this._handleLocationToAddressResponse)};b.prototype._handleAddressToLocationsResponse=
function(a){a=a.data;if(!a)return[];var b=a.candidates,c=a.spatialReference;return b?b.map(function(a){if(a){var b=a.extent,d=a.location,e=b?b&&"number"===typeof b.xmin&&"number"===typeof b.ymin&&"number"===typeof b.xmax&&"number"===typeof b.ymax:!0;if(d&&"number"===typeof d.x&&"number"===typeof d.y&&e)return b&&(b.spatialReference=c),d.spatialReference=c,h.fromJSON(a)}}):[]};b.prototype._handleSuggestLocationsResponse=function(a){return(a=a.data)?a.suggestions||[]:[]};b.prototype._handleAddressesToLocationsResponse=
function(a){a=a.data;if(!a)return[];var b=a.locations,c=a.spatialReference;return b?b.map(function(a){var b=a.location;b&&(b.spatialReference=c);return h.fromJSON(a)}):[]};b.prototype._handleLocationToAddressResponse=function(a){if(a=a.data){var b=a.address;return h.fromJSON({address:b&&b.Match_addr||"",attributes:b||{},location:a.location,score:100})}};d.__decorate([l.property({type:c})],b.prototype,"outSpatialReference",void 0);d.__decorate([l.property()],b.prototype,"url",void 0);return b=d.__decorate([l.subclass("esri.tasks.Locator")],
b)}(e)})},"esri/tasks/support/AddressCandidate":function(){define("require exports tslib ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/Point".split(" "),function(r,f,d,n,l,c,e){return function(f){function h(b){b=f.call(this,b)||this;b.address=null;b.attributes=null;b.extent=null;b.location=null;b.score=null;return b}d.__extends(h,f);d.__decorate([l.property({type:String,json:{write:!0}})],h.prototype,"address",void 0);d.__decorate([l.property({type:Object,
json:{write:!0}})],h.prototype,"attributes",void 0);d.__decorate([l.property({type:c,json:{write:!0}})],h.prototype,"extent",void 0);d.__decorate([l.property({type:e,json:{write:!0}})],h.prototype,"location",void 0);d.__decorate([l.property({type:Number,json:{write:!0}})],h.prototype,"score",void 0);return h=d.__decorate([l.subclass("esri.tasks.support.AddressCandidate")],h)}(n.JSONSupport)})},"esri/widgets/Search/support/locatorUtils":function(){define("require exports ../../../Graphic ../../../core/maybe ../../../core/maybe ../../../core/promiseUtils ../../../geometry/Polygon ./geometryUtils".split(" "),
function(r,f,d,n,l,c,e,h){function p(a,b){var c=a.source,d=a.spatialReference,e=a.location,g=a.sourceIndex,f=a.view;a=c.locator;var h=c.zoomScale,l=c.defaultZoomScale,m=f&&f.scale;b=b&&b.signal;d&&(a.outSpatialReference=d);return a.locationToAddress({location:e},{signal:b}).then(function(a){return k([a],{sourceIndex:g,scale:m,view:f,zoomScale:h,defaultZoomScale:l})})}function b(a,b){var c=a.filter;a=a.withinViewEnabled;var d=b&&b.extent;return(b=h.createExtentFromGeometry(c&&c.geometry,b,b&&b.scale))||
(a&&d?d:void 0)}function a(a,d){var e=a.source,g=a.suggestResult,f=a.spatialReference,h=a.view,l=a.maxResults,m=a.sourceIndex,p=e&&e.zoomScale,t=e&&e.defaultZoomScale;if(!g.text.trim())return c.resolve();a=""+(!g.key&&e.prefix?e.prefix:"")+g.text+(!g.key&&e.suffix?e.suffix:"");var r={},x=e.locator,C=h&&h.scale,H=b(e,h);d=d&&d.signal;if(!x)return c.resolve();e.categories&&(r.categories=e.categories);e.locationType&&(r.locationType=e.locationType);f&&(x.outSpatialReference=f);if(f=h&&h.get("extent.center"))r.location=
f;r.maxLocations=l;H&&(r.searchExtent=n.unwrap(H));e.countryCode&&(r.countryCode=e.countryCode);var D=g.key;D&&(r.magicKey=D);r.address={};r.address[e.singleLineFieldName||"Single Line Input"]=a;e.outFields&&(r.outFields=e.outFields);return x.addressToLocations(r,{signal:d}).then(function(a){return k(a,{key:D,scale:C,sourceIndex:m,view:h,zoomScale:p,defaultZoomScale:t})})}function g(a,b){return a.map(function(a){return{text:a.text,key:a.magicKey,sourceIndex:b}})}function k(a,b){return a.map(function(a){var c=
b.key,g=b.scale,f=b.sourceIndex,k=b.view,m=b.zoomScale,n=b.defaultZoomScale,p=a.extent,r=a.location,t=a.address;a=new d({geometry:r,attributes:a.attributes});p=p||r;g=h.createExtentFromGeometry(p,k,g);k="number"===typeof m?h.scaleExtent(g,k,m):"number"===typeof n&&"point"===p.type?h.scaleExtent(g,k,n):g;r=r?r.x+","+r.y:"";t=t||r;r=a.clone();l.isSome(k)&&(r.geometry=e.fromExtent(k));return{extent:k,feature:a,target:r,key:c,name:t,sourceIndex:f}})}Object.defineProperty(f,"__esModule",{value:!0});f.getResults=
function(b,c){return b.location?p(b,c):a(b,c)};f.getSuggestions=function(a,d){var e=a.source,f=a.spatialReference,h=a.view,k=a.suggestTerm,l=a.maxSuggestions,m=a.sourceIndex;a={};var p=e.locator,r=b(e,h);d=d&&d.signal;if(!p)return c.resolve();e.categories&&(a.categories=e.categories);p.outSpatialReference=f;if(f=h&&h.get("extent.center"))a.location=f;if(!k.trim())return c.resolve();f=e.prefix;h=e.suffix;a.text=""+(void 0===f?"":f)+k+(void 0===h?"":h);r&&(a.searchExtent=n.unwrap(r));a.maxSuggestions=
l;e.countryCode&&(a.countryCode=e.countryCode);return p.suggestLocations(a,{signal:d}).then(function(a){return g(a,m)})};f.isArcGISWorldGeocoder=function(a){return a?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(a)||/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(a):!1}})},"*noref":1}});
define("require exports tslib @dojo/framework/shim/array ../intl ../../esri/core/promiseUtils ../core/events ../core/Handles ../core/string ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widget".split(" "),function(r,f,d,n,l,c,e,h,p,b,a,g,k,t,m){var w=/<[a-z/][\s\S]*>/i;return function(g){function f(a,c){var d=g.call(this,a,c)||this;d._handles=new h;d._inputNode=null;d._sourceMenuButtonNode=null;d._sourceListNode=null;
d._suggestionListNode=null;d._searchResultRenderer=new k;d._relatedTarget=null;d._locateFailed=null;d.activeMenu="none";d.activeSource=null;d.activeSourceIndex=null;d.allPlaceholder=null;d.allSources=null;d.autoNavigate=null;d.autoSelect=null;d.defaultSources=null;d.disabled=!1;d.goToOverride=null;d.iconClass="esri-icon-search";d.includeDefaultSources=null;d.label=void 0;d.locationEnabled=null;d.maxResults=null;d.maxSuggestions=null;d.messages=null;d.messagesCommon=null;d.minSuggestCharacters=null;
d.popupEnabled=null;d.popupTemplate=null;d.portal=null;d.resultGraphic=null;d.resultGraphicEnabled=null;d.results=null;d.searchAllEnabled=null;d.searchTerm=null;d.selectedResult=null;d.sources=null;d.suggestions=null;d.suggestionsEnabled=null;d.view=null;d.viewModel=new t;d.own(b.watch(d,"searchTerm",function(a){if(a&&"warning"===d.activeMenu||!a&&!d.get("viewModel.selectedSuggestion.location"))d.activeMenu="none"}),b.on(d,"viewModel.allSources","change",function(){return d._watchSourceChanges()}),
b.init(d,"viewModel.defaultPopupTemplate",function(a){a&&(a.content=d._renderSearchResultsContent.bind(d))}));return d}d.__extends(f,g);f.prototype.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};Object.defineProperty(f.prototype,"displayedSearchTerm",{get:function(){return(""+this.viewModel.searchTerm).trim()},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"suggestionsMenuId",{get:function(){return this.id+"-suggest-menu"},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"sourceMenuId",{get:function(){return this.id+"-source-menu"},enumerable:!0,configurable:!0});f.prototype.clear=function(){};f.prototype.focus=function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))};f.prototype.blur=function(a){this._inputNode&&(this._inputNode.blur(),
this._inputBlur(a),this.emit("search-blur"))};f.prototype.search=function(a){var b=this;this.activeMenu="none";this._cancelSuggest();this._cancelSearch();var d=c.createAbortController(),e=d.signal;this._searchController=d;return this.viewModel.search(a,{signal:e}).catch(function(a){if(b._searchController===d)return b.activeMenu="none",b._searchController=null,a}).then(function(a){if(b._searchController===d)return b.activeMenu=a.numResults?"none":"warning",b._searchController=null,a})};f.prototype.suggest=
function(a){var b=this;this._cancelSuggest();var d=c.createAbortController(),e=d.signal;this._suggestController=d;return this.viewModel.suggest(a,null,{signal:e}).then(function(a){if(b._suggestController===d)return b._suggestController=null,a.numResults&&(b.activeMenu="suggestion"),b._scrollToTopSuggestion(),a}).catch(function(){if(b._suggestController===d)return b._suggestController=null})};f.prototype.render=function(){var a,b=this.viewModel.state,c=(a={},a["esri-disabled"]="disabled"===b,a["esri-widget--disabled"]=
this.disabled,a);return m.tsx("div",{class:this.classes("esri-search esri-widget",c)},"loading"===b?this.renderLoader():this.renderContainer())};f.prototype.renderSubmitButton=function(){var a=this.messages;return m.tsx("div",{key:"esri-search__submit-button",bind:this,role:"button",title:a.searchButtonTitle,class:this.classes("esri-search__submit-button","esri-widget--button"),tabindex:"0",onclick:this._handleSearchButtonClick,onkeydown:this._handleSearchButtonClick},m.tsx("span",{"aria-hidden":"true",
role:"presentation",class:"esri-icon-search"}),m.tsx("span",{class:"esri-icon-font-fallback-text"},a.searchButtonTitle))};f.prototype.renderWarningMenu=function(){return m.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},m.tsx("div",{class:"esri-search__warning-body"},this.renderWarning()))};f.prototype.renderSourceMenuButton=function(){var a=this.messages,b=this.activeMenu,c=this.sourceMenuId,d=this.viewModel,e=d.activeSourceIndex;return 1<d.allSources.length?
m.tsx("div",{key:"esri-search__source-menu-button",bind:this,role:"button",title:a.searchIn,"aria-haspopup":"true","aria-expanded":"source"===b,"aria-controls":c,class:this.classes("esri-search__sources-button","esri-widget--button"),tabindex:"0",onkeydown:this._handleSourceMenuButtonKeydown,onclick:this._handleSourcesMenuToggleClick,onkeyup:this._handleSourceMenuButtonKeyup,onblur:this._sourcesButtonBlur,afterCreate:m.storeNode,"data-node-ref":"_sourceMenuButtonNode"},m.tsx("span",{"aria-hidden":"true",
role:"presentation",class:"esri-icon-down-arrow esri-search__sources-button--down"}),m.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-up-arrow esri-search__sources-button--up"}),m.tsx("span",{class:"esri-search__source-name"},this._getSourceName(e))):null};f.prototype.renderSourcesList=function(){var a=this,b=this.viewModel,c=b.allSources,b=b.searchAllEnabled;return 1<c.length?m.tsx("ul",{id:this.sourceMenuId,role:"menu",bind:this,afterCreate:m.storeNode,"data-node-ref":"_sourceListNode",
class:"esri-menu__list"},b?this.renderSource(t.ALL_INDEX):null,c.map(function(b,c){return a.renderSource(c)}).toArray()):null};f.prototype.renderSourcesMenu=function(){return 1<this.viewModel.allSources.length?m.tsx("div",{tabIndex:0,key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu")},this.renderSourcesList()):null};f.prototype.renderLoader=function(){var a=this.messages,b=this.messagesCommon;return m.tsx("div",{role:"presentation",class:"esri-widget__loader",
key:"base-loader"},m.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-widget__loader-animation"}),m.tsx("span",{class:"esri-icon-font-fallback-text"},a.searchButtonTitle),m.tsx("span",{class:"esri-widget__loader-text"},b.loading))};f.prototype.renderContainer=function(){var a,b=this.viewModel,c=b.allSources,b=b.state,d=this.activeMenu,c=(a={},a["esri-search--multiple-sources"]=1<c.length,a["esri-search--loading"]="loading"===b,a["esri-search--searching"]="searching"===b,a["esri-search--warning"]=
"warning"===d,a["esri-search--sources"]="source"===d,a["esri-search--show-suggestions"]="suggestion"===d,a);return m.tsx("div",{role:"presentation",class:this.classes(c,"esri-search__container"),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())};f.prototype.renderClearButton=function(){return this.searchTerm?m.tsx("div",{key:"esri-search__clear-button",bind:this,role:"button",class:this.classes("esri-search__clear-button",
"esri-widget--button"),tabindex:"0",title:this.messages.clearButtonTitle,onfocus:this._clearButtonFocus,onclick:this._handleClearButtonClick,onkeydown:this._handleClearButtonClick},m.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null};f.prototype.renderLocationGroup=function(){var a=this.messages,b=this.displayedSearchTerm;return this.locationEnabled&&!b?m.tsx("ul",{role:"presentation",key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list","esri-search__suggestions-list",
"esri-search__suggestions-list--current-location")},m.tsx("li",{bind:this,onclick:this._handleUseCurrentLocationClick,onkeydown:this._handleUseCurrentLocationClick,onkeyup:this._handleSuggestionKeyup,role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},m.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-locate-circled"})," ",a.useCurrentLocation)):null};f.prototype.renderInput=function(){var a=this.displayedSearchTerm,b=this.suggestionsMenuId,c=this.viewModel,d=c.placeholder,
e=c.searchTerm,f=c.suggestionCount,a=this.locationEnabled&&!a||f;return m.tsx("input",{bind:this,placeholder:d,"aria-label":this.messages.searchButtonTitle,maxlength:c.maxInputLength,autocomplete:"off",type:"text",tabindex:"0",class:this.classes("esri-input","esri-search__input"),"aria-autocomplete":"list",value:e,"aria-haspopup":"true","aria-owns":a?b:null,role:"textbox",onkeydown:this._handleInputKeydown,onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,
onpaste:this._handleInputPaste,afterCreate:m.storeNode,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:e?"":d})};f.prototype.renderForm=function(){return m.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this.renderInput())};f.prototype.renderSuggestList=function(a){var b=this,c=a.sourceIndex,d=a.results;return a.results.length?m.tsx("ul",{role:"presentation",key:"esri-search__suggestion-list-"+
c,class:this.classes("esri-menu__list","esri-search__suggestions-list")},d.map(function(a,c){return b.renderSuggestion(a,c)})):null};f.prototype.renderSuggestionsGroup=function(){var a=this,b=this.viewModel.suggestions;return b?b.map(function(b){return[a.renderSuggestionHeader(b),a.renderSuggestList(b)]}):null};f.prototype.renderSuggestionsMenu=function(){var a=this.activeMenu,b=this.displayedSearchTerm,c=this.suggestionsMenuId,d=this.viewModel.suggestionCount;return this.locationEnabled&&!b||d?m.tsx("div",
{id:c,"aria-expanded":"suggestion"===a,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"menu",bind:this,afterCreate:m.storeNode,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null};f.prototype.renderInputContainer=function(){return m.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())};f.prototype.renderSuggestionHeader=
function(a){var b=this.viewModel,c=b.activeSourceIndex,d=a.sourceIndex,b=1<b.allSources.length&&c===t.ALL_INDEX;return a.results.length&&b?m.tsx("div",{key:"esri-search__suggestion-header-"+d,class:"esri-menu__header"},this._getSourceName(d)):null};f.prototype.renderSuggestion=function(a,b){var c=this.messages,d=this.viewModel.searchTerm;if(d){var c=a.text||c.untitledResult,e=[];if(w.test(c))e.push(m.tsx("div",{innerHTML:c}));else{var c=this._splitResult(c,d),f=d.toLowerCase();c.forEach(function(a,
b){a&&a.length&&(a.toLowerCase()===f?e.push(m.tsx("strong",{key:b},a)):e.push(a))})}return m.tsx("li",{bind:this,onclick:this._handleSuggestionClick,onkeydown:this._handleSuggestionClick,onkeyup:this._handleSuggestionKeyup,key:"esri-search__suggestion$-{sourceIndex}_"+b,"data-suggestion":a,role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},e)}};f.prototype.renderSource=function(a){var b,c=this.viewModel.activeSourceIndex,c=(b={},b["esri-menu__list-item--active"]=a===c,b);return m.tsx("li",
{bind:this,key:"esri-search__source-"+a,onclick:this._handleSourceClick,onkeydown:this._handleSourceClick,onkeyup:this._handleSourceKeyup,"data-source-index":a,role:"menuitem",class:this.classes("esri-search__source","esri-menu__list-item",c),tabindex:"-1"},this._getSourceName(a))};f.prototype.renderNoResultsWarning=function(a){var b=this.messages;a=a?l.substitute(b.noResultsFoundForValue,{value:'"'+a+'"'}):b.noResultsFound;return m.tsx("div",{key:"esri-search__no_results"},m.tsx("div",{class:"esri-search__warning-header"},
b.noResults),m.tsx("div",{class:"esri-search__warning-text"},a))};f.prototype.renderEmptySearchWarning=function(){var a=this.messages;return m.tsx("div",{key:"esri-search__empty-search"},m.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),m.tsx("span",{class:"esri-search__no-value-text"},a.emptyValue))};f.prototype.renderLocateWarning=function(){var a=this.messages;return m.tsx("div",{key:"esri-search__locate-error"},m.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),
m.tsx("span",{class:"esri-search__no-value-text"},a.locateError))};f.prototype.renderWarning=function(){var a,b=this.displayedSearchTerm,c=this.viewModel;return this._locateFailed?this.renderLocateWarning():(null===(a=c.selectedSuggestion)||void 0===a?0:a.location)||b?this.renderNoResultsWarning(b):this.renderEmptySearchWarning()};f.prototype._watchSourceChanges=function(){var a=this,c=this._handles,d=this.viewModel.allSources;c.remove("sources");d.forEach(function(d){return c.add(b.watch(d,"name",
function(){return a.scheduleRender()}),"sources")})};f.prototype._handleSourceMenuButtonKeydown=function(a){var b=e.eventKey(a);"ArrowUp"===b||"ArrowDown"===b||"End"===b||"Home"===b?(a.preventDefault(),a.stopPropagation(),this.activeMenu="source"):this._handleSourcesMenuToggleClick(a)};f.prototype._handleSourcesMenuToggleClick=function(a){var b="source"===this.activeMenu;this.activeMenu=b?"none":"source";this.renderNow();b?this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus():(b=this._sourceListNode?
this._sourceListNode.getElementsByTagName("li"):null)&&(a="End"===e.eventKey(a)?b[b.length-1]:b[0])&&a.focus()};f.prototype._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};f.prototype._handleSearchButtonClick=function(){this.search()};f.prototype._handleSuggestionClick=function(a){if(a=a.currentTarget["data-suggestion"])this._focus(),this.search(a)};f.prototype._handleUseCurrentLocationClick=function(){var a=this;this._focus("none");this._cancelSuggest();this._cancelSearch();
var b=c.createAbortController(),d=b.signal;this._searchController=b;this.viewModel.searchNearby({signal:d}).catch(function(){a._locateFailed=!0;a.activeMenu="warning"}).then(function(){a._searchController=null})};f.prototype._handleSourceClick=function(a){this.viewModel.activeSourceIndex=a.currentTarget["data-source-index"];this._focus("none")};f.prototype._sourcesButtonBlur=function(a){this._removeActiveMenu(a&&a.relatedTarget,this._sourceListNode)};f.prototype._inputBlur=function(a){a=a&&a.relatedTarget;
this._removeActiveMenu(a?a:this._relatedTarget,this._suggestionListNode)};f.prototype._storeRelatedTarget=function(a){this._relatedTarget=a.relatedTarget};f.prototype._clearButtonFocus=function(){this.activeMenu="none"};f.prototype._removeActiveMenu=function(a,b){!a||a&&b&&b.contains(a)||(this.activeMenu="none")};f.prototype._cancelSuggest=function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)};f.prototype._cancelSearch=function(){this._searchController&&
(this._searchController.abort(),this._searchController=null);this._locateFailed=!1};f.prototype._handleInputKeydown=function(a){var b=e.eventKey(a);("Tab"===b||"Escape"===b||a.shiftKey&&"Tab"===b)&&this._cancelSuggest()};f.prototype._handleInputKeyup=function(a){var b=e.eventKey(a),c=a.ctrlKey||a.metaKey||"Copy"===b||"ArrowLeft"===b||"ArrowRight"===b||"Enter"===b||"Shift"===b,d=this._suggestionListNode?this._suggestionListNode.getElementsByTagName("li"):null;c||("Tab"===b||"Escape"===b||a.shiftKey&&
"Tab"===b?(this._cancelSuggest(),"Escape"===b&&(this.activeMenu="none")):"ArrowUp"!==b&&"ArrowDown"!==b||!d?this.viewModel.searchTerm&&this.suggest():(this.activeMenu="suggestion",a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),(a=d["ArrowUp"===b?d.length-1:0])&&a.focus()))};f.prototype._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};f.prototype._handleInputClick=function(){this.activeMenu="suggestion"};f.prototype._handleInputPaste=
function(a){a=a.target;this.viewModel.searchTerm!==a.value&&(this.viewModel.searchTerm=a.value);this.viewModel.searchTerm&&this.suggest()};f.prototype._handleSourceMenuButtonKeyup=function(a){var b=e.eventKey(a);if("ArrowUp"===b||"ArrowDown"===b||"Home"===b||"End"===b)a.stopPropagation(),a.preventDefault(),(a=this._sourceListNode?this._sourceListNode.getElementsByTagName("li"):null)&&(b=a["ArrowUp"===b||"End"===b?a.length-1:0])&&b.focus()};f.prototype._handleSourceKeyup=function(a){var b=a.target,
c=this._sourceListNode?n.from(this._sourceListNode.getElementsByTagName("li")):null,d=e.eventKey(a);if("Escape"===d)this._focus("none"),this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus();else if(c){b=c.indexOf(b);if("Home"===d||"End"===d||"ArrowUp"===d||"ArrowDown"===d)a.stopPropagation(),a.preventDefault();"Home"===d?(c=c[0])&&c.focus():"End"===d?(c=c[c.length-1])&&c.focus():"ArrowUp"===d?(a=b-1,(c=0>a?this._sourceMenuButtonNode:c[a])&&c.focus()):"ArrowDown"===d&&(a=b+1,(c=a>=c.length?
this._sourceMenuButtonNode:c[a])&&c.focus())}};f.prototype._handleSuggestionKeyup=function(a){var b=a.target,c=this._suggestionListNode?n.from(this._suggestionListNode.getElementsByTagName("li")):null,b=c.indexOf(b),d=e.eventKey(a);this._cancelSuggest();if("Backspace"===d||"Delete"===d)this._focus();else if("Escape"===d)this._focus("none");else if(c){if("Home"===d||"End"===d||"ArrowUp"===d||"ArrowDown"===d)a.stopPropagation(),a.preventDefault();"Home"===d&&(a=c[0])&&a.focus();"End"===d&&(a=c[c.length-
1])&&a.focus();"ArrowUp"===d?(--b,(c=0>b?c[c.length-1]:c[b])&&c.focus()):"ArrowDown"===d&&(b+=1,(c=b>=c.length?c[0]:c[b])&&c.focus())}};f.prototype._focus=function(a){this.focus();a&&(this.activeMenu=a)};f.prototype._formSubmit=function(a){a.preventDefault();this.search()};f.prototype._getSourceName=function(a){var b=this.messages,c=this.viewModel.allSources.getItemAt(a);return a===t.ALL_INDEX?b.all:c?c.name||b.untitledSource:b.untitledSource};f.prototype._splitResult=function(a,b){b=p.escapeRegExpString(b);
return a.replace(new RegExp("(^|)("+b+")(|$)","ig"),"$1|$2|$3").split("|")};f.prototype._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};d.__decorate([a.property({dependsOn:["viewModel.searchTerm"]}),m.renderable()],f.prototype,"displayedSearchTerm",null);d.__decorate([a.property({readOnly:!0,dependsOn:["id"]}),m.renderable()],f.prototype,"suggestionsMenuId",null);d.__decorate([a.property({readOnly:!0,
dependsOn:["id"]}),m.renderable()],f.prototype,"sourceMenuId",null);d.__decorate([a.property(),m.renderable()],f.prototype,"activeMenu",void 0);d.__decorate([a.aliasOf("viewModel.activeSource"),m.renderable()],f.prototype,"activeSource",void 0);d.__decorate([a.aliasOf("viewModel.activeSourceIndex"),m.renderable()],f.prototype,"activeSourceIndex",void 0);d.__decorate([a.aliasOf("viewModel.allPlaceholder"),m.renderable()],f.prototype,"allPlaceholder",void 0);d.__decorate([a.aliasOf("viewModel.allSources")],
f.prototype,"allSources",void 0);d.__decorate([a.aliasOf("viewModel.autoNavigate")],f.prototype,"autoNavigate",void 0);d.__decorate([a.aliasOf("viewModel.autoSelect")],f.prototype,"autoSelect",void 0);d.__decorate([a.aliasOf("viewModel.defaultSources")],f.prototype,"defaultSources",void 0);d.__decorate([m.renderable(),a.property()],f.prototype,"disabled",void 0);d.__decorate([a.aliasOf("viewModel.goToOverride")],f.prototype,"goToOverride",void 0);d.__decorate([a.property()],f.prototype,"iconClass",
void 0);d.__decorate([a.aliasOf("viewModel.includeDefaultSources")],f.prototype,"includeDefaultSources",void 0);d.__decorate([a.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],f.prototype,"label",void 0);d.__decorate([m.renderable(),a.aliasOf("viewModel.locationEnabled")],f.prototype,"locationEnabled",void 0);d.__decorate([a.aliasOf("viewModel.maxResults")],f.prototype,"maxResults",void 0);d.__decorate([a.aliasOf("viewModel.maxSuggestions")],f.prototype,"maxSuggestions",void 0);
d.__decorate([a.property(),m.renderable(),m.messageBundle("esri/widgets/Search/t9n/Search")],f.prototype,"messages",void 0);d.__decorate([a.property(),m.renderable(),m.messageBundle("esri/t9n/common")],f.prototype,"messagesCommon",void 0);d.__decorate([a.aliasOf("viewModel.minSuggestCharacters")],f.prototype,"minSuggestCharacters",void 0);d.__decorate([a.aliasOf("viewModel.popupEnabled")],f.prototype,"popupEnabled",void 0);d.__decorate([a.aliasOf("viewModel.popupTemplate")],f.prototype,"popupTemplate",
void 0);d.__decorate([a.aliasOf("viewModel.portal")],f.prototype,"portal",void 0);d.__decorate([a.aliasOf("viewModel.resultGraphic")],f.prototype,"resultGraphic",void 0);d.__decorate([a.aliasOf("viewModel.resultGraphicEnabled")],f.prototype,"resultGraphicEnabled",void 0);d.__decorate([a.aliasOf("viewModel.results"),m.renderable()],f.prototype,"results",void 0);d.__decorate([a.aliasOf("viewModel.searchAllEnabled"),m.renderable()],f.prototype,"searchAllEnabled",void 0);d.__decorate([a.aliasOf("viewModel.searchTerm"),
m.renderable()],f.prototype,"searchTerm",void 0);d.__decorate([a.aliasOf("viewModel.selectedResult")],f.prototype,"selectedResult",void 0);d.__decorate([a.aliasOf("viewModel.sources")],f.prototype,"sources",void 0);d.__decorate([a.aliasOf("viewModel.suggestions"),m.renderable()],f.prototype,"suggestions",void 0);d.__decorate([a.aliasOf("viewModel.suggestionsEnabled")],f.prototype,"suggestionsEnabled",void 0);d.__decorate([a.aliasOf("viewModel.view"),m.renderable()],f.prototype,"view",void 0);d.__decorate([m.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),
a.property({type:t}),m.renderable(["viewModel.allSources","viewModel.activeSource.placeholder","viewModel.activeSource.name","viewModel.state"])],f.prototype,"viewModel",void 0);d.__decorate([a.aliasOf("viewModel.clear")],f.prototype,"clear",null);d.__decorate([m.accessibleHandler()],f.prototype,"_handleSourcesMenuToggleClick",null);d.__decorate([m.accessibleHandler()],f.prototype,"_handleClearButtonClick",null);d.__decorate([m.accessibleHandler()],f.prototype,"_handleSearchButtonClick",null);d.__decorate([m.accessibleHandler()],
f.prototype,"_handleSuggestionClick",null);d.__decorate([m.accessibleHandler()],f.prototype,"_handleUseCurrentLocationClick",null);d.__decorate([m.accessibleHandler()],f.prototype,"_handleSourceClick",null);return f=d.__decorate([a.subclass("esri.widgets.Search")],f)}(g)});