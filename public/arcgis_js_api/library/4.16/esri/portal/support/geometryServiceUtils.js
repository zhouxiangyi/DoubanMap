// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports tslib ../../config ../../core/Error ../Portal ../../tasks/GeometryService ../../tasks/support/ProjectParameters @dojo/framework/shim/Promise".split(" "),function(q,d,b,e,k,n,l,p){function m(c,d){void 0===c&&(c=null);return b.__awaiter(this,void 0,void 0,function(){var a;return b.__generator(this,function(f){switch(f.label){case 0:if(e.geometryServiceUrl)return[2,new l({url:e.geometryServiceUrl})];if(!c)throw new k("internal:geometry-service-url-not-configured");a="portal"in
c?c.portal||n.getDefault():c;return[4,a.load({signal:d})];case 1:f.sent();if(a.helperServices&&a.helperServices.geometry&&a.helperServices.geometry.url)return[2,new l({url:a.helperServices.geometry.url})];throw new k("internal:geometry-service-url-not-configured");}})})}Object.defineProperty(d,"__esModule",{value:!0});d.create=m;d.projectGeometry=function(c,d,a,f){void 0===a&&(a=null);return b.__awaiter(this,void 0,void 0,function(){var e,g,h;return b.__generator(this,function(b){switch(b.label){case 0:return[4,
m(a,f)];case 1:return e=b.sent(),g=new p,g.geometries=[c],g.outSpatialReference=d,[4,e.project(g,{signal:f})];case 2:if((h=b.sent())&&Array.isArray(h)&&1===h.length)return[2,h[0]];throw new k("internal:geometry-service-projection-failed");}})})}});