// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","tslib","../CIMCursor","../CurveHelper"],function(l,m,p,f,q){Object.defineProperty(m,"__esModule",{value:!0});l=function(){function b(){}b.local=function(){null===b.instance&&(b.instance=new b);return b.instance};b.prototype.execute=function(b,a,c){return new r(b,a,c)};b.instance=null;return b}();m.PlacementAtExtremities=l;var r=function(b){function d(a,c,n){a=b.call(this,a,!1,!0)||this;a._curveHelper=new q.CurveHelper;a._angleToLine=void 0!==c.angleToLine?c.angleToLine:
!0;a._offset=void 0!==c.offset?c.offset*n:0;a._type=c.extremityPlacement;a._position=void 0!==c.offsetAlongLine?c.offsetAlongLine*n:0;a._beginProcessed=!1;return a}p.__extends(d,b);d.prototype.processPath=function(a){var c;switch(this._type){default:this._beginProcessed?(f.reversePath(a),c=this._atExtremities(a,this._position),f.reversePath(a),this.iteratePath=this._beginProcessed=!1):(c=this._atExtremities(a,this._position),this.iteratePath=this._beginProcessed=!0);break;case "JustBegin":c=this._atExtremities(a,
this._position);break;case "JustEnd":f.reversePath(a),c=this._atExtremities(a,this._position),f.reversePath(a);case "None":}return c};d.prototype._atExtremities=function(a,c){for(var b=a.length,d=0,e,g=a[0],h=1;h<b;++h){e=g;var g=a[h],k=this._curveHelper.calculateLength(e,g);if(d+k>c)return c=(c-d)/k,b=this._curveHelper.getAngleCS(e,g,c),a=b[0],b=b[1],e=f.getCoord2D(e,g,c),this.internalPlacement.setTranslate(e[0]-this._offset*b,e[1]+this._offset*a),this._angleToLine&&this.internalPlacement.setRotateCS(-a,
-b),this.internalPlacement;d+=k}return null};return d}(f.PathTransformationCursor)});